var vg=function(e,t){return vg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])},vg(e,t)};export function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");vg(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}export var __assign=function(){return __assign=Object.assign||function(t){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},__assign.apply(this,arguments)};export function __rest(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i}export function __decorate(e,t,i,r){var n=arguments.length,s=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(n<3?o(s):n>3?o(t,i,s):o(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s}export function __param(e,t){return function(i,r){t(i,r,e)}}export function __esDecorate(e,t,i,r,n,s){function o(I){if(I!==void 0&&typeof I!="function")throw new TypeError("Function expected");return I}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),h,f=!1,g=i.length-1;g>=0;g--){var m={};for(var b in r)m[b]=b==="access"?{}:r[b];for(var b in r.access)m.access[b]=r.access[b];m.addInitializer=function(I){if(f)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(I||null))};var k=(0,i[g])(a==="accessor"?{get:u.get,set:u.set}:u[c],m);if(a==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(h=o(k.get))&&(u.get=h),(h=o(k.set))&&(u.set=h),(h=o(k.init))&&n.unshift(h)}else(h=o(k))&&(a==="field"?n.unshift(h):u[c]=h)}l&&Object.defineProperty(l,r.name,u),f=!0}export function __runInitializers(e,t,i){for(var r=arguments.length>2,n=0;n<t.length;n++)i=r?t[n].call(e,i):t[n].call(e);return r?i:void 0}export function __propKey(e){return typeof e=="symbol"?e:"".concat(e)}export function __setFunctionName(e,t,i){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",t):t})}export function __metadata(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}export function __awaiter(e,t,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):n(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}export function __generator(e,t){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,n&&(s=l[0]&2?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){i.label=l[1];break}if(l[0]===6&&i.label<s[1]){i.label=s[1],s=l;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(l);break}s[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(u){l=[6,u],n=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}export var __createBinding=Object.create?function(e,t,i,r){r===void 0&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){r===void 0&&(r=i),e[r]=t[i]};export function __exportStar(e,t){for(var i in e)i!=="default"&&!Object.prototype.hasOwnProperty.call(t,i)&&__createBinding(t,e,i)}export function __values(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}export function __read(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],o;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s}export function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}export function __spreadArrays(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var r=Array(e),n=0,t=0;t<i;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,n++)r[n]=s[o];return r}export function __spreadArray(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}export function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}export function __asyncGenerator(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(e,t||[]),n,s=[];return n={},a("next"),a("throw"),a("return",o),n[Symbol.asyncIterator]=function(){return this},n;function o(g){return function(m){return Promise.resolve(m).then(g,h)}}function a(g,m){r[g]&&(n[g]=function(b){return new Promise(function(k,I){s.push([g,b,k,I])>1||c(g,b)})},m&&(n[g]=m(n[g])))}function c(g,m){try{l(r[g](m))}catch(b){f(s[0][3],b)}}function l(g){g.value instanceof __await?Promise.resolve(g.value.v).then(u,h):f(s[0][2],g)}function u(g){c("next",g)}function h(g){c("throw",g)}function f(g,m){g(m),s.shift(),s.length&&c(s[0][0],s[0][1])}}export function __asyncDelegator(e){var t,i;return t={},r("next"),r("throw",function(n){throw n}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(n,s){t[n]=e[n]?function(o){return(i=!i)?{value:__await(e[n](o)),done:!1}:s?s(o):o}:s}}export function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(s){i[s]=e[s]&&function(o){return new Promise(function(a,c){o=e[s](o),n(a,c,o.done,o.value)})}}function n(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}export function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var bS=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};export function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return bS(t,e),t}export function __importDefault(e){return e&&e.__esModule?e:{default:e}}export function __classPrivateFieldGet(e,t,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(e):r?r.value:t.get(e)}export function __classPrivateFieldSet(e,t,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(e,i):n?n.value=i:t.set(e,i),i}export function __classPrivateFieldIn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}export function __addDisposableResource(e,t,i){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,n;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],i&&(n=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:i})}else i&&e.stack.push({async:!0});return t}var yS=typeof SuppressedError=="function"?SuppressedError:function(e,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};export function __disposeResources(e){function t(r){e.error=e.hasError?new yS(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}function i(){for(;e.stack.length;){var r=e.stack.pop();try{var n=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(n).then(i,function(s){return t(s),i()})}catch(s){t(s)}}if(e.hasError)throw e.error}return i()}export default{__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};var ub=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,i)=>(typeof require<"u"?require:t)[i]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),nr=class{constructor(e){this.d=e,this.a=!1}get hasValue(){return this.a}get value(){if(!this.a)try{this.b=this.d()}catch(e){this.c=e}finally{this.a=!0}if(this.c)throw this.c;return this.b}get rawValue(){return this.b}},ES=class{constructor(){this.b=[],this.a=function(e){setTimeout(()=>{throw e.stack?uo.isErrorNoTelemetry(e)?new uo(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.b.push(e),()=>{this.d(e)}}c(e){this.b.forEach(t=>{t(e)})}d(e){this.b.splice(this.b.indexOf(e),1)}setUnexpectedErrorHandler(e){this.a=e}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(e){this.a(e),this.c(e)}onUnexpectedExternalError(e){this.a(e)}},wg=new ES;function bg(e){wg.setUnexpectedErrorHandler(e)}function mr(e){co(e)||wg.onUnexpectedError(e)}function yg(e){co(e)||wg.onUnexpectedExternalError(e)}function Bc(e){if(e instanceof Error){const{name:t,message:i}=e,r=e.stacktrace||e.stack;return{$isError:!0,name:t,message:i,stack:r,noTelemetry:uo.isErrorNoTelemetry(e)}}return e}function SS(e){let t;return e.noTelemetry?t=new uo:(t=new Error,t.name=e.name),t.message=e.message,t.stack=e.stack,t}var dh="Canceled";function co(e){return e instanceof Cn?!0:e instanceof Error&&e.name===dh&&e.message===dh}var Cn=class extends Error{constructor(){super(dh),this.name=this.message}};function hb(){const e=new Error(dh);return e.name=e.message,e}function je(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function Eg(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}var lo=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}},xS=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},Sg=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},uo=class zw extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof zw)return t;const i=new zw;return i.message=t.message,i.stack=t.stack,i}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},kS=class f8 extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,f8.prototype)}};function DS(e,t){const i=$S(e,t);if(i!==-1)return e[i]}function $S(e,t,i=e.length-1){for(let r=i;r>=0;r--){const n=e[r];if(t(n))return r}return-1}function IS(e,t,i=0,r=e.length){let n=i,s=r;for(;n<s;){const o=Math.floor((n+s)/2);t(e[o])?n=o+1:s=o}return n-1}var tC=class p8{static{this.assertInvariants=!1}constructor(t){this.e=t,this.c=0}findLastMonotonous(t){if(p8.assertInvariants){if(this.d){for(const r of this.e)if(this.d(r)&&!t(r))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=t}const i=IS(this.e,t,this.c);return this.c=i+1,i===-1?void 0:this.e[i]}};function Nn(e,t,i=(r,n)=>r===n){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(!i(e[r],t[r]))return!1;return!0}function AS(e,t){const i=[];let r;for(const n of e.slice(0).sort(t))!r||t(r[0],n)!==0?(r=[n],i.push(r)):r.push(n);return i}function db(e,t,i){const r=[];function n(a,c,l){if(c===0&&l.length===0)return;const u=r[r.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):r.push({start:a,deleteCount:c,toInsert:l})}let s=0,o=0;for(;;){if(s===e.length){n(s,0,t.slice(o));break}if(o===t.length){n(s,e.length-s,[]);break}const a=e[s],c=t[o],l=i(a,c);l===0?(s+=1,o+=1):l<0?(n(s,1,[]),s+=1):l>0&&(n(s,0,[c]),o+=1)}return r}function PS(e,t,i){const r=db(e,t,i),n=[],s=[];for(const o of r)n.push(...e.slice(o.start,o.start+o.deleteCount)),s.push(...o.toInsert);return{removed:n,added:s}}function ci(e){return e.filter(t=>!!t)}function RS(e){let t=0;for(let i=0;i<e.length;i++)e[i]&&(e[t]=e[i],t+=1);e.length=t}function xg(e){return!Array.isArray(e)||e.length===0}function Hc(e){return Array.isArray(e)&&e.length>0}function ca(e,t=i=>i){const i=new Set;return e.filter(r=>{const n=t(r);return i.has(n)?!1:(i.add(n),!0)})}function fb(e,t){let i;if(typeof t=="number"){let r=t;i=()=>{const n=Math.sin(r++)*179426549;return n-Math.floor(n)}}else i=Math.random;for(let r=e.length-1;r>0;r-=1){const n=Math.floor(i()*(r+1)),s=e[r];e[r]=e[n],e[n]=s}}function kg(e,t){return Array.isArray(e)?e.map(t):t(e)}function fn(e){return Array.isArray(e)?e:[e]}var Dg;(function(e){function t(s){return s<0}e.isLessThan=t;function i(s){return s<=0}e.isLessThanOrEqual=i;function r(s){return s>0}e.isGreaterThan=r;function n(s){return s===0}e.isNeitherLessOrGreaterThan=n,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(Dg||(Dg={}));function TS(e,t){return(i,r)=>t(e(i),e(r))}var LS=(e,t)=>e-t,iC=class Yp{static{this.empty=new Yp(t=>{})}constructor(t){this.iterate=t}forEach(t){this.iterate(i=>(t(i),!0))}toArray(){const t=[];return this.iterate(i=>(t.push(i),!0)),t}filter(t){return new Yp(i=>this.iterate(r=>t(r)?i(r):!0))}map(t){return new Yp(i=>this.iterate(r=>i(t(r))))}some(t){let i=!1;return this.iterate(r=>(i=t(r),!i)),i}findFirst(t){let i;return this.iterate(r=>t(r)?(i=r,!1):!0),i}findLast(t){let i;return this.iterate(r=>(t(r)&&(i=r),!0)),i}findLastMaxBy(t){let i,r=!0;return this.iterate(n=>((r||Dg.isGreaterThan(t(n,i)))&&(r=!1,i=n),!0)),i}},pb;function gb(e,t){const i=Object.create(null);for(const r of e){const n=t(r);let s=i[n];s||(s=i[n]=[]),s.push(r)}return i}function _S(e,t){const i=[],r=[];for(const n of e)t.has(n)||i.push(n);for(const n of t)e.has(n)||r.push(n);return{removed:i,added:r}}var rC=class{static{pb=Symbol.toStringTag}constructor(e,t){this.b=t,this.a=new Map,this[pb]="SetWithKey";for(const i of e)this.add(i)}get size(){return this.a.size}add(e){const t=this.b(e);return this.a.set(t,e),this}delete(e){return this.a.delete(this.b(e))}has(e){return this.a.has(this.b(e))}*entries(){for(const e of this.a.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this.a.values())yield e}clear(){this.a.clear()}forEach(e,t){this.a.forEach(i=>e.call(t,i,i,this))}[Symbol.iterator](){return this.values()}},mb,vb,wb;function CS(e,t,i){let r=e.get(t);return r===void 0&&(r=i,e.set(t,r)),r}var NS=class{constructor(e,t){this.uri=e,this.value=t}};function OS(e){return Array.isArray(e)}var li=class th{static{this.c=t=>t.toString()}constructor(t,i){if(this[mb]="ResourceMap",t instanceof th)this.d=new Map(t.d),this.e=i??th.c;else if(OS(t)){this.d=new Map,this.e=i??th.c;for(const[r,n]of t)this.set(r,n)}else this.d=new Map,this.e=t??th.c}set(t,i){return this.d.set(this.e(t),new NS(t,i)),this}get(t){return this.d.get(this.e(t))?.value}has(t){return this.d.has(this.e(t))}get size(){return this.d.size}clear(){this.d.clear()}delete(t){return this.d.delete(this.e(t))}forEach(t,i){typeof i<"u"&&(t=t.bind(i));for(const[r,n]of this.d)t(n.value,n.uri,this)}*values(){for(const t of this.d.values())yield t.value}*keys(){for(const t of this.d.values())yield t.uri}*entries(){for(const t of this.d.values())yield[t.uri,t.value]}*[(mb=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.d)yield[t.uri,t.value]}},bb=class{constructor(e,t){this[vb]="ResourceSet",!e||typeof e=="function"?this.c=new li(e):(this.c=new li(t),e.forEach(this.add,this))}get size(){return this.c.size}add(e){return this.c.set(e,e),this}clear(){this.c.clear()}delete(e){return this.c.delete(e)}forEach(e,t){this.c.forEach((i,r)=>e.call(t,r,r,this))}has(e){return this.c.has(e)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(vb=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},Oi;(function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"})(Oi||(Oi={}));var FS=class{constructor(){this[wb]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(e){return this.c.has(e)}get(e,t=Oi.None){const i=this.c.get(e);if(i)return t!==Oi.None&&this.m(i,t),i.value}set(e,t,i=Oi.None){let r=this.c.get(e);if(r)r.value=t,i!==Oi.None&&this.m(r,i);else{switch(r={key:e,value:t,next:void 0,previous:void 0},i){case Oi.None:this.k(r);break;case Oi.AsOld:this.j(r);break;case Oi.AsNew:this.k(r);break;default:this.k(r);break}this.c.set(e,r),this.f++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this.c.get(e);if(t)return this.c.delete(e),this.l(t),this.f--,t.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const e=this.d;return this.c.delete(e.key),this.l(e),this.f--,e.value}forEach(e,t){const i=this.g;let r=this.d;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this.g!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const n={value:i.key,done:!1};return i=i.next,n}else return{value:void 0,done:!0}}};return r}values(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const n={value:i.value,done:!1};return i=i.next,n}else return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const n={value:[i.key,i.value],done:!1};return i=i.next,n}else return{value:void 0,done:!0}}};return r}[(wb=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.d,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.next,i--;this.d=t,this.f=i,t&&(t.previous=void 0),this.g++}i(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.e,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.previous,i--;this.e=t,this.f=i,t&&(t.next=void 0),this.g++}j(e){if(!this.d&&!this.e)this.e=e;else if(this.d)e.next=this.d,this.d.previous=e;else throw new Error("Invalid list");this.d=e,this.g++}k(e){if(!this.d&&!this.e)this.d=e;else if(this.e)e.previous=this.e,this.e.next=e;else throw new Error("Invalid list");this.e=e,this.g++}l(e){if(e===this.d&&e===this.e)this.d=void 0,this.e=void 0;else if(e===this.d){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this.d=e.next}else if(e===this.e){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this.e=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this.g++}m(e,t){if(!this.d||!this.e)throw new Error("Invalid list");if(!(t!==Oi.AsOld&&t!==Oi.AsNew)){if(t===Oi.AsOld){if(e===this.d)return;const i=e.next,r=e.previous;e===this.e?(r.next=void 0,this.e=r):(i.previous=r,r.next=i),e.previous=void 0,e.next=this.d,this.d.previous=e,this.d=e,this.g++}else if(t===Oi.AsNew){if(e===this.e)return;const i=e.next,r=e.previous;e===this.d?(i.previous=void 0,this.d=i):(i.previous=r,r.next=i),e.next=void 0,e.previous=this.e,this.e.next=e,this.e=e,this.g++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}},MS=class extends FS{constructor(e,t=1){super(),this.n=e,this.o=Math.min(Math.max(0,t),1)}get limit(){return this.n}set limit(e){this.n=e,this.p()}get ratio(){return this.o}set ratio(e){this.o=Math.min(Math.max(0,e),1),this.p()}get(e,t=Oi.AsNew){return super.get(e,t)}peek(e){return super.get(e,Oi.None)}set(e,t){return super.set(e,t,Oi.AsNew),this}p(){this.size>this.n&&this.q(Math.round(this.n*this.o))}},$g=class extends MS{constructor(e,t=1){super(e,t)}q(e){this.h(e)}set(e,t){return super.set(e,t),this.p(),this}},yb=class{constructor(){this.c=new Map}add(e,t){let i=this.c.get(e);i||(i=new Set,this.c.set(e,i)),i.add(t)}delete(e,t){const i=this.c.get(e);i&&(i.delete(t),i.size===0&&this.c.delete(e))}forEach(e,t){const i=this.c.get(e);i&&i.forEach(t)}get(e){const t=this.c.get(e);return t||new Set}};function Ig(e,t){const i=this;let r=!1,n;return function(){if(r)return n;if(r=!0,t)try{n=e.apply(i,arguments)}finally{t()}else n=e.apply(i,arguments);return n}}var vr;(function(e){function t(z){return z&&typeof z=="object"&&typeof z[Symbol.iterator]=="function"}e.is=t;const i=Object.freeze([]);function r(){return i}e.empty=r;function*n(z){yield z}e.single=n;function s(z){return t(z)?z:n(z)}e.wrap=s;function o(z){return z||i}e.from=o;function*a(z){for(let q=z.length-1;q>=0;q--)yield z[q]}e.reverse=a;function c(z){return!z||z[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(z){return z[Symbol.iterator]().next().value}e.first=l;function u(z,q){let ee=0;for(const pe of z)if(q(pe,ee++))return!0;return!1}e.some=u;function h(z,q){for(const ee of z)if(q(ee))return ee}e.find=h;function*f(z,q){for(const ee of z)q(ee)&&(yield ee)}e.filter=f;function*g(z,q){let ee=0;for(const pe of z)yield q(pe,ee++)}e.map=g;function*m(z,q){let ee=0;for(const pe of z)yield*q(pe,ee++)}e.flatMap=m;function*b(...z){for(const q of z)yield*q}e.concat=b;function k(z,q,ee){let pe=ee;for(const re of z)pe=q(pe,re);return pe}e.reduce=k;function*I(z,q,ee=z.length){for(q<0&&(q+=z.length),ee<0?ee+=z.length:ee>z.length&&(ee=z.length);q<ee;q++)yield z[q]}e.slice=I;function R(z,q=Number.POSITIVE_INFINITY){const ee=[];if(q===0)return[ee,z];const pe=z[Symbol.iterator]();for(let re=0;re<q;re++){const fe=pe.next();if(fe.done)return[ee,e.empty()];ee.push(fe.value)}return[ee,{[Symbol.iterator](){return pe}}]}e.consume=R;async function N(z){const q=[];for await(const ee of z)q.push(ee);return Promise.resolve(q)}e.asyncToArray=N})(vr||(vr={}));var US=!1,la=null,nC=class g8{constructor(){this.b=new Map}static{this.a=0}c(t){let i=this.b.get(t);return i||(i={parent:null,source:null,isSingleton:!1,value:t,idx:g8.a++},this.b.set(t,i)),i}trackDisposable(t){const i=this.c(t);i.source||(i.source=new Error().stack)}setParent(t,i){const r=this.c(t);r.parent=i}markAsDisposed(t){this.b.delete(t)}markAsSingleton(t){this.c(t).isSingleton=!0}f(t,i){const r=i.get(t);if(r)return r;const n=t.parent?this.f(this.c(t.parent),i):t;return i.set(t,n),n}getTrackedDisposables(){const t=new Map;return[...this.b.entries()].filter(([,r])=>r.source!==null&&!this.f(r,t).isSingleton).flatMap(([r])=>r)}computeLeakingDisposables(t=10,i){let r;if(i)r=i;else{const c=new Map,l=[...this.b.values()].filter(h=>h.source!==null&&!this.f(h,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(h=>h.value));if(r=l.filter(h=>!(h.parent&&u.has(h.parent))),r.length===0)throw new Error("There are cyclic diposable chains!")}if(!r)return;function n(c){function l(h,f){for(;h.length>0&&f.some(g=>typeof g=="string"?g===h[0]:h[0].match(g));)h.shift()}const u=c.source.split(`
`).map(h=>h.trim().replace("at ","")).filter(h=>h!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const s=new yb;for(const c of r){const l=n(c);for(let u=0;u<=l.length;u++)s.add(l.slice(0,u).join(`
`),c)}r.sort(TS(c=>c.idx,LS));let o="",a=0;for(const c of r.slice(0,t)){a++;const l=n(c),u=[];for(let h=0;h<l.length;h++){let f=l[h];f=`(shared with ${s.get(l.slice(0,h+1).join(`
`)).size}/${r.length} leaks) at ${f}`;const m=s.get(l.slice(0,h).join(`
`)),b=gb([...m].map(k=>n(k)[h]),k=>k);delete b[l[h]];for(const[k,I]of Object.entries(b))u.unshift(`    - stacktraces of ${I.length} other leaks continue with ${k}`);u.unshift(f)}o+=`


==================== Leaking disposable ${a}/${r.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return r.length>t&&(o+=`


... and ${r.length-t} more leaking disposables

`),{leaks:r,details:o}}};function BS(e){la=e}if(US){const e="__is_disposable_tracked__";BS(new class{trackDisposable(t){const i=new Error("Potentially leaked disposable").stack;setTimeout(()=>{t[e]||console.log(i)},3e3)}setParent(t,i){if(t&&t!==Te.None)try{t[e]=!0}catch{}}markAsDisposed(t){if(t&&t!==Te.None)try{t[e]=!0}catch{}}markAsSingleton(t){}})}function jc(e){return la?.trackDisposable(e),e}function Wc(e){la?.markAsDisposed(e)}function zc(e,t){la?.setParent(e,t)}function HS(e,t){if(la)for(const i of e)la.setParent(i,t)}function jS(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&e.dispose.length===0}function On(e){if(vr.is(e)){const t=[];for(const i of e)if(i)try{i.dispose()}catch(r){t.push(r)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function Eb(...e){const t=Ce(()=>On(e));return HS(e,t),t}function Ce(e){const t=jc({dispose:Ig(()=>{Wc(t),e()})});return t}var He=class m8{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,jc(this)}dispose(){this.g||(Wc(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{On(this.f)}finally{this.f.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return zc(t,this),this.g?m8.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(t),t.dispose()}}deleteAndLeak(t){t&&this.f.has(t)&&(this.f.delete(t),zc(t,null))}},Te=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this.q=new He,jc(this),zc(this.q,this)}dispose(){Wc(this),this.q.dispose()}B(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.q.add(e)}},ho=class{constructor(){this.b=!1,jc(this)}get value(){return this.b?void 0:this.a}set value(e){this.b||e===this.a||(this.a?.dispose(),e&&zc(e,this),this.a=e)}clear(){this.value=void 0}dispose(){this.b=!0,Wc(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const e=this.a;return this.a=void 0,e&&zc(e,null),e}},Ag=class{constructor(){this.a=new Map,this.b=!1,jc(this)}dispose(){Wc(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{On(this.a.values())}finally{this.a.clear()}}has(e){return this.a.has(e)}get size(){return this.a.size}get(e){return this.a.get(e)}set(e,t,i=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||this.a.get(e)?.dispose(),this.a.set(e,t)}deleteAndDispose(e){this.a.get(e)?.dispose(),this.a.delete(e)}deleteAndLeak(e){const t=this.a.get(e);return this.a.delete(e),t}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}};function WS(e,t){return new Promise((i,r)=>{const n=[];zS(e,{onData:s=>{t&&n.push(s)},onError:s=>{t?r(s):i(void 0)},onEnd:()=>{i(t?t(n):void 0)}})})}function zS(e,t,i){e.on("error",r=>{i?.isCancellationRequested||t.onError(r)}),e.on("end",()=>{i?.isCancellationRequested||t.onEnd()}),e.on("data",r=>{i?.isCancellationRequested||t.onData(r)})}var fh=typeof Buffer<"u",VS=new nr(()=>new Uint8Array(256)),Pg,Rg,Qe=class Lr{static alloc(t){return fh?new Lr(Buffer.allocUnsafe(t)):new Lr(new Uint8Array(t))}static wrap(t){return fh&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new Lr(t)}static fromString(t,i){return!(i?.dontUseNodeBuffer||!1)&&fh?new Lr(Buffer.from(t)):(Pg||(Pg=new TextEncoder),new Lr(Pg.encode(t)))}static fromByteArray(t){const i=Lr.alloc(t.length);for(let r=0,n=t.length;r<n;r++)i.buffer[r]=t[r];return i}static concat(t,i){if(typeof i>"u"){i=0;for(let s=0,o=t.length;s<o;s++)i+=t[s].byteLength}const r=Lr.alloc(i);let n=0;for(let s=0,o=t.length;s<o;s++){const a=t[s];r.set(a,n),n+=a.byteLength}return r}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=Lr.alloc(this.byteLength);return t.set(this),t}toString(){return fh?this.buffer.toString():(Rg||(Rg=new TextDecoder),Rg.decode(this.buffer))}slice(t,i){return new Lr(this.buffer.subarray(t,i))}set(t,i){if(t instanceof Lr)this.buffer.set(t.buffer,i);else if(t instanceof Uint8Array)this.buffer.set(t,i);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),i);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i);else throw new Error("Unknown argument 'array'")}readUInt32BE(t){return ph(this.buffer,t)}writeUInt32BE(t,i){gh(this.buffer,t,i)}readUInt32LE(t){return JS(this.buffer,t)}writeUInt32LE(t,i){XS(this.buffer,t,i)}readUInt8(t){return ZS(this.buffer,t)}writeUInt8(t,i){YS(this.buffer,t,i)}indexOf(t,i=0){return qS(this.buffer,t instanceof Lr?t.buffer:t,i)}};function qS(e,t,i=0){const r=t.byteLength,n=e.byteLength;if(r===0)return 0;if(r===1)return e.indexOf(t[0]);if(r>n-i)return-1;const s=VS.value;s.fill(t.length);for(let l=0;l<t.length;l++)s[t[l]]=t.length-l-1;let o=i+t.length-1,a=o,c=-1;for(;o<n;)if(e[o]===t[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(t.length-a,s[e[o]]),a=t.length-1;return c}function GS(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function QS(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255}function ph(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function gh(e,t,i){e[i+3]=t,t=t>>>8,e[i+2]=t,t=t>>>8,e[i+1]=t,t=t>>>8,e[i]=t}function JS(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function XS(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255,t=t>>>8,e[i+2]=t&255,t=t>>>8,e[i+3]=t&255}function ZS(e,t){return e[t]}function YS(e,t,i){e[i]=t}function KS(e){return WS(e,t=>Qe.concat(t))}function ex(e){let t=0,i=0,r=0;const n=new Uint8Array(Math.floor(e.length/4*3)),s=a=>{switch(i){case 3:n[r++]=t|a,i=0;break;case 2:n[r++]=t|a>>>2,t=a<<6,i=3;break;case 1:n[r++]=t|a>>>4,t=a<<4,i=2;break;default:t=a<<2,i=1}};for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);if(c>=65&&c<=90)s(c-65);else if(c>=97&&c<=122)s(c-97+26);else if(c>=48&&c<=57)s(c-48+52);else if(c===43||c===45)s(62);else if(c===47||c===95)s(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}}const o=r;for(;i>0;)s(0);return Qe.wrap(n).slice(0,o)}var tx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ix="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function Sb({buffer:e},t=!0,i=!1){const r=i?ix:tx;let n="";const s=e.byteLength%3;let o=0;for(;o<e.byteLength-s;o+=3){const a=e[o+0],c=e[o+1],l=e[o+2];n+=r[a>>>2],n+=r[(a<<4|c>>>4)&63],n+=r[(c<<2|l>>>6)&63],n+=r[l&63]}if(s===1){const a=e[o+0];n+=r[a>>>2],n+=r[a<<4&63],t&&(n+="==")}else if(s===2){const a=e[o+0],c=e[o+1];n+=r[a>>>2],n+=r[(a<<4|c>>>4)&63],n+=r[c<<2&63],t&&(n+="=")}return n}var qt=class Kp{static{this.Undefined=new Kp(void 0)}constructor(t){this.element=t,this.next=Kp.Undefined,this.prev=Kp.Undefined}},Vc=class{constructor(){this.a=qt.Undefined,this.b=qt.Undefined,this.c=0}get size(){return this.c}isEmpty(){return this.a===qt.Undefined}clear(){let e=this.a;for(;e!==qt.Undefined;){const t=e.next;e.prev=qt.Undefined,e.next=qt.Undefined,e=t}this.a=qt.Undefined,this.b=qt.Undefined,this.c=0}unshift(e){return this.d(e,!1)}push(e){return this.d(e,!0)}d(e,t){const i=new qt(e);if(this.a===qt.Undefined)this.a=i,this.b=i;else if(t){const n=this.b;this.b=i,i.prev=n,n.next=i}else{const n=this.a;this.a=i,i.next=n,n.prev=i}this.c+=1;let r=!1;return()=>{r||(r=!0,this.e(i))}}shift(){if(this.a!==qt.Undefined){const e=this.a.element;return this.e(this.a),e}}pop(){if(this.b!==qt.Undefined){const e=this.b.element;return this.e(this.b),e}}e(e){if(e.prev!==qt.Undefined&&e.next!==qt.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===qt.Undefined&&e.next===qt.Undefined?(this.a=qt.Undefined,this.b=qt.Undefined):e.next===qt.Undefined?(this.b=this.b.prev,this.b.next=qt.Undefined):e.prev===qt.Undefined&&(this.a=this.a.next,this.a.prev=qt.Undefined);this.c-=1}*[Symbol.iterator](){let e=this.a;for(;e!==qt.Undefined;)yield e.element,e=e.next}},rx=globalThis.performance&&typeof globalThis.performance.now=="function",fo=class v8{static create(t){return new v8(t)}constructor(t){this.c=rx&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}},nx=!1,xb=!1,sx=!1,Gt;(function(e){e.None=()=>Te.None;function t(Z){if(sx){const{onDidAddListener:J}=Z,ce=Tg.create();let ne=0;Z.onDidAddListener=()=>{++ne===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),ce.print()),J?.()}}}function i(Z,J){return f(Z,()=>{},0,void 0,!0,void 0,J)}e.defer=i;function r(Z){return(J,ce=null,ne)=>{let te=!1,$e;return $e=Z(ze=>{if(!te)return $e?$e.dispose():te=!0,J.call(ce,ze)},null,ne),te&&$e.dispose(),$e}}e.once=r;function n(Z,J,ce){return u((ne,te=null,$e)=>Z(ze=>ne.call(te,J(ze)),null,$e),ce)}e.map=n;function s(Z,J,ce){return u((ne,te=null,$e)=>Z(ze=>{J(ze),ne.call(te,ze)},null,$e),ce)}e.forEach=s;function o(Z,J,ce){return u((ne,te=null,$e)=>Z(ze=>J(ze)&&ne.call(te,ze),null,$e),ce)}e.filter=o;function a(Z){return Z}e.signal=a;function c(...Z){return(J,ce=null,ne)=>{const te=Eb(...Z.map($e=>$e(ze=>J.call(ce,ze))));return h(te,ne)}}e.any=c;function l(Z,J,ce,ne){let te=ce;return n(Z,$e=>(te=J(te,$e),te),ne)}e.reduce=l;function u(Z,J){let ce;const ne={onWillAddFirstListener(){ce=Z(te.fire,te)},onDidRemoveLastListener(){ce?.dispose()}};J||t(ne);const te=new C(ne);return J?.add(te),te.event}function h(Z,J){return J instanceof Array?J.push(Z):J&&J.add(Z),Z}function f(Z,J,ce=100,ne=!1,te=!1,$e,ze){let Le,yt,Ct,Yt=0,Ut;const Ti={leakWarningThreshold:$e,onWillAddFirstListener(){Le=Z(ji=>{Yt++,yt=J(yt,ji),ne&&!Ct&&(ft.fire(yt),yt=void 0),Ut=()=>{const Nr=yt;yt=void 0,Ct=void 0,(!ne||Yt>1)&&ft.fire(Nr),Yt=0},typeof ce=="number"?(clearTimeout(Ct),Ct=setTimeout(Ut,ce)):Ct===void 0&&(Ct=0,queueMicrotask(Ut))})},onWillRemoveListener(){te&&Yt>0&&Ut?.()},onDidRemoveLastListener(){Ut=void 0,Le.dispose()}};ze||t(Ti);const ft=new C(Ti);return ze?.add(ft),ft.event}e.debounce=f;function g(Z,J=0,ce){return e.debounce(Z,(ne,te)=>ne?(ne.push(te),ne):[te],J,void 0,!0,void 0,ce)}e.accumulate=g;function m(Z,J=(ne,te)=>ne===te,ce){let ne=!0,te;return o(Z,$e=>{const ze=ne||!J($e,te);return ne=!1,te=$e,ze},ce)}e.latch=m;function b(Z,J,ce){return[e.filter(Z,J,ce),e.filter(Z,ne=>!J(ne),ce)]}e.split=b;function k(Z,J=!1,ce=[],ne){let te=ce.slice(),$e=Z(yt=>{te?te.push(yt):Le.fire(yt)});ne&&ne.add($e);const ze=()=>{te?.forEach(yt=>Le.fire(yt)),te=null},Le=new C({onWillAddFirstListener(){$e||($e=Z(yt=>Le.fire(yt)),ne&&ne.add($e))},onDidAddFirstListener(){te&&(J?setTimeout(ze):ze())},onDidRemoveLastListener(){$e&&$e.dispose(),$e=null}});return ne&&ne.add(Le),Le.event}e.buffer=k;function I(Z,J){return(ne,te,$e)=>{const ze=J(new N);return Z(function(Le){const yt=ze.evaluate(Le);yt!==R&&ne.call(te,yt)},void 0,$e)}}e.chain=I;const R=Symbol("HaltChainable");class N{constructor(){this.f=[]}map(J){return this.f.push(J),this}forEach(J){return this.f.push(ce=>(J(ce),ce)),this}filter(J){return this.f.push(ce=>J(ce)?ce:R),this}reduce(J,ce){let ne=ce;return this.f.push(te=>(ne=J(ne,te),ne)),this}latch(J=(ce,ne)=>ce===ne){let ce=!0,ne;return this.f.push(te=>{const $e=ce||!J(te,ne);return ce=!1,ne=te,$e?te:R}),this}evaluate(J){for(const ce of this.f)if(J=ce(J),J===R)break;return J}}function z(Z,J,ce=ne=>ne){const ne=(...Le)=>ze.fire(ce(...Le)),te=()=>Z.on(J,ne),$e=()=>Z.removeListener(J,ne),ze=new C({onWillAddFirstListener:te,onDidRemoveLastListener:$e});return ze.event}e.fromNodeEventEmitter=z;function q(Z,J,ce=ne=>ne){const ne=(...Le)=>ze.fire(ce(...Le)),te=()=>Z.addEventListener(J,ne),$e=()=>Z.removeEventListener(J,ne),ze=new C({onWillAddFirstListener:te,onDidRemoveLastListener:$e});return ze.event}e.fromDOMEventEmitter=q;function ee(Z){return new Promise(J=>r(Z)(J))}e.toPromise=ee;function pe(Z){const J=new C;return Z.then(ce=>{J.fire(ce)},()=>{J.fire(void 0)}).finally(()=>{J.dispose()}),J.event}e.fromPromise=pe;function re(Z,J){return Z(ce=>J.fire(ce))}e.forward=re;function fe(Z,J,ce){return J(ce),Z(ne=>J(ne))}e.runAndSubscribe=fe;class We{constructor(J,ce){this._observable=J,this.f=0,this.g=!1;const ne={onWillAddFirstListener:()=>{J.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{J.removeObserver(this)}};ce||t(ne),this.emitter=new C(ne),ce&&ce.add(this.emitter)}beginUpdate(J){this.f++}handlePossibleChange(J){}handleChange(J,ce){this.g=!0}endUpdate(J){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function Ae(Z,J){return new We(Z,J).emitter.event}e.fromObservable=Ae;function bt(Z){return(J,ce,ne)=>{let te=0,$e=!1;const ze={beginUpdate(){te++},endUpdate(){te--,te===0&&(Z.reportChanges(),$e&&($e=!1,J.call(ce)))},handlePossibleChange(){},handleChange(){$e=!0}};Z.addObserver(ze),Z.reportChanges();const Le={dispose(){Z.removeObserver(ze)}};return ne instanceof He?ne.add(Le):Array.isArray(ne)&&ne.push(Le),Le}}e.fromObservableLight=bt})(Gt||(Gt={}));var ox=class Vw{static{this.all=new Set}static{this.f=0}constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${Vw.f++}`,Vw.all.add(this)}start(t){this.g=new fo,this.listenerCount=t}stop(){if(this.g){const t=this.g.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this.g=void 0}}},kb=-1,ax=class w8{static{this.f=1}constructor(t,i,r=(w8.f++).toString(16).padStart(3,"0")){this.j=t,this.threshold=i,this.name=r,this.h=0}dispose(){this.g?.clear()}check(t,i){const r=this.threshold;if(r<=0||i<r)return;this.g||(this.g=new Map);const n=this.g.get(t.value)||0;if(this.g.set(t.value,n+1),this.h-=1,this.h<=0){this.h=r*.5;const[s,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${i} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(s);const c=new cx(a,s);this.j(c)}return()=>{const s=this.g.get(t.value)||0;this.g.set(t.value,s-1)}}getMostFrequentStack(){if(!this.g)return;let t,i=0;for(const[r,n]of this.g)(!t||i<n)&&(t=[r,n],i=n);return t}},Tg=class b8{static create(){const t=new Error;return new b8(t.stack??"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},cx=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},lx=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},ux=0,mh=class{constructor(e){this.value=e,this.id=ux++}},hx=2,Db=(e,t)=>{if(e instanceof mh)t(e);else for(let i=0;i<e.length;i++){const r=e[i];r&&t(r)}},vh;if(nx){const e=[];setInterval(()=>{e.length!==0&&(console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"),console.warn(e.join(`
`)),e.length=0)},3e3),vh=new FinalizationRegistry(t=>{typeof t=="string"&&e.push(t)})}var C=class{constructor(e){this.z=0,this.f=e,this.g=kb>0||this.f?.leakWarningThreshold?new ax(e?.onListenerError??mr,this.f?.leakWarningThreshold??kb):void 0,this.j=this.f?._profName?new ox(this.f._profName):void 0,this.w=this.f?.deliveryQueue}dispose(){if(!this.m){if(this.m=!0,this.w?.current===this&&this.w.reset(),this.u){if(xb){const e=this.u;queueMicrotask(()=>{Db(e,t=>t.stack?.print())})}this.u=void 0,this.z=0}this.f?.onDidRemoveLastListener?.(),this.g?.dispose()}}get event(){return this.q??=(e,t,i)=>{if(this.g&&this.z>this.g.threshold**2){const a=`[${this.g.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this.z} vs ${this.g.threshold})`;console.warn(a);const c=this.g.getMostFrequentStack()??["UNKNOWN stack",-1],l=new lx(`${a}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this.f?.onListenerError||mr)(l),Te.None}if(this.m)return Te.None;t&&(e=e.bind(t));const r=new mh(e);let n,s;this.g&&this.z>=Math.ceil(this.g.threshold*.2)&&(r.stack=Tg.create(),n=this.g.check(r.stack,this.z+1)),xb&&(r.stack=s??Tg.create()),this.u?this.u instanceof mh?(this.w??=new dx,this.u=[this.u,r]):this.u.push(r):(this.f?.onWillAddFirstListener?.(this),this.u=r,this.f?.onDidAddFirstListener?.(this)),this.z++;const o=Ce(()=>{vh?.unregister(o),n?.(),this.A(r)});if(i instanceof He?i.add(o):Array.isArray(i)&&i.push(o),vh){const a=new Error().stack.split(`
`).slice(2,3).join(`
`).trim(),c=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(a);vh.register(o,c?.[2]??a,o)}return o},this.q}A(e){if(this.f?.onWillRemoveListener?.(this),!this.u)return;if(this.z===1){this.u=void 0,this.f?.onDidRemoveLastListener?.(this),this.z=0;return}const t=this.u,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this.m),console.log("size?",this.z),console.log("arr?",JSON.stringify(this.u)),new Error("Attempted to dispose unknown listener");this.z--,t[i]=void 0;const r=this.w.current===this;if(this.z*hx<=t.length){let n=0;for(let s=0;s<t.length;s++)t[s]?t[n++]=t[s]:r&&(this.w.end--,n<this.w.i&&this.w.i--);t.length=n}}B(e,t){if(!e)return;const i=this.f?.onListenerError||mr;if(!i){e.value(t);return}try{e.value(t)}catch(r){i(r)}}C(e){const t=e.current.u;for(;e.i<e.end;)this.B(t[e.i++],e.value);e.reset()}fire(e){if(this.w?.current&&(this.C(this.w),this.j?.stop()),this.j?.start(this.z),this.u)if(this.u instanceof mh)this.B(this.u,e);else{const t=this.w;t.enqueue(this,e,this.u.length),this.C(t)}this.j?.stop()}hasListeners(){return this.z>0}},dx=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},qc=class extends C{async fireAsync(e,t,i){if(this.u)for(this.h||(this.h=new Vc),Db(this.u,r=>this.h.push([r.value,e]));this.h.size>0&&!t.isCancellationRequested;){const[r,n]=this.h.shift(),s=[],o={...n,token:t,waitUntil:a=>{if(Object.isFrozen(s))throw new Error("waitUntil can NOT be called asynchronous");i&&(a=i(a,r)),s.push(a)}};try{r(o)}catch(a){mr(a);continue}Object.freeze(s),await Promise.allSettled(s).then(a=>{for(const c of a)c.status==="rejected"&&mr(c.reason)})}}},wh=class extends C{get isPaused(){return this.h!==0}constructor(e){super(e),this.h=0,this.s=new Vc,this.t=e?.merge}pause(){this.h++}resume(){if(this.h!==0&&--this.h===0)if(this.t){if(this.s.size>0){const e=Array.from(this.s);this.s.clear(),super.fire(this.t(e))}}else for(;!this.h&&this.s.size!==0;)super.fire(this.s.shift())}fire(e){this.z&&(this.h!==0?this.s.push(e):super.fire(e))}},fx=class extends wh{constructor(e){super(e),this.k=e.delay??100}fire(e){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(e)}},Gc;(function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"})(Gc||(Gc={}));var $b;(function(e){e[e.VersionMismatch=55]="VersionMismatch",e[e.UnexpectedError=81]="UnexpectedError"})($b||($b={}));var Br;(function(e){e[e.Initialized=0]="Initialized",e[e.Ready=1]="Ready",e[e.Terminate=2]="Terminate"})(Br||(Br={}));function Ib(e){const t=Qe.alloc(1);switch(e){case Br.Initialized:t.writeUInt8(1,0);break;case Br.Ready:t.writeUInt8(2,0);break;case Br.Terminate:t.writeUInt8(3,0);break}return t}function px(e,t){if(e.byteLength!==1)return!1;switch(e.readUInt8(0)){case 1:return t===Br.Initialized;case 2:return t===Br.Ready;case 3:return t===Br.Terminate;default:return!1}}var Ab;(function(e){e.Start="START_NATIVE_LOG",e.End="END_NATIVE_LOG"})(Ab||(Ab={}));var Qc={exports:{}};(function(){function e(n){const s=[];typeof n=="number"&&s.push("code/timeOrigin",n);function o(c){s.push(c,Date.now())}function a(){const c=[];for(let l=0;l<s.length;l+=2)c.push({name:s[l],startTime:s[l+1]});return c}return{mark:o,getMarks:a}}function t(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?e():{mark(n){performance.mark(n)},getMarks(){let n=performance.timeOrigin;typeof n!="number"&&(n=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const s=[{name:"code/timeOrigin",startTime:Math.round(n)}];for(const o of performance.getEntriesByType("mark"))s.push({name:o.name,startTime:Math.round(n+o.startTime)});return s}};if(typeof process=="object"){const n=performance?.timeOrigin??Math.round((ub.__$__nodeRequire||ub)("perf_hooks").performance.timeOrigin);return e(n)}else return console.trace("perf-util loaded in UNKNOWN environment"),e()}function i(n){return n.MonacoPerformanceMarks||(n.MonacoPerformanceMarks=t()),n.MonacoPerformanceMarks}var r;typeof global=="object"?r=global:typeof self=="object"?r=self:r={},typeof define=="function"?define([],function(){return i(r)}):typeof Qc=="object"&&typeof Qc.exports=="object"?Qc.exports=i(r):(console.trace("perf-util defined in UNKNOWN context (neither requirejs or commonjs)"),r.perf=i(r))})();var Vi=Qc.exports.mark,gx=Qc.exports.getMarks,L;(function(e){e[e.Null=0]="Null",e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.LineFeed=10]="LineFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.DoubleQuote=34]="DoubleQuote",e[e.Hash=35]="Hash",e[e.DollarSign=36]="DollarSign",e[e.PercentSign=37]="PercentSign",e[e.Ampersand=38]="Ampersand",e[e.SingleQuote=39]="SingleQuote",e[e.OpenParen=40]="OpenParen",e[e.CloseParen=41]="CloseParen",e[e.Asterisk=42]="Asterisk",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Period=46]="Period",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit1=49]="Digit1",e[e.Digit2=50]="Digit2",e[e.Digit3=51]="Digit3",e[e.Digit4=52]="Digit4",e[e.Digit5=53]="Digit5",e[e.Digit6=54]="Digit6",e[e.Digit7=55]="Digit7",e[e.Digit8=56]="Digit8",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.Semicolon=59]="Semicolon",e[e.LessThan=60]="LessThan",e[e.Equals=61]="Equals",e[e.GreaterThan=62]="GreaterThan",e[e.QuestionMark=63]="QuestionMark",e[e.AtSign=64]="AtSign",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.OpenSquareBracket=91]="OpenSquareBracket",e[e.Backslash=92]="Backslash",e[e.CloseSquareBracket=93]="CloseSquareBracket",e[e.Caret=94]="Caret",e[e.Underline=95]="Underline",e[e.BackTick=96]="BackTick",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace",e[e.Tilde=126]="Tilde",e[e.NoBreakSpace=160]="NoBreakSpace",e[e.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",e[e.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",e[e.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",e[e.U_Combining_Tilde=771]="U_Combining_Tilde",e[e.U_Combining_Macron=772]="U_Combining_Macron",e[e.U_Combining_Overline=773]="U_Combining_Overline",e[e.U_Combining_Breve=774]="U_Combining_Breve",e[e.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",e[e.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",e[e.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",e[e.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",e[e.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",e[e.U_Combining_Caron=780]="U_Combining_Caron",e[e.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",e[e.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",e[e.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",e[e.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",e[e.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",e[e.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",e[e.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",e[e.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",e[e.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",e[e.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",e[e.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",e[e.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",e[e.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",e[e.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",e[e.U_Combining_Horn=795]="U_Combining_Horn",e[e.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",e[e.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",e[e.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",e[e.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",e[e.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",e[e.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",e[e.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",e[e.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",e[e.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",e[e.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",e[e.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",e[e.U_Combining_Cedilla=807]="U_Combining_Cedilla",e[e.U_Combining_Ogonek=808]="U_Combining_Ogonek",e[e.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",e[e.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",e[e.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",e[e.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",e[e.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",e[e.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",e[e.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",e[e.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",e[e.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",e[e.U_Combining_Low_Line=818]="U_Combining_Low_Line",e[e.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",e[e.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",e[e.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",e[e.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",e[e.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",e[e.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",e[e.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",e[e.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",e[e.U_Combining_Square_Below=827]="U_Combining_Square_Below",e[e.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",e[e.U_Combining_X_Above=829]="U_Combining_X_Above",e[e.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",e[e.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",e[e.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",e[e.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",e[e.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",e[e.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",e[e.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",e[e.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",e[e.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",e[e.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",e[e.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",e[e.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",e[e.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",e[e.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",e[e.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",e[e.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",e[e.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",e[e.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",e[e.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",e[e.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",e[e.U_Combining_Fermata=850]="U_Combining_Fermata",e[e.U_Combining_X_Below=851]="U_Combining_X_Below",e[e.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",e[e.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",e[e.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",e[e.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",e[e.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",e[e.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",e[e.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",e[e.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",e[e.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",e[e.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",e[e.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",e[e.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",e[e.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",e[e.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",e[e.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",e[e.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",e[e.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",e[e.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",e[e.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",e[e.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",e[e.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",e[e.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",e[e.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",e[e.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",e[e.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",e[e.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",e[e.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",e[e.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",e[e.LINE_SEPARATOR=8232]="LINE_SEPARATOR",e[e.PARAGRAPH_SEPARATOR=8233]="PARAGRAPH_SEPARATOR",e[e.NEXT_LINE=133]="NEXT_LINE",e[e.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",e[e.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",e[e.U_DIAERESIS=168]="U_DIAERESIS",e[e.U_MACRON=175]="U_MACRON",e[e.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",e[e.U_CEDILLA=184]="U_CEDILLA",e[e.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",e[e.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",e[e.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",e[e.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",e[e.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",e[e.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",e[e.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",e[e.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",e[e.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",e[e.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",e[e.U_BREVE=728]="U_BREVE",e[e.U_DOT_ABOVE=729]="U_DOT_ABOVE",e[e.U_RING_ABOVE=730]="U_RING_ABOVE",e[e.U_OGONEK=731]="U_OGONEK",e[e.U_SMALL_TILDE=732]="U_SMALL_TILDE",e[e.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",e[e.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",e[e.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",e[e.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",e[e.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",e[e.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",e[e.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",e[e.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",e[e.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",e[e.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",e[e.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",e[e.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",e[e.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",e[e.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",e[e.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",e[e.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",e[e.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",e[e.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",e[e.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",e[e.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",e[e.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",e[e.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",e[e.U_GREEK_TONOS=900]="U_GREEK_TONOS",e[e.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",e[e.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",e[e.U_GREEK_PSILI=8127]="U_GREEK_PSILI",e[e.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",e[e.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",e[e.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",e[e.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",e[e.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",e[e.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",e[e.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",e[e.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",e[e.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",e[e.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",e[e.U_GREEK_VARIA=8175]="U_GREEK_VARIA",e[e.U_GREEK_OXIA=8189]="U_GREEK_OXIA",e[e.U_GREEK_DASIA=8190]="U_GREEK_DASIA",e[e.U_IDEOGRAPHIC_FULL_STOP=12290]="U_IDEOGRAPHIC_FULL_STOP",e[e.U_LEFT_CORNER_BRACKET=12300]="U_LEFT_CORNER_BRACKET",e[e.U_RIGHT_CORNER_BRACKET=12301]="U_RIGHT_CORNER_BRACKET",e[e.U_LEFT_BLACK_LENTICULAR_BRACKET=12304]="U_LEFT_BLACK_LENTICULAR_BRACKET",e[e.U_RIGHT_BLACK_LENTICULAR_BRACKET=12305]="U_RIGHT_BLACK_LENTICULAR_BRACKET",e[e.U_OVERLINE=8254]="U_OVERLINE",e[e.UTF8_BOM=65279]="UTF8_BOM",e[e.U_FULLWIDTH_SEMICOLON=65307]="U_FULLWIDTH_SEMICOLON",e[e.U_FULLWIDTH_COMMA=65292]="U_FULLWIDTH_COMMA"})(L||(L={}));var Dt;(function(e){e[e.Uri=1]="Uri",e[e.Regexp=2]="Regexp",e[e.ScmResource=3]="ScmResource",e[e.ScmResourceGroup=4]="ScmResourceGroup",e[e.ScmProvider=5]="ScmProvider",e[e.CommentController=6]="CommentController",e[e.CommentThread=7]="CommentThread",e[e.CommentThreadInstance=8]="CommentThreadInstance",e[e.CommentThreadReply=9]="CommentThreadReply",e[e.CommentNode=10]="CommentNode",e[e.CommentThreadNode=11]="CommentThreadNode",e[e.TimelineActionContext=12]="TimelineActionContext",e[e.NotebookCellActionContext=13]="NotebookCellActionContext",e[e.NotebookActionContext=14]="NotebookActionContext",e[e.TerminalContext=15]="TerminalContext",e[e.TestItemContext=16]="TestItemContext",e[e.Date=17]="Date",e[e.TestMessageMenuArgs=18]="TestMessageMenuArgs"})(Dt||(Dt={}));var po="en",Jc=!1,Xc=!1,Zc=!1,mx=!1,Pb=!1,Lg=!1,vx=!1,Rb=!1,Tb=!1,wx=!1,bh=void 0,yh=po,Lb=po,bx=void 0,Fn=void 0,Mn=globalThis,wr=void 0;typeof Mn.vscode<"u"&&typeof Mn.vscode.process<"u"?wr=Mn.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(wr=process);var _b=typeof wr?.versions?.electron=="string",yx=_b&&wr?.type==="renderer";if(typeof wr=="object"){Jc=wr.platform==="win32",Xc=wr.platform==="darwin",Zc=wr.platform==="linux",mx=Zc&&!!wr.env.SNAP&&!!wr.env.SNAP_REVISION,vx=_b,Tb=!!wr.env.CI||!!wr.env.BUILD_ARTIFACTSTAGINGDIRECTORY,bh=po,yh=po;const e=wr.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);bh=t.userLocale,Lb=t.osLocale,yh=t.resolvedLanguage||po,bx=t.languagePack?.translationsConfigFile}catch{}Pb=!0}else typeof navigator=="object"&&!yx?(Fn=navigator.userAgent,Jc=Fn.indexOf("Windows")>=0,Xc=Fn.indexOf("Macintosh")>=0,Rb=(Fn.indexOf("Macintosh")>=0||Fn.indexOf("iPad")>=0||Fn.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Zc=Fn.indexOf("Linux")>=0,wx=Fn?.indexOf("Mobi")>=0,Lg=!0,yh=globalThis._VSCODE_NLS_LANGUAGE||po,bh=navigator.language.toLowerCase(),Lb=bh):console.error("Unable to resolve platform.");var Hr;(function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"})(Hr||(Hr={}));function Ex(e){switch(e){case Hr.Web:return"Web";case Hr.Mac:return"Mac";case Hr.Linux:return"Linux";case Hr.Windows:return"Windows"}}var _g=Hr.Web;Xc?_g=Hr.Mac:Jc?_g=Hr.Windows:Zc&&(_g=Hr.Linux);var sr=Jc,jr=Xc,ks=Zc,Sx=Pb,Cg=Lg,xx=Lg&&typeof Mn.importScripts=="function",kx=xx?Mn.origin:void 0,go=Tb,pn=Fn,Ds=yh,Cb;(function(e){function t(){return Ds}e.value=t;function i(){return Ds.length===2?Ds==="en":Ds.length>=3?Ds[0]==="e"&&Ds[1]==="n"&&Ds[2]==="-":!1}e.isDefaultVariant=i;function r(){return Ds==="en"}e.isDefault=r})(Cb||(Cb={}));var Dx=typeof Mn.postMessage=="function"&&!Mn.importScripts,Nb=(()=>{if(Dx){const e=[];Mn.addEventListener("message",i=>{if(i.data&&i.data.vscodeScheduleAsyncWork)for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s.id===i.data.vscodeScheduleAsyncWork){e.splice(r,1),s.callback();return}}});let t=0;return i=>{const r=++t;e.push({id:r,callback:i}),Mn.postMessage({vscodeScheduleAsyncWork:r},"*")}}return e=>setTimeout(e)})(),Un;(function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"})(Un||(Un={}));var $x=Xc||Rb?Un.Macintosh:Jc?Un.Windows:Un.Linux,Ob=!0,Fb=!1;function Mb(){if(!Fb){Fb=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2,Ob=new Uint16Array(e.buffer)[0]===513}return Ob}var Ub=!!(pn&&pn.indexOf("Chrome")>=0),Ix=!!(pn&&pn.indexOf("Firefox")>=0),Ax=!!(!Ub&&pn&&pn.indexOf("Safari")>=0),Px=!!(pn&&pn.indexOf("Edg/")>=0),sC=!!(pn&&pn.indexOf("Android")>=0),mo,Ng=globalThis.vscode;if(typeof Ng<"u"&&typeof Ng.process<"u"){const e=Ng.process;mo={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?mo={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:mo={get platform(){return sr?"win32":jr?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var ua=mo.cwd,Og=mo.env,Rx=mo.platform,oC=mo.arch,Tx=65,Lx=97,_x=90,Cx=122,$s=46,Ii=47,or=92,Is=58,Nx=63,Bb=class extends Error{constructor(e,t,i){let r;typeof t=="string"&&t.indexOf("not ")===0?(r="must not be",t=t.replace(/^not /,"")):r="must be";const n=e.indexOf(".")!==-1?"property":"argument";let s=`The "${e}" ${n} ${r} of type ${t}`;s+=`. Received type ${typeof i}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}};function Ox(e,t){if(e===null||typeof e!="object")throw new Bb(t,"Object",e)}function ti(e,t){if(typeof e!="string")throw new Bb(t,"string",e)}var ar=Rx==="win32";function Je(e){return e===Ii||e===or}function Fg(e){return e===Ii}function As(e){return e>=Tx&&e<=_x||e>=Lx&&e<=Cx}function Eh(e,t,i,r){let n="",s=0,o=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(r(c))break;c=Ii}if(r(c)){if(!(o===l-1||a===1))if(a===2){if(n.length<2||s!==2||n.charCodeAt(n.length-1)!==$s||n.charCodeAt(n.length-2)!==$s){if(n.length>2){const u=n.lastIndexOf(i);u===-1?(n="",s=0):(n=n.slice(0,u),s=n.length-1-n.lastIndexOf(i)),o=l,a=0;continue}else if(n.length!==0){n="",s=0,o=l,a=0;continue}}t&&(n+=n.length>0?`${i}..`:"..",s=2)}else n.length>0?n+=`${i}${e.slice(o+1,l)}`:n=e.slice(o+1,l),s=l-o-1;o=l,a=0}else c===$s&&a!==-1?++a:a=-1}return n}function Fx(e){return e?`${e[0]==="."?"":"."}${e}`:""}function Hb(e,t){Ox(t,"pathObject");const i=t.dir||t.root,r=t.base||`${t.name||""}${Fx(t.ext)}`;return i?i===t.root?`${i}${r}`:`${i}${e}${r}`:r}var ii={resolve(...e){let t="",i="",r=!1;for(let n=e.length-1;n>=-1;n--){let s;if(n>=0){if(s=e[n],ti(s,`paths[${n}]`),s.length===0)continue}else t.length===0?s=ua():(s=Og[`=${t}`]||ua(),(s===void 0||s.slice(0,2).toLowerCase()!==t.toLowerCase()&&s.charCodeAt(2)===or)&&(s=`${t}\\`));const o=s.length;let a=0,c="",l=!1;const u=s.charCodeAt(0);if(o===1)Je(u)&&(a=1,l=!0);else if(Je(u))if(l=!0,Je(s.charCodeAt(1))){let h=2,f=h;for(;h<o&&!Je(s.charCodeAt(h));)h++;if(h<o&&h!==f){const g=s.slice(f,h);for(f=h;h<o&&Je(s.charCodeAt(h));)h++;if(h<o&&h!==f){for(f=h;h<o&&!Je(s.charCodeAt(h));)h++;(h===o||h!==f)&&(c=`\\\\${g}\\${s.slice(f,h)}`,a=h)}}}else a=1;else As(u)&&s.charCodeAt(1)===Is&&(c=s.slice(0,2),a=2,o>2&&Je(s.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(r){if(t.length>0)break}else if(i=`${s.slice(a)}\\${i}`,r=l,l&&t.length>0)break}return i=Eh(i,!r,"\\",Je),r?`${t}\\${i}`:`${t}${i}`||"."},normalize(e){ti(e,"path");const t=e.length;if(t===0)return".";let i=0,r,n=!1;const s=e.charCodeAt(0);if(t===1)return Fg(s)?"\\":e;if(Je(s))if(n=!0,Je(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Je(e.charCodeAt(a));)a++;if(a<t&&a!==c){const l=e.slice(c,a);for(c=a;a<t&&Je(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Je(e.charCodeAt(a));)a++;if(a===t)return`\\\\${l}\\${e.slice(c)}\\`;a!==c&&(r=`\\\\${l}\\${e.slice(c,a)}`,i=a)}}}else i=1;else As(s)&&e.charCodeAt(1)===Is&&(r=e.slice(0,2),i=2,t>2&&Je(e.charCodeAt(2))&&(n=!0,i=3));let o=i<t?Eh(e.slice(i),!n,"\\",Je):"";return o.length===0&&!n&&(o="."),o.length>0&&Je(e.charCodeAt(t-1))&&(o+="\\"),r===void 0?n?`\\${o}`:o:n?`${r}\\${o}`:`${r}${o}`},isAbsolute(e){ti(e,"path");const t=e.length;if(t===0)return!1;const i=e.charCodeAt(0);return Je(i)||t>2&&As(i)&&e.charCodeAt(1)===Is&&Je(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,i;for(let s=0;s<e.length;++s){const o=e[s];ti(o,"path"),o.length>0&&(t===void 0?t=i=o:t+=`\\${o}`)}if(t===void 0)return".";let r=!0,n=0;if(typeof i=="string"&&Je(i.charCodeAt(0))){++n;const s=i.length;s>1&&Je(i.charCodeAt(1))&&(++n,s>2&&(Je(i.charCodeAt(2))?++n:r=!1))}if(r){for(;n<t.length&&Je(t.charCodeAt(n));)n++;n>=2&&(t=`\\${t.slice(n)}`)}return ii.normalize(t)},relative(e,t){if(ti(e,"from"),ti(t,"to"),e===t)return"";const i=ii.resolve(e),r=ii.resolve(t);if(i===r||(e=i.toLowerCase(),t=r.toLowerCase(),e===t))return"";let n=0;for(;n<e.length&&e.charCodeAt(n)===or;)n++;let s=e.length;for(;s-1>n&&e.charCodeAt(s-1)===or;)s--;const o=s-n;let a=0;for(;a<t.length&&t.charCodeAt(a)===or;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===or;)c--;const l=c-a,u=o<l?o:l;let h=-1,f=0;for(;f<u;f++){const m=e.charCodeAt(n+f);if(m!==t.charCodeAt(a+f))break;m===or&&(h=f)}if(f!==u){if(h===-1)return r}else{if(l>u){if(t.charCodeAt(a+f)===or)return r.slice(a+f+1);if(f===2)return r.slice(a+f)}o>u&&(e.charCodeAt(n+f)===or?h=f:f===2&&(h=3)),h===-1&&(h=0)}let g="";for(f=n+h+1;f<=s;++f)(f===s||e.charCodeAt(f)===or)&&(g+=g.length===0?"..":"\\..");return a+=h,g.length>0?`${g}${r.slice(a,c)}`:(r.charCodeAt(a)===or&&++a,r.slice(a,c))},toNamespacedPath(e){if(typeof e!="string"||e.length===0)return e;const t=ii.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===or){if(t.charCodeAt(1)===or){const i=t.charCodeAt(2);if(i!==Nx&&i!==$s)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(As(t.charCodeAt(0))&&t.charCodeAt(1)===Is&&t.charCodeAt(2)===or)return`\\\\?\\${t}`;return e},dirname(e){ti(e,"path");const t=e.length;if(t===0)return".";let i=-1,r=0;const n=e.charCodeAt(0);if(t===1)return Je(n)?e:".";if(Je(n)){if(i=r=1,Je(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Je(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&Je(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Je(e.charCodeAt(a));)a++;if(a===t)return e;a!==c&&(i=r=a+1)}}}}else As(n)&&e.charCodeAt(1)===Is&&(i=t>2&&Je(e.charCodeAt(2))?3:2,r=i);let s=-1,o=!0;for(let a=t-1;a>=r;--a)if(Je(e.charCodeAt(a))){if(!o){s=a;break}}else o=!1;if(s===-1){if(i===-1)return".";s=i}return e.slice(0,s)},basename(e,t){t!==void 0&&ti(t,"suffix"),ti(e,"path");let i=0,r=-1,n=!0,s;if(e.length>=2&&As(e.charCodeAt(0))&&e.charCodeAt(1)===Is&&(i=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(s=e.length-1;s>=i;--s){const c=e.charCodeAt(s);if(Je(c)){if(!n){i=s+1;break}}else a===-1&&(n=!1,a=s+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=s):(o=-1,r=a))}return i===r?r=a:r===-1&&(r=e.length),e.slice(i,r)}for(s=e.length-1;s>=i;--s)if(Je(e.charCodeAt(s))){if(!n){i=s+1;break}}else r===-1&&(n=!1,r=s+1);return r===-1?"":e.slice(i,r)},extname(e){ti(e,"path");let t=0,i=-1,r=0,n=-1,s=!0,o=0;e.length>=2&&e.charCodeAt(1)===Is&&As(e.charCodeAt(0))&&(t=r=2);for(let a=e.length-1;a>=t;--a){const c=e.charCodeAt(a);if(Je(c)){if(!s){r=a+1;break}continue}n===-1&&(s=!1,n=a+1),c===$s?i===-1?i=a:o!==1&&(o=1):i!==-1&&(o=-1)}return i===-1||n===-1||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)},format:Hb.bind(null,"\\"),parse(e){ti(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.length;let r=0,n=e.charCodeAt(0);if(i===1)return Je(n)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(Je(n)){if(r=1,Je(e.charCodeAt(1))){let h=2,f=h;for(;h<i&&!Je(e.charCodeAt(h));)h++;if(h<i&&h!==f){for(f=h;h<i&&Je(e.charCodeAt(h));)h++;if(h<i&&h!==f){for(f=h;h<i&&!Je(e.charCodeAt(h));)h++;h===i?r=h:h!==f&&(r=h+1)}}}}else if(As(n)&&e.charCodeAt(1)===Is){if(i<=2)return t.root=t.dir=e,t;if(r=2,Je(e.charCodeAt(2))){if(i===3)return t.root=t.dir=e,t;r=3}}r>0&&(t.root=e.slice(0,r));let s=-1,o=r,a=-1,c=!0,l=e.length-1,u=0;for(;l>=r;--l){if(n=e.charCodeAt(l),Je(n)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),n===$s?s===-1?s=l:u!==1&&(u=1):s!==-1&&(u=-1)}return a!==-1&&(s===-1||u===0||u===1&&s===a-1&&s===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,s),t.base=e.slice(o,a),t.ext=e.slice(s,a))),o>0&&o!==r?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},Mx=(()=>{if(ar){const e=/\\/g;return()=>{const t=ua().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>ua()})(),et={resolve(...e){let t="",i=!1;for(let r=e.length-1;r>=-1&&!i;r--){const n=r>=0?e[r]:Mx();ti(n,`paths[${r}]`),n.length!==0&&(t=`${n}/${t}`,i=n.charCodeAt(0)===Ii)}return t=Eh(t,!i,"/",Fg),i?`/${t}`:t.length>0?t:"."},normalize(e){if(ti(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Ii,i=e.charCodeAt(e.length-1)===Ii;return e=Eh(e,!t,"/",Fg),e.length===0?t?"/":i?"./":".":(i&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return ti(e,"path"),e.length>0&&e.charCodeAt(0)===Ii},join(...e){if(e.length===0)return".";let t;for(let i=0;i<e.length;++i){const r=e[i];ti(r,"path"),r.length>0&&(t===void 0?t=r:t+=`/${r}`)}return t===void 0?".":et.normalize(t)},relative(e,t){if(ti(e,"from"),ti(t,"to"),e===t||(e=et.resolve(e),t=et.resolve(t),e===t))return"";const i=1,r=e.length,n=r-i,s=1,o=t.length-s,a=n<o?n:o;let c=-1,l=0;for(;l<a;l++){const h=e.charCodeAt(i+l);if(h!==t.charCodeAt(s+l))break;h===Ii&&(c=l)}if(l===a)if(o>a){if(t.charCodeAt(s+l)===Ii)return t.slice(s+l+1);if(l===0)return t.slice(s+l)}else n>a&&(e.charCodeAt(i+l)===Ii?c=l:l===0&&(c=0));let u="";for(l=i+c+1;l<=r;++l)(l===r||e.charCodeAt(l)===Ii)&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(s+c)}`},toNamespacedPath(e){return e},dirname(e){if(ti(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Ii;let i=-1,r=!0;for(let n=e.length-1;n>=1;--n)if(e.charCodeAt(n)===Ii){if(!r){i=n;break}}else r=!1;return i===-1?t?"/":".":t&&i===1?"//":e.slice(0,i)},basename(e,t){t!==void 0&&ti(t,"ext"),ti(e,"path");let i=0,r=-1,n=!0,s;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(s=e.length-1;s>=0;--s){const c=e.charCodeAt(s);if(c===Ii){if(!n){i=s+1;break}}else a===-1&&(n=!1,a=s+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=s):(o=-1,r=a))}return i===r?r=a:r===-1&&(r=e.length),e.slice(i,r)}for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===Ii){if(!n){i=s+1;break}}else r===-1&&(n=!1,r=s+1);return r===-1?"":e.slice(i,r)},extname(e){ti(e,"path");let t=-1,i=0,r=-1,n=!0,s=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===Ii){if(!n){i=o+1;break}continue}r===-1&&(n=!1,r=o+1),a===$s?t===-1?t=o:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||r===-1||s===0||s===1&&t===r-1&&t===i+1?"":e.slice(t,r)},format:Hb.bind(null,"/"),parse(e){ti(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.charCodeAt(0)===Ii;let r;i?(t.root="/",r=1):r=0;let n=-1,s=0,o=-1,a=!0,c=e.length-1,l=0;for(;c>=r;--c){const u=e.charCodeAt(c);if(u===Ii){if(!a){s=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===$s?n===-1?n=c:l!==1&&(l=1):n!==-1&&(l=-1)}if(o!==-1){const u=s===0&&i?1:s;n===-1||l===0||l===1&&n===o-1&&n===s+1?t.base=t.name=e.slice(u,o):(t.name=e.slice(u,n),t.base=e.slice(u,o),t.ext=e.slice(n,o))}return s>0?t.dir=e.slice(0,s-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};et.win32=ii.win32=ii,et.posix=ii.posix=et;var ha=ar?ii.normalize:et.normalize,Mg=ar?ii.isAbsolute:et.isAbsolute,Ug=ar?ii.join:et.join,Ux=ar?ii.resolve:et.resolve,Yc=ar?ii.relative:et.relative,da=ar?ii.dirname:et.dirname,cr=ar?ii.basename:et.basename,Bg=ar?ii.extname:et.extname,aC=ar?ii.format:et.format,cC=ar?ii.parse:et.parse,lC=ar?ii.toNamespacedPath:et.toNamespacedPath,Wr=ar?ii.sep:et.sep,uC=ar?ii.delimiter:et.delimiter,Bx=/^\w[\w\d+.-]*$/,Hx=/^\//,jx=/^\/\//;function Wx(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!Bx.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!Hx.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(jx.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function zx(e,t){return!e&&!t?"file":e}function Vx(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==zr&&(t=zr+t):t=zr;break}return t}var Rt="",zr="/",qx=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,E=class eg{static isUri(t){return t instanceof eg?!0:t?typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function":!1}constructor(t,i,r,n,s,o=!1){typeof t=="object"?(this.scheme=t.scheme||Rt,this.authority=t.authority||Rt,this.path=t.path||Rt,this.query=t.query||Rt,this.fragment=t.fragment||Rt):(this.scheme=zx(t,o),this.authority=i||Rt,this.path=Vx(this.scheme,r||Rt),this.query=n||Rt,this.fragment=s||Rt,Wx(this,o))}get fsPath(){return Sh(this,!1)}with(t){if(!t)return this;let{scheme:i,authority:r,path:n,query:s,fragment:o}=t;return i===void 0?i=this.scheme:i===null&&(i=Rt),r===void 0?r=this.authority:r===null&&(r=Rt),n===void 0?n=this.path:n===null&&(n=Rt),s===void 0?s=this.query:s===null&&(s=Rt),o===void 0?o=this.fragment:o===null&&(o=Rt),i===this.scheme&&r===this.authority&&n===this.path&&s===this.query&&o===this.fragment?this:new fa(i,r,n,s,o)}static parse(t,i=!1){const r=qx.exec(t);return r?new fa(r[2]||Rt,xh(r[4]||Rt),xh(r[5]||Rt),xh(r[7]||Rt),xh(r[9]||Rt),i):new fa(Rt,Rt,Rt,Rt,Rt)}static file(t){let i=Rt;if(sr&&(t=t.replace(/\\/g,zr)),t[0]===zr&&t[1]===zr){const r=t.indexOf(zr,2);r===-1?(i=t.substring(2),t=zr):(i=t.substring(2,r),t=t.substring(r)||zr)}return new fa("file",i,t,Rt,Rt)}static from(t,i){return new fa(t.scheme,t.authority,t.path,t.query,t.fragment,i)}static joinPath(t,...i){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return sr&&t.scheme==="file"?r=eg.file(ii.join(Sh(t,!0),...i)).path:r=et.join(t.path,...i),t.with({path:r})}toString(t=!1){return Hg(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof eg)return t;{const i=new fa(t);return i._formatted=t.external??null,i._fsPath=t._sep===Wb?t.fsPath??null:null,i}}else return t}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function jb(e){return!e||typeof e!="object"?!1:typeof e.scheme=="string"&&(typeof e.authority=="string"||typeof e.authority>"u")&&(typeof e.path=="string"||typeof e.path>"u")&&(typeof e.query=="string"||typeof e.query>"u")&&(typeof e.fragment=="string"||typeof e.fragment>"u")}var Wb=sr?1:void 0,fa=class extends E{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Sh(this,!1)),this._fsPath}toString(e=!1){return e?Hg(this,!0):(this._formatted||(this._formatted=Hg(this,!1)),this._formatted)}toJSON(){const e={$mid:Dt.Uri};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Wb),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},zb={[L.Colon]:"%3A",[L.Slash]:"%2F",[L.QuestionMark]:"%3F",[L.Hash]:"%23",[L.OpenSquareBracket]:"%5B",[L.CloseSquareBracket]:"%5D",[L.AtSign]:"%40",[L.ExclamationMark]:"%21",[L.DollarSign]:"%24",[L.Ampersand]:"%26",[L.SingleQuote]:"%27",[L.OpenParen]:"%28",[L.CloseParen]:"%29",[L.Asterisk]:"%2A",[L.Plus]:"%2B",[L.Comma]:"%2C",[L.Semicolon]:"%3B",[L.Equals]:"%3D",[L.Space]:"%20"};function Vb(e,t,i){let r,n=-1;for(let s=0;s<e.length;s++){const o=e.charCodeAt(s);if(o>=L.a&&o<=L.z||o>=L.A&&o<=L.Z||o>=L.Digit0&&o<=L.Digit9||o===L.Dash||o===L.Period||o===L.Underline||o===L.Tilde||t&&o===L.Slash||i&&o===L.OpenSquareBracket||i&&o===L.CloseSquareBracket||i&&o===L.Colon)n!==-1&&(r+=encodeURIComponent(e.substring(n,s)),n=-1),r!==void 0&&(r+=e.charAt(s));else{r===void 0&&(r=e.substr(0,s));const a=zb[o];a!==void 0?(n!==-1&&(r+=encodeURIComponent(e.substring(n,s)),n=-1),r+=a):n===-1&&(n=s)}}return n!==-1&&(r+=encodeURIComponent(e.substring(n))),r!==void 0?r:e}function Gx(e){let t;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);r===L.Hash||r===L.QuestionMark?(t===void 0&&(t=e.substr(0,i)),t+=zb[r]):t!==void 0&&(t+=e[i])}return t!==void 0?t:e}function Sh(e,t){let i;return e.authority&&e.path.length>1&&e.scheme==="file"?i=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===L.Slash&&(e.path.charCodeAt(1)>=L.A&&e.path.charCodeAt(1)<=L.Z||e.path.charCodeAt(1)>=L.a&&e.path.charCodeAt(1)<=L.z)&&e.path.charCodeAt(2)===L.Colon?t?i=e.path.substr(1):i=e.path[1].toLowerCase()+e.path.substr(2):i=e.path,sr&&(i=i.replace(/\//g,"\\")),i}function Hg(e,t){const i=t?Gx:Vb;let r="",{scheme:n,authority:s,path:o,query:a,fragment:c}=e;if(n&&(r+=n,r+=":"),(s||n==="file")&&(r+=zr,r+=zr),s){let l=s.indexOf("@");if(l!==-1){const u=s.substr(0,l);s=s.substr(l+1),l=u.lastIndexOf(":"),l===-1?r+=i(u,!1,!1):(r+=i(u.substr(0,l),!1,!1),r+=":",r+=i(u.substr(l+1),!1,!0)),r+="@"}s=s.toLowerCase(),l=s.lastIndexOf(":"),l===-1?r+=i(s,!1,!0):(r+=i(s.substr(0,l),!1,!0),r+=s.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===L.Slash&&o.charCodeAt(2)===L.Colon){const l=o.charCodeAt(1);l>=L.A&&l<=L.Z&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===L.Colon){const l=o.charCodeAt(0);l>=L.A&&l<=L.Z&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}r+=i(o,!0,!1)}return a&&(r+="?",r+=i(a,!1,!1)),c&&(r+="#",r+=t?c:Vb(c,!1,!1)),r}function qb(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+qb(e.substr(3)):e}}var Gb=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function xh(e){return e.match(Gb)?e.replace(Gb,t=>qb(t)):e}var Qb=class y8{static{this.count=0}constructor(t){this._proxyIdentifierBrand=void 0,this.sid=t,this.nid=++y8.count}},Jb=[];function H(e){const t=new Qb(e);return Jb[t.nid]=t,t}function kh(e){return Jb[e].sid}var br=class{constructor(e){this.value=e}},Xb;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Xb||(Xb={}));var yr;(function(e){e[e.UnknownInput=0]="UnknownInput",e[e.TextInput=1]="TextInput",e[e.TextDiffInput=2]="TextDiffInput",e[e.TextMergeInput=3]="TextMergeInput",e[e.NotebookInput=4]="NotebookInput",e[e.NotebookDiffInput=5]="NotebookDiffInput",e[e.CustomEditorInput=6]="CustomEditorInput",e[e.WebviewEditorInput=7]="WebviewEditorInput",e[e.TerminalEditorInput=8]="TerminalEditorInput",e[e.InteractiveEditorInput=9]="InteractiveEditorInput",e[e.ChatEditorInput=10]="ChatEditorInput",e[e.MultiDiffEditorInput=11]="MultiDiffEditorInput"})(yr||(yr={}));var Bn;(function(e){e[e.TAB_OPEN=0]="TAB_OPEN",e[e.TAB_CLOSE=1]="TAB_CLOSE",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TAB_MOVE=3]="TAB_MOVE"})(Bn||(Bn={}));var Zb;(function(e){e[e.Editable=0]="Editable",e[e.SupportsHotExit=1]="SupportsHotExit"})(Zb||(Zb={}));var jt;(function(e){e[e.Int8Array=1]="Int8Array",e[e.Uint8Array=2]="Uint8Array",e[e.Uint8ClampedArray=3]="Uint8ClampedArray",e[e.Int16Array=4]="Int16Array",e[e.Uint16Array=5]="Uint16Array",e[e.Int32Array=6]="Int32Array",e[e.Uint32Array=7]="Uint32Array",e[e.Float32Array=8]="Float32Array",e[e.Float64Array=9]="Float64Array",e[e.BigInt64Array=10]="BigInt64Array",e[e.BigUint64Array=11]="BigUint64Array"})(jt||(jt={}));var Yb;(function(e){e[e.Text=1]="Text",e[e.Error=2]="Error",e[e.Rich=3]="Rich"})(Yb||(Yb={}));var Kb;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Kb||(Kb={}));var jg;(function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output",e[e.Hybrid=3]="Hybrid"})(jg||(jg={}));var hC=class E8{static{this.a=0}static mixin(t){return t._id=E8.a++,t}},Me;(function(e){e.label="a",e.kind="b",e.detail="c",e.documentation="d",e.sortText="e",e.filterText="f",e.preselect="g",e.insertText="h",e.insertTextRules="i",e.range="j",e.commitCharacters="k",e.additionalTextEdits="l",e.kindModifier="m",e.commandIdent="n",e.commandId="o",e.commandArguments="p"})(Me||(Me={}));var pa;(function(e){e.defaultRanges="a",e.completions="b",e.isIncomplete="c",e.duration="d"})(pa||(pa={}));var ey;(function(e){e[e.Workspace=0]="Workspace",e[e.TextDocument=1]="TextDocument"})(ey||(ey={}));var se={MainThreadAuthentication:H("MainThreadAuthentication"),MainThreadBulkEdits:H("MainThreadBulkEdits"),MainThreadLanguageModels:H("MainThreadLanguageModels"),MainThreadEmbeddings:H("MainThreadEmbeddings"),MainThreadChatAgents2:H("MainThreadChatAgents2"),MainThreadChatVariables:H("MainThreadChatVariables"),MainThreadLanguageModelTools:H("MainThreadChatSkills"),MainThreadClipboard:H("MainThreadClipboard"),MainThreadCommands:H("MainThreadCommands"),MainThreadComments:H("MainThreadComments"),MainThreadConfiguration:H("MainThreadConfiguration"),MainThreadConsole:H("MainThreadConsole"),MainThreadDebugService:H("MainThreadDebugService"),MainThreadDecorations:H("MainThreadDecorations"),MainThreadDiagnostics:H("MainThreadDiagnostics"),MainThreadDialogs:H("MainThreadDiaglogs"),MainThreadDocuments:H("MainThreadDocuments"),MainThreadDocumentContentProviders:H("MainThreadDocumentContentProviders"),MainThreadTextEditors:H("MainThreadTextEditors"),MainThreadEditorInsets:H("MainThreadEditorInsets"),MainThreadEditorTabs:H("MainThreadEditorTabs"),MainThreadErrors:H("MainThreadErrors"),MainThreadTreeViews:H("MainThreadTreeViews"),MainThreadDownloadService:H("MainThreadDownloadService"),MainThreadLanguageFeatures:H("MainThreadLanguageFeatures"),MainThreadLanguages:H("MainThreadLanguages"),MainThreadLogger:H("MainThreadLogger"),MainThreadMessageService:H("MainThreadMessageService"),MainThreadOutputService:H("MainThreadOutputService"),MainThreadProgress:H("MainThreadProgress"),MainThreadQuickDiff:H("MainThreadQuickDiff"),MainThreadQuickOpen:H("MainThreadQuickOpen"),MainThreadStatusBar:H("MainThreadStatusBar"),MainThreadSecretState:H("MainThreadSecretState"),MainThreadStorage:H("MainThreadStorage"),MainThreadSpeech:H("MainThreadSpeechProvider"),MainThreadTelemetry:H("MainThreadTelemetry"),MainThreadTerminalService:H("MainThreadTerminalService"),MainThreadTerminalShellIntegration:H("MainThreadTerminalShellIntegration"),MainThreadWebviews:H("MainThreadWebviews"),MainThreadWebviewPanels:H("MainThreadWebviewPanels"),MainThreadWebviewViews:H("MainThreadWebviewViews"),MainThreadCustomEditors:H("MainThreadCustomEditors"),MainThreadUrls:H("MainThreadUrls"),MainThreadUriOpeners:H("MainThreadUriOpeners"),MainThreadProfileContentHandlers:H("MainThreadProfileContentHandlers"),MainThreadWorkspace:H("MainThreadWorkspace"),MainThreadFileSystem:H("MainThreadFileSystem"),MainThreadFileSystemEventService:H("MainThreadFileSystemEventService"),MainThreadExtensionService:H("MainThreadExtensionService"),MainThreadSCM:H("MainThreadSCM"),MainThreadSearch:H("MainThreadSearch"),MainThreadShare:H("MainThreadShare"),MainThreadTask:H("MainThreadTask"),MainThreadWindow:H("MainThreadWindow"),MainThreadLabelService:H("MainThreadLabelService"),MainThreadNotebook:H("MainThreadNotebook"),MainThreadNotebookDocuments:H("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:H("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:H("MainThreadNotebookKernels"),MainThreadNotebookRenderers:H("MainThreadNotebookRenderers"),MainThreadInteractive:H("MainThreadInteractive"),MainThreadTheming:H("MainThreadTheming"),MainThreadTunnelService:H("MainThreadTunnelService"),MainThreadManagedSockets:H("MainThreadManagedSockets"),MainThreadTimeline:H("MainThreadTimeline"),MainThreadTesting:H("MainThreadTesting"),MainThreadLocalization:H("MainThreadLocalizationShape"),MainThreadAiRelatedInformation:H("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:H("MainThreadAiEmbeddingVector")},ve={ExtHostCommands:H("ExtHostCommands"),ExtHostConfiguration:H("ExtHostConfiguration"),ExtHostDiagnostics:H("ExtHostDiagnostics"),ExtHostDebugService:H("ExtHostDebugService"),ExtHostDecorations:H("ExtHostDecorations"),ExtHostDocumentsAndEditors:H("ExtHostDocumentsAndEditors"),ExtHostDocuments:H("ExtHostDocuments"),ExtHostDocumentContentProviders:H("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:H("ExtHostDocumentSaveParticipant"),ExtHostEditors:H("ExtHostEditors"),ExtHostTreeViews:H("ExtHostTreeViews"),ExtHostFileSystem:H("ExtHostFileSystem"),ExtHostFileSystemInfo:H("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:H("ExtHostFileSystemEventService"),ExtHostLanguages:H("ExtHostLanguages"),ExtHostLanguageFeatures:H("ExtHostLanguageFeatures"),ExtHostQuickOpen:H("ExtHostQuickOpen"),ExtHostQuickDiff:H("ExtHostQuickDiff"),ExtHostStatusBar:H("ExtHostStatusBar"),ExtHostShare:H("ExtHostShare"),ExtHostExtensionService:H("ExtHostExtensionService"),ExtHostLogLevelServiceShape:H("ExtHostLogLevelServiceShape"),ExtHostTerminalService:H("ExtHostTerminalService"),ExtHostTerminalShellIntegration:H("ExtHostTerminalShellIntegration"),ExtHostSCM:H("ExtHostSCM"),ExtHostSearch:H("ExtHostSearch"),ExtHostTask:H("ExtHostTask"),ExtHostWorkspace:H("ExtHostWorkspace"),ExtHostWindow:H("ExtHostWindow"),ExtHostWebviews:H("ExtHostWebviews"),ExtHostWebviewPanels:H("ExtHostWebviewPanels"),ExtHostCustomEditors:H("ExtHostCustomEditors"),ExtHostWebviewViews:H("ExtHostWebviewViews"),ExtHostEditorInsets:H("ExtHostEditorInsets"),ExtHostEditorTabs:H("ExtHostEditorTabs"),ExtHostProgress:H("ExtHostProgress"),ExtHostComments:H("ExtHostComments"),ExtHostSecretState:H("ExtHostSecretState"),ExtHostStorage:H("ExtHostStorage"),ExtHostUrls:H("ExtHostUrls"),ExtHostUriOpeners:H("ExtHostUriOpeners"),ExtHostProfileContentHandlers:H("ExtHostProfileContentHandlers"),ExtHostOutputService:H("ExtHostOutputService"),ExtHostLabelService:H("ExtHostLabelService"),ExtHostNotebook:H("ExtHostNotebook"),ExtHostNotebookDocuments:H("ExtHostNotebookDocuments"),ExtHostNotebookEditors:H("ExtHostNotebookEditors"),ExtHostNotebookKernels:H("ExtHostNotebookKernels"),ExtHostNotebookRenderers:H("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:H("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:H("ExtHostInteractive"),ExtHostChatAgents2:H("ExtHostChatAgents"),ExtHostChatVariables:H("ExtHostChatVariables"),ExtHostLanguageModelTools:H("ExtHostChatSkills"),ExtHostChatProvider:H("ExtHostChatProvider"),ExtHostSpeech:H("ExtHostSpeech"),ExtHostEmbeddings:H("ExtHostEmbeddings"),ExtHostAiRelatedInformation:H("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:H("ExtHostAiEmbeddingVector"),ExtHostTheming:H("ExtHostTheming"),ExtHostTunnelService:H("ExtHostTunnelService"),ExtHostManagedSockets:H("ExtHostManagedSockets"),ExtHostAuthentication:H("ExtHostAuthentication"),ExtHostTimeline:H("ExtHostTimeline"),ExtHostTesting:H("ExtHostTesting"),ExtHostTelemetry:H("ExtHostTelemetry"),ExtHostLocalization:H("ExtHostLocalization")},ty=Object.freeze(function(e,t){const i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}),Wt;(function(e){function t(i){return i===e.None||i===e.Cancelled||i instanceof Dh?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Gt.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ty})})(Wt||(Wt={}));var Dh=class{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?ty:(this.b||(this.b=new C),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}},ri=class{constructor(e){this.f=void 0,this.g=void 0,this.g=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new Dh),this.f}cancel(){this.f?this.f instanceof Dh&&this.f.cancel():this.f=Wt.Cancelled}dispose(e=!1){e&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof Dh&&this.f.dispose():this.f=Wt.None}};function Qx(e){return e}var Jx=class{constructor(e,t){this.a=void 0,this.b=void 0,typeof e=="function"?(this.c=e,this.d=Qx):(this.c=t,this.d=e.getCacheKey)}get(e){const t=this.d(e);return this.b!==t&&(this.b=t,this.a=this.c(e)),this.a}},Fi;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(Fi||(Fi={}));function iy(e){return e<0?0:e>Fi.MAX_UINT_8?Fi.MAX_UINT_8:e|0}function ga(e){return e<0?0:e>Fi.MAX_UINT_32?Fi.MAX_UINT_32:e|0}function Kc(e){return!e||typeof e!="string"?!0:e.trim().length===0}var Xx=/{([^}]+)}/g;function ry(e,t){return Object.keys(t).length===0?e:e.replace(Xx,(i,r)=>t[r]??i)}function vo(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function Zx(e,t){let i=0,r=e.indexOf(t);for(;r!==-1;)i++,r=e.indexOf(t,r+t.length);return i}function Yx(e,t){if(!e||!t)return e;const i=t.length;if(i===0||e.length===0)return e;let r=0;for(;e.indexOf(t,r)===r;)r=r+i;return e.substring(r)}function ny(e,t){if(!e||!t)return e;const i=t.length,r=e.length;if(i===0||r===0)return e;let n=r,s=-1;for(;s=e.lastIndexOf(t,n-1),!(s===-1||s+i!==n);){if(s===0)return"";n=s}return e.substring(0,n)}function Kx(e,t,i={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=vo(e)),i.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e=e+"\\b"));let r="";return i.global&&(r+="g"),i.matchCase||(r+="i"),i.multiline&&(r+="m"),i.unicode&&(r+="u"),new RegExp(e,r)}function sy(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}function oy(e){return e.split(/\r\n|\r|\n/)}function Wg(e){for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(r!==L.Space&&r!==L.Tab)return t}return-1}function ek(e,t=e.length-1){for(let i=t;i>=0;i--){const r=e.charCodeAt(i);if(r!==L.Space&&r!==L.Tab)return i}return-1}function tk(e,t,i){const r=[];let n=0;for(const s of e.matchAll(t)){if(r.push(e.slice(n,s.index)),s.index===void 0)throw new Error("match.index should be defined");n=s.index+s[0].length,r.push(i(s[0],...s.slice(1),s.index,e,s.groups))}return r.push(e.slice(n)),Promise.all(r).then(s=>s.join(""))}function wo(e,t){return e<t?-1:e>t?1:0}function zg(e,t,i=0,r=e.length,n=0,s=t.length){for(;i<r&&n<s;i++,n++){const c=e.charCodeAt(i),l=t.charCodeAt(n);if(c<l)return-1;if(c>l)return 1}const o=r-i,a=s-n;return o<a?-1:o>a?1:0}function ay(e,t){return el(e,t,0,e.length,0,t.length)}function el(e,t,i=0,r=e.length,n=0,s=t.length){for(;i<r&&n<s;i++,n++){let c=e.charCodeAt(i),l=t.charCodeAt(n);if(c===l)continue;if(c>=128||l>=128)return zg(e.toLowerCase(),t.toLowerCase(),i,r,n,s);cy(c)&&(c-=32),cy(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=r-i,a=s-n;return o<a?-1:o>a?1:0}function cy(e){return e>=L.a&&e<=L.z}function Ps(e,t){return e.length===t.length&&el(e,t)===0}function Vg(e,t){const i=t.length;return t.length>e.length?!1:el(e,t,0,i)===0}function ik(e,t){const i=Math.min(e.length,t.length);let r;for(r=0;r<i;r++)if(e.charCodeAt(r)!==t.charCodeAt(r))return r;return i}function $h(e){return 55296<=e&&e<=56319}function Ih(e){return 56320<=e&&e<=57343}function qg(e,t){return(e-55296<<10)+(t-56320)+65536}function ly(e,t,i){const r=e.charCodeAt(i);if($h(r)&&i+1<t){const n=e.charCodeAt(i+1);if(Ih(n))return qg(r,n)}return r}function rk(e,t){const i=e.charCodeAt(t-1);if(Ih(i)&&t>1){const r=e.charCodeAt(t-2);if($h(r))return qg(r,i)}return i}var nk=class{get offset(){return this.e}constructor(e,t=0){this.c=e,this.d=e.length,this.e=t}setOffset(e){this.e=e}prevCodePoint(){const e=rk(this.c,this.e);return this.e-=e>=Fi.UNICODE_SUPPLEMENTARY_PLANE_BEGIN?2:1,e}nextCodePoint(){const e=ly(this.c,this.d,this.e);return this.e+=e>=Fi.UNICODE_SUPPLEMENTARY_PLANE_BEGIN?2:1,e}eol(){return this.e>=this.d}},sk=class{get offset(){return this.c.offset}constructor(e,t=0){this.c=new nk(e,t)}nextGraphemeLength(){const e=gy.getInstance(),t=this.c,i=t.offset;let r=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const n=t.offset,s=e.getGraphemeBreakType(t.nextCodePoint());if(py(r,s)){t.setOffset(n);break}r=s}return t.offset-i}prevGraphemeLength(){const e=gy.getInstance(),t=this.c,i=t.offset;let r=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const n=t.offset,s=e.getGraphemeBreakType(t.prevCodePoint());if(py(s,r)){t.setOffset(n);break}r=s}return i-t.offset}eol(){return this.c.eol()}};function uy(e,t){return new sk(e,t).nextGraphemeLength()}var Gg=void 0;function ok(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function hy(e){return Gg||(Gg=ok()),Gg.test(e)}var ak=/^[\t\n\r\x20-\x7E]*$/;function ck(e){return ak.test(e)}var lk=/[\u2028\u2029]/;function dy(e){return lk.test(e)}var uk=String.fromCharCode(L.UTF8_BOM);function hk(e){return!!(e&&e.length>0&&e.charCodeAt(0)===L.UTF8_BOM)}function fy(e,t=!1){return e?(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e):!1}function dk(e,t=1){if(t===0)return"";let i=-1;do i=e.indexOf(`
`,i+1),t--;while(t>0&&i>=0);return i===-1?e:(e[i-1]==="\r"&&i--,e.substr(0,i))}function py(e,t){return e===tt.Other?t!==tt.Extend&&t!==tt.SpacingMark:e===tt.CR&&t===tt.LF?!1:e===tt.Control||e===tt.CR||e===tt.LF||t===tt.Control||t===tt.CR||t===tt.LF?!0:!(e===tt.L&&(t===tt.L||t===tt.V||t===tt.LV||t===tt.LVT)||(e===tt.LV||e===tt.V)&&(t===tt.V||t===tt.T)||(e===tt.LVT||e===tt.T)&&t===tt.T||t===tt.Extend||t===tt.ZWJ||t===tt.SpacingMark||e===tt.Prepend||e===tt.ZWJ&&t===tt.Extended_Pictographic||e===tt.Regional_Indicator&&t===tt.Regional_Indicator)}var tt;(function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"})(tt||(tt={}));var gy=class ih{static{this.c=null}static getInstance(){return ih.c||(ih.c=new ih),ih.c}constructor(){this.d=fk()}getGraphemeBreakType(t){if(t<32)return t===L.LineFeed?tt.LF:t===L.CarriageReturn?tt.CR:tt.Control;if(t<127)return tt.Other;const i=this.d,r=i.length/3;let n=1;for(;n<=r;)if(t<i[3*n])n=2*n;else if(t>i[3*n+1])n=2*n+1;else return i[3*n+2];return tt.Other}};function fk(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var my;(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap"})(my||(my={}));var dC=class rh{static{this.c=new nr(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.d=new Jx({getCacheKey:JSON.stringify},t=>{function i(u){const h=new Map;for(let f=0;f<u.length;f+=2)h.set(u[f],u[f+1]);return h}function r(u,h){const f=new Map(u);for(const[g,m]of h)f.set(g,m);return f}function n(u,h){if(!u)return h;const f=new Map;for(const[g,m]of u)h.has(g)&&f.set(g,m);return f}const s=this.c.value;let o=t.filter(u=>!u.startsWith("_")&&u in s);o.length===0&&(o=["_default"]);let a;for(const u of o){const h=i(s[u]);a=n(a,h)}const c=i(s._common),l=r(c,a);return new rh(l)})}static getInstance(t){return rh.d.get(Array.from(t))}static{this.e=new nr(()=>Object.keys(rh.c.value).filter(t=>!t.startsWith("_")))}static getLocales(){return rh.e.value}constructor(t){this.f=t}isAmbiguous(t){return this.f.has(t)}containsAmbiguousCharacter(t){for(let i=0;i<t.length;i++){const r=t.codePointAt(i);if(typeof r=="number"&&this.isAmbiguous(r))return!0}return!1}getPrimaryConfusable(t){return this.f.get(t)}getConfusableCodePoints(){return new Set(this.f.keys())}},fC=class nh{static c(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this.d=void 0}static e(){return this.d||(this.d=new Set(nh.c())),this.d}static isInvisibleCharacter(t){return nh.e().has(t)}static containsInvisibleCharacter(t){for(let i=0;i<t.length;i++){const r=t.codePointAt(i);if(typeof r=="number"&&nh.isInvisibleCharacter(r))return!0}return!1}static get codePoints(){return nh.e()}};function Xe(e){return typeof e=="string"}function pk(e){return Array.isArray(e)&&e.every(t=>Xe(t))}function Qt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function gk(e){const t=Object.getPrototypeOf(Uint8Array);return typeof e=="object"&&e instanceof t}function Rs(e){return typeof e=="number"&&!isNaN(e)}function tl(e){return typeof e>"u"}function bo(e){return!Jt(e)}function Jt(e){return tl(e)||e===null}function vy(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function ma(e){if(Jt(e))throw new Error("Assertion Failed: argument is undefined or null");return e}var mk=Object.prototype.hasOwnProperty;function wy(e){if(!Qt(e))return!1;for(const t in e)if(mk.call(e,t))return!1;return!0}function vk(e){return typeof e=="function"}function wk(e,t){if(Xe(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(vk(t)){try{if(e instanceof t)return}catch{}if(!Jt(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Ts(e){return e===L.Slash||e===L.Backslash}function by(e){return e.replace(/[\\/]/g,et.sep)}function bk(e){return e.indexOf("/")===-1&&(e=by(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function yy(e,t=et.sep){if(!e)return"";const i=e.length,r=e.charCodeAt(0);if(Ts(r)){if(Ts(e.charCodeAt(1))&&!Ts(e.charCodeAt(2))){let s=3;const o=s;for(;s<i&&!Ts(e.charCodeAt(s));s++);if(o!==s&&!Ts(e.charCodeAt(s+1))){for(s+=1;s<i;s++)if(Ts(e.charCodeAt(s)))return e.slice(0,s+1).replace(/[\\/]/g,t)}}return t}else if(Ey(r)&&e.charCodeAt(1)===L.Colon)return Ts(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let n=e.indexOf("://");if(n!==-1){for(n+=3;n<i;n++)if(Ts(e.charCodeAt(n)))return e.slice(0,n+1)}return""}var yk=/[\\/:\*\?"<>\|]/g,Ek=/[/]/g,Sk=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function xk(e,t=sr){const i=t?yk:Ek;return!(!e||e.length===0||/^\s+$/.test(e)||(i.lastIndex=0,i.test(e))||t&&Sk.test(e)||e==="."||e===".."||t&&e[e.length-1]==="."||t&&e.length!==e.trim().length||e.length>255)}function Ah(e,t,i,r=Wr){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(i){if(!Vg(e,t))return!1;if(t.length===e.length)return!0;let s=t.length;return t.charAt(t.length-1)===r&&s--,e.charAt(s)===r}return t.charAt(t.length-1)!==r&&(t+=r),e.indexOf(t)===0}function Ey(e){return e>=L.A&&e<=L.Z||e>=L.a&&e<=L.z}function kk(e,t=sr){return t?Ey(e.charCodeAt(0))&&e.charCodeAt(1)===L.Colon:!1}var de;(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output"})(de||(de={}));function Qg(e,t){return E.isUri(e)?Ps(e.scheme,t):Vg(e,t+":")}function Dk(e,...t){return t.some(i=>Qg(e,i))}var $k="tkn",Ik=class{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(e){this.d=e}setDelegate(e){this.e=e}setServerRootPath(e,t){this.f=Pk(e,t)}getServerRootPath(){return this.f}get g(){return et.join(this.f,de.vscodeRemoteResource)}set(e,t,i){this.a[e]=t,this.b[e]=i}setConnectionToken(e,t){this.c[e]=t}getPreferredWebSchema(){return this.d}rewrite(e){if(this.e)try{return this.e(e)}catch(o){return mr(o),e}const t=e.authority;let i=this.a[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const r=this.b[t],n=this.c[t];let s=`path=${encodeURIComponent(e.path)}`;return typeof n=="string"&&(s+=`&${$k}=${encodeURIComponent(n)}`),E.from({scheme:Cg?this.d:de.vscodeRemoteResource,authority:`${i}:${r}`,path:this.g,query:s})}},Ak=new Ik;function Pk(e,t){return et.join(t??"/",`${e.quality??"oss"}-${e.commit??"dev"}`)}var Rk="vscode-app",Tk=class tg{static{this.a=Rk}asBrowserUri(t){const i=this.b(t);return this.uriToBrowserUri(i)}uriToBrowserUri(t){return t.scheme===de.vscodeRemote?Ak.rewrite(t):t.scheme===de.file&&(Sx||kx===`${de.vscodeFileResource}://${tg.a}`)?t.with({scheme:de.vscodeFileResource,authority:t.authority||tg.a,query:null,fragment:null}):t}asFileUri(t){const i=this.b(t);return this.uriToFileUri(i)}uriToFileUri(t){return t.scheme===de.vscodeFileResource?t.with({scheme:de.file,authority:t.authority!==tg.a?t.authority:null,query:null,fragment:null}):t}b(t,i){if(E.isUri(t))return t;if(globalThis._VSCODE_FILE_ROOT){const r=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(r))return E.joinPath(E.parse(r,!0),t);const n=Ug(r,t);return E.file(n)}return E.parse(i.toUrl(t))}},Lk=new Tk,Sy;(function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const i="vscode-coi";function r(s){let o;typeof s=="string"?o=new URL(s).searchParams:s instanceof URL?o=s.searchParams:E.isUri(s)&&(o=new URL(s.toString(!0)).searchParams);const a=o?.get(i);if(a)return t.get(a)}e.getHeadersFromQuery=r;function n(s,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";s instanceof URLSearchParams?s.set(i,c):s[i]=c}e.addSearchParam=n})(Sy||(Sy={}));function Vr(e){return Sh(e,!0)}var il=class{constructor(e){this.a=e}compare(e,t,i=!1){return e===t?0:wo(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this.a(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this.a(e)}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===de.file)return Ah(Vr(e),Vr(t),this.a(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(Dy(e.authority,t.authority))return Ah(e.path,t.path,this.a(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return E.joinPath(e,...t)}basenameOrAuthority(e){return Ls(e)||e.authority}basename(e){return et.basename(e.path)}extname(e){return et.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===de.file?t=E.file(da(Vr(e))).path:(t=et.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==L.Slash&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===de.file?t=E.file(ha(Vr(e))).path:t=et.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!Dy(e.authority,t.authority))return;if(e.scheme===de.file){const n=Yc(Vr(e),Vr(t));return sr?by(n):n}let i=e.path||"/";const r=t.path||"/";if(this.a(e)){let n=0;for(const s=Math.min(i.length,r.length);n<s&&!(i.charCodeAt(n)!==r.charCodeAt(n)&&i.charAt(n).toLowerCase()!==r.charAt(n).toLowerCase());n++);i=r.substr(0,n)+i.substr(n)}return et.relative(i,r)}resolvePath(e,t){if(e.scheme===de.file){const i=E.file(Ux(Vr(e),t));return e.with({authority:i.authority,path:i.path})}return t=bk(t),e.with({path:et.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Ps(e,t)}hasTrailingPathSeparator(e,t=Wr){if(e.scheme===de.file){const i=Vr(e);return i.length>yy(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===L.Slash&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Wr){return $y(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Wr){let i=!1;if(e.scheme===de.file){const r=Vr(e);i=r!==void 0&&r.length===yy(r).length&&r[r.length-1]===t}else{t="/";const r=e.path;i=r.length===1&&r.charCodeAt(r.length-1)===L.Slash}return!i&&!$y(e,t)?e.with({path:e.path+"/"}):e}},st=new il(()=>!1),_k=new il(e=>e.scheme===de.file?!ks:!0),Ck=new il(e=>!0),xy=st.isEqual.bind(st),pC=st.isEqualOrParent.bind(st),gC=st.getComparisonKey.bind(st),Jg=st.basenameOrAuthority.bind(st),Ls=st.basename.bind(st),mC=st.extname.bind(st),Xg=st.dirname.bind(st),Mi=st.joinPath.bind(st),vC=st.normalizePath.bind(st),ky=st.relativePath.bind(st),wC=st.resolvePath.bind(st),Nk=st.isAbsolutePath.bind(st),Dy=st.isEqualAuthority.bind(st),$y=st.hasTrailingPathSeparator.bind(st),bC=st.removeTrailingPathSeparator.bind(st),yC=st.addTrailingPathSeparator.bind(st),Iy;(function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(i){const r=new Map;i.path.substring(i.path.indexOf(";")+1,i.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&r.set(a,c)});const s=i.path.substring(0,i.path.indexOf(";"));return s&&r.set(e.META_DATA_MIME,s),r}e.parseMetaData=t})(Iy||(Iy={}));var Ok=Symbol("MicrotaskDelay");function _s(e){return!!e&&typeof e.then=="function"}function Fk(e){const t=new ri,i=e(t.token),r=new Promise((n,s)=>{const o=t.token.onCancellationRequested(()=>{o.dispose(),s(new Cn)});Promise.resolve(i).then(a=>{o.dispose(),t.dispose(),n(a)},a=>{o.dispose(),t.dispose(),s(a)})});return new class{cancel(){t.cancel(),t.dispose()}then(n,s){return r.then(n,s)}catch(n){return this.then(void 0,n)}finally(n){return r.finally(n)}}}function Mk(e,t,i){return new Promise((r,n)=>{const s=t.onCancellationRequested(()=>{s.dispose(),r(i)});e.then(r,n).finally(()=>s.dispose())})}function Uk(e,t){return new Promise((i,r)=>{const n=t.onCancellationRequested(()=>{n.dispose(),r(new Cn)});e.then(i,r).finally(()=>n.dispose())})}function _i(e){return new Promise((t,i)=>{const r=e();_s(r)?r.then(t,i):t(r)})}function Bk(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}}var Hk=class{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(e){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=e,!this.b){const t=()=>{if(this.b=null,this.f)return;const i=this.queue(this.d);return this.d=null,i};this.b=new Promise(i=>{this.a.then(t,t).then(i)})}return new Promise((t,i)=>{this.b.then(t,i)})}return this.a=e(),new Promise((t,i)=>{this.a.then(r=>{this.a=null,t(r)},r=>{this.a=null,i(r)})})}dispose(){this.f=!0}},jk=(e,t)=>{let i=!0;const r=setTimeout(()=>{i=!1,t()},e);return{isTriggered:()=>i,dispose:()=>{clearTimeout(r),i=!1}}},Wk=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},zk=class{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,t=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((r,n)=>{this.d=r,this.f=n}).then(()=>{if(this.b=null,this.d=null,this.g){const r=this.g;return this.g=null,r()}}));const i=()=>{this.a=null,this.d?.(null)};return this.a=t===Ok?Wk(i):jk(t,i),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new Cn),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}},Vk=class{constructor(e){this.a=new zk(e),this.b=new Hk}trigger(e,t){return this.a.trigger(()=>this.b.queue(e),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}},gn=class{constructor(){this.a=!1,this.b=new Promise((e,t)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}};function mn(e,t){return t?new Promise((i,r)=>{const n=setTimeout(()=>{s.dispose(),i()},e),s=t.onCancellationRequested(()=>{clearTimeout(n),s.dispose(),r(new Cn)})}):Fk(i=>mn(e,i))}function qk(e,t=0,i){const r=setTimeout(()=>{e(),i&&n.dispose()},t),n=Ce(()=>{clearTimeout(r),i?.deleteAndLeak(n)});return i?.add(n),n}var Gk=class{constructor(e){this.a=0,this.b=!1,this.f=e,this.g=[],this.d=0,this.h=new C}whenIdle(){return this.size>0?Gt.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(e){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((t,i)=>{this.g.push({factory:e,c:t,e:i}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const e=this.g.shift();this.d++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}},Qk=class extends Gk{constructor(){super(1)}},Jk=class{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const e=new wa;return this.b.add(e),e.p}g(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueSize(e,t=st){const i=t.getComparisonKey(e);return this.a.get(i)?.size??0}queueFor(e,t,i=st){const r=i.getComparisonKey(e);let n=this.a.get(r);if(!n){n=new Qk;const s=this.f++,o=Gt.once(n.onDrained)(()=>{n?.dispose(),this.a.delete(r),this.h(),this.d?.deleteAndDispose(s),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new Ag),this.d.set(s,o),this.a.set(r,n)}return n.queue(t)}h(){this.g()&&this.j()}j(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.j(),this.d?.dispose()}},Xk=class{constructor(){this.d=void 0,this.f=!1}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(e,t,i=globalThis){if(this.f)throw new kS("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const r=i.setInterval(()=>{e()},t);this.d=Ce(()=>{i.clearInterval(r),this.d=void 0})}dispose(){this.cancel(),this.f=!0}},va=class{constructor(e,t){this.b=-1,this.a=e,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}},Ay,Ph;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?Ph=(e,t)=>{Nb(()=>{if(i)return;const r=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,r-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:Ph=(e,t,i)=>{const r=e.requestIdleCallback(t,typeof i=="number"?{timeout:i}:void 0);let n=!1;return{dispose(){n||(n=!0,e.cancelIdleCallback(r))}}},Ay=e=>Ph(globalThis,e)})();var Zk=class{constructor(e,t){this.g=!1,this.d=()=>{try{this.j=t()}catch(i){this.l=i}finally{this.g=!0}},this.f=Ph(e,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}},Yk=class extends Zk{constructor(e){super(globalThis,e)}},yo;(function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"})(yo||(yo={}));var wa=class{get isRejected(){return this.d?.outcome===yo.Rejected}get isResolved(){return this.d?.outcome===yo.Resolved}get isSettled(){return!!this.d}get value(){return this.d?.outcome===yo.Resolved?this.d?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.a=e,this.b=t})}complete(e){return new Promise(t=>{this.a(e),this.d={outcome:yo.Resolved,value:e},t()})}error(e){return new Promise(t=>{this.b(e),this.d={outcome:yo.Rejected,value:e},t()})}cancel(){return this.error(new Cn)}},ba;(function(e){async function t(r){let n;const s=await Promise.all(r.map(o=>o.then(a=>a,a=>{n||(n=a)})));if(typeof n<"u")throw n;return s}e.settled=t;function i(r){return new Promise(async(n,s)=>{try{await r(n,s)}catch(o){s(o)}})}e.withAsyncBody=i})(ba||(ba={}));var qr;(function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"})(qr||(qr={}));var rl=class Dr{static fromArray(t){return new Dr(i=>{i.emitMany(t)})}static fromPromise(t){return new Dr(async i=>{i.emitMany(await t)})}static fromPromises(t){return new Dr(async i=>{await Promise.all(t.map(async r=>i.emitOne(await r)))})}static merge(t){return new Dr(async i=>{await Promise.all(t.map(async r=>{for await(const n of r)i.emitOne(n)}))})}static{this.EMPTY=Dr.fromArray([])}constructor(t,i){this.a=qr.Initial,this.b=[],this.d=null,this.f=i,this.g=new C,queueMicrotask(async()=>{const r={emitOne:n=>this.h(n),emitMany:n=>this.j(n),reject:n=>this.l(n)};try{await Promise.resolve(t(r)),this.k()}catch(n){this.l(n)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===qr.DoneError)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===qr.DoneOK)return{done:!0,value:void 0};await Gt.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,i){return new Dr(async r=>{for await(const n of t)r.emitOne(i(n))})}map(t){return Dr.map(this,t)}static filter(t,i){return new Dr(async r=>{for await(const n of t)i(n)&&r.emitOne(n)})}filter(t){return Dr.filter(this,t)}static coalesce(t){return Dr.filter(t,i=>!!i)}coalesce(){return Dr.coalesce(this)}static async toPromise(t){const i=[];for await(const r of t)i.push(r);return i}toPromise(){return Dr.toPromise(this)}h(t){this.a===qr.Initial&&(this.b.push(t),this.g.fire())}j(t){this.a===qr.Initial&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===qr.Initial&&(this.a=qr.DoneOK,this.g.fire())}l(t){this.a===qr.Initial&&(this.a=qr.DoneError,this.d=t,this.g.fire())}},Zg=class{constructor(e){this.a=new wa,this.b=new rl(r=>{if(t){r.reject(t);return}return i&&r.emitMany(i),this.d=n=>r.reject(n),this.f=n=>r.emitOne(n),this.a.p},e);let t,i;this.f=r=>{i||(i=[]),i.push(r)},this.d=r=>{t||(t=r)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(e){this.d(e),this.a.complete()}emitOne(e){this.f(e)}},EC=new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function Py(e,t,i,r){if(!e||r>200)return null;if(typeof e=="object"){if(e.$mid===Dt.Uri)return i?E.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof Qe)return null;for(const n in e)if(Object.hasOwnProperty.call(e,n)){const s=Py(e[n],t,i,r+1);s!==null&&(e[n]=s)}}return null}function nl(e,t){const i=Py(e,t,!1,0);return i===null?e:i}var Ry=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=!1,this.g=null,this.h=!1,this.i=null}get[Symbol.toStringTag](){return this.toString()}j(){return this.a||(this.a=new Promise((e,t)=>{this.b=e,this.d=t,this.f&&this.b(this.g),this.h&&this.d(this.i)})),this.a}resolveOk(e){this.f||this.h||(this.f=!0,this.g=e,this.a&&this.b(e))}resolveErr(e){this.f||this.h||(this.h=!0,this.i=e,this.a?this.d(e):mr(e))}then(e,t){return this.j().then(e,t)}catch(e){return this.j().then(void 0,e)}finally(e){return this.j().finally(e)}},Kk=class extends Ry{constructor(){super(),this.h=!0,this.i=new Cn}},Ty;function Yg(e,t){try{return JSON.stringify(e,t)}catch{return"null"}}var Kg="$$ref$$",eD={[Kg]:-1};function Ly(e,t=null,i=!1){const r=[];return{jsonString:(i?Yg:JSON.stringify)(e,(s,o)=>{if(typeof o>"u")return eD;if(typeof o=="object"){if(o instanceof Qe){const a=r.push(o)-1;return{[Kg]:a}}if(t)return t(s,o)}return o}),referencedBuffers:r}}function _y(e,t,i){return JSON.parse(e,(r,n)=>{if(n){const s=n[Kg];if(typeof s=="number")return t[s];if(i&&n.$mid===Dt.Uri)return i.transformIncoming(n)}return n})}function Cy(e,t){return JSON.stringify(e,t)}function tD(e){return e?(t,i)=>i&&i.$mid===Dt.Uri?e.transformOutgoing(i):i:null}var Ir;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(Ir||(Ir={}));var sl;(function(e){e[e.Responsive=0]="Responsive",e[e.Unresponsive=1]="Unresponsive"})(sl||(sl={}));var iD=()=>{},rD=Symbol.for("rpcProtocol"),nD=Symbol.for("rpcProxy"),sD=class qw extends Te{static{Ty=rD}static{this.a=3*1e3}constructor(t,i=null,r=null){super(),this[Ty]=!0,this.b=this.B(new C),this.onDidChangeResponsiveState=this.b.event,this.c=t,this.f=i,this.g=r,this.h=tD(this.g),this.j=!1,this.m=[],this.s=[];for(let n=0,s=Qb.count;n<s;n++)this.m[n]=null,this.s[n]=null;this.t=0,this.u=Object.create(null),this.w={},this.y=sl.Responsive,this.z=0,this.C=0,this.D=this.B(new va(()=>this.H(),1e3)),this.B(this.c.onMessage(n=>this.L(n)))}dispose(){this.j=!0,Object.keys(this.w).forEach(t=>{const i=this.w[t];delete this.w[t],i.resolveErr(hb())}),super.dispose()}drain(){return typeof this.c.drain=="function"?this.c.drain():Promise.resolve()}F(t){this.z===0&&(this.C=Date.now()+qw.a),this.z++,this.D.isScheduled()||this.D.schedule()}G(t){this.C=Date.now()+qw.a,this.z--,this.z===0&&this.D.cancel(),this.I(sl.Responsive)}H(){this.z!==0&&(Date.now()>this.C?this.I(sl.Unresponsive):this.D.schedule())}I(t){this.y!==t&&(this.y=t,this.b.fire(this.y))}get responsiveState(){return this.y}transformIncomingURIs(t){return this.g?nl(t,this.g):t}getProxy(t){const{nid:i,sid:r}=t;return this.s[i]||(this.s[i]=this.J(i,r)),this.s[i]}J(t,i){const r={get:(n,s)=>(typeof s=="string"&&!n[s]&&s.charCodeAt(0)===L.DollarSign&&(n[s]=(...o)=>this.U(t,s,o)),s===nD?i:n[s])};return new Proxy(Object.create(null),r)}set(t,i){return this.m[t.nid]=i,i}assertRegistered(t){for(let i=0,r=t.length;i<r;i++){const n=t[i];if(!this.m[n.nid])throw new Error(`Missing proxy instance ${n.sid}`)}}L(t){if(this.j)return;const i=t.byteLength,r=Xt.read(t,0),n=r.readUInt8(),s=r.readUInt32();switch(n){case $t.RequestJSONArgs:case $t.RequestJSONArgsWithCancellation:{let{rpcId:o,method:a,args:c}=Er.deserializeRequestJSONArgs(r);this.g&&(c=nl(c,this.g)),this.M(i,s,o,a,c,n===$t.RequestJSONArgsWithCancellation);break}case $t.RequestMixedArgs:case $t.RequestMixedArgsWithCancellation:{let{rpcId:o,method:a,args:c}=Er.deserializeRequestMixedArgs(r);this.g&&(c=nl(c,this.g)),this.M(i,s,o,a,c,n===$t.RequestMixedArgsWithCancellation);break}case $t.Acknowledged:{this.f?.logIncoming(i,s,Ir.LocalSide,"ack"),this.G(s);break}case $t.Cancel:{this.N(i,s);break}case $t.ReplyOKEmpty:{this.O(i,s,void 0);break}case $t.ReplyOKJSON:{let o=Er.deserializeReplyOKJSON(r);this.g&&(o=nl(o,this.g)),this.O(i,s,o);break}case $t.ReplyOKJSONWithBuffers:{const o=Er.deserializeReplyOKJSONWithBuffers(r,this.g);this.O(i,s,o);break}case $t.ReplyOKVSBuffer:{const o=Er.deserializeReplyOKVSBuffer(r);this.O(i,s,o);break}case $t.ReplyErrError:{let o=Er.deserializeReplyErrError(r);this.g&&(o=nl(o,this.g)),this.P(i,s,o);break}case $t.ReplyErrEmpty:{this.P(i,s,void 0);break}default:console.error("received unexpected message"),console.error(t)}}M(t,i,r,n,s,o){this.f?.logIncoming(t,i,Ir.OtherSide,`receiveRequest ${kh(r)}.${n}(`,s);const a=String(i);let c,l;if(o){const h=new ri;s.push(h.token),c=this.Q(r,n,s),l=()=>h.cancel()}else c=this.Q(r,n,s),l=iD;this.u[a]=l;const u=Er.serializeAcknowledged(i);this.f?.logOutgoing(u.byteLength,i,Ir.OtherSide,"ack"),this.c.send(u),c.then(h=>{delete this.u[a];const f=Er.serializeReplyOK(i,h,this.h);this.f?.logOutgoing(f.byteLength,i,Ir.OtherSide,"reply:",h),this.c.send(f)},h=>{delete this.u[a];const f=Er.serializeReplyErr(i,h);this.f?.logOutgoing(f.byteLength,i,Ir.OtherSide,"replyErr:",h),this.c.send(f)})}N(t,i){this.f?.logIncoming(t,i,Ir.OtherSide,"receiveCancel");const r=String(i);this.u[r]?.()}O(t,i,r){this.f?.logIncoming(t,i,Ir.LocalSide,"receiveReply:",r);const n=String(i);if(!this.w.hasOwnProperty(n))return;const s=this.w[n];delete this.w[n],s.resolveOk(r)}P(t,i,r){this.f?.logIncoming(t,i,Ir.LocalSide,"receiveReplyErr:",r);const n=String(i);if(!this.w.hasOwnProperty(n))return;const s=this.w[n];delete this.w[n];let o;r&&(r.$isError?(o=new Error,o.name=r.name,o.message=r.message,o.stack=r.stack):o=r),s.resolveErr(o)}Q(t,i,r){try{return Promise.resolve(this.S(t,i,r))}catch(n){return Promise.reject(n)}}S(t,i,r){const n=this.m[t];if(!n)throw new Error("Unknown actor "+kh(t));const s=n[i];if(typeof s!="function")throw new Error("Unknown method "+i+" on actor "+kh(t));return s.apply(n,r)}U(t,i,r){if(this.j)return new Kk;let n=null;if(r.length>0&&Wt.isCancellationToken(r[r.length-1])&&(n=r.pop()),n&&n.isCancellationRequested)return Promise.reject(hb());const s=Er.serializeRequestArguments(r,this.h),o=++this.t,a=String(o),c=new Ry,l=new He;n&&l.add(n.onCancellationRequested(()=>{const h=Er.serializeCancel(o);this.f?.logOutgoing(h.byteLength,o,Ir.LocalSide,"cancel"),this.c.send(Er.serializeCancel(o))})),this.w[a]=new oD(c,l),this.F(o);const u=Er.serializeRequest(o,t,i,s,!!n);return this.f?.logOutgoing(u.byteLength,o,Ir.LocalSide,`request: ${kh(t)}.${i}(`,r),this.c.send(u),c}},oD=class{constructor(e,t){this.a=e,this.b=t}resolveOk(e){this.a.resolveOk(e),this.b.dispose()}resolveErr(e){this.a.resolveErr(e),this.b.dispose()}},Xt=class Gw{static alloc(t,i,r){const n=new Gw(Qe.alloc(r+1+4),0);return n.writeUInt8(t),n.writeUInt32(i),n}static read(t,i){return new Gw(t,i)}get buffer(){return this.a}constructor(t,i){this.a=t,this.b=i}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(t){this.a.writeUInt8(t,this.b),this.b+=1}readUInt8(){const t=this.a.readUInt8(this.b);return this.b+=1,t}writeUInt32(t){this.a.writeUInt32BE(t,this.b),this.b+=4}readUInt32(){const t=this.a.readUInt32BE(this.b);return this.b+=4,t}static sizeShortString(t){return 1+t.byteLength}writeShortString(t){this.a.writeUInt8(t.byteLength,this.b),this.b+=1,this.a.set(t,this.b),this.b+=t.byteLength}readShortString(){const t=this.a.readUInt8(this.b);this.b+=1;const r=this.a.slice(this.b,this.b+t).toString();return this.b+=t,r}static sizeLongString(t){return 4+t.byteLength}writeLongString(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readLongString(){const t=this.a.readUInt32BE(this.b);this.b+=4;const r=this.a.slice(this.b,this.b+t).toString();return this.b+=t,r}writeBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}static sizeVSBuffer(t){return 4+t.byteLength}writeVSBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readVSBuffer(){const t=this.a.readUInt32BE(this.b);this.b+=4;const i=this.a.slice(this.b,this.b+t);return this.b+=t,i}static sizeMixedArray(t){let i=0;i+=1;for(let r=0,n=t.length;r<n;r++){const s=t[r];switch(i+=1,s.type){case ni.String:i+=this.sizeLongString(s.value);break;case ni.VSBuffer:i+=this.sizeVSBuffer(s.value);break;case ni.SerializedObjectWithBuffers:i+=this.sizeUInt32,i+=this.sizeLongString(s.value);for(let o=0;o<s.buffers.length;++o)i+=this.sizeVSBuffer(s.buffers[o]);break;case ni.Undefined:break}}return i}writeMixedArray(t){this.a.writeUInt8(t.length,this.b),this.b+=1;for(let i=0,r=t.length;i<r;i++){const n=t[i];switch(n.type){case ni.String:this.writeUInt8(ni.String),this.writeLongString(n.value);break;case ni.VSBuffer:this.writeUInt8(ni.VSBuffer),this.writeVSBuffer(n.value);break;case ni.SerializedObjectWithBuffers:this.writeUInt8(ni.SerializedObjectWithBuffers),this.writeUInt32(n.buffers.length),this.writeLongString(n.value);for(let s=0;s<n.buffers.length;++s)this.writeBuffer(n.buffers[s]);break;case ni.Undefined:this.writeUInt8(ni.Undefined);break}}}readMixedArray(){const t=this.a.readUInt8(this.b);this.b+=1;const i=new Array(t);for(let r=0;r<t;r++)switch(this.readUInt8()){case ni.String:i[r]=this.readLongString();break;case ni.VSBuffer:i[r]=this.readVSBuffer();break;case ni.SerializedObjectWithBuffers:{const s=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<s;++c)a.push(this.readVSBuffer());i[r]=new br(_y(o,a,null));break}case ni.Undefined:i[r]=void 0;break}return i}},ya;(function(e){e[e.Simple=0]="Simple",e[e.Mixed=1]="Mixed"})(ya||(ya={}));var Er=class{static a(e){for(let t=0,i=e.length;t<i;t++)if(e[t]instanceof Qe||e[t]instanceof br||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this.a(e)){const i=[];for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s instanceof Qe)i[r]={type:ni.VSBuffer,value:s};else if(typeof s>"u")i[r]={type:ni.Undefined};else if(s instanceof br){const{jsonString:o,referencedBuffers:a}=Ly(s.value,t);i[r]={type:ni.SerializedObjectWithBuffers,value:Qe.fromString(o),buffers:a}}else i[r]={type:ni.String,value:Qe.fromString(Cy(s,t))}}return{type:ya.Mixed,args:i}}return{type:ya.Simple,args:Cy(e,t)}}static serializeRequest(e,t,i,r,n){switch(r.type){case ya.Simple:return this.b(e,t,i,r.args,n);case ya.Mixed:return this.c(e,t,i,r.args,n)}}static b(e,t,i,r,n){const s=Qe.fromString(i),o=Qe.fromString(r);let a=0;a+=Xt.sizeUInt8(),a+=Xt.sizeShortString(s),a+=Xt.sizeLongString(o);const c=Xt.alloc(n?$t.RequestJSONArgsWithCancellation:$t.RequestJSONArgs,e,a);return c.writeUInt8(t),c.writeShortString(s),c.writeLongString(o),c.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readLongString();return{rpcId:t,method:i,args:JSON.parse(r)}}static c(e,t,i,r,n){const s=Qe.fromString(i);let o=0;o+=Xt.sizeUInt8(),o+=Xt.sizeShortString(s),o+=Xt.sizeMixedArray(r);const a=Xt.alloc(n?$t.RequestMixedArgsWithCancellation:$t.RequestMixedArgs,e,o);return a.writeUInt8(t),a.writeShortString(s),a.writeMixedArray(r),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readMixedArray(),n=new Array(r.length);for(let s=0,o=r.length;s<o;s++){const a=r[s];typeof a=="string"?n[s]=JSON.parse(a):n[s]=a}return{rpcId:t,method:i,args:n}}static serializeAcknowledged(e){return Xt.alloc($t.Acknowledged,e,0).buffer}static serializeCancel(e){return Xt.alloc($t.Cancel,e,0).buffer}static serializeReplyOK(e,t,i){if(typeof t>"u")return this.d(e);if(t instanceof Qe)return this.e(e,t);if(t instanceof br){const{jsonString:r,referencedBuffers:n}=Ly(t.value,i,!0);return this.g(e,r,n)}else return this.f(e,Yg(t,i))}static d(e){return Xt.alloc($t.ReplyOKEmpty,e,0).buffer}static e(e,t){let i=0;i+=Xt.sizeVSBuffer(t);const r=Xt.alloc($t.ReplyOKVSBuffer,e,i);return r.writeVSBuffer(t),r.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static f(e,t){const i=Qe.fromString(t);let r=0;r+=Xt.sizeLongString(i);const n=Xt.alloc($t.ReplyOKJSON,e,r);return n.writeLongString(i),n.buffer}static g(e,t,i){const r=Qe.fromString(t);let n=0;n+=Xt.sizeUInt32,n+=Xt.sizeLongString(r);for(const o of i)n+=Xt.sizeVSBuffer(o);const s=Xt.alloc($t.ReplyOKJSONWithBuffers,e,n);s.writeUInt32(i.length),s.writeLongString(r);for(const o of i)s.writeBuffer(o);return s.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const i=e.readUInt32(),r=e.readLongString(),n=[];for(let s=0;s<i;++s)n.push(e.readVSBuffer());return new br(_y(r,n,t))}static serializeReplyErr(e,t){const i=t?Yg(Bc(t),null):void 0;if(typeof i!="string")return this.h(e);const r=Qe.fromString(i);let n=0;n+=Xt.sizeLongString(r);const s=Xt.alloc($t.ReplyErrError,e,n);return s.writeLongString(r),s.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static h(e){return Xt.alloc($t.ReplyErrEmpty,e,0).buffer}},$t;(function(e){e[e.RequestJSONArgs=1]="RequestJSONArgs",e[e.RequestJSONArgsWithCancellation=2]="RequestJSONArgsWithCancellation",e[e.RequestMixedArgs=3]="RequestMixedArgs",e[e.RequestMixedArgsWithCancellation=4]="RequestMixedArgsWithCancellation",e[e.Acknowledged=5]="Acknowledged",e[e.Cancel=6]="Cancel",e[e.ReplyOKEmpty=7]="ReplyOKEmpty",e[e.ReplyOKVSBuffer=8]="ReplyOKVSBuffer",e[e.ReplyOKJSON=9]="ReplyOKJSON",e[e.ReplyOKJSONWithBuffers=10]="ReplyOKJSONWithBuffers",e[e.ReplyErrError=11]="ReplyErrError",e[e.ReplyErrEmpty=12]="ReplyErrEmpty"})($t||($t={}));var ni;(function(e){e[e.String=1]="String",e[e.VSBuffer=2]="VSBuffer",e[e.SerializedObjectWithBuffers=3]="SerializedObjectWithBuffers",e[e.Undefined=4]="Undefined"})(ni||(ni={}));var aD=globalThis._VSCODE_NLS_LANGUAGE==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function Rh(e,t){let i;return t.length===0?i=e:i=e.replace(/\{(\d+)\}/g,(r,n)=>{const s=n[0],o=t[s];let a=r;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),aD&&(i="\uFF3B"+i.replace(/[aouei]/g,"$&$&")+"\uFF3D"),i}function d(e,t,...i){return Rh(typeof e=="number"?Ny(e,t):t,i)}function Ny(e,t){const i=globalThis._VSCODE_NLS_MESSAGES?.[e];if(typeof i!="string"){if(typeof t=="string")return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return i}function em(e,t,...i){let r;typeof e=="number"?r=Ny(e,t):r=t;const n=Rh(r,i);return{value:n,original:t===r?n:Rh(t,i)}}function tm(e,t){return t&&(e.stack||e.stacktrace)?d(105,null,Fy(e),Oy(e.stack)||Oy(e.stacktrace)):Fy(e)}function Oy(e){return Array.isArray(e)?e.join(`
`):e}function Fy(e){return e.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code=="string"&&typeof e.errno=="number"&&typeof e.syscall=="string"?d(106,null,e.message):e.message||d(107,null)}function Eo(e=null,t=!1){if(!e)return d(108,null);if(Array.isArray(e)){const i=ci(e),r=Eo(i[0],t);return i.length>1?d(109,null,r,i.length):r}if(Xe(e))return e;if(e.detail){const i=e.detail;if(i.error)return tm(i.error,t);if(i.exception)return tm(i.exception,t)}return e.stack?tm(e,t):e.message?e.message:d(110,null)}function ol(e){return im(e,0)}function im(e,t){switch(typeof e){case"object":return e===null?Hn(349,t):Array.isArray(e)?lD(e,t):uD(e,t);case"string":return My(e,t);case"boolean":return cD(e,t);case"number":return Hn(e,t);case"undefined":return Hn(937,t);default:return Hn(617,t)}}function Hn(e,t){return(t<<5)-t+e|0}function cD(e,t){return Hn(e?433:863,t)}function My(e,t){t=Hn(149417,t);for(let i=0,r=e.length;i<r;i++)t=Hn(e.charCodeAt(i),t);return t}function lD(e,t){return t=Hn(104579,t),e.reduce((i,r)=>im(r,i),t)}function uD(e,t){return t=Hn(181387,t),Object.keys(e).sort().reduce((i,r)=>(i=My(r,i),im(e[r],i)),t)}var Ar;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(Ar||(Ar={}));function rm(e,t,i=32){const r=i-t,n=~((1<<r)-1);return(e<<t|(n&e)>>>r)>>>0}function Uy(e,t=0,i=e.byteLength,r=0){for(let n=0;n<i;n++)e[t+n]=r}function hD(e,t,i="0"){for(;e.length<t;)e=i+e;return e}function al(e,t=32){return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map(i=>i.toString(16).padStart(2,"0")).join(""):hD((e>>>0).toString(16),t/4)}var SC=class S8{static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(Ar.BLOCK_SIZE+3),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(t){const i=t.length;if(i===0)return;const r=this.p;let n=this.r,s=this.u,o,a;for(s!==0?(o=s,a=-1,s=0):(o=t.charCodeAt(0),a=0);;){let c=o;if($h(o))if(a+1<i){const l=t.charCodeAt(a+1);Ih(l)?(a++,c=qg(o,l)):c=Ar.UNICODE_REPLACEMENT}else{s=o;break}else Ih(o)&&(c=Ar.UNICODE_REPLACEMENT);if(n=this.w(r,n,c),a++,a<i)o=t.charCodeAt(a);else break}this.r=n,this.u=s}w(t,i,r){return r<128?t[i++]=r:r<2048?(t[i++]=192|(r&1984)>>>6,t[i++]=128|(r&63)>>>0):r<65536?(t[i++]=224|(r&61440)>>>12,t[i++]=128|(r&4032)>>>6,t[i++]=128|(r&63)>>>0):(t[i++]=240|(r&1835008)>>>18,t[i++]=128|(r&258048)>>>12,t[i++]=128|(r&4032)>>>6,t[i++]=128|(r&63)>>>0),i>=Ar.BLOCK_SIZE&&(this.y(),i-=Ar.BLOCK_SIZE,this.t+=Ar.BLOCK_SIZE,t[0]=t[Ar.BLOCK_SIZE+0],t[1]=t[Ar.BLOCK_SIZE+1],t[2]=t[Ar.BLOCK_SIZE+2]),i}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,Ar.UNICODE_REPLACEMENT)),this.t+=this.r,this.x()),al(this.h)+al(this.l)+al(this.m)+al(this.n)+al(this.o)}x(){this.p[this.r++]=128,Uy(this.p,this.r),this.r>56&&(this.y(),Uy(this.p));const t=8*this.t;this.q.setUint32(56,Math.floor(t/4294967296),!1),this.q.setUint32(60,t%4294967296,!1),this.y()}y(){const t=S8.g,i=this.q;for(let h=0;h<64;h+=4)t.setUint32(h,i.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,rm(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let r=this.h,n=this.l,s=this.m,o=this.n,a=this.o,c,l,u;for(let h=0;h<80;h++)h<20?(c=n&s|~n&o,l=1518500249):h<40?(c=n^s^o,l=1859775393):h<60?(c=n&s|n&o|s&o,l=2400959708):(c=n^s^o,l=3395469782),u=rm(r,5)+c+a+l+t.getUint32(h*4,!1)&4294967295,a=o,o=s,s=rm(n,30),n=r,r=u;this.h=this.h+r&4294967295,this.l=this.l+n&4294967295,this.m=this.m+s&4294967295,this.n=this.n+o&4294967295,this.o=this.o+a&4294967295}},Y;(function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"})(Y||(Y={}));function nm(...e){switch(e.length){case 1:return d(1691,null,e[0]);case 2:return d(1692,null,e[0],e[1]);case 3:return d(1693,null,e[0],e[1],e[2]);default:return}}var dD=d(1694,null),fD=d(1695,null),cl=class Qw{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case Y.LParen:return"(";case Y.RParen:return")";case Y.Neg:return"!";case Y.Eq:return t.isTripleEq?"===":"==";case Y.NotEq:return t.isTripleEq?"!==":"!=";case Y.Lt:return"<";case Y.LtEq:return"<=";case Y.Gt:return">=";case Y.GtEq:return">=";case Y.RegexOp:return"=~";case Y.RegexStr:return t.lexeme;case Y.True:return"true";case Y.False:return"false";case Y.In:return"in";case Y.Not:return"not";case Y.And:return"&&";case Y.Or:return"||";case Y.Str:return t.lexeme;case Y.QuotedStr:return t.lexeme;case Y.Error:return t.lexeme;case Y.EOF:return"EOF";default:throw Eg(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(t=>t.charCodeAt(0)))}static{this.b=new Map([["not",Y.Not],["in",Y.In],["false",Y.False],["true",Y.True]])}get errors(){return this.g}reset(t){return this.c=t,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case L.OpenParen:this.k(Y.LParen);break;case L.CloseParen:this.k(Y.RParen);break;case L.ExclamationMark:if(this.h(L.Equals)){const i=this.h(L.Equals);this.f.push({type:Y.NotEq,offset:this.d,isTripleEq:i})}else this.k(Y.Neg);break;case L.SingleQuote:this.o();break;case L.Slash:this.q();break;case L.Equals:if(this.h(L.Equals)){const i=this.h(L.Equals);this.f.push({type:Y.Eq,offset:this.d,isTripleEq:i})}else this.h(L.Tilde)?this.k(Y.RegexOp):this.l(nm("==","=~"));break;case L.LessThan:this.k(this.h(L.Equals)?Y.LtEq:Y.Lt);break;case L.GreaterThan:this.k(this.h(L.Equals)?Y.GtEq:Y.Gt);break;case L.Ampersand:this.h(L.Ampersand)?this.k(Y.And):this.l(nm("&&"));break;case L.Pipe:this.h(L.Pipe)?this.k(Y.Or):this.l(nm("||"));break;case L.Space:case L.CarriageReturn:case L.Tab:case L.LineFeed:case L.NoBreakSpace:break;default:this.n()}return this.d=this.e,this.k(Y.EOF),Array.from(this.f)}h(t){return this.r()||this.c.charCodeAt(this.e)!==t?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?L.Null:this.c.charCodeAt(this.e)}k(t){this.f.push({type:t,offset:this.d})}l(t){const i=this.d,r=this.c.substring(this.d,this.e),n={type:Y.Error,offset:this.d,lexeme:r};this.g.push({offset:i,lexeme:r,additionalInfo:t}),this.f.push(n)}n(){this.m.lastIndex=this.d;const t=this.m.exec(this.c);if(t){this.e=this.d+t[0].length;const i=this.c.substring(this.d,this.e),r=Qw.b.get(i);r?this.k(r):this.f.push({type:Y.Str,lexeme:i,offset:this.d})}}o(){for(;this.j()!==L.SingleQuote&&!this.r();)this.i();if(this.r()){this.l(dD);return}this.i(),this.f.push({type:Y.QuotedStr,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let t=this.e,i=!1,r=!1;for(;;){if(t>=this.c.length){this.e=t,this.l(fD);return}const s=this.c.charCodeAt(t);if(i)i=!1;else if(s===L.Slash&&!r){t++;break}else s===L.OpenSquareBracket?r=!0:s===L.Backslash?i=!0:s===L.CloseSquareBracket&&(r=!1);t++}for(;t<this.c.length&&Qw.a.has(this.c.charCodeAt(t));)t++;this.e=t;const n=this.c.substring(this.d,this.e);this.f.push({type:Y.RegexStr,lexeme:n,offset:this.d})}r(){return this.e>=this.c.length}},Gr;(function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(i){return i[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(Gr||(Gr={}));var Th=K("instantiationService");function pD(e,t,i){t[Gr.DI_TARGET]===t?t[Gr.DI_DEPENDENCIES].push({id:e,index:i}):(t[Gr.DI_DEPENDENCIES]=[{id:e,index:i}],t[Gr.DI_TARGET]=t)}function K(e){if(Gr.serviceIds.has(e))return Gr.serviceIds.get(e);const t=function(i,r,n){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");pD(t,i,n)};return t.toString=()=>e,Gr.serviceIds.set(e,t),t}function xC(e){return e}var bi=new Map;bi.set("false",!1),bi.set("true",!0),bi.set("isMac",jr),bi.set("isLinux",ks),bi.set("isWindows",sr),bi.set("isWeb",Cg),bi.set("isMacNative",jr&&!Cg),bi.set("isEdge",Px),bi.set("isFirefox",Ix),bi.set("isChrome",Ub),bi.set("isSafari",Ax);var gD=Object.prototype.hasOwnProperty,Ft;(function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"})(Ft||(Ft={}));var mD={regexParsingWithErrorRecovery:!0},vD=d(1671,null),wD=d(1672,null),bD=d(1673,null),By=d(1674,null),yD=d(1675,null),ED=d(1676,null),SD=d(1677,null),xD=d(1678,null),Hy=class sh{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=mD){this.k=t,this.d=new cl,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:vD,offset:0,lexeme:"",additionalInfo:wD});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const i=this.l();if(!this.E()){const r=this.D(),n=r.type===Y.Str?ED:void 0;throw this.h.push({message:yD,offset:r.offset,lexeme:cl.getLexeme(r),additionalInfo:n}),sh.c}return i}catch(i){if(i!==sh.c)throw i;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(Y.Or);){const i=this.o();t.push(i)}return t.length===1?t[0]:yi.or(...t)}o(){const t=[this.s()];for(;this.y(Y.And);){const i=this.s();t.push(i)}return t.length===1?t[0]:yi.and(...t)}s(){if(this.y(Y.Neg)){const t=this.D();switch(t.type){case Y.True:return this.z(),qi.INSTANCE;case Y.False:return this.z(),lr.INSTANCE;case Y.LParen:{this.z();const i=this.l();return this.A(Y.RParen,By),i?.negate()}case Y.Str:return this.z(),hl.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case Y.True:return this.z(),yi.true();case Y.False:return this.z(),yi.false();case Y.LParen:{this.z();const i=this.l();return this.A(Y.RParen,By),i}case Y.Str:{const i=t.lexeme;if(this.z(),this.y(Y.RegexOp)){const n=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),n.type!==Y.RegexStr)throw this.B("REGEX",n);const s=n.lexeme,o=s.lastIndexOf("/"),a=o===s.length-1?void 0:this.w(s.substring(o+1));let c;try{c=new RegExp(s.substring(1,o),a)}catch{throw this.B("REGEX",n)}return hm.create(i,c)}switch(n.type){case Y.RegexStr:case Y.Error:{const s=[n.lexeme];this.z();let o=this.D(),a=0;for(let f=0;f<n.lexeme.length;f++)n.lexeme.charCodeAt(f)===L.OpenParen?a++:n.lexeme.charCodeAt(f)===L.CloseParen&&a--;for(;!this.E()&&o.type!==Y.And&&o.type!==Y.Or;){switch(o.type){case Y.LParen:a++;break;case Y.RParen:a--;break;case Y.RegexStr:case Y.QuotedStr:for(let f=0;f<o.lexeme.length;f++)o.lexeme.charCodeAt(f)===L.OpenParen?a++:n.lexeme.charCodeAt(f)===L.CloseParen&&a--}if(a<0)break;s.push(cl.getLexeme(o)),this.z(),o=this.D()}const c=s.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this.w(c.substring(l+1));let h;try{h=new RegExp(c.substring(1,l),u)}catch{throw this.B("REGEX",n)}return yi.regex(i,h)}case Y.QuotedStr:{const s=n.lexeme;this.z();let o=null;if(!Kc(s)){const a=s.indexOf("/"),c=s.lastIndexOf("/");if(a!==c&&a>=0){const l=s.slice(a+1,c),u=s[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this.B("REGEX",n)}}}if(o===null)throw this.B("REGEX",n);return hm.create(i,o)}default:throw this.B("REGEX",this.D())}}if(this.y(Y.Not)){this.A(Y.In,bD);const n=this.u();return yi.notIn(i,n)}switch(this.D().type){case Y.Eq:{this.z();const n=this.u();if(this.x().type===Y.QuotedStr)return yi.equals(i,n);switch(n){case"true":return yi.has(i);case"false":return yi.not(i);default:return yi.equals(i,n)}}case Y.NotEq:{this.z();const n=this.u();if(this.x().type===Y.QuotedStr)return yi.notEquals(i,n);switch(n){case"true":return yi.not(i);case"false":return yi.has(i);default:return yi.notEquals(i,n)}}case Y.Lt:return this.z(),lm.create(i,this.u());case Y.LtEq:return this.z(),um.create(i,this.u());case Y.Gt:return this.z(),am.create(i,this.u());case Y.GtEq:return this.z(),cm.create(i,this.u());case Y.In:return this.z(),yi.in(i,this.u());default:return yi.has(i)}}case Y.EOF:throw this.h.push({message:SD,offset:t.offset,lexeme:"",additionalInfo:xD}),sh.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case Y.Str:case Y.QuotedStr:return this.z(),t.lexeme;case Y.True:return this.z(),"true";case Y.False:return this.z(),"false";case Y.In:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,i){if(this.C(t))return this.z();throw this.B(i,this.D())}B(t,i,r){const n=d(1679,null,t,cl.getLexeme(i)),s=i.offset,o=cl.getLexeme(i);return this.h.push({message:n,offset:s,lexeme:o,additionalInfo:r}),sh.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===Y.EOF}},yi=class{static false(){return qi.INSTANCE}static true(){return lr.INSTANCE}static has(e){return ul.create(e)}static equals(e,t){return sm.create(e,t)}static notEquals(e,t){return om.create(e,t)}static regex(e,t){return hm.create(e,t)}static in(e,t){return jy.create(e,t)}static notIn(e,t){return Wy.create(e,t)}static not(e){return hl.create(e)}static and(...e){return Vy.create(e,null,!0)}static or(...e){return dm.create(e,null,!0)}static greater(e,t){return am.create(e,t)}static greaterEquals(e,t){return cm.create(e,t)}static smaller(e,t){return lm.create(e,t)}static smallerEquals(e,t){return um.create(e,t)}static{this.c=new Hy({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this.c.parse(e)}};function kD(e){const t=new Hy({regexParsingWithErrorRecovery:!1});return e.map(i=>(t.parse(i),t.lexingErrors.length>0?t.lexingErrors.map(r=>({errorMessage:r.additionalInfo?d(1680,null,r.additionalInfo):d(1681,null),offset:r.offset,length:r.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(r=>({errorMessage:r.additionalInfo?`${r.message}. ${r.additionalInfo}`:r.message,offset:r.offset,length:r.lexeme.length})):[]))}function ll(e,t){return e.cmp(t)}var qi=class x8{static{this.INSTANCE=new x8}constructor(){this.type=Ft.False}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return lr.INSTANCE}},lr=class k8{static{this.INSTANCE=new k8}constructor(){this.type=Ft.True}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return qi.INSTANCE}},ul=class D8{static create(t,i=null){const r=bi.get(t);return typeof r=="boolean"?r?lr.INSTANCE:qi.INSTANCE:new D8(t,i)}constructor(t,i){this.key=t,this.c=i,this.type=Ft.Defined}cmp(t){return t.type!==this.type?this.type-t.type:qy(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=bi.get(this.key);return typeof t=="boolean"?t?lr.INSTANCE:qi.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=hl.create(this.key,this)),this.c}},sm=class $8{static create(t,i,r=null){if(typeof i=="boolean")return i?ul.create(t,r):hl.create(t,r);const n=bi.get(t);return typeof n=="boolean"?i===(n?"true":"false")?lr.INSTANCE:qi.INSTANCE:new $8(t,i,r)}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=Ft.Equals}cmp(t){return t.type!==this.type?this.type-t.type:So(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=bi.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?lr.INSTANCE:qi.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=om.create(this.c,this.d,this)),this.f}},jy=class I8{static create(t,i){return new I8(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=Ft.In,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:So(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.f),r=t.getValue(this.d);return Array.isArray(i)?i.includes(r):typeof r=="string"&&typeof i=="object"&&i!==null?gD.call(i,r):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=Wy.create(this.d,this.f)),this.c}},Wy=class A8{static create(t,i){return new A8(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=Ft.NotIn,this.c=jy.create(t,i)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}},om=class P8{static create(t,i,r=null){if(typeof i=="boolean")return i?hl.create(t,r):ul.create(t,r);const n=bi.get(t);return typeof n=="boolean"?i===(n?"true":"false")?qi.INSTANCE:lr.INSTANCE:new P8(t,i,r)}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=Ft.NotEquals}cmp(t){return t.type!==this.type?this.type-t.type:So(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=bi.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?qi.INSTANCE:lr.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=sm.create(this.c,this.d,this)),this.f}},hl=class R8{static create(t,i=null){const r=bi.get(t);return typeof r=="boolean"?r?qi.INSTANCE:lr.INSTANCE:new R8(t,i)}constructor(t,i){this.c=t,this.d=i,this.type=Ft.Not}cmp(t){return t.type!==this.type?this.type-t.type:qy(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=bi.get(this.c);return typeof t=="boolean"?t?qi.INSTANCE:lr.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=ul.create(this.c,this)),this.d}};function Lh(e,t){if(typeof e=="string"){const i=parseFloat(e);isNaN(i)||(e=i)}return typeof e=="string"||typeof e=="number"?t(e):qi.INSTANCE}var am=class T8{static create(t,i,r=null){return Lh(i,n=>new T8(t,n,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=Ft.Greater}cmp(t){return t.type!==this.type?this.type-t.type:So(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=um.create(this.c,this.d,this)),this.f}},cm=class L8{static create(t,i,r=null){return Lh(i,n=>new L8(t,n,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=Ft.GreaterEquals}cmp(t){return t.type!==this.type?this.type-t.type:So(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=lm.create(this.c,this.d,this)),this.f}},lm=class _8{static create(t,i,r=null){return Lh(i,n=>new _8(t,n,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=Ft.Smaller}cmp(t){return t.type!==this.type?this.type-t.type:So(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=cm.create(this.c,this.d,this)),this.f}},um=class C8{static create(t,i,r=null){return Lh(i,n=>new C8(t,n,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=Ft.SmallerEquals}cmp(t){return t.type!==this.type?this.type-t.type:So(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=am.create(this.c,this.d,this)),this.f}},hm=class N8{static create(t,i){return new N8(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=Ft.Regex,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const i=this.f?this.f.source:"",r=t.f?t.f.source:"";return i<r?-1:i>r?1:0}equals(t){if(t.type===this.type){const i=this.f?this.f.source:"",r=t.f?t.f.source:"";return this.d===t.d&&i===r}return!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.d);return this.f?this.f.test(i):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=DD.create(this)),this.c}},DD=class Jw{static create(t){return new Jw(t)}constructor(t){this.c=t,this.type=Ft.NotRegex}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new Jw(this.c.map(t))}negate(){return this.c}};function zy(e){let t=null;for(let i=0,r=e.length;i<r;i++){const n=e[i].substituteConstants();if(e[i]!==n&&t===null){t=[];for(let s=0;s<i;s++)t[s]=e[s]}t!==null&&(t[i]=n)}return t===null?e:t}var Vy=class Cc{static create(t,i,r){return Cc.d(t,i,r)}constructor(t,i){this.expr=t,this.c=i,this.type=Ft.And}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,r=this.expr.length;i<r;i++){const n=ll(this.expr[i],t.expr[i]);if(n!==0)return n}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=zy(this.expr);return t===this.expr?this:Cc.create(t,this.c,!1)}evaluate(t){for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].evaluate(t))return!1;return!0}static d(t,i,r){const n=[];let s=!1;for(const o of t)if(o){if(o.type===Ft.True){s=!0;continue}if(o.type===Ft.False)return qi.INSTANCE;if(o.type===Ft.And){n.push(...o.expr);continue}n.push(o)}if(n.length===0&&s)return lr.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(ll);for(let o=1;o<n.length;o++)n[o-1].equals(n[o])&&(n.splice(o,1),o--);if(n.length===1)return n[0];for(;n.length>1;){const o=n[n.length-1];if(o.type!==Ft.Or)break;n.pop();const a=n.pop(),c=n.length===0,l=dm.create(o.expr.map(u=>Cc.create([u,a],null,r)),null,c);l&&(n.push(l),n.sort(ll))}if(n.length===1)return n[0];if(r){for(let o=0;o<n.length;o++)for(let a=o+1;a<n.length;a++)if(n[o].negate().equals(n[a]))return qi.INSTANCE;if(n.length===1)return n[0]}return new Cc(n,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new Cc(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());this.c=dm.create(t,this,!0)}return this.c}},dm=class na{static create(t,i,r){return na.d(t,i,r)}constructor(t,i){this.expr=t,this.c=i,this.type=Ft.Or}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,r=this.expr.length;i<r;i++){const n=ll(this.expr[i],t.expr[i]);if(n!==0)return n}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=zy(this.expr);return t===this.expr?this:na.create(t,this.c,!1)}evaluate(t){for(let i=0,r=this.expr.length;i<r;i++)if(this.expr[i].evaluate(t))return!0;return!1}static d(t,i,r){let n=[],s=!1;if(t){for(let o=0,a=t.length;o<a;o++){const c=t[o];if(c){if(c.type===Ft.False){s=!0;continue}if(c.type===Ft.True)return lr.INSTANCE;if(c.type===Ft.Or){n=n.concat(c.expr);continue}n.push(c)}}if(n.length===0&&s)return qi.INSTANCE;n.sort(ll)}if(n.length!==0){if(n.length===1)return n[0];for(let o=1;o<n.length;o++)n[o-1].equals(n[o])&&(n.splice(o,1),o--);if(n.length===1)return n[0];if(r){for(let o=0;o<n.length;o++)for(let a=o+1;a<n.length;a++)if(n[o].negate().equals(n[a]))return lr.INSTANCE;if(n.length===1)return n[0]}return new na(n,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new na(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());for(;t.length>1;){const i=t.shift(),r=t.shift(),n=[];for(const s of Gy(i))for(const o of Gy(r))n.push(Vy.create([s,o],null,!1));t.unshift(na.create(n,null,!1))}this.c=na.create(t,this,!0)}return this.c}},X=class ig extends ul{static{this.d=[]}static all(){return ig.d.values()}constructor(t,i,r){super(t,null),this.f=i,typeof r=="object"?ig.d.push({...r,key:t}):r!==!0&&ig.d.push({key:t,description:r,type:i!=null?typeof i:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return sm.create(this.key,t)}notEqualsTo(t){return om.create(this.key,t)}},$D=K("contextKeyService");function qy(e,t){return e<t?-1:e>t?1:0}function So(e,t,i,r){return e<i?-1:e>i?1:t<r?-1:t>r?1:0}function Gy(e){return e.type===Ft.Or?e.expr:[e]}var ut=K("logService"),dl=K("loggerService");function ID(e){return Rs(e)}var it;(function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"})(it||(it={}));var AD=it.Info;function PD(e,t,i){switch(t){case it.Trace:e.trace(i);break;case it.Debug:e.debug(i);break;case it.Info:e.info(i);break;case it.Warning:e.warn(i);break;case it.Error:e.error(i);break;case it.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function Ea(e,t=!1){let i="";for(let r=0;r<e.length;r++){let n=e[r];if(n instanceof Error&&(n=Eo(n,t)),typeof n=="object")try{n=JSON.stringify(n)}catch{}i+=(r>0?" ":"")+n}return i}var Qy=class extends Te{constructor(){super(...arguments),this.b=AD,this.c=this.B(new C),this.onDidChangeLogLevel=this.c.event}setLevel(e){this.b!==e&&(this.b=e,this.c.fire(this.b))}getLevel(){return this.b}f(e){return this.b!==it.Off&&this.b<=e}},Jy=class extends Qy{constructor(e){super(),this.h=e}f(e){return this.h||super.f(e)}trace(e,...t){this.f(it.Trace)&&this.g(it.Trace,Ea([e,...t],!0))}debug(e,...t){this.f(it.Debug)&&this.g(it.Debug,Ea([e,...t]))}info(e,...t){this.f(it.Info)&&this.g(it.Info,Ea([e,...t]))}warn(e,...t){this.f(it.Warning)&&this.g(it.Warning,Ea([e,...t]))}error(e,...t){if(this.f(it.Error))if(e instanceof Error){const i=Array.prototype.slice.call(arguments);i[0]=e.stack,this.g(it.Error,Ea(i))}else this.g(it.Error,Ea([e,...t]))}flush(){}},RD=class extends Qy{constructor(e){super(),this.g=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.g)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.g)i.trace(e,...t)}debug(e,...t){for(const i of this.g)i.debug(e,...t)}info(e,...t){for(const i of this.g)i.info(e,...t)}warn(e,...t){for(const i of this.g)i.warn(e,...t)}error(e,...t){for(const i of this.g)i.error(e,...t)}flush(){for(const e of this.g)e.flush()}dispose(){for(const e of this.g)e.dispose();super.dispose()}},TD=class extends Te{constructor(e,t,i){if(super(),this.h=e,this.j=t,this.b=new li,this.c=this.B(new C),this.onDidChangeLoggers=this.c.event,this.f=this.B(new C),this.onDidChangeLogLevel=this.f.event,this.g=this.B(new C),this.onDidChangeVisibility=this.g.event,i)for(const r of i)this.b.set(r.resource,{logger:void 0,info:r})}m(e){return Xe(e)?[...this.b.values()].find(t=>t.info.id===e):this.b.get(e)}getLogger(e){return this.m(e)?.logger}createLogger(e,t){const i=this.n(e),r=Xe(e)?e:t?.id??ol(i.toString()).toString(16);let n=this.b.get(i)?.logger;const s=t?.logLevel==="always"?it.Trace:t?.logLevel;n||(n=this.s(i,s??this.getLogLevel(i)??this.h,{...t,id:r}));const o={logger:n,info:{resource:i,id:r,logLevel:s,name:t?.name,hidden:t?.hidden,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this.b.set(i,o),n}n(e){return Xe(e)?Mi(this.j,`${e}.log`):e}setLogLevel(e,t){if(E.isUri(e)){const i=e,r=t,n=this.b.get(i);n&&r!==n.info.logLevel&&(n.info.logLevel=r===this.h?void 0:r,n.logger?.setLevel(r),this.b.set(n.info.resource,n),this.f.fire([i,r]))}else{this.h=e;for(const[i,r]of this.b.entries())this.b.get(i)?.info.logLevel===void 0&&r.logger?.setLevel(this.h);this.f.fire(this.h)}}setVisibility(e,t){const i=this.m(e);i&&t!==!i.info.hidden&&(i.info.hidden=!t,this.b.set(i.info.resource,i),this.g.fire([i.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this.b.get(e)?.info.logLevel),t??this.h}registerLogger(e){const t=this.b.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this.b.set(e.resource,{info:e,logger:void 0}),this.c.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.b.get(e);t&&(t.logger&&t.logger.dispose(),this.b.delete(e),this.c.fire({added:[],removed:[t.info]}))}*getRegisteredLoggers(){for(const e of this.b.values())yield e.info}getRegisteredLogger(e){return this.b.get(e)?.info}dispose(){this.b.forEach(e=>e.logger?.dispose()),this.b.clear(),super.dispose()}};function LD(e){switch(e){case it.Trace:return"trace";case it.Debug:return"debug";case it.Info:return"info";case it.Warning:return"warn";case it.Error:return"error";case it.Off:return"off"}}function _D(e){switch(e){case"trace":return it.Trace;case"debug":return it.Debug;case"info":return it.Info;case"warn":return it.Warning;case"error":return it.Error;case"critical":return it.Error;case"off":return it.Off}}var kC=new X("logLevel",LD(it.Info)),jn=class{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}},Xy=[],gt;(function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"})(gt||(gt={}));function vt(e,t,i){t instanceof jn||(t=new jn(t,[],!!i)),Xy.push([e,t])}function CD(){return Xy}var fm=class{constructor(...e){this.a=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this.a.get(e);return this.a.set(e,t),i}has(e){return this.a.has(e)}get(e){return this.a.get(e)}},Ci=K("IExtHostInitDataService"),ND=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},Zy=class{constructor(e){this.b=e,this.a=new Map}roots(){const e=[];for(const t of this.a.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);i.outgoing.set(r.key,r),r.incoming.set(i.key,i)}removeNode(e){const t=this.b(e);this.a.delete(t);for(const i of this.a.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this.b(e);let i=this.a.get(t);return i||(i=new ND(t,e),this.a.set(t,i)),i}lookup(e){return this.a.get(this.b(e))}isEmpty(){return this.a.size===0}toString(){const e=[];for(const[t,i]of this.a)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this.a){const i=new Set([e]),r=this.c(t,i);if(r)return r}}c(e,t){for(const[i,r]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const n=this.c(r,t);if(n)return n;t.delete(i)}}},OD=!1,Yy=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},FD=class Xw{constructor(t=new fm,i=!1,r,n=OD){this.i=t,this.j=i,this.k=r,this.l=n,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set(Th,this),this._globalGraph=n?r?._globalGraph??new Zy(s=>s):void 0}dispose(){if(!this.f){this.f=!0,On(this.h),this.h.clear();for(const t of this.g)jS(t)&&t.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(t,i){this.m();const r=this,n=new class extends Xw{dispose(){r.h.delete(n),super.dispose()}}(t,this.j,this,this.l);return this.h.add(n),i?.add(n),n}invokeFunction(t,...i){this.m();const r=pm.traceInvocation(this.l,t);let n=!1;try{return t({get:o=>{if(n)throw Eg("service accessor is only valid during the invocation of its target method");const a=this.s(o,r);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...i)}finally{n=!0,r.stop()}}createInstance(t,...i){this.m();let r,n;return t instanceof jn?(r=pm.traceCreation(this.l,t.ctor),n=this.o(t.ctor,t.staticArguments.concat(i),r)):(r=pm.traceCreation(this.l,t),n=this.o(t,i,r)),r.stop(),n}o(t,i=[],r){const n=Gr.getServiceDependencies(t).sort((a,c)=>a.index-c.index),s=[];for(const a of n){const c=this.s(a.id,r);c||this.y(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),s.push(c)}const o=n.length>0?n[0].index:i.length;if(i.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${i.length} static arguments`);const a=o-i.length;a>0?i=i.concat(new Array(a)):i=i.slice(0,o)}return Reflect.construct(t,i.concat(s))}q(t,i){if(this.i.get(t)instanceof jn)this.i.set(t,i);else if(this.k)this.k.q(t,i);else throw new Error("illegalState - setting UNKNOWN service instance")}r(t){const i=this.i.get(t);return!i&&this.k?this.k.r(t):i}s(t,i){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(t));const r=this.r(t);return r instanceof jn?this.u(t,r,i.branch(t,!0)):(i.branch(t,!1),r)}u(t,i,r){if(this.t.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this.t.add(t);try{return this.v(t,i,r)}finally{this.t.delete(t)}}v(t,i,r){const n=new Zy(c=>c.id.toString());let s=0;const o=[{id:t,desc:i,_trace:r}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),n.lookupOrInsertNode(c),s++>1e3)throw new Yy(n);for(const l of Gr.getServiceDependencies(c.desc.ctor)){const u=this.r(l.id);if(u||this.y(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(l.id)),u instanceof jn){const h={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};n.insertEdge(c,h),o.push(h)}}}}for(;;){const c=n.roots();if(c.length===0){if(!n.isEmpty())throw new Yy(n);break}for(const{data:l}of c){if(this.r(l.id)instanceof jn){const h=this.w(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this.q(l.id,h)}n.removeNode(l)}}return this.r(t)}w(t,i,r=[],n,s){if(this.i.get(t)instanceof jn)return this.x(t,i,r,n,s,this.g);if(this.k)return this.k.w(t,i,r,n,s);throw new Error(`illegalState - creating UNKNOWN service instance ${i.name}`)}x(t,i,r=[],n,s,o){if(n){const a=new Xw(void 0,this.j,this,this.l);a.c=String(t);const c=new Map,l=new Yk(()=>{const u=a.o(i,r,s);for(const[h,f]of c){const g=u[h];if(typeof g=="function")for(const m of f)m.disposable=g.apply(u,m.listener)}return c.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,h){if(!l.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let m=c.get(h);return m||(m=new Vc,c.set(h,m)),(k,I,R)=>{if(l.isInitialized)return l.value[h](k,I,R);{const N={listener:[k,I,R],disposable:void 0},z=m.push(N);return Ce(()=>{z(),N.disposable?.dispose()})}}}if(h in u)return u[h];const f=l.value;let g=f[h];return typeof g!="function"||(g=g.bind(f),u[h]=g),g},set(u,h,f){return l.value[h]=f,!0},getPrototypeOf(u){return i.prototype}})}else{const a=this.o(i,r,s);return o.add(a),a}}y(t,i){if(i&&console.warn(t),this.j)throw new Error(t)}},xo;(function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"})(xo||(xo={}));var pm=class Pn{static{this.all=new Set}static{this.c=new class extends Pn{constructor(){super(xo.None,null)}stop(){}branch(){return this}}}static traceInvocation(t,i){return t?new Pn(xo.Invocation,i.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Pn.c}static traceCreation(t,i){return t?new Pn(xo.Creation,i.name):Pn.c}static{this.f=0}constructor(t,i){this.type=t,this.name=i,this.g=Date.now(),this.h=[]}branch(t,i){const r=new Pn(xo.Branch,t.toString());return this.h.push([t,i,r]),r}stop(){const t=Date.now()-this.g;Pn.f+=t;let i=!1;function r(s,o){const a=[],c=new Array(s+1).join("	");for(const[l,u,h]of o.h)if(u&&h){i=!0,a.push(`${c}CREATES -> ${l}`);const f=r(s+1,h);f&&a.push(f)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const n=[`${this.type===xo.Creation?"CREATE":"CALL"} ${this.name}`,`${r(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${Pn.f.toFixed(2)}ms)`];(t>2||i)&&Pn.all.add(n.join(`
`))}},at=K("IExtHostRpcService"),MD=class{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}},_h=K("IURITransformerService"),UD=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},BD=class{constructor(){this.b="",this.c=0}reset(e){return this.b=e,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(e){const t=e.charCodeAt(0),i=this.b.charCodeAt(this.c);return t-i}value(){return this.b[this.c]}},HD=class{constructor(e=!0){this.e=e}reset(e){return this.b=e,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let e=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===L.Period)if(e)this.c++;else break;else e=!1;return this}cmp(e){return this.e?zg(e,this.b,0,e.length,this.c,this.d):el(e,this.b,0,e.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}},Ky=class{constructor(e=!0,t=!0){this.f=e,this.g=t}reset(e){this.d=0,this.e=0,this.b=e,this.c=e.length;for(let t=e.length-1;t>=0;t--,this.c--){const i=this.b.charCodeAt(t);if(!(i===L.Slash||this.f&&i===L.Backslash))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let e=!0;for(;this.e<this.c;this.e++){const t=this.b.charCodeAt(this.e);if(t===L.Slash||this.f&&t===L.Backslash)if(e)this.d++;else break;else e=!1}return this}cmp(e){return this.g?zg(e,this.b,0,e.length,this.d,this.e):el(e,this.b,0,e.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}},Ei;(function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"})(Ei||(Ei={}));var jD=class{constructor(e,t){this.f=e,this.g=t,this.d=[],this.e=0}reset(e){return this.c=e,this.d=[],this.c.scheme&&this.d.push(Ei.Scheme),this.c.authority&&this.d.push(Ei.Authority),this.c.path&&(this.b=new Ky(!1,!this.f(e)),this.b.reset(e.path),this.b.value()&&this.d.push(Ei.Path)),this.g(e)||(this.c.query&&this.d.push(Ei.Query),this.c.fragment&&this.d.push(Ei.Fragment)),this.e=0,this}next(){return this.d[this.e]===Ei.Path&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===Ei.Path&&this.b.hasNext()||this.e<this.d.length-1}cmp(e){if(this.d[this.e]===Ei.Scheme)return ay(e,this.c.scheme);if(this.d[this.e]===Ei.Authority)return ay(e,this.c.authority);if(this.d[this.e]===Ei.Path)return this.b.cmp(e);if(this.d[this.e]===Ei.Query)return wo(e,this.c.query);if(this.d[this.e]===Ei.Fragment)return wo(e,this.c.fragment);throw new Error}value(){if(this.d[this.e]===Ei.Scheme)return this.c.scheme;if(this.d[this.e]===Ei.Authority)return this.c.authority;if(this.d[this.e]===Ei.Path)return this.b.value();if(this.d[this.e]===Ei.Query)return this.c.query;if(this.d[this.e]===Ei.Fragment)return this.c.fragment;throw new Error}},Ch=class{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},Ht;(function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"})(Ht||(Ht={}));var Wn=class oh{static forUris(t=()=>!1,i=()=>!1){return new oh(new jD(t,i))}static forPaths(t=!1){return new oh(new Ky(void 0,!t))}static forStrings(){return new oh(new BD)}static forConfigKeys(){return new oh(new HD)}constructor(t){this.b=t}clear(){this.c=void 0}fill(t,i){if(i){const r=i.slice(0);fb(r);for(const n of r)this.set(n,t)}else{const r=t.slice(0);fb(r);for(const n of r)this.set(n[0],n[1])}}set(t,i){const r=this.b.reset(t);let n;this.c||(this.c=new Ch,this.c.segment=r.value());const s=[];for(n=this.c;;){const a=r.cmp(n.segment);if(a>0)n.left||(n.left=new Ch,n.left.segment=r.value()),s.push([Ht.Left,n]),n=n.left;else if(a<0)n.right||(n.right=new Ch,n.right.segment=r.value()),s.push([Ht.Right,n]),n=n.right;else if(r.hasNext())r.next(),n.mid||(n.mid=new Ch,n.mid.segment=r.value()),s.push([Ht.Mid,n]),n=n.mid;else break}const o=n.value;n.value=i,n.key=t;for(let a=s.length-1;a>=0;a--){const c=s[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=s[a][0],h=s[a+1][0];if(u===Ht.Right&&h===Ht.Right)s[a][1]=c.rotateLeft();else if(u===Ht.Left&&h===Ht.Left)s[a][1]=c.rotateRight();else if(u===Ht.Right&&h===Ht.Left)c.right=s[a+1][1]=s[a+1][1].rotateRight(),s[a][1]=c.rotateLeft();else if(u===Ht.Left&&h===Ht.Right)c.left=s[a+1][1]=s[a+1][1].rotateLeft(),s[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(s[a-1][0]){case Ht.Left:s[a-1][1].left=s[a][1];break;case Ht.Right:s[a-1][1].right=s[a][1];break;case Ht.Mid:s[a-1][1].mid=s[a][1];break}else this.c=s[0][1]}}return o}get(t){return this.d(t)?.value}d(t){const i=this.b.reset(t);let r=this.c;for(;r;){const n=i.cmp(r.segment);if(n>0)r=r.left;else if(n<0)r=r.right;else if(i.hasNext())i.next(),r=r.mid;else break}return r}has(t){const i=this.d(t);return!(i?.value===void 0&&i?.mid===void 0)}delete(t){return this.e(t,!1)}deleteSuperstr(t){return this.e(t,!0)}e(t,i){const r=this.b.reset(t),n=[];let s=this.c;for(;s;){const o=r.cmp(s.segment);if(o>0)n.push([Ht.Left,s]),s=s.left;else if(o<0)n.push([Ht.Right,s]),s=s.right;else if(r.hasNext())r.next(),n.push([Ht.Mid,s]),s=s.mid;else break}if(s){if(i?(s.left=void 0,s.mid=void 0,s.right=void 0,s.height=1):(s.key=void 0,s.value=void 0),!s.mid&&!s.value)if(s.left&&s.right){const o=this.f(s.right);if(o.key){const{key:a,value:c,segment:l}=o;this.e(o.key,!1),s.key=a,s.value=c,s.segment=l}}else{const o=s.left??s.right;if(n.length>0){const[a,c]=n[n.length-1];switch(a){case Ht.Left:c.left=o;break;case Ht.Mid:c.mid=o;break;case Ht.Right:c.right=o;break}}else this.c=o}for(let o=n.length-1;o>=0;o--){const a=n[o][1];a.updateHeight();const c=a.balanceFactor();if(c>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),n[o][1]=a.rotateLeft()):c<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),n[o][1]=a.rotateRight()),o>0)switch(n[o-1][0]){case Ht.Left:n[o-1][1].left=n[o][1];break;case Ht.Right:n[o-1][1].right=n[o][1];break;case Ht.Mid:n[o-1][1].mid=n[o][1];break}else this.c=n[0][1]}}}f(t){for(;t.left;)t=t.left;return t}findSubstr(t){const i=this.b.reset(t);let r=this.c,n;for(;r;){const s=i.cmp(r.segment);if(s>0)r=r.left;else if(s<0)r=r.right;else if(i.hasNext())i.next(),n=r.value||n,r=r.mid;else break}return r&&r.value||n}findSuperstr(t){return this.g(t,!1)}g(t,i){const r=this.b.reset(t);let n=this.c;for(;n;){const s=r.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else return n.mid?this.h(n.mid):i?n.value:void 0}}hasElementOrSubtree(t){return this.g(t,!0)!==void 0}forEach(t){for(const[i,r]of this)t(r,i)}*[Symbol.iterator](){yield*this.h(this.c)}h(t){const i=[];return this.j(t,i),i[Symbol.iterator]()}j(t,i){t&&(t.left&&this.j(t.left,i),t.value&&i.push([t.key,t.value]),t.mid&&this.j(t.mid,i),t.right&&this.j(t.right,i))}_isBalanced(){const t=i=>{if(!i)return!0;const r=i.balanceFactor();return r<-1||r>1?!1:t(i.left)&&t(i.right)};return t(this.c)}};function Tt(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([i,r])=>{t[i]=r&&typeof r=="object"?Tt(r):r}),t}function e4(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const i=t.shift();Object.freeze(i);for(const r in i)if(t4.call(i,r)){const n=i[r];typeof n=="object"&&!Object.isFrozen(n)&&!gk(n)&&t.push(n)}}return e}var t4=Object.prototype.hasOwnProperty;function Nh(e,t){return gm(e,t,new Set)}function gm(e,t,i){if(Jt(e))return e;const r=t(e);if(typeof r<"u")return r;if(Array.isArray(e)){const n=[];for(const s of e)n.push(gm(s,t,i));return n}if(Qt(e)){if(i.has(e))throw new Error("Cannot clone recursive data-structure");i.add(e);const n={};for(const s in e)t4.call(e,s)&&(n[s]=gm(e[s],t,i));return i.delete(e),n}return e}function ko(e,t,i=!0){return Qt(e)?(Qt(t)&&Object.keys(t).forEach(r=>{r in e?i&&(Qt(e[r])&&Qt(t[r])?ko(e[r],t[r],i):e[r]=t[r]):e[r]=t[r]}),e):t}function Qr(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let i,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!Qr(e[i],t[i]))return!1}else{const n=[];for(r in e)n.push(r);n.sort();const s=[];for(r in t)s.push(r);if(s.sort(),!Qr(n,s))return!1;for(i=0;i<n.length;i++)if(!Qr(e[n[i]],t[n[i]]))return!1}return!0}function WD(e){const t=new Set;return JSON.stringify(e,(i,r)=>{if(Qt(r)||Array.isArray(r)){if(t.has(r))return"[Circular]";t.add(r)}return typeof r=="bigint"?`[BigInt ${r.toString()}]`:r})}function i4(e,t){const i=Object.create(null);for(const[r,n]of Object.entries(e))t(r,n)&&(i[r]=n);return i}var zD=class{constructor(){this.a=0}getNext(){return this.a++}},VD=K("fileService"),Do;(function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"})(Do||(Do={}));var Sa;(function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"})(Sa||(Sa={}));var Cs;(function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"})(Cs||(Cs={}));var vn;(function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone"})(vn||(vn={}));var Ne;(function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"})(Ne||(Ne={}));var r4=class O8 extends Error{static create(t,i){const r=new O8(t.toString(),i);return n4(r,i),r}constructor(t,i){super(t),this.code=i}};function n4(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function Oh(e){if(!e)return Ne.Unknown;if(e instanceof r4)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return Ne.Unknown;switch(t[1]){case Ne.FileExists:return Ne.FileExists;case Ne.FileIsADirectory:return Ne.FileIsADirectory;case Ne.FileNotADirectory:return Ne.FileNotADirectory;case Ne.FileNotFound:return Ne.FileNotFound;case Ne.FileTooLarge:return Ne.FileTooLarge;case Ne.FileWriteLocked:return Ne.FileWriteLocked;case Ne.NoPermissions:return Ne.NoPermissions;case Ne.Unavailable:return Ne.Unavailable}return Ne.Unknown}function qD(e){if(e instanceof mm)return e.fileOperationResult;switch(Oh(e)){case Ne.FileNotFound:return Sr.FILE_NOT_FOUND;case Ne.FileIsADirectory:return Sr.FILE_IS_DIRECTORY;case Ne.FileNotADirectory:return Sr.FILE_NOT_DIRECTORY;case Ne.FileWriteLocked:return Sr.FILE_WRITE_LOCKED;case Ne.NoPermissions:return Sr.FILE_PERMISSION_DENIED;case Ne.FileExists:return Sr.FILE_MOVE_CONFLICT;case Ne.FileTooLarge:return Sr.FILE_TOO_LARGE;default:return Sr.FILE_OTHER_ERROR}}var wn;(function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"})(wn||(wn={}));var Jr;(function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"})(Jr||(Jr={}));var DC=class rg{static{this.a=null}constructor(t,i){this.c=i,this.b=void 0,this.d=new nr(()=>{const r=Wn.forUris(()=>this.c);return r.fill(this.rawAdded.map(n=>[n,!0])),r}),this.f=new nr(()=>{const r=Wn.forUris(()=>this.c);return r.fill(this.rawUpdated.map(n=>[n,!0])),r}),this.g=new nr(()=>{const r=Wn.forUris(()=>this.c);return r.fill(this.rawDeleted.map(n=>[n,!0])),r}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const r of t){switch(r.type){case Jr.ADDED:this.rawAdded.push(r.resource);break;case Jr.UPDATED:this.rawUpdated.push(r.resource);break;case Jr.DELETED:this.rawDeleted.push(r.resource);break}this.b!==rg.a&&(typeof r.cId=="number"?this.b===void 0?this.b=r.cId:this.b!==r.cId&&(this.b=rg.a):this.b!==void 0&&(this.b=rg.a))}}contains(t,...i){return this.h(t,{includeChildren:!1},...i)}affects(t,...i){return this.h(t,{includeChildren:!0},...i)}h(t,i,...r){if(!t)return!1;const n=r.length>0;return!!((!n||r.includes(Jr.ADDED))&&(this.d.value.get(t)||i.includeChildren&&this.d.value.findSuperstr(t))||(!n||r.includes(Jr.UPDATED))&&(this.f.value.get(t)||i.includeChildren&&this.f.value.findSuperstr(t))||(!n||r.includes(Jr.DELETED))&&(this.g.value.findSubstr(t)||i.includeChildren&&this.g.value.findSuperstr(t)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(t){return this.b===t}hasCorrelation(){return typeof this.b=="number"}},mm=class extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}},Sr;(function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(Sr||(Sr={}));var s4;(function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"})(s4||(s4={}));var GD="";function o4(e){if(!(typeof e.size!="number"||typeof e.mtime!="number"))return e.mtime.toString(29)+e.size.toString(31)}var $C=class tr{static{this.KB=1024}static{this.MB=tr.KB*tr.KB}static{this.GB=tr.MB*tr.KB}static{this.TB=tr.GB*tr.KB}static formatSize(t){return Rs(t)||(t=0),t<tr.KB?d(1864,null,t.toFixed(0)):t<tr.MB?d(1865,null,(t/tr.KB).toFixed(2)):t<tr.GB?d(1866,null,(t/tr.MB).toFixed(2)):t<tr.TB?d(1867,null,(t/tr.GB).toFixed(2)):d(1868,null,(t/tr.TB).toFixed(2))}},fl;(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(fl||(fl={})),function(e){const t="error",i="warning",r="warn",n="info",s="ignore";function o(c){return c?Ps(t,c)?e.Error:Ps(i,c)||Ps(r,c)?e.Warning:Ps(n,c)?e.Info:e.Ignore:e.Ignore}e.fromValue=o;function a(c){switch(c){case e.Error:return t;case e.Warning:return i;case e.Info:return n;default:return s}}e.toString=a}(fl||(fl={}));var Zt=fl,QD=Zt,IC=K("notificationService"),a4;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SILENT=1]="SILENT",e[e.URGENT=2]="URGENT"})(a4||(a4={}));var c4;(function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"})(c4||(c4={}));var l4;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"})(l4||(l4={}));var vm=K("contextService");function wm(e){const t=e;return typeof t?.id=="string"&&E.isUri(t.uri)}function bm(e){const t=e;return typeof t?.id=="string"&&E.isUri(t.configPath)}var Fh;(function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"})(Fh||(Fh={}));var JD=class{constructor(e,t,i,r,n){this.h=e,this.j=i,this.k=r,this.l=n,this.c=Wn.forUris(this.l,()=>!0),this.folders=t}update(e){this.h=e.id,this.k=e.configuration,this.j=e.transient,this.l=e.l,this.folders=e.folders}get folders(){return this.g}set folders(e){this.g=e,this.n()}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(e){this.k=e}getFolder(e){return e&&this.c.findSubstr(e)||null}n(){this.c=Wn.forUris(this.l,()=>!0);for(const e of this.folders)this.c.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},u4=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return Mi(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function h4(e){return new u4({uri:e,index:0,name:Jg(e)},{uri:e.toString()})}var d4="code-workspace",AC=`.${d4}`,PC=[{name:d(2487,null),extensions:[d4]}],XD=class{constructor(){this.a=new Set(Object.keys(de)),this.b=new Map,this.extUri=new il(e=>{const t=this.b.get(e.scheme);return!(t===void 0||t&vn.PathCaseSensitive)})}$acceptProviderInfos(e,t){t===null?this.b.delete(e.scheme):this.b.set(e.scheme,t)}isFreeScheme(e){return!this.b.has(e)&&!this.a.has(e)}getCapabilities(e){return this.b.get(e)}},xa=K("IExtHostFileSystemInfo"),Xr=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let e;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?e=crypto.getRandomValues.bind(crypto):e=function(r){for(let n=0;n<r.length;n++)r[n]=Math.floor(Math.random()*256);return r};const t=new Uint8Array(16),i=[];for(let r=0;r<256;r++)i.push(r.toString(16).padStart(2,"0"));return function(){e(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128;let n=0,s="";return s+=i[t[n++]],s+=i[t[n++]],s+=i[t[n++]],s+=i[t[n++]],s+="-",s+=i[t[n++]],s+=i[t[n++]],s+="-",s+=i[t[n++]],s+=i[t[n++]],s+="-",s+=i[t[n++]],s+=i[t[n++]],s+="-",s+=i[t[n++]],s+=i[t[n++]],s+=i[t[n++]],s+=i[t[n++]],s+=i[t[n++]],s+=i[t[n++]],s}}(),ym=Object.freeze({create:e=>ca(e.map(t=>t.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>ym.split(e).filter(t=>!t.startsWith("#"))}),RC=new Uint32Array(10),f4;(function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"})(f4||(f4={}));var ie;(function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"})(ie||(ie={}));var rt;(function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"})(rt||(rt={}));var TC=new Uint8Array([ie.r,ie.R,ie.s,ie.e,ie.E,ie.f,ie.a,ie.q,ie.Q,ie.t,ie.T,ie.d,ie.w,ie.W,ie.c,ie.z,ie.x,ie.v,ie.g]),LC=new Uint16Array([ie.k,ie.o,ie.i,ie.O,ie.j,ie.p,ie.u,ie.P,ie.h,rt.hk,rt.ho,rt.hl,ie.y,ie.n,rt.nj,rt.np,rt.nl,ie.b,ie.m,rt.ml,ie.l]),_C=new Uint16Array([ie.r,ie.R,rt.rt,ie.s,rt.sw,rt.sg,ie.e,ie.f,rt.fr,rt.fa,rt.fq,rt.ft,rt.fx,rt.fv,rt.fg,ie.a,ie.q,rt.qt,ie.t,ie.T,ie.d,ie.w,ie.c,ie.z,ie.x,ie.v,ie.g]),CC=new Uint16Array([ie.r,ie.R,rt.rt,ie.s,rt.sw,rt.sg,ie.e,ie.E,ie.f,rt.fr,rt.fa,rt.fq,rt.ft,rt.fx,rt.fv,rt.fg,ie.a,ie.q,ie.Q,rt.qt,ie.t,ie.T,ie.d,ie.w,ie.W,ie.c,ie.z,ie.x,ie.v,ie.g,ie.k,ie.o,ie.i,ie.O,ie.j,ie.p,ie.u,ie.P,ie.h,rt.hk,rt.ho,rt.hl,ie.y,ie.n,rt.nj,rt.np,rt.nl,ie.b,ie.m,rt.ml,ie.l]);function p4(...e){return function(t,i){for(let r=0,n=e.length;r<n;r++){const s=e[r](t,i);if(s)return s}return null}}var NC=m4.bind(void 0,!1),g4=m4.bind(void 0,!0);function m4(e,t,i){if(!i||i.length<t.length)return null;let r;return e?r=Vg(i,t):r=i.indexOf(t)===0,r?t.length>0?[{start:0,end:t.length}]:[]:null}function ZD(e,t){const i=t.toLowerCase().indexOf(e.toLowerCase());return i===-1?null:[{start:i,end:i+e.length}]}function YD(e,t){return Em(e.toLowerCase(),t.toLowerCase(),0,0)}function Em(e,t,i,r){if(i===e.length)return[];if(r===t.length)return null;if(e[i]===t[r]){let n=null;return(n=Em(e,t,i+1,r+1))?w4({start:r,end:r+1},n):null}return Em(e,t,i,r+1)}function Sm(e){return L.a<=e&&e<=L.z}function Mh(e){return L.A<=e&&e<=L.Z}function xm(e){return L.Digit0<=e&&e<=L.Digit9}function KD(e){return e===L.Space||e===L.Tab||e===L.LineFeed||e===L.CarriageReturn}var e$=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>e$.add(e.charCodeAt(0)));function v4(e){return Sm(e)||Mh(e)||xm(e)}function w4(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function b4(e,t){for(let i=t;i<e.length;i++){const r=e.charCodeAt(i);if(Mh(r)||xm(r)||i>0&&!v4(e.charCodeAt(i-1)))return i}return e.length}function km(e,t,i,r){if(i===e.length)return[];if(r===t.length)return null;if(e[i]!==t[r].toLowerCase())return null;{let n=null,s=r+1;for(n=km(e,t,i+1,r+1);!n&&(s=b4(t,s))<t.length;)n=km(e,t,i+1,s),s++;return n===null?null:w4({start:r,end:r+1},n)}}function t$(e){let t=0,i=0,r=0,n=0,s=0;for(let u=0;u<e.length;u++)s=e.charCodeAt(u),Mh(s)&&t++,Sm(s)&&i++,v4(s)&&r++,xm(s)&&n++;const o=t/e.length,a=i/e.length,c=r/e.length,l=n/e.length;return{upperPercent:o,lowerPercent:a,alphaPercent:c,numericPercent:l}}function i$(e){const{upperPercent:t,lowerPercent:i}=e;return i===0&&t>.6}function r$(e){const{upperPercent:t,lowerPercent:i,alphaPercent:r,numericPercent:n}=e;return i>.2&&t<.8&&r>.6&&n<.2}function n$(e){let t=0,i=0,r=0,n=0;for(let s=0;s<e.length;s++)r=e.charCodeAt(s),Mh(r)&&t++,Sm(r)&&i++,KD(r)&&n++;return(t===0||i===0)&&n===0?e.length<=30:t<=5}function y4(e,t){if(!t||(t=t.trim(),t.length===0)||!n$(e))return null;t.length>60&&(t=t.substring(0,60));const i=t$(t);if(!r$(i)){if(!i$(i))return null;t=t.toLowerCase()}let r=null,n=0;for(e=e.toLowerCase();n<t.length&&(r=km(e,t,0,n))===null;)n=b4(t,n+1);return r}var OC=p4(g4,y4,ZD),FC=p4(g4,y4,YD),MC=new $g(1e4),Uh=128;function Dm(){const e=[],t=[];for(let i=0;i<=Uh;i++)t[i]=0;for(let i=0;i<=Uh;i++)e.push(t.slice(0));return e}function E4(e){const t=[];for(let i=0;i<=e;i++)t[i]=0;return t}var UC=E4(2*Uh),BC=E4(2*Uh),HC=Dm(),jC=Dm(),WC=Dm(),S4;(function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"})(S4||(S4={}));var x4;(function(e){e.Default=[-100,0];function t(i){return!i||i.length===2&&i[0]===-100&&i[1]===0}e.isDefault=t})(x4||(x4={}));var zC=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},$m=Object.create(null);function p(e,t){if(Xe(t)){const i=$m[t];if(i===void 0)throw new Error(`${e} references an unknown codicon: ${t}`);t=i}return $m[e]=t,{id:e}}function s$(){return $m}var o$={add:p("add",6e4),plus:p("plus",6e4),gistNew:p("gist-new",6e4),repoCreate:p("repo-create",6e4),lightbulb:p("lightbulb",60001),lightBulb:p("light-bulb",60001),repo:p("repo",60002),repoDelete:p("repo-delete",60002),gistFork:p("gist-fork",60003),repoForked:p("repo-forked",60003),gitPullRequest:p("git-pull-request",60004),gitPullRequestAbandoned:p("git-pull-request-abandoned",60004),recordKeys:p("record-keys",60005),keyboard:p("keyboard",60005),tag:p("tag",60006),gitPullRequestLabel:p("git-pull-request-label",60006),tagAdd:p("tag-add",60006),tagRemove:p("tag-remove",60006),person:p("person",60007),personFollow:p("person-follow",60007),personOutline:p("person-outline",60007),personFilled:p("person-filled",60007),gitBranch:p("git-branch",60008),gitBranchCreate:p("git-branch-create",60008),gitBranchDelete:p("git-branch-delete",60008),sourceControl:p("source-control",60008),mirror:p("mirror",60009),mirrorPublic:p("mirror-public",60009),star:p("star",60010),starAdd:p("star-add",60010),starDelete:p("star-delete",60010),starEmpty:p("star-empty",60010),comment:p("comment",60011),commentAdd:p("comment-add",60011),alert:p("alert",60012),warning:p("warning",60012),search:p("search",60013),searchSave:p("search-save",60013),logOut:p("log-out",60014),signOut:p("sign-out",60014),logIn:p("log-in",60015),signIn:p("sign-in",60015),eye:p("eye",60016),eyeUnwatch:p("eye-unwatch",60016),eyeWatch:p("eye-watch",60016),circleFilled:p("circle-filled",60017),primitiveDot:p("primitive-dot",60017),closeDirty:p("close-dirty",60017),debugBreakpoint:p("debug-breakpoint",60017),debugBreakpointDisabled:p("debug-breakpoint-disabled",60017),debugHint:p("debug-hint",60017),terminalDecorationSuccess:p("terminal-decoration-success",60017),primitiveSquare:p("primitive-square",60018),edit:p("edit",60019),pencil:p("pencil",60019),info:p("info",60020),issueOpened:p("issue-opened",60020),gistPrivate:p("gist-private",60021),gitForkPrivate:p("git-fork-private",60021),lock:p("lock",60021),mirrorPrivate:p("mirror-private",60021),close:p("close",60022),removeClose:p("remove-close",60022),x:p("x",60022),repoSync:p("repo-sync",60023),sync:p("sync",60023),clone:p("clone",60024),desktopDownload:p("desktop-download",60024),beaker:p("beaker",60025),microscope:p("microscope",60025),vm:p("vm",60026),deviceDesktop:p("device-desktop",60026),file:p("file",60027),fileText:p("file-text",60027),more:p("more",60028),ellipsis:p("ellipsis",60028),kebabHorizontal:p("kebab-horizontal",60028),mailReply:p("mail-reply",60029),reply:p("reply",60029),organization:p("organization",60030),organizationFilled:p("organization-filled",60030),organizationOutline:p("organization-outline",60030),newFile:p("new-file",60031),fileAdd:p("file-add",60031),newFolder:p("new-folder",60032),fileDirectoryCreate:p("file-directory-create",60032),trash:p("trash",60033),trashcan:p("trashcan",60033),history:p("history",60034),clock:p("clock",60034),folder:p("folder",60035),fileDirectory:p("file-directory",60035),symbolFolder:p("symbol-folder",60035),logoGithub:p("logo-github",60036),markGithub:p("mark-github",60036),github:p("github",60036),terminal:p("terminal",60037),console:p("console",60037),repl:p("repl",60037),zap:p("zap",60038),symbolEvent:p("symbol-event",60038),error:p("error",60039),stop:p("stop",60039),variable:p("variable",60040),symbolVariable:p("symbol-variable",60040),array:p("array",60042),symbolArray:p("symbol-array",60042),symbolModule:p("symbol-module",60043),symbolPackage:p("symbol-package",60043),symbolNamespace:p("symbol-namespace",60043),symbolObject:p("symbol-object",60043),symbolMethod:p("symbol-method",60044),symbolFunction:p("symbol-function",60044),symbolConstructor:p("symbol-constructor",60044),symbolBoolean:p("symbol-boolean",60047),symbolNull:p("symbol-null",60047),symbolNumeric:p("symbol-numeric",60048),symbolNumber:p("symbol-number",60048),symbolStructure:p("symbol-structure",60049),symbolStruct:p("symbol-struct",60049),symbolParameter:p("symbol-parameter",60050),symbolTypeParameter:p("symbol-type-parameter",60050),symbolKey:p("symbol-key",60051),symbolText:p("symbol-text",60051),symbolReference:p("symbol-reference",60052),goToFile:p("go-to-file",60052),symbolEnum:p("symbol-enum",60053),symbolValue:p("symbol-value",60053),symbolRuler:p("symbol-ruler",60054),symbolUnit:p("symbol-unit",60054),activateBreakpoints:p("activate-breakpoints",60055),archive:p("archive",60056),arrowBoth:p("arrow-both",60057),arrowDown:p("arrow-down",60058),arrowLeft:p("arrow-left",60059),arrowRight:p("arrow-right",60060),arrowSmallDown:p("arrow-small-down",60061),arrowSmallLeft:p("arrow-small-left",60062),arrowSmallRight:p("arrow-small-right",60063),arrowSmallUp:p("arrow-small-up",60064),arrowUp:p("arrow-up",60065),bell:p("bell",60066),bold:p("bold",60067),book:p("book",60068),bookmark:p("bookmark",60069),debugBreakpointConditionalUnverified:p("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:p("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:p("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:p("debug-breakpoint-data-unverified",60072),debugBreakpointData:p("debug-breakpoint-data",60073),debugBreakpointDataDisabled:p("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:p("debug-breakpoint-log-unverified",60074),debugBreakpointLog:p("debug-breakpoint-log",60075),debugBreakpointLogDisabled:p("debug-breakpoint-log-disabled",60075),briefcase:p("briefcase",60076),broadcast:p("broadcast",60077),browser:p("browser",60078),bug:p("bug",60079),calendar:p("calendar",60080),caseSensitive:p("case-sensitive",60081),check:p("check",60082),checklist:p("checklist",60083),chevronDown:p("chevron-down",60084),chevronLeft:p("chevron-left",60085),chevronRight:p("chevron-right",60086),chevronUp:p("chevron-up",60087),chromeClose:p("chrome-close",60088),chromeMaximize:p("chrome-maximize",60089),chromeMinimize:p("chrome-minimize",60090),chromeRestore:p("chrome-restore",60091),circleOutline:p("circle-outline",60092),circle:p("circle",60092),debugBreakpointUnverified:p("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:p("terminal-decoration-incomplete",60092),circleSlash:p("circle-slash",60093),circuitBoard:p("circuit-board",60094),clearAll:p("clear-all",60095),clippy:p("clippy",60096),closeAll:p("close-all",60097),cloudDownload:p("cloud-download",60098),cloudUpload:p("cloud-upload",60099),code:p("code",60100),collapseAll:p("collapse-all",60101),colorMode:p("color-mode",60102),commentDiscussion:p("comment-discussion",60103),creditCard:p("credit-card",60105),dash:p("dash",60108),dashboard:p("dashboard",60109),database:p("database",60110),debugContinue:p("debug-continue",60111),debugDisconnect:p("debug-disconnect",60112),debugPause:p("debug-pause",60113),debugRestart:p("debug-restart",60114),debugStart:p("debug-start",60115),debugStepInto:p("debug-step-into",60116),debugStepOut:p("debug-step-out",60117),debugStepOver:p("debug-step-over",60118),debugStop:p("debug-stop",60119),debug:p("debug",60120),deviceCameraVideo:p("device-camera-video",60121),deviceCamera:p("device-camera",60122),deviceMobile:p("device-mobile",60123),diffAdded:p("diff-added",60124),diffIgnored:p("diff-ignored",60125),diffModified:p("diff-modified",60126),diffRemoved:p("diff-removed",60127),diffRenamed:p("diff-renamed",60128),diff:p("diff",60129),diffSidebyside:p("diff-sidebyside",60129),discard:p("discard",60130),editorLayout:p("editor-layout",60131),emptyWindow:p("empty-window",60132),exclude:p("exclude",60133),extensions:p("extensions",60134),eyeClosed:p("eye-closed",60135),fileBinary:p("file-binary",60136),fileCode:p("file-code",60137),fileMedia:p("file-media",60138),filePdf:p("file-pdf",60139),fileSubmodule:p("file-submodule",60140),fileSymlinkDirectory:p("file-symlink-directory",60141),fileSymlinkFile:p("file-symlink-file",60142),fileZip:p("file-zip",60143),files:p("files",60144),filter:p("filter",60145),flame:p("flame",60146),foldDown:p("fold-down",60147),foldUp:p("fold-up",60148),fold:p("fold",60149),folderActive:p("folder-active",60150),folderOpened:p("folder-opened",60151),gear:p("gear",60152),gift:p("gift",60153),gistSecret:p("gist-secret",60154),gist:p("gist",60155),gitCommit:p("git-commit",60156),gitCompare:p("git-compare",60157),compareChanges:p("compare-changes",60157),gitMerge:p("git-merge",60158),githubAction:p("github-action",60159),githubAlt:p("github-alt",60160),globe:p("globe",60161),grabber:p("grabber",60162),graph:p("graph",60163),gripper:p("gripper",60164),heart:p("heart",60165),home:p("home",60166),horizontalRule:p("horizontal-rule",60167),hubot:p("hubot",60168),inbox:p("inbox",60169),issueReopened:p("issue-reopened",60171),issues:p("issues",60172),italic:p("italic",60173),jersey:p("jersey",60174),json:p("json",60175),kebabVertical:p("kebab-vertical",60176),key:p("key",60177),law:p("law",60178),lightbulbAutofix:p("lightbulb-autofix",60179),linkExternal:p("link-external",60180),link:p("link",60181),listOrdered:p("list-ordered",60182),listUnordered:p("list-unordered",60183),liveShare:p("live-share",60184),loading:p("loading",60185),location:p("location",60186),mailRead:p("mail-read",60187),mail:p("mail",60188),markdown:p("markdown",60189),megaphone:p("megaphone",60190),mention:p("mention",60191),milestone:p("milestone",60192),gitPullRequestMilestone:p("git-pull-request-milestone",60192),mortarBoard:p("mortar-board",60193),move:p("move",60194),multipleWindows:p("multiple-windows",60195),mute:p("mute",60196),noNewline:p("no-newline",60197),note:p("note",60198),octoface:p("octoface",60199),openPreview:p("open-preview",60200),package:p("package",60201),paintcan:p("paintcan",60202),pin:p("pin",60203),play:p("play",60204),run:p("run",60204),plug:p("plug",60205),preserveCase:p("preserve-case",60206),preview:p("preview",60207),project:p("project",60208),pulse:p("pulse",60209),question:p("question",60210),quote:p("quote",60211),radioTower:p("radio-tower",60212),reactions:p("reactions",60213),references:p("references",60214),refresh:p("refresh",60215),regex:p("regex",60216),remoteExplorer:p("remote-explorer",60217),remote:p("remote",60218),remove:p("remove",60219),replaceAll:p("replace-all",60220),replace:p("replace",60221),repoClone:p("repo-clone",60222),repoForcePush:p("repo-force-push",60223),repoPull:p("repo-pull",60224),repoPush:p("repo-push",60225),report:p("report",60226),requestChanges:p("request-changes",60227),rocket:p("rocket",60228),rootFolderOpened:p("root-folder-opened",60229),rootFolder:p("root-folder",60230),rss:p("rss",60231),ruby:p("ruby",60232),saveAll:p("save-all",60233),saveAs:p("save-as",60234),save:p("save",60235),screenFull:p("screen-full",60236),screenNormal:p("screen-normal",60237),searchStop:p("search-stop",60238),server:p("server",60240),settingsGear:p("settings-gear",60241),settings:p("settings",60242),shield:p("shield",60243),smiley:p("smiley",60244),sortPrecedence:p("sort-precedence",60245),splitHorizontal:p("split-horizontal",60246),splitVertical:p("split-vertical",60247),squirrel:p("squirrel",60248),starFull:p("star-full",60249),starHalf:p("star-half",60250),symbolClass:p("symbol-class",60251),symbolColor:p("symbol-color",60252),symbolConstant:p("symbol-constant",60253),symbolEnumMember:p("symbol-enum-member",60254),symbolField:p("symbol-field",60255),symbolFile:p("symbol-file",60256),symbolInterface:p("symbol-interface",60257),symbolKeyword:p("symbol-keyword",60258),symbolMisc:p("symbol-misc",60259),symbolOperator:p("symbol-operator",60260),symbolProperty:p("symbol-property",60261),wrench:p("wrench",60261),wrenchSubaction:p("wrench-subaction",60261),symbolSnippet:p("symbol-snippet",60262),tasklist:p("tasklist",60263),telescope:p("telescope",60264),textSize:p("text-size",60265),threeBars:p("three-bars",60266),thumbsdown:p("thumbsdown",60267),thumbsup:p("thumbsup",60268),tools:p("tools",60269),triangleDown:p("triangle-down",60270),triangleLeft:p("triangle-left",60271),triangleRight:p("triangle-right",60272),triangleUp:p("triangle-up",60273),twitter:p("twitter",60274),unfold:p("unfold",60275),unlock:p("unlock",60276),unmute:p("unmute",60277),unverified:p("unverified",60278),verified:p("verified",60279),versions:p("versions",60280),vmActive:p("vm-active",60281),vmOutline:p("vm-outline",60282),vmRunning:p("vm-running",60283),watch:p("watch",60284),whitespace:p("whitespace",60285),wholeWord:p("whole-word",60286),window:p("window",60287),wordWrap:p("word-wrap",60288),zoomIn:p("zoom-in",60289),zoomOut:p("zoom-out",60290),listFilter:p("list-filter",60291),listFlat:p("list-flat",60292),listSelection:p("list-selection",60293),selection:p("selection",60293),listTree:p("list-tree",60294),debugBreakpointFunctionUnverified:p("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:p("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:p("debug-breakpoint-function-disabled",60296),debugStackframeActive:p("debug-stackframe-active",60297),circleSmallFilled:p("circle-small-filled",60298),debugStackframeDot:p("debug-stackframe-dot",60298),terminalDecorationMark:p("terminal-decoration-mark",60298),debugStackframe:p("debug-stackframe",60299),debugStackframeFocused:p("debug-stackframe-focused",60299),debugBreakpointUnsupported:p("debug-breakpoint-unsupported",60300),symbolString:p("symbol-string",60301),debugReverseContinue:p("debug-reverse-continue",60302),debugStepBack:p("debug-step-back",60303),debugRestartFrame:p("debug-restart-frame",60304),debugAlt:p("debug-alt",60305),callIncoming:p("call-incoming",60306),callOutgoing:p("call-outgoing",60307),menu:p("menu",60308),expandAll:p("expand-all",60309),feedback:p("feedback",60310),gitPullRequestReviewer:p("git-pull-request-reviewer",60310),groupByRefType:p("group-by-ref-type",60311),ungroupByRefType:p("ungroup-by-ref-type",60312),account:p("account",60313),gitPullRequestAssignee:p("git-pull-request-assignee",60313),bellDot:p("bell-dot",60314),debugConsole:p("debug-console",60315),library:p("library",60316),output:p("output",60317),runAll:p("run-all",60318),syncIgnored:p("sync-ignored",60319),pinned:p("pinned",60320),githubInverted:p("github-inverted",60321),serverProcess:p("server-process",60322),serverEnvironment:p("server-environment",60323),pass:p("pass",60324),issueClosed:p("issue-closed",60324),stopCircle:p("stop-circle",60325),playCircle:p("play-circle",60326),record:p("record",60327),debugAltSmall:p("debug-alt-small",60328),vmConnect:p("vm-connect",60329),cloud:p("cloud",60330),merge:p("merge",60331),export:p("export",60332),graphLeft:p("graph-left",60333),magnet:p("magnet",60334),notebook:p("notebook",60335),redo:p("redo",60336),checkAll:p("check-all",60337),pinnedDirty:p("pinned-dirty",60338),passFilled:p("pass-filled",60339),circleLargeFilled:p("circle-large-filled",60340),circleLarge:p("circle-large",60341),circleLargeOutline:p("circle-large-outline",60341),combine:p("combine",60342),gather:p("gather",60342),table:p("table",60343),variableGroup:p("variable-group",60344),typeHierarchy:p("type-hierarchy",60345),typeHierarchySub:p("type-hierarchy-sub",60346),typeHierarchySuper:p("type-hierarchy-super",60347),gitPullRequestCreate:p("git-pull-request-create",60348),runAbove:p("run-above",60349),runBelow:p("run-below",60350),notebookTemplate:p("notebook-template",60351),debugRerun:p("debug-rerun",60352),workspaceTrusted:p("workspace-trusted",60353),workspaceUntrusted:p("workspace-untrusted",60354),workspaceUnknown:p("workspace-unknown",60355),terminalCmd:p("terminal-cmd",60356),terminalDebian:p("terminal-debian",60357),terminalLinux:p("terminal-linux",60358),terminalPowershell:p("terminal-powershell",60359),terminalTmux:p("terminal-tmux",60360),terminalUbuntu:p("terminal-ubuntu",60361),terminalBash:p("terminal-bash",60362),arrowSwap:p("arrow-swap",60363),copy:p("copy",60364),personAdd:p("person-add",60365),filterFilled:p("filter-filled",60366),wand:p("wand",60367),debugLineByLine:p("debug-line-by-line",60368),inspect:p("inspect",60369),layers:p("layers",60370),layersDot:p("layers-dot",60371),layersActive:p("layers-active",60372),compass:p("compass",60373),compassDot:p("compass-dot",60374),compassActive:p("compass-active",60375),azure:p("azure",60376),issueDraft:p("issue-draft",60377),gitPullRequestClosed:p("git-pull-request-closed",60378),gitPullRequestDraft:p("git-pull-request-draft",60379),debugAll:p("debug-all",60380),debugCoverage:p("debug-coverage",60381),runErrors:p("run-errors",60382),folderLibrary:p("folder-library",60383),debugContinueSmall:p("debug-continue-small",60384),beakerStop:p("beaker-stop",60385),graphLine:p("graph-line",60386),graphScatter:p("graph-scatter",60387),pieChart:p("pie-chart",60388),bracket:p("bracket",60175),bracketDot:p("bracket-dot",60389),bracketError:p("bracket-error",60390),lockSmall:p("lock-small",60391),azureDevops:p("azure-devops",60392),verifiedFilled:p("verified-filled",60393),newline:p("newline",60394),layout:p("layout",60395),layoutActivitybarLeft:p("layout-activitybar-left",60396),layoutActivitybarRight:p("layout-activitybar-right",60397),layoutPanelLeft:p("layout-panel-left",60398),layoutPanelCenter:p("layout-panel-center",60399),layoutPanelJustify:p("layout-panel-justify",60400),layoutPanelRight:p("layout-panel-right",60401),layoutPanel:p("layout-panel",60402),layoutSidebarLeft:p("layout-sidebar-left",60403),layoutSidebarRight:p("layout-sidebar-right",60404),layoutStatusbar:p("layout-statusbar",60405),layoutMenubar:p("layout-menubar",60406),layoutCentered:p("layout-centered",60407),target:p("target",60408),indent:p("indent",60409),recordSmall:p("record-small",60410),errorSmall:p("error-small",60411),terminalDecorationError:p("terminal-decoration-error",60411),arrowCircleDown:p("arrow-circle-down",60412),arrowCircleLeft:p("arrow-circle-left",60413),arrowCircleRight:p("arrow-circle-right",60414),arrowCircleUp:p("arrow-circle-up",60415),layoutSidebarRightOff:p("layout-sidebar-right-off",60416),layoutPanelOff:p("layout-panel-off",60417),layoutSidebarLeftOff:p("layout-sidebar-left-off",60418),blank:p("blank",60419),heartFilled:p("heart-filled",60420),map:p("map",60421),mapHorizontal:p("map-horizontal",60421),foldHorizontal:p("fold-horizontal",60421),mapFilled:p("map-filled",60422),mapHorizontalFilled:p("map-horizontal-filled",60422),foldHorizontalFilled:p("fold-horizontal-filled",60422),circleSmall:p("circle-small",60423),bellSlash:p("bell-slash",60424),bellSlashDot:p("bell-slash-dot",60425),commentUnresolved:p("comment-unresolved",60426),gitPullRequestGoToChanges:p("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:p("git-pull-request-new-changes",60428),searchFuzzy:p("search-fuzzy",60429),commentDraft:p("comment-draft",60430),send:p("send",60431),sparkle:p("sparkle",60432),insert:p("insert",60433),mic:p("mic",60434),thumbsdownFilled:p("thumbsdown-filled",60435),thumbsupFilled:p("thumbsup-filled",60436),coffee:p("coffee",60437),snake:p("snake",60438),game:p("game",60439),vr:p("vr",60440),chip:p("chip",60441),piano:p("piano",60442),music:p("music",60443),micFilled:p("mic-filled",60444),repoFetch:p("repo-fetch",60445),copilot:p("copilot",60446),lightbulbSparkle:p("lightbulb-sparkle",60447),robot:p("robot",60448),sparkleFilled:p("sparkle-filled",60449),diffSingle:p("diff-single",60450),diffMultiple:p("diff-multiple",60451),surroundWith:p("surround-with",60452),share:p("share",60453),gitStash:p("git-stash",60454),gitStashApply:p("git-stash-apply",60455),gitStashPop:p("git-stash-pop",60456),vscode:p("vscode",60457),vscodeInsiders:p("vscode-insiders",60458),codeOss:p("code-oss",60459),runCoverage:p("run-coverage",60460),runAllCoverage:p("run-all-coverage",60461),coverage:p("coverage",60462),githubProject:p("github-project",60463),mapVertical:p("map-vertical",60464),foldVertical:p("fold-vertical",60464),mapVerticalFilled:p("map-vertical-filled",60465),foldVerticalFilled:p("fold-vertical-filled",60465),goToSearch:p("go-to-search",60466),percentage:p("percentage",60467),sortPercentage:p("sort-percentage",60467),attach:p("attach",60468)},a$={dialogError:p("dialog-error","error"),dialogWarning:p("dialog-warning","warning"),dialogInfo:p("dialog-info","info"),dialogClose:p("dialog-close","close"),treeItemExpanded:p("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:p("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:p("tree-filter-on-type-off","list-selection"),treeFilterClear:p("tree-filter-clear","close"),treeItemLoading:p("tree-item-loading","loading"),menuSelection:p("menu-selection","check"),menuSubmenu:p("menu-submenu","chevron-right"),menuBarMore:p("menubar-more","more"),scrollbarButtonLeft:p("scrollbar-button-left","triangle-left"),scrollbarButtonRight:p("scrollbar-button-right","triangle-right"),scrollbarButtonUp:p("scrollbar-button-up","triangle-up"),scrollbarButtonDown:p("scrollbar-button-down","triangle-down"),toolBarMore:p("toolbar-more","more"),quickInputBack:p("quick-input-back","arrow-left"),dropDownButton:p("drop-down-button",60084),symbolCustomColor:p("symbol-customcolor",60252),exportIcon:p("export",60332),workspaceUnspecified:p("workspace-unspecified",60355),newLine:p("newline",60394),thumbsDownFilled:p("thumbsdown-filled",60435),thumbsUpFilled:p("thumbsup-filled",60436),gitFetch:p("git-fetch",60445),lightbulbSparkleAutofix:p("lightbulb-sparkle-autofix",60447),debugBreakpointPending:p("debug-breakpoint-pending",60377)},Se={...o$,...a$},ka;(function(e){function t(i){return i&&typeof i=="object"&&typeof i.id=="string"}e.isThemeColor=t})(ka||(ka={}));var Ai;(function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function i(f){const g=t.exec(f.id);if(!g)return i(Se.error);const[,m,b]=g,k=["codicon","codicon-"+m];return b&&k.push("codicon-modifier-"+b.substring(1)),k}e.asClassNameArray=i;function r(f){return i(f).join(" ")}e.asClassName=r;function n(f){return"."+i(f).join(".")}e.asCSSSelector=n;function s(f){return f&&typeof f=="object"&&typeof f.id=="string"&&(typeof f.color>"u"||ka.isThemeColor(f.color))}e.isThemeIcon=s;const o=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function a(f){const g=o.exec(f);if(!g)return;const[,m]=g;return{id:m}}e.fromString=a;function c(f){return{id:f}}e.fromId=c;function l(f,g){let m=f.id;const b=m.lastIndexOf("~");return b!==-1&&(m=m.substring(0,b)),g&&(m=`${m}~${g}`),{id:m}}e.modify=l;function u(f){const g=f.id.lastIndexOf("~");if(g!==-1)return f.id.substring(g+1)}e.getModifier=u;function h(f,g){return f.id===g.id&&f.color?.id===g.color?.id}e.isEqual=h})(Ai||(Ai={}));var Im=new RegExp(`\\$\\(${Ai.iconNameExpression}(?:${Ai.iconModifierExpression})?\\)`,"g"),c$=new RegExp(`(\\\\)?${Im.source}`,"g");function l$(e){return e.replace(c$,(t,i)=>i?t:`\\${t}`)}var VC=new RegExp(`\\\\${Im.source}`,"g"),qC=new RegExp(`(\\s)?(\\\\)?${Im.source}(\\s)?`,"g"),GC=new RegExp(`\\$\\(${Ai.iconNameCharacter}+\\)`,"g"),Bh;(function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"})(Bh||(Bh={}));var k4=class{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw je("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=Bh.Paragraph){return this.value+=u$(this.supportThemeIcons?l$(e):e).replace(/([ \t]+)/g,(i,r)=>"&nbsp;".repeat(r.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===Bh.Break?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${h$(t,e)}
`,this}appendLink(e,t,i){return this.value+="[",this.value+=this.c(t,"]"),this.value+="](",this.value+=this.c(String(e),")"),i&&(this.value+=` "${this.c(this.c(i,'"'),")")}"`),this.value+=")",this}c(e,t){const i=new RegExp(vo(t),"g");return e.replace(i,(r,n)=>e.charAt(n-1)!=="\\"?`\\${r}`:r)}};function $o(e){return e instanceof k4?!0:e&&typeof e=="object"?typeof e.value=="string"&&(typeof e.isTrusted=="boolean"||typeof e.isTrusted=="object"||e.isTrusted===void 0)&&(typeof e.supportThemeIcons=="boolean"||e.supportThemeIcons===void 0):!1}function u$(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function h$(e,t){const i=e.match(/^`+/gm)?.reduce((n,s)=>n.length>s.length?n:s).length??0,r=i>=3?i+1:3;return[`${"`".repeat(r)}${t}`,e,`${"`".repeat(r)}`].join(`
`)}function d$(e){const t=[],i=e.split("|").map(n=>n.trim());e=i[0];const r=i[1];if(r){const n=/height=(\d+)/.exec(r),s=/width=(\d+)/.exec(r),o=n?n[1]:"",a=s?s[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&t.push(`width="${a}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}var Si={};(function(){function e(t,i){i(Si)}e.amd=!0,function(t,i){typeof e=="function"&&e.amd?e(["exports"],i):typeof exports=="object"&&typeof module<"u"?i(exports):(t=typeof globalThis<"u"?globalThis:t||self,i(t.marked={}))}(this,function(t){"use strict";function i(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}t.defaults=i();function r(V){t.defaults=V}const n=/[&<>"']/,s=new RegExp(n.source,"g"),o=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(o.source,"g"),c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l=V=>c[V];function u(V,y){if(y){if(n.test(V))return V.replace(s,l)}else if(o.test(V))return V.replace(a,l);return V}const h=/(^|[^\[])\^/g;function f(V,y){let S=typeof V=="string"?V:V.source;y=y||"";const x={replace:($,T)=>{let M=typeof T=="string"?T:T.source;return M=M.replace(h,"$1"),S=S.replace($,M),x},getRegex:()=>new RegExp(S,y)};return x}function g(V){try{V=encodeURI(V).replace(/%25/g,"%")}catch{return null}return V}const m={exec:()=>null};function b(V,y){const S=V.replace(/\|/g,(T,M,j)=>{let oe=!1,ge=M;for(;--ge>=0&&j[ge]==="\\";)oe=!oe;return oe?"|":" |"}),x=S.split(/ \|/);let $=0;if(x[0].trim()||x.shift(),x.length>0&&!x[x.length-1].trim()&&x.pop(),y)if(x.length>y)x.splice(y);else for(;x.length<y;)x.push("");for(;$<x.length;$++)x[$]=x[$].trim().replace(/\\\|/g,"|");return x}function k(V,y,S){const x=V.length;if(x===0)return"";let $=0;for(;$<x;){const T=V.charAt(x-$-1);if(T===y&&!S)$++;else if(T!==y&&S)$++;else break}return V.slice(0,x-$)}function I(V,y){if(V.indexOf(y[1])===-1)return-1;let S=0;for(let x=0;x<V.length;x++)if(V[x]==="\\")x++;else if(V[x]===y[0])S++;else if(V[x]===y[1]&&(S--,S<0))return x;return-1}function R(V,y,S,x){const $=y.href,T=y.title?u(y.title):null,M=V[1].replace(/\\([\[\]])/g,"$1");if(V[0].charAt(0)!=="!"){x.state.inLink=!0;const j={type:"link",raw:S,href:$,title:T,text:M,tokens:x.inlineTokens(M)};return x.state.inLink=!1,j}return{type:"image",raw:S,href:$,title:T,text:u(M)}}function N(V,y){const S=V.match(/^(\s+)(?:```)/);if(S===null)return y;const x=S[1];return y.split(`
`).map($=>{const T=$.match(/^\s+/);if(T===null)return $;const[M]=T;return M.length>=x.length?$.slice(x.length):$}).join(`
`)}class z{options;rules;lexer;constructor(y){this.options=y||t.defaults}space(y){const S=this.rules.block.newline.exec(y);if(S&&S[0].length>0)return{type:"space",raw:S[0]}}code(y){const S=this.rules.block.code.exec(y);if(S){const x=S[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:S[0],codeBlockStyle:"indented",text:this.options.pedantic?x:k(x,`
`)}}}fences(y){const S=this.rules.block.fences.exec(y);if(S){const x=S[0],$=N(x,S[3]||"");return{type:"code",raw:x,lang:S[2]?S[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):S[2],text:$}}}heading(y){const S=this.rules.block.heading.exec(y);if(S){let x=S[2].trim();if(/#$/.test(x)){const $=k(x,"#");(this.options.pedantic||!$||/ $/.test($))&&(x=$.trim())}return{type:"heading",raw:S[0],depth:S[1].length,text:x,tokens:this.lexer.inline(x)}}}hr(y){const S=this.rules.block.hr.exec(y);if(S)return{type:"hr",raw:k(S[0],`
`)}}blockquote(y){const S=this.rules.block.blockquote.exec(y);if(S){let x=k(S[0],`
`).split(`
`),$="",T="";const M=[];for(;x.length>0;){let j=!1;const oe=[];let ge;for(ge=0;ge<x.length;ge++)if(/^ {0,3}>/.test(x[ge]))oe.push(x[ge]),j=!0;else if(!j)oe.push(x[ge]);else break;x=x.slice(ge);const _e=oe.join(`
`),nt=_e.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");$=$?`${$}
${_e}`:_e,T=T?`${T}
${nt}`:nt;const kt=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(nt,M,!0),this.lexer.state.top=kt,x.length===0)break;const ai=M[M.length-1];if(ai?.type==="code")break;if(ai?.type==="blockquote"){const Pt=ai,rr=Pt.raw+`
`+x.join(`
`),$r=this.blockquote(rr);M[M.length-1]=$r,$=$.substring(0,$.length-Pt.raw.length)+$r.raw,T=T.substring(0,T.length-Pt.text.length)+$r.text;break}else if(ai?.type==="list"){const Pt=ai,rr=Pt.raw+`
`+x.join(`
`),$r=this.list(rr);M[M.length-1]=$r,$=$.substring(0,$.length-ai.raw.length)+$r.raw,T=T.substring(0,T.length-Pt.raw.length)+$r.raw,x=rr.substring(M[M.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:$,tokens:M,text:T}}}list(y){let S=this.rules.block.list.exec(y);if(S){let x=S[1].trim();const $=x.length>1,T={type:"list",raw:"",ordered:$,start:$?+x.slice(0,-1):"",loose:!1,items:[]};x=$?`\\d{1,9}\\${x.slice(-1)}`:`\\${x}`,this.options.pedantic&&(x=$?x:"[*+-]");const M=new RegExp(`^( {0,3}${x})((?:[	 ][^\\n]*)?(?:\\n|$))`);let j=!1;for(;y;){let oe=!1,ge="",_e="";if(!(S=M.exec(y))||this.rules.block.hr.test(y))break;ge=S[0],y=y.substring(ge.length);let nt=S[2].split(`
`,1)[0].replace(/^\t+/,Uc=>" ".repeat(3*Uc.length)),kt=y.split(`
`,1)[0],ai=!nt.trim(),Pt=0;if(this.options.pedantic?(Pt=2,_e=nt.trimStart()):ai?Pt=S[1].length+1:(Pt=S[2].search(/[^ ]/),Pt=Pt>4?1:Pt,_e=nt.slice(Pt),Pt+=S[1].length),ai&&/^ *$/.test(kt)&&(ge+=kt+`
`,y=y.substring(kt.length+1),oe=!0),!oe){const Uc=new RegExp(`^ {0,${Math.min(3,Pt-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),lh=new RegExp(`^ {0,${Math.min(3,Pt-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),uh=new RegExp(`^ {0,${Math.min(3,Pt-1)}}(?:\`\`\`|~~~)`),hh=new RegExp(`^ {0,${Math.min(3,Pt-1)}}#`);for(;y;){const v=y.split(`
`,1)[0];if(kt=v,this.options.pedantic&&(kt=kt.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),uh.test(kt)||hh.test(kt)||Uc.test(kt)||lh.test(y))break;if(kt.search(/[^ ]/)>=Pt||!kt.trim())_e+=`
`+kt.slice(Pt);else{if(ai||nt.search(/[^ ]/)>=4||uh.test(nt)||hh.test(nt)||lh.test(nt))break;_e+=`
`+kt}!ai&&!kt.trim()&&(ai=!0),ge+=v+`
`,y=y.substring(v.length+1),nt=kt.slice(Pt)}}T.loose||(j?T.loose=!0:/\n *\n *$/.test(ge)&&(j=!0));let rr=null,$r;this.options.gfm&&(rr=/^\[[ xX]\] /.exec(_e),rr&&($r=rr[0]!=="[ ] ",_e=_e.replace(/^\[[ xX]\] +/,""))),T.items.push({type:"list_item",raw:ge,task:!!rr,checked:$r,loose:!1,text:_e,tokens:[]}),T.raw+=ge}T.items[T.items.length-1].raw=T.items[T.items.length-1].raw.trimEnd(),T.items[T.items.length-1].text=T.items[T.items.length-1].text.trimEnd(),T.raw=T.raw.trimEnd();for(let oe=0;oe<T.items.length;oe++)if(this.lexer.state.top=!1,T.items[oe].tokens=this.lexer.blockTokens(T.items[oe].text,[]),!T.loose){const ge=T.items[oe].tokens.filter(nt=>nt.type==="space"),_e=ge.length>0&&ge.some(nt=>/\n.*\n/.test(nt.raw));T.loose=_e}if(T.loose)for(let oe=0;oe<T.items.length;oe++)T.items[oe].loose=!0;return T}}html(y){const S=this.rules.block.html.exec(y);if(S)return{type:"html",block:!0,raw:S[0],pre:S[1]==="pre"||S[1]==="script"||S[1]==="style",text:S[0]}}def(y){const S=this.rules.block.def.exec(y);if(S){const x=S[1].toLowerCase().replace(/\s+/g," "),$=S[2]?S[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",T=S[3]?S[3].substring(1,S[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):S[3];return{type:"def",tag:x,raw:S[0],href:$,title:T}}}table(y){const S=this.rules.block.table.exec(y);if(!S||!/[:|]/.test(S[2]))return;const x=b(S[1]),$=S[2].replace(/^\||\| *$/g,"").split("|"),T=S[3]&&S[3].trim()?S[3].replace(/\n[ \t]*$/,"").split(`
`):[],M={type:"table",raw:S[0],header:[],align:[],rows:[]};if(x.length===$.length){for(const j of $)/^ *-+: *$/.test(j)?M.align.push("right"):/^ *:-+: *$/.test(j)?M.align.push("center"):/^ *:-+ *$/.test(j)?M.align.push("left"):M.align.push(null);for(let j=0;j<x.length;j++)M.header.push({text:x[j],tokens:this.lexer.inline(x[j]),header:!0,align:M.align[j]});for(const j of T)M.rows.push(b(j,M.header.length).map((oe,ge)=>({text:oe,tokens:this.lexer.inline(oe),header:!1,align:M.align[ge]})));return M}}lheading(y){const S=this.rules.block.lheading.exec(y);if(S)return{type:"heading",raw:S[0],depth:S[2].charAt(0)==="="?1:2,text:S[1],tokens:this.lexer.inline(S[1])}}paragraph(y){const S=this.rules.block.paragraph.exec(y);if(S){const x=S[1].charAt(S[1].length-1)===`
`?S[1].slice(0,-1):S[1];return{type:"paragraph",raw:S[0],text:x,tokens:this.lexer.inline(x)}}}text(y){const S=this.rules.block.text.exec(y);if(S)return{type:"text",raw:S[0],text:S[0],tokens:this.lexer.inline(S[0])}}escape(y){const S=this.rules.inline.escape.exec(y);if(S)return{type:"escape",raw:S[0],text:u(S[1])}}tag(y){const S=this.rules.inline.tag.exec(y);if(S)return!this.lexer.state.inLink&&/^<a /i.test(S[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(S[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(S[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(S[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:S[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:S[0]}}link(y){const S=this.rules.inline.link.exec(y);if(S){const x=S[2].trim();if(!this.options.pedantic&&/^</.test(x)){if(!/>$/.test(x))return;const M=k(x.slice(0,-1),"\\");if((x.length-M.length)%2===0)return}else{const M=I(S[2],"()");if(M>-1){const oe=(S[0].indexOf("!")===0?5:4)+S[1].length+M;S[2]=S[2].substring(0,M),S[0]=S[0].substring(0,oe).trim(),S[3]=""}}let $=S[2],T="";if(this.options.pedantic){const M=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec($);M&&($=M[1],T=M[3])}else T=S[3]?S[3].slice(1,-1):"";return $=$.trim(),/^</.test($)&&(this.options.pedantic&&!/>$/.test(x)?$=$.slice(1):$=$.slice(1,-1)),R(S,{href:$&&$.replace(this.rules.inline.anyPunctuation,"$1"),title:T&&T.replace(this.rules.inline.anyPunctuation,"$1")},S[0],this.lexer)}}reflink(y,S){let x;if((x=this.rules.inline.reflink.exec(y))||(x=this.rules.inline.nolink.exec(y))){const $=(x[2]||x[1]).replace(/\s+/g," "),T=S[$.toLowerCase()];if(!T){const M=x[0].charAt(0);return{type:"text",raw:M,text:M}}return R(x,T,x[0],this.lexer)}}emStrong(y,S,x=""){let $=this.rules.inline.emStrongLDelim.exec(y);if(!$||$[3]&&x.match(/[\p{L}\p{N}]/u))return;if(!($[1]||$[2]||"")||!x||this.rules.inline.punctuation.exec(x)){const M=[...$[0]].length-1;let j,oe,ge=M,_e=0;const nt=$[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(nt.lastIndex=0,S=S.slice(-1*y.length+M);($=nt.exec(S))!=null;){if(j=$[1]||$[2]||$[3]||$[4]||$[5]||$[6],!j)continue;if(oe=[...j].length,$[3]||$[4]){ge+=oe;continue}else if(($[5]||$[6])&&M%3&&!((M+oe)%3)){_e+=oe;continue}if(ge-=oe,ge>0)continue;oe=Math.min(oe,oe+ge+_e);const kt=[...$[0]][0].length,ai=y.slice(0,M+$.index+kt+oe);if(Math.min(M,oe)%2){const rr=ai.slice(1,-1);return{type:"em",raw:ai,text:rr,tokens:this.lexer.inlineTokens(rr)}}const Pt=ai.slice(2,-2);return{type:"strong",raw:ai,text:Pt,tokens:this.lexer.inlineTokens(Pt)}}}}codespan(y){const S=this.rules.inline.code.exec(y);if(S){let x=S[2].replace(/\n/g," ");const $=/[^ ]/.test(x),T=/^ /.test(x)&&/ $/.test(x);return $&&T&&(x=x.substring(1,x.length-1)),x=u(x,!0),{type:"codespan",raw:S[0],text:x}}}br(y){const S=this.rules.inline.br.exec(y);if(S)return{type:"br",raw:S[0]}}del(y){const S=this.rules.inline.del.exec(y);if(S)return{type:"del",raw:S[0],text:S[2],tokens:this.lexer.inlineTokens(S[2])}}autolink(y){const S=this.rules.inline.autolink.exec(y);if(S){let x,$;return S[2]==="@"?(x=u(S[1]),$="mailto:"+x):(x=u(S[1]),$=x),{type:"link",raw:S[0],text:x,href:$,tokens:[{type:"text",raw:x,text:x}]}}}url(y){let S;if(S=this.rules.inline.url.exec(y)){let x,$;if(S[2]==="@")x=u(S[0]),$="mailto:"+x;else{let T;do T=S[0],S[0]=this.rules.inline._backpedal.exec(S[0])?.[0]??"";while(T!==S[0]);x=u(S[0]),S[1]==="www."?$="http://"+S[0]:$=S[0]}return{type:"link",raw:S[0],text:x,href:$,tokens:[{type:"text",raw:x,text:x}]}}}inlineText(y){const S=this.rules.inline.text.exec(y);if(S){let x;return this.lexer.state.inRawBlock?x=S[0]:x=u(S[0]),{type:"text",raw:S[0],text:x}}}}const q=/^(?: *(?:\n|$))+/,ee=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,pe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,re=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,fe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,We=/(?:[*+-]|\d{1,9}[.)])/,Ae=f(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,We).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),bt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Z=/^[^\n]+/,J=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ce=f(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",J).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ne=f(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,We).getRegex(),te="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",$e=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ze=f("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",$e).replace("tag",te).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Le=f(bt).replace("hr",re).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te).getRegex(),Ct={blockquote:f(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Le).getRegex(),code:ee,def:ce,fences:pe,heading:fe,hr:re,html:ze,lheading:Ae,list:ne,newline:q,paragraph:Le,table:m,text:Z},Yt=f("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",re).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te).getRegex(),Ut={...Ct,table:Yt,paragraph:f(bt).replace("hr",re).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Yt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te).getRegex()},Ti={...Ct,html:f(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",$e).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:m,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:f(bt).replace("hr",re).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ae).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ft=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ji=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Nr=/^( {2,}|\\)\n(?!\s*$)/,Tn=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,pr="\\p{P}\\p{S}",Fe=f(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,pr).getRegex(),Or=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,qe=f(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,pr).getRegex(),dn=f("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,pr).getRegex(),Fr=f("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,pr).getRegex(),gr=f(/\\([punct])/,"gu").replace(/punct/g,pr).getRegex(),ws=f(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),bs=f($e).replace("(?:-->|$)","-->").getRegex(),ys=f("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",bs).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ln=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Es=f(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ln).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ss=f(/^!?\[(label)\]\[(ref)\]/).replace("label",Ln).replace("ref",J).getRegex(),Mr=f(/^!?\[(ref)\](?:\[\])?/).replace("ref",J).getRegex(),Di=f("reflink|nolink(?!\\()","g").replace("reflink",Ss).replace("nolink",Mr).getRegex(),Ur={_backpedal:m,anyPunctuation:gr,autolink:ws,blockSkip:Or,br:Nr,code:ji,del:m,emStrongLDelim:qe,emStrongRDelimAst:dn,emStrongRDelimUnd:Fr,escape:ft,link:Es,nolink:Mr,punctuation:Fe,reflink:Ss,reflinkSearch:Di,tag:ys,text:Tn,url:m},Nt={...Ur,link:f(/^!?\[(label)\]\((.*?)\)/).replace("label",Ln).getRegex(),reflink:f(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ln).getRegex()},Ot={...Ur,escape:f(ft).replace("])","~|])").getRegex(),url:f(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Mc={...Ot,br:f(Nr).replace("{2,}","*").getRegex(),text:f(Ot.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},xs={normal:Ct,gfm:Ut,pedantic:Ti},Wi={normal:Ur,gfm:Ot,breaks:Mc,pedantic:Nt};class Li{tokens;options;state;tokenizer;inlineQueue;constructor(y){this.tokens=[],this.tokens.links=Object.create(null),this.options=y||t.defaults,this.options.tokenizer=this.options.tokenizer||new z,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const S={block:xs.normal,inline:Wi.normal};this.options.pedantic?(S.block=xs.pedantic,S.inline=Wi.pedantic):this.options.gfm&&(S.block=xs.gfm,this.options.breaks?S.inline=Wi.breaks:S.inline=Wi.gfm),this.tokenizer.rules=S}static get rules(){return{block:xs,inline:Wi}}static lex(y,S){return new Li(S).lex(y)}static lexInline(y,S){return new Li(S).inlineTokens(y)}lex(y){y=y.replace(/\r\n|\r/g,`
`),this.blockTokens(y,this.tokens);for(let S=0;S<this.inlineQueue.length;S++){const x=this.inlineQueue[S];this.inlineTokens(x.src,x.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(y,S=[],x=!1){this.options.pedantic?y=y.replace(/\t/g,"    ").replace(/^ +$/gm,""):y=y.replace(/^( *)(\t+)/gm,(j,oe,ge)=>oe+"    ".repeat(ge.length));let $,T,M;for(;y;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(j=>($=j.call({lexer:this},y,S))?(y=y.substring($.raw.length),S.push($),!0):!1))){if($=this.tokenizer.space(y)){y=y.substring($.raw.length),$.raw.length===1&&S.length>0?S[S.length-1].raw+=`
`:S.push($);continue}if($=this.tokenizer.code(y)){y=y.substring($.raw.length),T=S[S.length-1],T&&(T.type==="paragraph"||T.type==="text")?(T.raw+=`
`+$.raw,T.text+=`
`+$.text,this.inlineQueue[this.inlineQueue.length-1].src=T.text):S.push($);continue}if($=this.tokenizer.fences(y)){y=y.substring($.raw.length),S.push($);continue}if($=this.tokenizer.heading(y)){y=y.substring($.raw.length),S.push($);continue}if($=this.tokenizer.hr(y)){y=y.substring($.raw.length),S.push($);continue}if($=this.tokenizer.blockquote(y)){y=y.substring($.raw.length),S.push($);continue}if($=this.tokenizer.list(y)){y=y.substring($.raw.length),S.push($);continue}if($=this.tokenizer.html(y)){y=y.substring($.raw.length),S.push($);continue}if($=this.tokenizer.def(y)){y=y.substring($.raw.length),T=S[S.length-1],T&&(T.type==="paragraph"||T.type==="text")?(T.raw+=`
`+$.raw,T.text+=`
`+$.raw,this.inlineQueue[this.inlineQueue.length-1].src=T.text):this.tokens.links[$.tag]||(this.tokens.links[$.tag]={href:$.href,title:$.title});continue}if($=this.tokenizer.table(y)){y=y.substring($.raw.length),S.push($);continue}if($=this.tokenizer.lheading(y)){y=y.substring($.raw.length),S.push($);continue}if(M=y,this.options.extensions&&this.options.extensions.startBlock){let j=1/0;const oe=y.slice(1);let ge;this.options.extensions.startBlock.forEach(_e=>{ge=_e.call({lexer:this},oe),typeof ge=="number"&&ge>=0&&(j=Math.min(j,ge))}),j<1/0&&j>=0&&(M=y.substring(0,j+1))}if(this.state.top&&($=this.tokenizer.paragraph(M))){T=S[S.length-1],x&&T?.type==="paragraph"?(T.raw+=`
`+$.raw,T.text+=`
`+$.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=T.text):S.push($),x=M.length!==y.length,y=y.substring($.raw.length);continue}if($=this.tokenizer.text(y)){y=y.substring($.raw.length),T=S[S.length-1],T&&T.type==="text"?(T.raw+=`
`+$.raw,T.text+=`
`+$.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=T.text):S.push($);continue}if(y){const j="Infinite loop on byte: "+y.charCodeAt(0);if(this.options.silent){console.error(j);break}else throw new Error(j)}}return this.state.top=!0,S}inline(y,S=[]){return this.inlineQueue.push({src:y,tokens:S}),S}inlineTokens(y,S=[]){let x,$,T,M=y,j,oe,ge;if(this.tokens.links){const _e=Object.keys(this.tokens.links);if(_e.length>0)for(;(j=this.tokenizer.rules.inline.reflinkSearch.exec(M))!=null;)_e.includes(j[0].slice(j[0].lastIndexOf("[")+1,-1))&&(M=M.slice(0,j.index)+"["+"a".repeat(j[0].length-2)+"]"+M.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(j=this.tokenizer.rules.inline.blockSkip.exec(M))!=null;)M=M.slice(0,j.index)+"["+"a".repeat(j[0].length-2)+"]"+M.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(j=this.tokenizer.rules.inline.anyPunctuation.exec(M))!=null;)M=M.slice(0,j.index)+"++"+M.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;y;)if(oe||(ge=""),oe=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(_e=>(x=_e.call({lexer:this},y,S))?(y=y.substring(x.raw.length),S.push(x),!0):!1))){if(x=this.tokenizer.escape(y)){y=y.substring(x.raw.length),S.push(x);continue}if(x=this.tokenizer.tag(y)){y=y.substring(x.raw.length),$=S[S.length-1],$&&x.type==="text"&&$.type==="text"?($.raw+=x.raw,$.text+=x.text):S.push(x);continue}if(x=this.tokenizer.link(y)){y=y.substring(x.raw.length),S.push(x);continue}if(x=this.tokenizer.reflink(y,this.tokens.links)){y=y.substring(x.raw.length),$=S[S.length-1],$&&x.type==="text"&&$.type==="text"?($.raw+=x.raw,$.text+=x.text):S.push(x);continue}if(x=this.tokenizer.emStrong(y,M,ge)){y=y.substring(x.raw.length),S.push(x);continue}if(x=this.tokenizer.codespan(y)){y=y.substring(x.raw.length),S.push(x);continue}if(x=this.tokenizer.br(y)){y=y.substring(x.raw.length),S.push(x);continue}if(x=this.tokenizer.del(y)){y=y.substring(x.raw.length),S.push(x);continue}if(x=this.tokenizer.autolink(y)){y=y.substring(x.raw.length),S.push(x);continue}if(!this.state.inLink&&(x=this.tokenizer.url(y))){y=y.substring(x.raw.length),S.push(x);continue}if(T=y,this.options.extensions&&this.options.extensions.startInline){let _e=1/0;const nt=y.slice(1);let kt;this.options.extensions.startInline.forEach(ai=>{kt=ai.call({lexer:this},nt),typeof kt=="number"&&kt>=0&&(_e=Math.min(_e,kt))}),_e<1/0&&_e>=0&&(T=y.substring(0,_e+1))}if(x=this.tokenizer.inlineText(T)){y=y.substring(x.raw.length),x.raw.slice(-1)!=="_"&&(ge=x.raw.slice(-1)),oe=!0,$=S[S.length-1],$&&$.type==="text"?($.raw+=x.raw,$.text+=x.text):S.push(x);continue}if(y){const _e="Infinite loop on byte: "+y.charCodeAt(0);if(this.options.silent){console.error(_e);break}else throw new Error(_e)}}return S}}class P{options;parser;constructor(y){this.options=y||t.defaults}space(y){return""}code({text:y,lang:S,escaped:x}){const $=(S||"").match(/^\S*/)?.[0],T=y.replace(/\n$/,"")+`
`;return $?'<pre><code class="language-'+u($)+'">'+(x?T:u(T,!0))+`</code></pre>
`:"<pre><code>"+(x?T:u(T,!0))+`</code></pre>
`}blockquote({tokens:y}){return`<blockquote>
${this.parser.parse(y)}</blockquote>
`}html({text:y}){return y}heading({tokens:y,depth:S}){return`<h${S}>${this.parser.parseInline(y)}</h${S}>
`}hr(y){return`<hr>
`}list(y){const S=y.ordered,x=y.start;let $="";for(let j=0;j<y.items.length;j++){const oe=y.items[j];$+=this.listitem(oe)}const T=S?"ol":"ul",M=S&&x!==1?' start="'+x+'"':"";return"<"+T+M+`>
`+$+"</"+T+`>
`}listitem(y){let S="";if(y.task){const x=this.checkbox({checked:!!y.checked});y.loose?y.tokens.length>0&&y.tokens[0].type==="paragraph"?(y.tokens[0].text=x+" "+y.tokens[0].text,y.tokens[0].tokens&&y.tokens[0].tokens.length>0&&y.tokens[0].tokens[0].type==="text"&&(y.tokens[0].tokens[0].text=x+" "+y.tokens[0].tokens[0].text)):y.tokens.unshift({type:"text",raw:x+" ",text:x+" "}):S+=x+" "}return S+=this.parser.parse(y.tokens,!!y.loose),`<li>${S}</li>
`}checkbox({checked:y}){return"<input "+(y?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:y}){return`<p>${this.parser.parseInline(y)}</p>
`}table(y){let S="",x="";for(let T=0;T<y.header.length;T++)x+=this.tablecell(y.header[T]);S+=this.tablerow({text:x});let $="";for(let T=0;T<y.rows.length;T++){const M=y.rows[T];x="";for(let j=0;j<M.length;j++)x+=this.tablecell(M[j]);$+=this.tablerow({text:x})}return $&&($=`<tbody>${$}</tbody>`),`<table>
<thead>
`+S+`</thead>
`+$+`</table>
`}tablerow({text:y}){return`<tr>
${y}</tr>
`}tablecell(y){const S=this.parser.parseInline(y.tokens),x=y.header?"th":"td";return(y.align?`<${x} align="${y.align}">`:`<${x}>`)+S+`</${x}>
`}strong({tokens:y}){return`<strong>${this.parser.parseInline(y)}</strong>`}em({tokens:y}){return`<em>${this.parser.parseInline(y)}</em>`}codespan({text:y}){return`<code>${y}</code>`}br(y){return"<br>"}del({tokens:y}){return`<del>${this.parser.parseInline(y)}</del>`}link({href:y,title:S,tokens:x}){const $=this.parser.parseInline(x),T=g(y);if(T===null)return $;y=T;let M='<a href="'+y+'"';return S&&(M+=' title="'+S+'"'),M+=">"+$+"</a>",M}image({href:y,title:S,text:x}){const $=g(y);if($===null)return x;y=$;let T=`<img src="${y}" alt="${x}"`;return S&&(T+=` title="${S}"`),T+=">",T}text(y){return"tokens"in y&&y.tokens?this.parser.parseInline(y.tokens):y.text}}class O{strong({text:y}){return y}em({text:y}){return y}codespan({text:y}){return y}del({text:y}){return y}html({text:y}){return y}text({text:y}){return y}link({text:y}){return""+y}image({text:y}){return""+y}br(){return""}}class U{options;renderer;textRenderer;constructor(y){this.options=y||t.defaults,this.options.renderer=this.options.renderer||new P,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new O}static parse(y,S){return new U(S).parse(y)}static parseInline(y,S){return new U(S).parseInline(y)}parse(y,S=!0){let x="";for(let $=0;$<y.length;$++){const T=y[$];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[T.type]){const j=T,oe=this.options.extensions.renderers[j.type].call({parser:this},j);if(oe!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(j.type)){x+=oe||"";continue}}const M=T;switch(M.type){case"space":{x+=this.renderer.space(M);continue}case"hr":{x+=this.renderer.hr(M);continue}case"heading":{x+=this.renderer.heading(M);continue}case"code":{x+=this.renderer.code(M);continue}case"table":{x+=this.renderer.table(M);continue}case"blockquote":{x+=this.renderer.blockquote(M);continue}case"list":{x+=this.renderer.list(M);continue}case"html":{x+=this.renderer.html(M);continue}case"paragraph":{x+=this.renderer.paragraph(M);continue}case"text":{let j=M,oe=this.renderer.text(j);for(;$+1<y.length&&y[$+1].type==="text";)j=y[++$],oe+=`
`+this.renderer.text(j);S?x+=this.renderer.paragraph({type:"paragraph",raw:oe,text:oe,tokens:[{type:"text",raw:oe,text:oe}]}):x+=oe;continue}default:{const j='Token with "'+M.type+'" type was not found.';if(this.options.silent)return console.error(j),"";throw new Error(j)}}}return x}parseInline(y,S){S=S||this.renderer;let x="";for(let $=0;$<y.length;$++){const T=y[$];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[T.type]){const j=this.options.extensions.renderers[T.type].call({parser:this},T);if(j!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(T.type)){x+=j||"";continue}}const M=T;switch(M.type){case"escape":{x+=S.text(M);break}case"html":{x+=S.html(M);break}case"link":{x+=S.link(M);break}case"image":{x+=S.image(M);break}case"strong":{x+=S.strong(M);break}case"em":{x+=S.em(M);break}case"codespan":{x+=S.codespan(M);break}case"br":{x+=S.br(M);break}case"del":{x+=S.del(M);break}case"text":{x+=S.text(M);break}default:{const j='Token with "'+M.type+'" type was not found.';if(this.options.silent)return console.error(j),"";throw new Error(j)}}}return x}}class me{options;constructor(y){this.options=y||t.defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(y){return y}postprocess(y){return y}processAllTokens(y){return y}}class Re{defaults=i();options=this.setOptions;parse=this.parseMarkdown(Li.lex,U.parse);parseInline=this.parseMarkdown(Li.lexInline,U.parseInline);Parser=U;Renderer=P;TextRenderer=O;Lexer=Li;Tokenizer=z;Hooks=me;constructor(...y){this.use(...y)}walkTokens(y,S){let x=[];for(const $ of y)switch(x=x.concat(S.call(this,$)),$.type){case"table":{const T=$;for(const M of T.header)x=x.concat(this.walkTokens(M.tokens,S));for(const M of T.rows)for(const j of M)x=x.concat(this.walkTokens(j.tokens,S));break}case"list":{const T=$;x=x.concat(this.walkTokens(T.items,S));break}default:{const T=$;this.defaults.extensions?.childTokens?.[T.type]?this.defaults.extensions.childTokens[T.type].forEach(M=>{const j=T[M].flat(1/0);x=x.concat(this.walkTokens(j,S))}):T.tokens&&(x=x.concat(this.walkTokens(T.tokens,S)))}}return x}use(...y){const S=this.defaults.extensions||{renderers:{},childTokens:{}};return y.forEach(x=>{const $={...x};if($.async=this.defaults.async||$.async||!1,x.extensions&&(x.extensions.forEach(T=>{if(!T.name)throw new Error("extension name required");if("renderer"in T){const M=S.renderers[T.name];M?S.renderers[T.name]=function(...j){let oe=T.renderer.apply(this,j);return oe===!1&&(oe=M.apply(this,j)),oe}:S.renderers[T.name]=T.renderer}if("tokenizer"in T){if(!T.level||T.level!=="block"&&T.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const M=S[T.level];M?M.unshift(T.tokenizer):S[T.level]=[T.tokenizer],T.start&&(T.level==="block"?S.startBlock?S.startBlock.push(T.start):S.startBlock=[T.start]:T.level==="inline"&&(S.startInline?S.startInline.push(T.start):S.startInline=[T.start]))}"childTokens"in T&&T.childTokens&&(S.childTokens[T.name]=T.childTokens)}),$.extensions=S),x.renderer){const T=this.defaults.renderer||new P(this.defaults);for(const M in x.renderer){if(!(M in T))throw new Error(`renderer '${M}' does not exist`);if(["options","parser"].includes(M))continue;const j=M,oe=x.renderer[j],ge=T[j];T[j]=(..._e)=>{let nt=oe.apply(T,_e);return nt===!1&&(nt=ge.apply(T,_e)),nt||""}}$.renderer=T}if(x.tokenizer){const T=this.defaults.tokenizer||new z(this.defaults);for(const M in x.tokenizer){if(!(M in T))throw new Error(`tokenizer '${M}' does not exist`);if(["options","rules","lexer"].includes(M))continue;const j=M,oe=x.tokenizer[j],ge=T[j];T[j]=(..._e)=>{let nt=oe.apply(T,_e);return nt===!1&&(nt=ge.apply(T,_e)),nt}}$.tokenizer=T}if(x.hooks){const T=this.defaults.hooks||new me;for(const M in x.hooks){if(!(M in T))throw new Error(`hook '${M}' does not exist`);if(M==="options")continue;const j=M,oe=x.hooks[j],ge=T[j];me.passThroughHooks.has(M)?T[j]=_e=>{if(this.defaults.async)return Promise.resolve(oe.call(T,_e)).then(kt=>ge.call(T,kt));const nt=oe.call(T,_e);return ge.call(T,nt)}:T[j]=(..._e)=>{let nt=oe.apply(T,_e);return nt===!1&&(nt=ge.apply(T,_e)),nt}}$.hooks=T}if(x.walkTokens){const T=this.defaults.walkTokens,M=x.walkTokens;$.walkTokens=function(j){let oe=[];return oe.push(M.call(this,j)),T&&(oe=oe.concat(T.call(this,j))),oe}}this.defaults={...this.defaults,...$}}),this}setOptions(y){return this.defaults={...this.defaults,...y},this}lexer(y,S){return Li.lex(y,S??this.defaults)}parser(y,S){return U.parse(y,S??this.defaults)}parseMarkdown(y,S){return($,T)=>{const M={...T},j={...this.defaults,...M},oe=this.onError(!!j.silent,!!j.async);if(this.defaults.async===!0&&M.async===!1)return oe(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof $>"u"||$===null)return oe(new Error("marked(): input parameter is undefined or null"));if(typeof $!="string")return oe(new Error("marked(): input parameter is of type "+Object.prototype.toString.call($)+", string expected"));if(j.hooks&&(j.hooks.options=j),j.async)return Promise.resolve(j.hooks?j.hooks.preprocess($):$).then(ge=>y(ge,j)).then(ge=>j.hooks?j.hooks.processAllTokens(ge):ge).then(ge=>j.walkTokens?Promise.all(this.walkTokens(ge,j.walkTokens)).then(()=>ge):ge).then(ge=>S(ge,j)).then(ge=>j.hooks?j.hooks.postprocess(ge):ge).catch(oe);try{j.hooks&&($=j.hooks.preprocess($));let ge=y($,j);j.hooks&&(ge=j.hooks.processAllTokens(ge)),j.walkTokens&&this.walkTokens(ge,j.walkTokens);let _e=S(ge,j);return j.hooks&&(_e=j.hooks.postprocess(_e)),_e}catch(ge){return oe(ge)}}}onError(y,S){return x=>{if(x.message+=`
Please report this to https://github.com/markedjs/marked.`,y){const $="<p>An error occurred:</p><pre>"+u(x.message+"",!0)+"</pre>";return S?Promise.resolve($):$}if(S)return Promise.reject(x);throw x}}}const pt=new Re;function ye(V,y){return pt.parse(V,y)}ye.options=ye.setOptions=function(V){return pt.setOptions(V),ye.defaults=pt.defaults,r(ye.defaults),ye},ye.getDefaults=i,ye.defaults=t.defaults,ye.use=function(...V){return pt.use(...V),ye.defaults=pt.defaults,r(ye.defaults),ye},ye.walkTokens=function(V,y){return pt.walkTokens(V,y)},ye.parseInline=pt.parseInline,ye.Parser=U,ye.parser=U.parse,ye.Renderer=P,ye.TextRenderer=O,ye.Lexer=Li,ye.lexer=Li.lex,ye.Tokenizer=z,ye.Hooks=me,ye.parse=ye;const $i=ye.options,Bt=ye.setOptions,Kt=ye.use,zi=ye.walkTokens,D=ye.parseInline,xt=ye,wi=U.parse,he=Li.lex;t.Hooks=me,t.Lexer=Li,t.Marked=Re,t.Parser=U,t.Renderer=P,t.TextRenderer=O,t.Tokenizer=z,t.getDefaults=i,t.lexer=he,t.marked=ye,t.options=$i,t.parse=xt,t.parseInline=D,t.parser=wi,t.setOptions=Bt,t.use=Kt,t.walkTokens=zi})})();var QC=Si.Hooks||exports.Hooks,JC=Si.Lexer||exports.Lexer,XC=Si.Marked||exports.Marked,ZC=Si.Parser||exports.Parser,YC=Si.Renderer||exports.Renderer,KC=Si.TextRenderer||exports.TextRenderer,eN=Si.Tokenizer||exports.Tokenizer,tN=Si.defaults||exports.defaults,iN=Si.getDefaults||exports.getDefaults,rN=Si.lexer||exports.lexer,D4=Si.marked||exports.marked,nN=Si.options||exports.options,sN=Si.parse||exports.parse,oN=Si.parseInline||exports.parseInline,aN=Si.parser||exports.parser,cN=Si.setOptions||exports.setOptions,lN=Si.use||exports.use,uN=Si.walkTokens||exports.walkTokens;function f$(e){return JSON.stringify(e,p$)}function $4(e){let t=JSON.parse(e);return t=Gi(t),t}function p$(e,t){return t instanceof RegExp?{$mid:Dt.Regexp,source:t.source,flags:t.flags}:t}function Gi(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case Dt.Uri:return E.revive(e);case Dt.Regexp:return new RegExp(e.source,e.flags);case Dt.Date:return new Date(e.source)}if(e instanceof Qe||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let i=0;i<e.length;++i)e[i]=Gi(e[i],t+1);else for(const i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=Gi(e[i],t+1))}return e}var zn=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),g$=/^(.+)\/(.+?)(;.+)?$/;function I4(e,t){const i=g$.exec(e);return i?`${i[1].toLowerCase()}/${i[2].toLowerCase()}${i[3]??""}`:t?void 0:e}var Qi=Symbol("unset"),m$=class{constructor(){this.a=new Am,this.b=0}get size(){return this.b}get nodes(){return this.a.children?.values()||vr.empty()}get entries(){return this.a.children?.entries()||vr.empty()}insert(e,t,i){this.d(e,r=>r._value=t,i)}mutate(e,t){this.d(e,i=>i._value=t(i._value===Qi?void 0:i._value))}mutatePath(e,t){this.d(e,()=>{},i=>t(i))}delete(e){const t=this.c(e);if(!t)return;let i=t.length-1;const r=t[i].node._value;if(r!==Qi){for(this.b--,t[i].node._value=Qi;i>0;i--){const{node:n,part:s}=t[i];if(n.children?.size||n._value!==Qi)break;t[i-1].node.children.delete(s)}return r}}*deleteRecursive(e){const t=this.c(e);if(!t)return;const i=t[t.length-1].node;for(let r=t.length-1;r>0;r--){const n=t[r-1];if(n.node.children.delete(t[r].part),n.node.children.size>0||n.node._value!==Qi)break}for(const r of A4(i))r._value!==Qi&&(this.b--,yield r._value)}find(e){let t=this.a;for(const i of e){const r=t.children?.get(i);if(!r)return;t=r}return t._value===Qi?void 0:t._value}hasKeyOrParent(e){let t=this.a;for(const i of e){const r=t.children?.get(i);if(!r)return!1;if(r._value!==Qi)return!0;t=r}return!1}hasKeyOrChildren(e){let t=this.a;for(const i of e){const r=t.children?.get(i);if(!r)return!1;t=r}return!0}hasKey(e){let t=this.a;for(const i of e){const r=t.children?.get(i);if(!r)return!1;t=r}return t._value!==Qi}c(e){const t=[{part:"",node:this.a}];let i=0;for(const r of e){const n=t[i].node.children?.get(r);if(!n)return;t.push({part:r,node:n}),i++}return t}d(e,t,i){let r=this.a;for(const o of e){if(r.children)if(r.children.has(o))r=r.children.get(o);else{const a=new Am;r.children.set(o,a),r=a}else{const a=new Am;r.children=new Map([[o,a]]),r=a}i?.(r)}const n=r._value===Qi?0:1;t(r);const s=r._value===Qi?0:1;this.b+=s-n}*values(){for(const{_value:e}of A4(this.a))e!==Qi&&(yield e)}};function*A4(e){const t=[e];for(;t.length>0;){const i=t.pop();if(yield i,i.children)for(const r of i.children.values())t.push(r)}}var Am=class{constructor(){this._value=Qi}get value(){return this._value===Qi?void 0:this._value}set value(e){this._value=e===void 0?Qi:e}},Io;(function(e){e[e.Auto=1]="Auto",e[e.Hidden=2]="Hidden",e[e.Visible=3]="Visible"})(Io||(Io={}));var P4={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},R4="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function v$(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const i of R4)e.indexOf(i)>=0||(t+="\\"+i);return t+="\\s]+)",new RegExp(t,"g")}var w$=v$();function T4(e){let t=w$;if(e&&e instanceof RegExp)if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}return t.lastIndex=0,t}var L4=new Vc;L4.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function _4(e,t,i,r,n){if(t=T4(t),n||(n=vr.first(L4)),i.length>n.maxLen){let l=e-n.maxLen/2;return l<0?l=0:r+=l,i=i.substring(l,e+n.maxLen/2),_4(e,t,i,r,n)}const s=Date.now(),o=e-1-r;let a=-1,c=null;for(let l=1;!(Date.now()-s>=n.timeBudget);l++){const u=o-n.windowSize*l;t.lastIndex=Math.max(0,u);const h=b$(t,i,o,a);if(!h&&c||(c=h,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:r+1+c.index,endColumn:r+1+c.index+c[0].length};return t.lastIndex=0,l}return null}function b$(e,t,i,r){let n;for(;n=e.exec(t);){const s=n.index||0;if(s<=i&&e.lastIndex>=i)return n;if(r>0&&s>r)return null}return null}var hN=K("accessibilityService"),Vn;(function(e){e[e.Unknown=0]="Unknown",e[e.Disabled=1]="Disabled",e[e.Enabled=2]="Enabled"})(Vn||(Vn={}));var dN=new X("accessibilityModeEnabled",!1),Ns;(function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"})(Ns||(Ns={}));var y$=8,E$=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},ht=class{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return jh(e,t)}compute(e,t,i){return i}},Hh=class{constructor(e,t){this.newValue=e,this.didChange=t}};function jh(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return new Hh(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const r=Array.isArray(e)&&Array.isArray(t)&&Nn(e,t);return new Hh(t,!r)}let i=!1;for(const r in t)if(t.hasOwnProperty(r)){const n=jh(e[r],t[r]);n.didChange&&(e[r]=n.newValue,i=!0)}return new Hh(e,i)}var pl=class{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return jh(e,t)}validate(e){return this.defaultValue}},Da=class{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return jh(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}};function le(e,t){return typeof e>"u"?t:e==="false"?!1:!!e}var Oe=class extends Da{constructor(e,t,i,r=void 0){typeof r<"u"&&(r.type="boolean",r.default=i),super(e,t,i,r)}validate(e){return le(e,this.defaultValue)}};function S$(e,t,i,r){if(typeof e>"u")return t;let n=parseInt(e,10);return isNaN(n)?t:(n=Math.max(i,n),n=Math.min(r,n),n|0)}var ct=class F8 extends Da{static clampedInt(t,i,r,n){return S$(t,i,r,n)}constructor(t,i,r,n,s,o=void 0){typeof o<"u"&&(o.type="integer",o.default=r,o.minimum=n,o.maximum=s),super(t,i,r,o),this.minimum=n,this.maximum=s}validate(t){return F8.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},bn=class M8 extends Da{static clamp(t,i,r){return t<i?i:t>r?r:t}static float(t,i){if(typeof t=="number")return t;if(typeof t>"u")return i;const r=parseFloat(t);return isNaN(r)?i:r}constructor(t,i,r,n,s){typeof s<"u"&&(s.type="number",s.default=r),super(t,i,r,s),this.validationFn=n}validate(t){return this.validationFn(M8.float(t,this.defaultValue))}},Ui=class U8 extends Da{static string(t,i){return typeof t!="string"?i:t}constructor(t,i,r,n=void 0){typeof n<"u"&&(n.type="string",n.default=r),super(t,i,r,n)}validate(t){return U8.string(t,this.defaultValue)}};function It(e,t,i,r){return typeof e!="string"?t:r&&e in r?r[e]:i.indexOf(e)===-1?t:e}var Et=class extends Da{constructor(e,t,i,r,n=void 0){typeof n<"u"&&(n.type="string",n.enum=r,n.default=i),super(e,t,i,n),this.c=r}validate(e){return It(e,this.defaultValue,this.c)}},Wh=class extends ht{constructor(e,t,i,r,n,s,o=void 0){typeof o<"u"&&(o.type="string",o.enum=n,o.default=r),super(e,t,i,o),this.c=n,this.d=s}validate(e){return typeof e!="string"?this.defaultValue:this.c.indexOf(e)===-1?this.defaultValue:this.d(e)}};function x$(e){switch(e){case"none":return Ns.None;case"keep":return Ns.Keep;case"brackets":return Ns.Brackets;case"advanced":return Ns.Advanced;case"full":return Ns.Full}}var k$=class extends ht{constructor(){super(_.accessibilitySupport,"accessibilitySupport",Vn.Unknown,{type:"string",enum:["auto","on","off"],enumDescriptions:[d(300,null),d(301,null),d(302,null)],default:"auto",tags:["accessibility"],description:d(303,null)})}validate(e){switch(e){case"auto":return Vn.Unknown;case"off":return Vn.Disabled;case"on":return Vn.Enabled}return this.defaultValue}compute(e,t,i){return i===Vn.Unknown?e.accessibilitySupport:i}},D$=class extends ht{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(_.comments,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:d(304,null)},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:d(305,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:le(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:le(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},Os;(function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"})(Os||(Os={}));function $$(e){switch(e){case"blink":return Os.Blink;case"smooth":return Os.Smooth;case"phase":return Os.Phase;case"expand":return Os.Expand;case"solid":return Os.Solid}}var yn;(function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"})(yn||(yn={}));function I$(e){switch(e){case"line":return yn.Line;case"block":return yn.Block;case"underline":return yn.Underline;case"line-thin":return yn.LineThin;case"block-outline":return yn.BlockOutline;case"underline-thin":return yn.UnderlineThin}}var A$=class extends pl{constructor(){super(_.editorClassName)}compute(e,t,i){const r=["monaco-editor"];return t.get(_.extraEditorClassName)&&r.push(t.get(_.extraEditorClassName)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(_.mouseStyle)==="default"?r.push("mouse-default"):t.get(_.mouseStyle)==="copy"&&r.push("mouse-copy"),t.get(_.showUnused)&&r.push("showUnused"),t.get(_.showDeprecated)&&r.push("showDeprecated"),r.join(" ")}},P$=class extends Oe{constructor(){super(_.emptySelectionClipboard,"emptySelectionClipboard",!0,{description:d(306,null)})}compute(e,t,i){return i&&e.emptySelectionClipboard}},R$=class extends ht{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(_.find,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:d(307,null)},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[d(308,null),d(309,null),d(310,null)],description:d(311,null)},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[d(312,null),d(313,null),d(314,null)],description:d(315,null)},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:d(316,null),included:jr},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:d(317,null)},"editor.find.loop":{type:"boolean",default:e.loop,description:d(318,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:le(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":It(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":It(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:le(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:le(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:le(t.loop,this.defaultValue.loop)}}},T$=class Nc extends ht{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(_.fontLigatures,"fontLigatures",Nc.OFF,{anyOf:[{type:"boolean",description:d(319,null)},{type:"string",description:d(320,null)}],description:d(321,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?Nc.OFF:t==="true"?Nc.ON:t:t?Nc.ON:Nc.OFF}},L$=class Oc extends ht{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(_.fontVariations,"fontVariations",Oc.OFF,{anyOf:[{type:"boolean",description:d(322,null)},{type:"string",description:d(323,null)}],description:d(324,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"?Oc.OFF:t==="true"?Oc.TRANSLATE:t:t?Oc.TRANSLATE:Oc.OFF}compute(t,i,r){return t.fontInfo.fontVariationSettings}},_$=class extends pl{constructor(){super(_.fontInfo)}compute(e,t,i){return e.fontInfo}},C$=class extends Da{constructor(){super(_.fontSize,"fontSize",Qn.fontSize,{type:"number",minimum:6,maximum:100,default:Qn.fontSize,description:d(325,null)})}validate(e){const t=bn.float(e,this.defaultValue);return t===0?Qn.fontSize:bn.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}},N$=class Fc extends ht{static{this.c=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.d=1}static{this.e=1e3}constructor(){super(_.fontWeight,"fontWeight",Qn.fontWeight,{anyOf:[{type:"number",minimum:Fc.d,maximum:Fc.e,errorMessage:d(326,null)},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Fc.c}],default:Qn.fontWeight,description:d(327,null)})}validate(t){return t==="normal"||t==="bold"?t:String(ct.clampedInt(t,Qn.fontWeight,Fc.d,Fc.e))}},O$=class extends ht{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[d(328,null),d(329,null),d(330,null)]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(_.gotoLocation,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:d(331,null)},"editor.gotoLocation.multipleDefinitions":{description:d(332,null),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:d(333,null),...t},"editor.gotoLocation.multipleDeclarations":{description:d(334,null),...t},"editor.gotoLocation.multipleImplementations":{description:d(335,null),...t},"editor.gotoLocation.multipleReferences":{description:d(336,null),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:d(337,null)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:d(338,null)},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:d(339,null)},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:d(340,null)},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:d(341,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:It(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??It(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??It(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??It(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??It(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??It(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??It(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Ui.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Ui.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Ui.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Ui.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Ui.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:Ui.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},F$=class extends ht{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(_.hover,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:d(342,null)},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:d(343,null)},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:d(344,null)},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:d(345,null)},"editor.hover.above":{type:"boolean",default:e.above,description:d(346,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:le(t.enabled,this.defaultValue.enabled),delay:ct.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:le(t.sticky,this.defaultValue.sticky),hidingDelay:ct.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:le(t.above,this.defaultValue.above)}}},$a;(function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"})($a||($a={}));var M$=class ng extends pl{constructor(){super(_.layoutInfo)}compute(t,i,r){return ng.computeLayout(i,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const i=t.height/t.lineHeight,r=Math.floor(t.paddingTop/t.lineHeight);let n=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(n=Math.max(n,i-1));const s=(r+t.viewLineCount+n)/(t.pixelRatio*t.height),o=Math.floor(t.viewLineCount/s);return{typicalViewportLineCount:i,extraLinesBeforeFirstLine:r,extraLinesBeyondLastLine:n,desiredRatio:s,minimapLineCount:o}}static c(t,i){const r=t.outerWidth,n=t.outerHeight,s=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:$a.None,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*n),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:n};const o=i.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,h=t.minimap.renderCharacters;let f=s>=2?Math.round(t.minimap.scale*2):t.minimap.scale;const g=t.minimap.maxColumn,m=t.minimap.size,b=t.minimap.side,k=t.verticalScrollbarWidth,I=t.viewLineCount,R=t.remainingWidth,N=t.isViewportWrapping,z=h?2:3;let q=Math.floor(s*n);const ee=q/s;let pe=!1,re=!1,fe=z*f,We=f/s,Ae=1;if(m==="fill"||m==="fit"){const{typicalViewportLineCount:$e,extraLinesBeforeFirstLine:ze,extraLinesBeyondLastLine:Le,desiredRatio:yt,minimapLineCount:Ct}=ng.computeContainedMinimapLineCount({viewLineCount:I,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:n,lineHeight:c,pixelRatio:s});if(I/Ct>1)pe=!0,re=!0,f=1,fe=1,We=f/s;else{let Ut=!1,Ti=f+1;if(m==="fit"){const ft=Math.ceil((ze+I+Le)*fe);N&&a&&R<=i.stableFitRemainingWidth?(Ut=!0,Ti=i.stableFitMaxMinimapScale):Ut=ft>q}if(m==="fill"||Ut){pe=!0;const ft=f;fe=Math.min(c*s,Math.max(1,Math.floor(1/yt))),N&&a&&R<=i.stableFitRemainingWidth&&(Ti=i.stableFitMaxMinimapScale),f=Math.min(Ti,Math.max(1,Math.floor(fe/z))),f>ft&&(Ae=Math.min(2,f/ft)),We=f/s/Ae,q=Math.ceil(Math.max($e,ze+I+Le)*fe),N?(i.stableMinimapLayoutInput=t,i.stableFitRemainingWidth=R,i.stableFitMaxMinimapScale=f):(i.stableMinimapLayoutInput=null,i.stableFitRemainingWidth=0)}}}const bt=Math.floor(g*We),Z=Math.min(bt,Math.max(0,Math.floor((R-k-2)*We/(l+We)))+y$);let J=Math.floor(s*Z);const ce=J/s;J=Math.floor(J*Ae);const ne=h?$a.Text:$a.Blocks,te=b==="left"?0:r-Z-k;return{renderMinimap:ne,minimapLeft:te,minimapWidth:Z,minimapHeightIsEditorHeight:pe,minimapIsSampling:re,minimapScale:f,minimapLineHeight:fe,minimapCanvasInnerWidth:J,minimapCanvasInnerHeight:q,minimapCanvasOuterWidth:ce,minimapCanvasOuterHeight:ee}}static computeLayout(t,i){const r=i.outerWidth|0,n=i.outerHeight|0,s=i.lineHeight|0,o=i.lineNumbersDigitCount|0,a=i.typicalHalfwidthCharacterWidth,c=i.maxDigitWidth,l=i.pixelRatio,u=i.viewLineCount,h=t.get(_.wordWrapOverride2),f=h==="inherit"?t.get(_.wordWrapOverride1):h,g=f==="inherit"?t.get(_.wordWrap):f,m=t.get(_.wordWrapColumn),b=i.isDominatedByLongLines,k=t.get(_.glyphMargin),I=t.get(_.lineNumbers).renderType!==Ni.Off,R=t.get(_.lineNumbersMinChars),N=t.get(_.scrollBeyondLastLine),z=t.get(_.padding),q=t.get(_.minimap),ee=t.get(_.scrollbar),pe=ee.verticalScrollbarSize,re=ee.verticalHasArrows,fe=ee.arrowSize,We=ee.horizontalScrollbarSize,Ae=t.get(_.folding),bt=t.get(_.showFoldingControls)!=="never";let Z=t.get(_.lineDecorationsWidth);Ae&&bt&&(Z+=16);let J=0;if(I){const Nr=Math.max(o,R);J=Math.round(Nr*c)}let ce=0;k&&(ce=s*i.glyphMarginDecorationLaneCount);let ne=0,te=ne+ce,$e=te+J,ze=$e+Z;const Le=r-ce-J-Z;let yt=!1,Ct=!1,Yt=-1;f==="inherit"&&b?(yt=!0,Ct=!0):g==="on"||g==="bounded"?Ct=!0:g==="wordWrapColumn"&&(Yt=m);const Ut=ng.c({outerWidth:r,outerHeight:n,lineHeight:s,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:N,paddingTop:z.top,paddingBottom:z.bottom,minimap:q,verticalScrollbarWidth:pe,viewLineCount:u,remainingWidth:Le,isViewportWrapping:Ct},i.memory||new E$);Ut.renderMinimap!==$a.None&&Ut.minimapLeft===0&&(ne+=Ut.minimapWidth,te+=Ut.minimapWidth,$e+=Ut.minimapWidth,ze+=Ut.minimapWidth);const Ti=Le-Ut.minimapWidth,ft=Math.max(1,Math.floor((Ti-pe-2)/a)),ji=re?fe:0;return Ct&&(Yt=Math.max(1,ft),g==="bounded"&&(Yt=Math.min(Yt,m))),{width:r,height:n,glyphMarginLeft:ne,glyphMarginWidth:ce,glyphMarginDecorationLaneCount:i.glyphMarginDecorationLaneCount,lineNumbersLeft:te,lineNumbersWidth:J,decorationsLeft:$e,decorationsWidth:Z,contentLeft:ze,contentWidth:Ti,minimap:Ut,viewportColumn:ft,isWordWrapMinified:yt,isViewportWrapping:Ct,wrappingColumn:Yt,verticalScrollbarWidth:pe,horizontalScrollbarHeight:We,overviewRuler:{top:ji,width:pe,height:n-2*ji,right:0}}}},U$=class extends ht{constructor(){super(_.wrappingStrategy,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[d(347,null),d(348,null)],type:"string",enum:["simple","advanced"],default:"simple",description:d(349,null)}})}validate(e){return It(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(_.accessibilitySupport)===Vn.Enabled?"advanced":i}},qn;(function(e){e.Off="off",e.OnCode="onCode",e.On="on"})(qn||(qn={}));var B$=class extends ht{constructor(){const e={enabled:qn.OnCode};super(_.lightbulb,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[qn.Off,qn.OnCode,qn.On],default:e.enabled,enumDescriptions:[d(350,null),d(351,null),d(352,null)],description:d(353,null)}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:It(e.enabled,this.defaultValue.enabled,[qn.Off,qn.OnCode,qn.On])}}},H$=class extends ht{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(_.stickyScroll,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:d(354,null),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:d(355,null)},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:d(356,null)},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:d(357,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:le(t.enabled,this.defaultValue.enabled),maxLineCount:ct.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:It(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:le(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},j$=class extends ht{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(_.inlayHints,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:d(358,null),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[d(359,null),d(360,null,jr?"Ctrl+Option":"Ctrl+Alt"),d(361,null,jr?"Ctrl+Option":"Ctrl+Alt"),d(362,null)]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:d(363,null,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:d(364,null,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:d(365,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:It(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:ct.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Ui.string(t.fontFamily,this.defaultValue.fontFamily),padding:le(t.padding,this.defaultValue.padding)}}},W$=class extends ht{constructor(){super(_.lineDecorationsWidth,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):ct.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?ct.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}},z$=class extends bn{constructor(){super(_.lineHeight,"lineHeight",Qn.lineHeight,e=>bn.clamp(e,0,150),{markdownDescription:d(366,null)})}compute(e,t,i){return e.fontInfo.lineHeight}},V$=class extends ht{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(_.minimap,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:d(367,null)},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:d(368,null)},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[d(369,null),d(370,null),d(371,null)],default:e.size,description:d(372,null)},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:d(373,null)},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:d(374,null)},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:d(375,null)},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:d(376,null)},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:d(377,null)},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:d(378,null)},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:d(379,null)},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:d(380,null)},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:d(381,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:le(t.enabled,this.defaultValue.enabled),autohide:le(t.autohide,this.defaultValue.autohide),size:It(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:It(t.side,this.defaultValue.side,["right","left"]),showSlider:It(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:le(t.renderCharacters,this.defaultValue.renderCharacters),scale:ct.clampedInt(t.scale,1,1,3),maxColumn:ct.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:le(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:le(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:bn.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:bn.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function q$(e){return e==="ctrlCmd"?jr?"metaKey":"ctrlKey":"altKey"}var G$=class extends ht{constructor(){super(_.padding,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:d(382,null)},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:d(383,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:ct.clampedInt(t.top,0,0,1e3),bottom:ct.clampedInt(t.bottom,0,0,1e3)}}},Q$=class extends ht{constructor(){const e={enabled:!0,cycle:!0};super(_.parameterHints,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:d(384,null)},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:d(385,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:le(t.enabled,this.defaultValue.enabled),cycle:le(t.cycle,this.defaultValue.cycle)}}},J$=class extends pl{constructor(){super(_.pixelRatio)}compute(e,t,i){return e.pixelRatio}},X$=class extends ht{constructor(){super(_.placeholder,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},Z$=class extends ht{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[d(386,null),d(387,null),d(388,null)]}];super(_.quickSuggestions,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:d(389,null)},comments:{anyOf:t,default:e.comments,description:d(390,null)},other:{anyOf:t,default:e.other,description:d(391,null)}},default:e,markdownDescription:d(392,null,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:r}=e,n=["on","inline","off"];let s,o,a;return typeof t=="boolean"?s=t?"on":"off":s=It(t,this.defaultValue.other,n),typeof i=="boolean"?o=i?"on":"off":o=It(i,this.defaultValue.comments,n),typeof r=="boolean"?a=r?"on":"off":a=It(r,this.defaultValue.strings,n),{other:s,comments:o,strings:a}}},Ni;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"})(Ni||(Ni={}));var Y$=class extends ht{constructor(){super(_.lineNumbers,"lineNumbers",{renderType:Ni.On,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[d(393,null),d(394,null),d(395,null),d(396,null)],default:"on",description:d(397,null)})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=Ni.Custom,i=e):e==="interval"?t=Ni.Interval:e==="relative"?t=Ni.Relative:e==="on"?t=Ni.On:t=Ni.Off),{renderType:t,renderFn:i}}},K$=class extends ht{constructor(){const e=[],t={type:"number",description:d(398,null)};super(_.rulers,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:d(399,null),format:"color-hex"}}}]},default:e,description:d(400,null)})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:ct.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const r=i;t.push({column:ct.clampedInt(r.column,0,0,1e4),color:r.color})}return t.sort((i,r)=>i.column-r.column),t}return this.defaultValue}},eI=class extends ht{constructor(){super(_.readOnlyMessage,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function C4(e,t){if(typeof e!="string")return t;switch(e){case"hidden":return Io.Hidden;case"visible":return Io.Visible;default:return Io.Auto}}var tI=class extends ht{constructor(){const e={vertical:Io.Auto,horizontal:Io.Auto,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(_.scrollbar,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(401,null),d(402,null),d(403,null)],default:"auto",description:d(404,null)},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(405,null),d(406,null),d(407,null)],default:"auto",description:d(408,null)},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:d(409,null)},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:d(410,null)},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:d(411,null)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:d(412,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=ct.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=ct.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:ct.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:C4(t.vertical,this.defaultValue.vertical),horizontal:C4(t.horizontal,this.defaultValue.horizontal),useShadows:le(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:le(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:le(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:le(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:le(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:ct.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:r,verticalSliderSize:ct.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:le(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:le(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},Zr="inUntrustedWorkspace",Ao={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},iI=class extends ht{constructor(){const e={nonBasicASCII:Zr,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Zr,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(_.unicodeHighlighting,"unicodeHighlight",e,{[Ao.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Zr],default:e.nonBasicASCII,description:d(413,null)},[Ao.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:d(414,null)},[Ao.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:d(415,null)},[Ao.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Zr],default:e.includeComments,description:d(416,null)},[Ao.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Zr],default:e.includeStrings,description:d(417,null)},[Ao.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:d(418,null),additionalProperties:{type:"boolean"}},[Ao.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:d(419,null)}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(Qr(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(Qr(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const r=super.applyUpdate(e,t);return i?new Hh(r.newValue,!0):r}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Ia(t.nonBasicASCII,Zr,[!0,!1,Zr]),invisibleCharacters:le(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:le(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Ia(t.includeComments,Zr,[!0,!1,Zr]),includeStrings:Ia(t.includeStrings,Zr,[!0,!1,Zr]),allowedCharacters:this.c(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.c(e.allowedLocales,this.defaultValue.allowedLocales)}}c(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[r,n]of Object.entries(e))n===!0&&(i[r]=!0);return i}},rI=class extends ht{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(_.inlineSuggest,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:d(420,null)},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[d(421,null),d(422,null),d(423,null)],description:d(424,null)},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:d(425,null)},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:d(426,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:le(t.enabled,this.defaultValue.enabled),mode:It(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:It(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:le(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:le(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:Ui.string(t.fontFamily,this.defaultValue.fontFamily)}}},nI=class extends ht{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(_.inlineEdit,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:d(427,null)},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[d(428,null),d(429,null),d(430,null)],description:d(431,null)},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:d(432,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:le(t.enabled,this.defaultValue.enabled),showToolbar:It(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:Ui.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:le(t.keepOnBlur,this.defaultValue.keepOnBlur)}}},sI=class extends ht{constructor(){const e={enabled:P4.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:P4.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(_.bracketPairColorization,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(433,null,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:d(434,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:le(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:le(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},oI=class extends ht{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(_.guides,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(435,null),d(436,null),d(437,null)],default:e.bracketPairs,description:d(438,null)},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(439,null),d(440,null),d(441,null)],default:e.bracketPairsHorizontal,description:d(442,null)},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:d(443,null)},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:d(444,null)},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[d(445,null),d(446,null),d(447,null)],default:e.highlightActiveIndentation,description:d(448,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Ia(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Ia(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:le(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:le(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Ia(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function Ia(e,t,i){const r=i.indexOf(e);return r===-1?t:i[r]}var aI=class extends ht{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(_.suggest,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[d(449,null),d(450,null)],default:e.insertMode,description:d(451,null)},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:d(452,null)},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:d(453,null)},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:d(454,null)},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[d(455,null),d(456,null),d(457,null),d(458,null)],default:e.selectionMode,markdownDescription:d(459,null,"`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:d(460,null)},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:d(461,null)},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:d(462,null)},"editor.suggest.preview":{type:"boolean",default:e.preview,description:d(463,null)},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:d(464,null)},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:d(465,null)},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:d(466,null)},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:d(467,null)},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:d(468,null)},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:d(469,null)},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:d(470,null)},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:d(471,null)},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:d(472,null)},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:d(473,null)},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:d(474,null)},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:d(475,null)},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:d(476,null)},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:d(477,null)},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:d(478,null)},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:d(479,null)},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:d(480,null)},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:d(481,null)},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:d(482,null)},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:d(483,null)},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:d(484,null)},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:d(485,null)},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:d(486,null)},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:d(487,null)},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:d(488,null)},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:d(489,null)},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:d(490,null)},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:d(491,null)},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:d(492,null)},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:d(493,null)},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:d(494,null)},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:d(495,null)},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:d(496,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:It(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:le(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:le(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:le(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:le(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:It(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:le(t.showIcons,this.defaultValue.showIcons),showStatusBar:le(t.showStatusBar,this.defaultValue.showStatusBar),preview:le(t.preview,this.defaultValue.preview),previewMode:It(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:le(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:le(t.showMethods,this.defaultValue.showMethods),showFunctions:le(t.showFunctions,this.defaultValue.showFunctions),showConstructors:le(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:le(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:le(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:le(t.showFields,this.defaultValue.showFields),showVariables:le(t.showVariables,this.defaultValue.showVariables),showClasses:le(t.showClasses,this.defaultValue.showClasses),showStructs:le(t.showStructs,this.defaultValue.showStructs),showInterfaces:le(t.showInterfaces,this.defaultValue.showInterfaces),showModules:le(t.showModules,this.defaultValue.showModules),showProperties:le(t.showProperties,this.defaultValue.showProperties),showEvents:le(t.showEvents,this.defaultValue.showEvents),showOperators:le(t.showOperators,this.defaultValue.showOperators),showUnits:le(t.showUnits,this.defaultValue.showUnits),showValues:le(t.showValues,this.defaultValue.showValues),showConstants:le(t.showConstants,this.defaultValue.showConstants),showEnums:le(t.showEnums,this.defaultValue.showEnums),showEnumMembers:le(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:le(t.showKeywords,this.defaultValue.showKeywords),showWords:le(t.showWords,this.defaultValue.showWords),showColors:le(t.showColors,this.defaultValue.showColors),showFiles:le(t.showFiles,this.defaultValue.showFiles),showReferences:le(t.showReferences,this.defaultValue.showReferences),showFolders:le(t.showFolders,this.defaultValue.showFolders),showTypeParameters:le(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:le(t.showSnippets,this.defaultValue.showSnippets),showUsers:le(t.showUsers,this.defaultValue.showUsers),showIssues:le(t.showIssues,this.defaultValue.showIssues)}}},cI=class extends ht{constructor(){super(_.smartSelect,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:d(497,null),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:d(498,null),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:le(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:le(e.selectSubwords,this.defaultValue.selectSubwords)}}},lI=class extends ht{constructor(){const e=[];super(_.wordSegmenterLocales,"wordSegmenterLocales",e,{anyOf:[{description:d(499,null),type:"string"},{description:d(500,null),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}},Gn;(function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"})(Gn||(Gn={}));var uI=class extends ht{constructor(){super(_.wrappingIndent,"wrappingIndent",Gn.Same,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[d(501,null),d(502,null),d(503,null),d(504,null)],description:d(505,null),default:"same"}})}validate(e){switch(e){case"none":return Gn.None;case"same":return Gn.Same;case"indent":return Gn.Indent;case"deepIndent":return Gn.DeepIndent}return Gn.Same}compute(e,t,i){return t.get(_.accessibilitySupport)===Vn.Enabled?Gn.None:i}},hI=class extends pl{constructor(){super(_.wrappingInfo)}compute(e,t,i){const r=t.get(_.layoutInfo);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}},dI=class extends ht{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(_.dropIntoEditor,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(506,null)},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:d(507,null),enum:["afterDrop","never"],enumDescriptions:[d(508,null),d(509,null)],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:le(t.enabled,this.defaultValue.enabled),showDropSelector:It(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},fI=class extends ht{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(_.pasteAs,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(510,null)},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:d(511,null),enum:["afterPaste","never"],enumDescriptions:[d(512,null),d(513,null)],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:le(t.enabled,this.defaultValue.enabled),showPasteSelector:It(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},pI="Consolas, 'Courier New', monospace",gI="Menlo, Monaco, 'Courier New', monospace",mI="'Droid Sans Mono', 'monospace', monospace",Qn={fontFamily:jr?gI:ks?mI:pI,fontWeight:"normal",fontSize:jr?12:14,lineHeight:0,letterSpacing:0},vI=[];function F(e){return vI[e.id]=e,e}var _;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.ariaLabel=4]="ariaLabel",e[e.ariaRequired=5]="ariaRequired",e[e.autoClosingBrackets=6]="autoClosingBrackets",e[e.autoClosingComments=7]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=9]="autoClosingDelete",e[e.autoClosingOvertype=10]="autoClosingOvertype",e[e.autoClosingQuotes=11]="autoClosingQuotes",e[e.autoIndent=12]="autoIndent",e[e.automaticLayout=13]="automaticLayout",e[e.autoSurround=14]="autoSurround",e[e.bracketPairColorization=15]="bracketPairColorization",e[e.guides=16]="guides",e[e.codeLens=17]="codeLens",e[e.codeLensFontFamily=18]="codeLensFontFamily",e[e.codeLensFontSize=19]="codeLensFontSize",e[e.colorDecorators=20]="colorDecorators",e[e.colorDecoratorsLimit=21]="colorDecoratorsLimit",e[e.columnSelection=22]="columnSelection",e[e.comments=23]="comments",e[e.contextmenu=24]="contextmenu",e[e.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",e[e.cursorBlinking=26]="cursorBlinking",e[e.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",e[e.cursorStyle=28]="cursorStyle",e[e.cursorSurroundingLines=29]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",e[e.cursorWidth=31]="cursorWidth",e[e.disableLayerHinting=32]="disableLayerHinting",e[e.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",e[e.domReadOnly=34]="domReadOnly",e[e.dragAndDrop=35]="dragAndDrop",e[e.dropIntoEditor=36]="dropIntoEditor",e[e.emptySelectionClipboard=37]="emptySelectionClipboard",e[e.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",e[e.extraEditorClassName=39]="extraEditorClassName",e[e.fastScrollSensitivity=40]="fastScrollSensitivity",e[e.find=41]="find",e[e.fixedOverflowWidgets=42]="fixedOverflowWidgets",e[e.folding=43]="folding",e[e.foldingStrategy=44]="foldingStrategy",e[e.foldingHighlight=45]="foldingHighlight",e[e.foldingImportsByDefault=46]="foldingImportsByDefault",e[e.foldingMaximumRegions=47]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=49]="fontFamily",e[e.fontInfo=50]="fontInfo",e[e.fontLigatures=51]="fontLigatures",e[e.fontSize=52]="fontSize",e[e.fontWeight=53]="fontWeight",e[e.fontVariations=54]="fontVariations",e[e.formatOnPaste=55]="formatOnPaste",e[e.formatOnType=56]="formatOnType",e[e.glyphMargin=57]="glyphMargin",e[e.gotoLocation=58]="gotoLocation",e[e.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",e[e.hover=60]="hover",e[e.inDiffEditor=61]="inDiffEditor",e[e.inlineSuggest=62]="inlineSuggest",e[e.inlineEdit=63]="inlineEdit",e[e.letterSpacing=64]="letterSpacing",e[e.lightbulb=65]="lightbulb",e[e.lineDecorationsWidth=66]="lineDecorationsWidth",e[e.lineHeight=67]="lineHeight",e[e.lineNumbers=68]="lineNumbers",e[e.lineNumbersMinChars=69]="lineNumbersMinChars",e[e.linkedEditing=70]="linkedEditing",e[e.links=71]="links",e[e.matchBrackets=72]="matchBrackets",e[e.minimap=73]="minimap",e[e.mouseStyle=74]="mouseStyle",e[e.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=76]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",e[e.multiCursorModifier=78]="multiCursorModifier",e[e.multiCursorPaste=79]="multiCursorPaste",e[e.multiCursorLimit=80]="multiCursorLimit",e[e.occurrencesHighlight=81]="occurrencesHighlight",e[e.overviewRulerBorder=82]="overviewRulerBorder",e[e.overviewRulerLanes=83]="overviewRulerLanes",e[e.padding=84]="padding",e[e.pasteAs=85]="pasteAs",e[e.parameterHints=86]="parameterHints",e[e.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",e[e.placeholder=88]="placeholder",e[e.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",e[e.quickSuggestions=90]="quickSuggestions",e[e.quickSuggestionsDelay=91]="quickSuggestionsDelay",e[e.readOnly=92]="readOnly",e[e.readOnlyMessage=93]="readOnlyMessage",e[e.renameOnType=94]="renameOnType",e[e.renderControlCharacters=95]="renderControlCharacters",e[e.renderFinalNewline=96]="renderFinalNewline",e[e.renderLineHighlight=97]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=99]="renderValidationDecorations",e[e.renderWhitespace=100]="renderWhitespace",e[e.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",e[e.roundedSelection=102]="roundedSelection",e[e.rulers=103]="rulers",e[e.scrollbar=104]="scrollbar",e[e.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=106]="scrollBeyondLastLine",e[e.scrollPredominantAxis=107]="scrollPredominantAxis",e[e.selectionClipboard=108]="selectionClipboard",e[e.selectionHighlight=109]="selectionHighlight",e[e.selectOnLineNumbers=110]="selectOnLineNumbers",e[e.showFoldingControls=111]="showFoldingControls",e[e.showUnused=112]="showUnused",e[e.snippetSuggestions=113]="snippetSuggestions",e[e.smartSelect=114]="smartSelect",e[e.smoothScrolling=115]="smoothScrolling",e[e.stickyScroll=116]="stickyScroll",e[e.stickyTabStops=117]="stickyTabStops",e[e.stopRenderingLineAfter=118]="stopRenderingLineAfter",e[e.suggest=119]="suggest",e[e.suggestFontSize=120]="suggestFontSize",e[e.suggestLineHeight=121]="suggestLineHeight",e[e.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",e[e.suggestSelection=123]="suggestSelection",e[e.tabCompletion=124]="tabCompletion",e[e.tabIndex=125]="tabIndex",e[e.unicodeHighlighting=126]="unicodeHighlighting",e[e.unusualLineTerminators=127]="unusualLineTerminators",e[e.useShadowDOM=128]="useShadowDOM",e[e.useTabStops=129]="useTabStops",e[e.wordBreak=130]="wordBreak",e[e.wordSegmenterLocales=131]="wordSegmenterLocales",e[e.wordSeparators=132]="wordSeparators",e[e.wordWrap=133]="wordWrap",e[e.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=136]="wordWrapColumn",e[e.wordWrapOverride1=137]="wordWrapOverride1",e[e.wordWrapOverride2=138]="wordWrapOverride2",e[e.wrappingIndent=139]="wrappingIndent",e[e.wrappingStrategy=140]="wrappingStrategy",e[e.showDeprecated=141]="showDeprecated",e[e.inlayHints=142]="inlayHints",e[e.editorClassName=143]="editorClassName",e[e.pixelRatio=144]="pixelRatio",e[e.tabFocusMode=145]="tabFocusMode",e[e.layoutInfo=146]="layoutInfo",e[e.wrappingInfo=147]="wrappingInfo",e[e.defaultColorDecorators=148]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"})(_||(_={}));var fN={acceptSuggestionOnCommitCharacter:F(new Oe(_.acceptSuggestionOnCommitCharacter,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:d(514,null)})),acceptSuggestionOnEnter:F(new Et(_.acceptSuggestionOnEnter,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",d(515,null),""],markdownDescription:d(516,null)})),accessibilitySupport:F(new k$),accessibilityPageSize:F(new ct(_.accessibilityPageSize,"accessibilityPageSize",10,1,Fi.MAX_SAFE_SMALL_INTEGER,{description:d(517,null),tags:["accessibility"]})),ariaLabel:F(new Ui(_.ariaLabel,"ariaLabel",d(518,null))),ariaRequired:F(new Oe(_.ariaRequired,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:F(new Oe(_.screenReaderAnnounceInlineSuggestion,"screenReaderAnnounceInlineSuggestion",!0,{description:d(519,null),tags:["accessibility"]})),autoClosingBrackets:F(new Et(_.autoClosingBrackets,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(520,null),d(521,null),""],description:d(522,null)})),autoClosingComments:F(new Et(_.autoClosingComments,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(523,null),d(524,null),""],description:d(525,null)})),autoClosingDelete:F(new Et(_.autoClosingDelete,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",d(526,null),""],description:d(527,null)})),autoClosingOvertype:F(new Et(_.autoClosingOvertype,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",d(528,null),""],description:d(529,null)})),autoClosingQuotes:F(new Et(_.autoClosingQuotes,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(530,null),d(531,null),""],description:d(532,null)})),autoIndent:F(new Wh(_.autoIndent,"autoIndent",Ns.Full,"full",["none","keep","brackets","advanced","full"],x$,{enumDescriptions:[d(533,null),d(534,null),d(535,null),d(536,null),d(537,null)],description:d(538,null)})),automaticLayout:F(new Oe(_.automaticLayout,"automaticLayout",!1)),autoSurround:F(new Et(_.autoSurround,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[d(539,null),d(540,null),d(541,null),""],description:d(542,null)})),bracketPairColorization:F(new sI),bracketPairGuides:F(new oI),stickyTabStops:F(new Oe(_.stickyTabStops,"stickyTabStops",!1,{description:d(543,null)})),codeLens:F(new Oe(_.codeLens,"codeLens",!0,{description:d(544,null)})),codeLensFontFamily:F(new Ui(_.codeLensFontFamily,"codeLensFontFamily","",{description:d(545,null)})),codeLensFontSize:F(new ct(_.codeLensFontSize,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:d(546,null)})),colorDecorators:F(new Oe(_.colorDecorators,"colorDecorators",!0,{description:d(547,null)})),colorDecoratorActivatedOn:F(new Et(_.colorDecoratorsActivatedOn,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[d(548,null),d(549,null),d(550,null)],description:d(551,null)})),colorDecoratorsLimit:F(new ct(_.colorDecoratorsLimit,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:d(552,null)})),columnSelection:F(new Oe(_.columnSelection,"columnSelection",!1,{description:d(553,null)})),comments:F(new D$),contextmenu:F(new Oe(_.contextmenu,"contextmenu",!0)),copyWithSyntaxHighlighting:F(new Oe(_.copyWithSyntaxHighlighting,"copyWithSyntaxHighlighting",!0,{description:d(554,null)})),cursorBlinking:F(new Wh(_.cursorBlinking,"cursorBlinking",Os.Blink,"blink",["blink","smooth","phase","expand","solid"],$$,{description:d(555,null)})),cursorSmoothCaretAnimation:F(new Et(_.cursorSmoothCaretAnimation,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[d(556,null),d(557,null),d(558,null)],description:d(559,null)})),cursorStyle:F(new Wh(_.cursorStyle,"cursorStyle",yn.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],I$,{description:d(560,null)})),cursorSurroundingLines:F(new ct(_.cursorSurroundingLines,"cursorSurroundingLines",0,0,Fi.MAX_SAFE_SMALL_INTEGER,{description:d(561,null)})),cursorSurroundingLinesStyle:F(new Et(_.cursorSurroundingLinesStyle,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[d(562,null),d(563,null)],markdownDescription:d(564,null)})),cursorWidth:F(new ct(_.cursorWidth,"cursorWidth",0,0,Fi.MAX_SAFE_SMALL_INTEGER,{markdownDescription:d(565,null)})),disableLayerHinting:F(new Oe(_.disableLayerHinting,"disableLayerHinting",!1)),disableMonospaceOptimizations:F(new Oe(_.disableMonospaceOptimizations,"disableMonospaceOptimizations",!1)),domReadOnly:F(new Oe(_.domReadOnly,"domReadOnly",!1)),dragAndDrop:F(new Oe(_.dragAndDrop,"dragAndDrop",!0,{description:d(566,null)})),emptySelectionClipboard:F(new P$),dropIntoEditor:F(new dI),stickyScroll:F(new H$),experimentalWhitespaceRendering:F(new Et(_.experimentalWhitespaceRendering,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[d(567,null),d(568,null),d(569,null)],description:d(570,null)})),extraEditorClassName:F(new Ui(_.extraEditorClassName,"extraEditorClassName","")),fastScrollSensitivity:F(new bn(_.fastScrollSensitivity,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:d(571,null)})),find:F(new R$),fixedOverflowWidgets:F(new Oe(_.fixedOverflowWidgets,"fixedOverflowWidgets",!1)),folding:F(new Oe(_.folding,"folding",!0,{description:d(572,null)})),foldingStrategy:F(new Et(_.foldingStrategy,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[d(573,null),d(574,null)],description:d(575,null)})),foldingHighlight:F(new Oe(_.foldingHighlight,"foldingHighlight",!0,{description:d(576,null)})),foldingImportsByDefault:F(new Oe(_.foldingImportsByDefault,"foldingImportsByDefault",!1,{description:d(577,null)})),foldingMaximumRegions:F(new ct(_.foldingMaximumRegions,"foldingMaximumRegions",5e3,10,65e3,{description:d(578,null)})),unfoldOnClickAfterEndOfLine:F(new Oe(_.unfoldOnClickAfterEndOfLine,"unfoldOnClickAfterEndOfLine",!1,{description:d(579,null)})),fontFamily:F(new Ui(_.fontFamily,"fontFamily",Qn.fontFamily,{description:d(580,null)})),fontInfo:F(new _$),fontLigatures2:F(new T$),fontSize:F(new C$),fontWeight:F(new N$),fontVariations:F(new L$),formatOnPaste:F(new Oe(_.formatOnPaste,"formatOnPaste",!1,{description:d(581,null)})),formatOnType:F(new Oe(_.formatOnType,"formatOnType",!1,{description:d(582,null)})),glyphMargin:F(new Oe(_.glyphMargin,"glyphMargin",!0,{description:d(583,null)})),gotoLocation:F(new O$),hideCursorInOverviewRuler:F(new Oe(_.hideCursorInOverviewRuler,"hideCursorInOverviewRuler",!1,{description:d(584,null)})),hover:F(new F$),inDiffEditor:F(new Oe(_.inDiffEditor,"inDiffEditor",!1)),letterSpacing:F(new bn(_.letterSpacing,"letterSpacing",Qn.letterSpacing,e=>bn.clamp(e,-5,20),{description:d(585,null)})),lightbulb:F(new B$),lineDecorationsWidth:F(new W$),lineHeight:F(new z$),lineNumbers:F(new Y$),lineNumbersMinChars:F(new ct(_.lineNumbersMinChars,"lineNumbersMinChars",5,1,300)),linkedEditing:F(new Oe(_.linkedEditing,"linkedEditing",!1,{description:d(586,null)})),links:F(new Oe(_.links,"links",!0,{description:d(587,null)})),matchBrackets:F(new Et(_.matchBrackets,"matchBrackets","always",["always","near","never"],{description:d(588,null)})),minimap:F(new V$),mouseStyle:F(new Et(_.mouseStyle,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:F(new bn(_.mouseWheelScrollSensitivity,"mouseWheelScrollSensitivity",1,e=>e===0?1:e,{markdownDescription:d(589,null)})),mouseWheelZoom:F(new Oe(_.mouseWheelZoom,"mouseWheelZoom",!1,{markdownDescription:d(jr?590:591,null)})),multiCursorMergeOverlapping:F(new Oe(_.multiCursorMergeOverlapping,"multiCursorMergeOverlapping",!0,{description:d(592,null)})),multiCursorModifier:F(new Wh(_.multiCursorModifier,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],q$,{markdownEnumDescriptions:[d(593,null),d(594,null)],markdownDescription:d(595,null)})),multiCursorPaste:F(new Et(_.multiCursorPaste,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[d(596,null),d(597,null)],markdownDescription:d(598,null)})),multiCursorLimit:F(new ct(_.multiCursorLimit,"multiCursorLimit",1e4,1,1e5,{markdownDescription:d(599,null)})),occurrencesHighlight:F(new Et(_.occurrencesHighlight,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[d(600,null),d(601,null),d(602,null)],markdownDescription:d(603,null)})),overviewRulerBorder:F(new Oe(_.overviewRulerBorder,"overviewRulerBorder",!0,{description:d(604,null)})),overviewRulerLanes:F(new ct(_.overviewRulerLanes,"overviewRulerLanes",3,0,3)),padding:F(new G$),pasteAs:F(new fI),parameterHints:F(new Q$),peekWidgetDefaultFocus:F(new Et(_.peekWidgetDefaultFocus,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[d(605,null),d(606,null)],description:d(607,null)})),placeholder:F(new X$),definitionLinkOpensInPeek:F(new Oe(_.definitionLinkOpensInPeek,"definitionLinkOpensInPeek",!1,{description:d(608,null)})),quickSuggestions:F(new Z$),quickSuggestionsDelay:F(new ct(_.quickSuggestionsDelay,"quickSuggestionsDelay",10,0,Fi.MAX_SAFE_SMALL_INTEGER,{description:d(609,null)})),readOnly:F(new Oe(_.readOnly,"readOnly",!1)),readOnlyMessage:F(new eI),renameOnType:F(new Oe(_.renameOnType,"renameOnType",!1,{description:d(610,null),markdownDeprecationMessage:d(611,null)})),renderControlCharacters:F(new Oe(_.renderControlCharacters,"renderControlCharacters",!0,{description:d(612,null),restricted:!0})),renderFinalNewline:F(new Et(_.renderFinalNewline,"renderFinalNewline",ks?"dimmed":"on",["off","on","dimmed"],{description:d(613,null)})),renderLineHighlight:F(new Et(_.renderLineHighlight,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",d(614,null)],description:d(615,null)})),renderLineHighlightOnlyWhenFocus:F(new Oe(_.renderLineHighlightOnlyWhenFocus,"renderLineHighlightOnlyWhenFocus",!1,{description:d(616,null)})),renderValidationDecorations:F(new Et(_.renderValidationDecorations,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:F(new Et(_.renderWhitespace,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",d(617,null),d(618,null),d(619,null),""],description:d(620,null)})),revealHorizontalRightPadding:F(new ct(_.revealHorizontalRightPadding,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:F(new Oe(_.roundedSelection,"roundedSelection",!0,{description:d(621,null)})),rulers:F(new K$),scrollbar:F(new tI),scrollBeyondLastColumn:F(new ct(_.scrollBeyondLastColumn,"scrollBeyondLastColumn",4,0,Fi.MAX_SAFE_SMALL_INTEGER,{description:d(622,null)})),scrollBeyondLastLine:F(new Oe(_.scrollBeyondLastLine,"scrollBeyondLastLine",!0,{description:d(623,null)})),scrollPredominantAxis:F(new Oe(_.scrollPredominantAxis,"scrollPredominantAxis",!0,{description:d(624,null)})),selectionClipboard:F(new Oe(_.selectionClipboard,"selectionClipboard",!0,{description:d(625,null),included:ks})),selectionHighlight:F(new Oe(_.selectionHighlight,"selectionHighlight",!0,{description:d(626,null)})),selectOnLineNumbers:F(new Oe(_.selectOnLineNumbers,"selectOnLineNumbers",!0)),showFoldingControls:F(new Et(_.showFoldingControls,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[d(627,null),d(628,null),d(629,null)],description:d(630,null)})),showUnused:F(new Oe(_.showUnused,"showUnused",!0,{description:d(631,null)})),showDeprecated:F(new Oe(_.showDeprecated,"showDeprecated",!0,{description:d(632,null)})),inlayHints:F(new j$),snippetSuggestions:F(new Et(_.snippetSuggestions,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[d(633,null),d(634,null),d(635,null),d(636,null)],description:d(637,null)})),smartSelect:F(new cI),smoothScrolling:F(new Oe(_.smoothScrolling,"smoothScrolling",!1,{description:d(638,null)})),stopRenderingLineAfter:F(new ct(_.stopRenderingLineAfter,"stopRenderingLineAfter",1e4,-1,Fi.MAX_SAFE_SMALL_INTEGER)),suggest:F(new aI),inlineSuggest:F(new rI),inlineEdit:F(new nI),inlineCompletionsAccessibilityVerbose:F(new Oe(_.inlineCompletionsAccessibilityVerbose,"inlineCompletionsAccessibilityVerbose",!1,{description:d(639,null)})),suggestFontSize:F(new ct(_.suggestFontSize,"suggestFontSize",0,0,1e3,{markdownDescription:d(640,null,"`0`","`#editor.fontSize#`")})),suggestLineHeight:F(new ct(_.suggestLineHeight,"suggestLineHeight",0,0,1e3,{markdownDescription:d(641,null,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:F(new Oe(_.suggestOnTriggerCharacters,"suggestOnTriggerCharacters",!0,{description:d(642,null)})),suggestSelection:F(new Et(_.suggestSelection,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[d(643,null),d(644,null),d(645,null)],description:d(646,null)})),tabCompletion:F(new Et(_.tabCompletion,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[d(647,null),d(648,null),d(649,null)],description:d(650,null)})),tabIndex:F(new ct(_.tabIndex,"tabIndex",0,-1,Fi.MAX_SAFE_SMALL_INTEGER)),unicodeHighlight:F(new iI),unusualLineTerminators:F(new Et(_.unusualLineTerminators,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[d(651,null),d(652,null),d(653,null)],description:d(654,null)})),useShadowDOM:F(new Oe(_.useShadowDOM,"useShadowDOM",!0)),useTabStops:F(new Oe(_.useTabStops,"useTabStops",!0,{description:d(655,null)})),wordBreak:F(new Et(_.wordBreak,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[d(656,null),d(657,null)],description:d(658,null)})),wordSegmenterLocales:F(new lI),wordSeparators:F(new Ui(_.wordSeparators,"wordSeparators",R4,{description:d(659,null)})),wordWrap:F(new Et(_.wordWrap,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[d(660,null),d(661,null),d(662,null),d(663,null)],description:d(664,null)})),wordWrapBreakAfterCharacters:F(new Ui(_.wordWrapBreakAfterCharacters,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:F(new Ui(_.wordWrapBreakBeforeCharacters,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:F(new ct(_.wordWrapColumn,"wordWrapColumn",80,1,Fi.MAX_SAFE_SMALL_INTEGER,{markdownDescription:d(665,null)})),wordWrapOverride1:F(new Et(_.wordWrapOverride1,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:F(new Et(_.wordWrapOverride2,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:F(new A$),defaultColorDecorators:F(new Oe(_.defaultColorDecorators,"defaultColorDecorators",!1,{markdownDescription:d(666,null)})),pixelRatio:F(new J$),tabFocusMode:F(new Oe(_.tabFocusMode,"tabFocusMode",!1,{markdownDescription:d(667,null)})),layoutInfo:F(new M$),wrappingInfo:F(new hI),wrappingIndent:F(new uI),wrappingStrategy:F(new U$)},xr=class sa{constructor(t,i){this.lineNumber=t,this.column=i}with(t=this.lineNumber,i=this.column){return t===this.lineNumber&&i===this.column?this:new sa(t,i)}delta(t=0,i=0){return this.with(this.lineNumber+t,this.column+i)}equals(t){return sa.equals(this,t)}static equals(t,i){return!t&&!i?!0:!!t&&!!i&&t.lineNumber===i.lineNumber&&t.column===i.column}isBefore(t){return sa.isBefore(this,t)}static isBefore(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<i.column}isBeforeOrEqual(t){return sa.isBeforeOrEqual(this,t)}static isBeforeOrEqual(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<=i.column}static compare(t,i){const r=t.lineNumber|0,n=i.lineNumber|0;if(r===n){const s=t.column|0,o=i.column|0;return s-o}return r-n}clone(){return new sa(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new sa(t.lineNumber,t.column)}static isIPosition(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},mt=class di{constructor(t,i,r,n){t>r||t===r&&i>n?(this.startLineNumber=r,this.startColumn=n,this.endLineNumber=t,this.endColumn=i):(this.startLineNumber=t,this.startColumn=i,this.endLineNumber=r,this.endColumn=n)}isEmpty(){return di.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(t){return di.containsPosition(this,t)}static containsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<t.startColumn||i.lineNumber===t.endLineNumber&&i.column>t.endColumn)}static strictContainsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<=t.startColumn||i.lineNumber===t.endLineNumber&&i.column>=t.endColumn)}containsRange(t){return di.containsRange(this,t)}static containsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>t.endColumn)}strictContainsRange(t){return di.strictContainsRange(this,t)}static strictContainsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<=t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>=t.endColumn)}plusRange(t){return di.plusRange(this,t)}static plusRange(t,i){let r,n,s,o;return i.startLineNumber<t.startLineNumber?(r=i.startLineNumber,n=i.startColumn):i.startLineNumber===t.startLineNumber?(r=i.startLineNumber,n=Math.min(i.startColumn,t.startColumn)):(r=t.startLineNumber,n=t.startColumn),i.endLineNumber>t.endLineNumber?(s=i.endLineNumber,o=i.endColumn):i.endLineNumber===t.endLineNumber?(s=i.endLineNumber,o=Math.max(i.endColumn,t.endColumn)):(s=t.endLineNumber,o=t.endColumn),new di(r,n,s,o)}intersectRanges(t){return di.intersectRanges(this,t)}static intersectRanges(t,i){let r=t.startLineNumber,n=t.startColumn,s=t.endLineNumber,o=t.endColumn;const a=i.startLineNumber,c=i.startColumn,l=i.endLineNumber,u=i.endColumn;return r<a?(r=a,n=c):r===a&&(n=Math.max(n,c)),s>l?(s=l,o=u):s===l&&(o=Math.min(o,u)),r>s||r===s&&n>o?null:new di(r,n,s,o)}equalsRange(t){return di.equalsRange(this,t)}static equalsRange(t,i){return!t&&!i?!0:!!t&&!!i&&t.startLineNumber===i.startLineNumber&&t.startColumn===i.startColumn&&t.endLineNumber===i.endLineNumber&&t.endColumn===i.endColumn}getEndPosition(){return di.getEndPosition(this)}static getEndPosition(t){return new xr(t.endLineNumber,t.endColumn)}getStartPosition(){return di.getStartPosition(this)}static getStartPosition(t){return new xr(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,i){return new di(this.startLineNumber,this.startColumn,t,i)}setStartPosition(t,i){return new di(t,i,this.endLineNumber,this.endColumn)}collapseToStart(){return di.collapseToStart(this)}static collapseToStart(t){return new di(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return di.collapseToEnd(this)}static collapseToEnd(t){return new di(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new di(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}static fromPositions(t,i=t){return new di(t.lineNumber,t.column,i.lineNumber,i.column)}static lift(t){return t?new di(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn)}static areIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<=i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<=t.startColumn)}static compareRangesUsingStarts(t,i){if(t&&i){const s=t.startLineNumber|0,o=i.startLineNumber|0;if(s===o){const a=t.startColumn|0,c=i.startColumn|0;if(a===c){const l=t.endLineNumber|0,u=i.endLineNumber|0;if(l===u){const h=t.endColumn|0,f=i.endColumn|0;return h-f}return l-u}return a-c}return s-o}return(t?1:0)-(i?1:0)}static compareRangesUsingEnds(t,i){return t.endLineNumber===i.endLineNumber?t.endColumn===i.endColumn?t.startLineNumber===i.startLineNumber?t.startColumn-i.startColumn:t.startLineNumber-i.startLineNumber:t.endColumn-i.endColumn:t.endLineNumber-i.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},N4;(function(e){e[e.Null=0]="Null",e[e.PlainText=1]="PlainText"})(N4||(N4={}));var O4;(function(e){e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough"})(O4||(O4={}));var zh;(function(e){e[e.None=0]="None",e[e.DefaultForeground=1]="DefaultForeground",e[e.DefaultBackground=2]="DefaultBackground"})(zh||(zh={}));var Aa;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(Aa||(Aa={}));var F4;(function(e){e[e.LANGUAGEID_MASK=255]="LANGUAGEID_MASK",e[e.TOKEN_TYPE_MASK=768]="TOKEN_TYPE_MASK",e[e.BALANCED_BRACKETS_MASK=1024]="BALANCED_BRACKETS_MASK",e[e.FONT_STYLE_MASK=30720]="FONT_STYLE_MASK",e[e.FOREGROUND_MASK=16744448]="FOREGROUND_MASK",e[e.BACKGROUND_MASK=4278190080]="BACKGROUND_MASK",e[e.ITALIC_MASK=2048]="ITALIC_MASK",e[e.BOLD_MASK=4096]="BOLD_MASK",e[e.UNDERLINE_MASK=8192]="UNDERLINE_MASK",e[e.STRIKETHROUGH_MASK=16384]="STRIKETHROUGH_MASK",e[e.SEMANTIC_USE_ITALIC=1]="SEMANTIC_USE_ITALIC",e[e.SEMANTIC_USE_BOLD=2]="SEMANTIC_USE_BOLD",e[e.SEMANTIC_USE_UNDERLINE=4]="SEMANTIC_USE_UNDERLINE",e[e.SEMANTIC_USE_STRIKETHROUGH=8]="SEMANTIC_USE_STRIKETHROUGH",e[e.SEMANTIC_USE_FOREGROUND=16]="SEMANTIC_USE_FOREGROUND",e[e.SEMANTIC_USE_BACKGROUND=32]="SEMANTIC_USE_BACKGROUND",e[e.LANGUAGEID_OFFSET=0]="LANGUAGEID_OFFSET",e[e.TOKEN_TYPE_OFFSET=8]="TOKEN_TYPE_OFFSET",e[e.BALANCED_BRACKETS_OFFSET=10]="BALANCED_BRACKETS_OFFSET",e[e.FONT_STYLE_OFFSET=11]="FONT_STYLE_OFFSET",e[e.FOREGROUND_OFFSET=15]="FOREGROUND_OFFSET",e[e.BACKGROUND_OFFSET=24]="BACKGROUND_OFFSET"})(F4||(F4={}));var M4=class{constructor(){this.a=new Map,this.b=new Map,this.c=new C,this.onDidChange=this.c.event,this.d=null}handleChange(e){this.c.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this.a.set(e,t),this.handleChange([e]),Ce(()=>{this.a.get(e)===t&&(this.a.delete(e),this.handleChange([e]))})}get(e){return this.a.get(e)||null}registerFactory(e,t){this.b.get(e)?.dispose();const i=new wI(this,e,t);return this.b.set(e,i),Ce(()=>{const r=this.b.get(e);!r||r!==i||(this.b.delete(e),r.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this.b.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this.b.get(e);return!!(!i||i.isResolved)}setColorMap(e){this.d=e,this.c.fire({changedLanguages:Array.from(this.a.keys()),changedColorMap:!0})}getColorMap(){return this.d}getDefaultBackground(){return this.d&&this.d.length>zh.DefaultBackground?this.d[zh.DefaultBackground]:null}},wI=class extends Te{get isResolved(){return this.c}constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=!1,this.b=null,this.c=!1}dispose(){this.a=!0,super.dispose()}async resolve(){return this.b||(this.b=this.j()),this.b}async j(){const e=await this.h.tokenizationSupport;this.c=!0,e&&!this.a&&this.B(this.f.register(this.g,e))}},U4;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(U4||(U4={}));var G;(function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"})(G||(G={}));var B4;(function(e){const t=new Map;t.set(G.Method,Se.symbolMethod),t.set(G.Function,Se.symbolFunction),t.set(G.Constructor,Se.symbolConstructor),t.set(G.Field,Se.symbolField),t.set(G.Variable,Se.symbolVariable),t.set(G.Class,Se.symbolClass),t.set(G.Struct,Se.symbolStruct),t.set(G.Interface,Se.symbolInterface),t.set(G.Module,Se.symbolModule),t.set(G.Property,Se.symbolProperty),t.set(G.Event,Se.symbolEvent),t.set(G.Operator,Se.symbolOperator),t.set(G.Unit,Se.symbolUnit),t.set(G.Value,Se.symbolValue),t.set(G.Enum,Se.symbolEnum),t.set(G.Constant,Se.symbolConstant),t.set(G.Enum,Se.symbolEnum),t.set(G.EnumMember,Se.symbolEnumMember),t.set(G.Keyword,Se.symbolKeyword),t.set(G.Snippet,Se.symbolSnippet),t.set(G.Text,Se.symbolText),t.set(G.Color,Se.symbolColor),t.set(G.File,Se.symbolFile),t.set(G.Reference,Se.symbolReference),t.set(G.Customcolor,Se.symbolCustomColor),t.set(G.Folder,Se.symbolFolder),t.set(G.TypeParameter,Se.symbolTypeParameter),t.set(G.User,Se.account),t.set(G.Issue,Se.issues);function i(s){let o=t.get(s);return o||(console.info("No codicon found for CompletionItemKind "+s),o=Se.symbolProperty),o}e.toIcon=i;const r=new Map;r.set("method",G.Method),r.set("function",G.Function),r.set("constructor",G.Constructor),r.set("field",G.Field),r.set("variable",G.Variable),r.set("class",G.Class),r.set("struct",G.Struct),r.set("interface",G.Interface),r.set("module",G.Module),r.set("property",G.Property),r.set("event",G.Event),r.set("operator",G.Operator),r.set("unit",G.Unit),r.set("value",G.Value),r.set("constant",G.Constant),r.set("enum",G.Enum),r.set("enum-member",G.EnumMember),r.set("enumMember",G.EnumMember),r.set("keyword",G.Keyword),r.set("snippet",G.Snippet),r.set("text",G.Text),r.set("color",G.Color),r.set("file",G.File),r.set("reference",G.Reference),r.set("customcolor",G.Customcolor),r.set("folder",G.Folder),r.set("type-parameter",G.TypeParameter),r.set("typeParameter",G.TypeParameter),r.set("account",G.User),r.set("issue",G.Issue);function n(s,o){let a=r.get(s);return typeof a>"u"&&!o&&(a=G.Property),a}e.fromString=n})(B4||(B4={}));var Vh;(function(e){e[e.Deprecated=1]="Deprecated"})(Vh||(Vh={}));var Po;(function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"})(Po||(Po={}));var gl;(function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"})(gl||(gl={}));var ml;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(ml||(ml={}));var qh;(function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"})(qh||(qh={}));var Gh;(function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"})(Gh||(Gh={}));var H4;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(H4||(H4={}));var j4;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(j4||(j4={}));var W4;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(W4||(W4={}));function bI(e){return e&&E.isUri(e.uri)&&mt.isIRange(e.range)&&(mt.isIRange(e.originSelectionRange)||mt.isIRange(e.targetSelectionRange))}var ae;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(ae||(ae={}));var pN={[ae.Array]:d(786,null),[ae.Boolean]:d(787,null),[ae.Class]:d(788,null),[ae.Constant]:d(789,null),[ae.Constructor]:d(790,null),[ae.Enum]:d(791,null),[ae.EnumMember]:d(792,null),[ae.Event]:d(793,null),[ae.Field]:d(794,null),[ae.File]:d(795,null),[ae.Function]:d(796,null),[ae.Interface]:d(797,null),[ae.Key]:d(798,null),[ae.Method]:d(799,null),[ae.Module]:d(800,null),[ae.Namespace]:d(801,null),[ae.Null]:d(802,null),[ae.Number]:d(803,null),[ae.Object]:d(804,null),[ae.Operator]:d(805,null),[ae.Package]:d(806,null),[ae.Property]:d(807,null),[ae.String]:d(808,null),[ae.Struct]:d(809,null),[ae.TypeParameter]:d(810,null),[ae.Variable]:d(811,null)},Qh;(function(e){e[e.Deprecated=1]="Deprecated"})(Qh||(Qh={}));var z4;(function(e){const t=new Map;t.set(ae.File,Se.symbolFile),t.set(ae.Module,Se.symbolModule),t.set(ae.Namespace,Se.symbolNamespace),t.set(ae.Package,Se.symbolPackage),t.set(ae.Class,Se.symbolClass),t.set(ae.Method,Se.symbolMethod),t.set(ae.Property,Se.symbolProperty),t.set(ae.Field,Se.symbolField),t.set(ae.Constructor,Se.symbolConstructor),t.set(ae.Enum,Se.symbolEnum),t.set(ae.Interface,Se.symbolInterface),t.set(ae.Function,Se.symbolFunction),t.set(ae.Variable,Se.symbolVariable),t.set(ae.Constant,Se.symbolConstant),t.set(ae.String,Se.symbolString),t.set(ae.Number,Se.symbolNumber),t.set(ae.Boolean,Se.symbolBoolean),t.set(ae.Array,Se.symbolArray),t.set(ae.Object,Se.symbolObject),t.set(ae.Key,Se.symbolKey),t.set(ae.Null,Se.symbolNull),t.set(ae.EnumMember,Se.symbolEnumMember),t.set(ae.Struct,Se.symbolStruct),t.set(ae.Event,Se.symbolEvent),t.set(ae.Operator,Se.symbolOperator),t.set(ae.TypeParameter,Se.symbolTypeParameter);function i(r){let n=t.get(r);return n||(console.info("No codicon found for SymbolKind "+r),n=Se.symbolProperty),n}e.toIcon=i})(z4||(z4={}));var Pa=class ao{static{this.Comment=new ao("comment")}static{this.Imports=new ao("imports")}static{this.Region=new ao("region")}static fromValue(t){switch(t){case"comment":return ao.Comment;case"imports":return ao.Imports;case"region":return ao.Region}return new ao(t)}constructor(t){this.value=t}},V4;(function(e){e[e.AIGenerated=1]="AIGenerated"})(V4||(V4={}));var Jh;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Jh||(Jh={}));var Pm;(function(e){function t(i){return!i||typeof i!="object"?!1:typeof i.id=="string"&&typeof i.title=="string"}e.is=t})(Pm||(Pm={}));var Ra;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(Ra||(Ra={}));var vl;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(vl||(vl={}));var wl;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(wl||(wl={}));var q4;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(q4||(q4={}));var G4;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(G4||(G4={}));var Q4;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(Q4||(Q4={}));var gN=new M4,mN=new M4,J4;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(J4||(J4={}));var Xh;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Xh||(Xh={}));var Rm;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"})(Rm||(Rm={}));var X4;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(X4||(X4={}));var Z4;(function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"})(Z4||(Z4={}));var Y4;(function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"})(Y4||(Y4={}));var K4;(function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"})(K4||(K4={}));var Jn;(function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(Jn||(Jn={}));var bl;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(bl||(bl={}));var Ta;(function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"})(Ta||(Ta={}));var Tm=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},La;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(La||(La={}));var e5;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"})(e5||(e5={}));var t5;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(t5||(t5={}));var yI=class{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}},EI=class{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}},_a;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(_a||(_a={}));var Ji;(function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"})(Ji||(Ji={})),function(e){function t(o,a){return a-o}e.compare=t;const i=Object.create(null);i[e.Error]=d(1963,null),i[e.Warning]=d(1964,null),i[e.Info]=d(1965,null);function r(o){return i[o]||""}e.toString=r;function n(o){switch(o){case Zt.Error:return e.Error;case Zt.Warning:return e.Warning;case Zt.Info:return e.Info;case Zt.Ignore:return e.Hint}}e.fromSeverity=n;function s(o){switch(o){case e.Error:return Zt.Error;case e.Warning:return Zt.Warning;case e.Info:return Zt.Info;case e.Hint:return Zt.Ignore}}e.toSeverity=s}(Ji||(Ji={}));var i5;(function(e){const t="";function i(n){return r(n,!0)}e.makeKey=i;function r(n,s){const o=[t];return n.source?o.push(n.source.replace("\xA6","\\\xA6")):o.push(t),n.code?typeof n.code=="string"?o.push(n.code.replace("\xA6","\\\xA6")):o.push(n.code.value.replace("\xA6","\\\xA6")):o.push(t),n.severity!==void 0&&n.severity!==null?o.push(Ji.toString(n.severity)):o.push(t),n.message&&s?o.push(n.message.replace("\xA6","\\\xA6")):o.push(t),n.startLineNumber!==void 0&&n.startLineNumber!==null?o.push(n.startLineNumber.toString()):o.push(t),n.startColumn!==void 0&&n.startColumn!==null?o.push(n.startColumn.toString()):o.push(t),n.endLineNumber!==void 0&&n.endLineNumber!==null?o.push(n.endLineNumber.toString()):o.push(t),n.endColumn!==void 0&&n.endColumn!==null?o.push(n.endColumn.toString()):o.push(t),o.push(t),o.join("\xA6")}e.makeKeyOptionalMessage=r})(i5||(i5={}));var vN=K("markerService"),SI=K("progressService"),yl;(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})(yl||(yl={}));var wN=Object.freeze({total(){},worked(){},done(){}}),Lm=class{static{this.None=Object.freeze({report(){}})}get value(){return this.a}constructor(e){this.b=e}report(e){this.a=e,this.b(this.a)}},r5=class extends Te{constructor(t,i){super(),this.a=new wa,i.withProgress(t,r=>(this.b=r,this.c&&r.report(this.c),this.a.p)),this.B(Ce(()=>this.a.complete()))}report(t){this.b?this.b.report(t):this.c=t}};r5=__decorate([__param(1,SI)],r5);var yN=K("editorProgressService");function ur(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function xI(e,t="Unreachable"){throw new Error(t)}var Pr;(function(e){e.Delimiter="\0"})(Pr||(Pr={}));var Yr;(function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"})(Yr||(Yr={}));var Ze=class _r{static fromExtHostTestItem(t,i,r=t.parent){if(t._isRoot)return new _r([i]);const n=[t.id];for(let s=r;s&&s.id!==i;s=s.parent)n.push(s.id);return n.push(i),new _r(n.reverse())}static isRoot(t){return!t.includes(Pr.Delimiter)}static root(t){const i=t.indexOf(Pr.Delimiter);return i===-1?t:t.slice(0,i)}static fromString(t){return new _r(t.split(Pr.Delimiter))}static join(t,i){return new _r([...t.path,i])}static joinToString(t,i){return t.toString()+Pr.Delimiter+i}static parentId(t){const i=t.lastIndexOf(Pr.Delimiter);return i===-1?void 0:t.slice(0,i)}static localId(t){const i=t.lastIndexOf(Pr.Delimiter);return i===-1?t:t.slice(i+Pr.Delimiter.length)}static isChild(t,i){return i[t.length]===Pr.Delimiter&&i.startsWith(t)}static compare(t,i){return t===i?Yr.IsSame:_r.isChild(t,i)?Yr.IsChild:_r.isChild(i,t)?Yr.IsParent:Yr.Disconnected}static getLengthOfCommonPrefix(t,i){if(t===0)return 0;let r=0;for(;r<t-1;){for(let n=1;n<t;n++){const s=i(n-1),o=i(n);if(s.path[r]!==o.path[r])return r}r++}return r}constructor(t,i=t.length){if(this.path=t,this.d=i,t.length===0||i<1)throw new Error("cannot create test with empty path")}get rootId(){return new _r(this.path,1)}get parentId(){return this.d>1?new _r(this.path,this.d-1):void 0}get localId(){return this.path[this.d-1]}get controllerId(){return this.path[0]}get isRoot(){return this.d===1}*idsFromRoot(){for(let t=1;t<=this.d;t++)yield new _r(this.path,t)}*idsToRoot(){for(let t=this.d;t>0;t--)yield new _r(this.path,t)}compare(t){if(typeof t=="string")return _r.compare(this.toString(),t);for(let i=0;i<t.d&&i<this.d;i++)if(t.path[i]!==this.path[i])return Yr.Disconnected;return t.d>this.d?Yr.IsChild:t.d<this.d?Yr.IsParent:Yr.IsSame}toJSON(){return this.toString()}toString(){if(!this.c){this.c=this.path[0];for(let t=1;t<this.d;t++)this.c+=Pr.Delimiter,this.c+=this.path[t]}return this.c}},si;(function(e){e[e.Unset=0]="Unset",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(si||(si={}));var EN={[si.Unset]:"unset",[si.Queued]:"queued",[si.Running]:"running",[si.Passed]:"passed",[si.Failed]:"failed",[si.Skipped]:"skipped",[si.Errored]:"errored"},n5;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(n5||(n5={}));var El;(function(e){e[e.Refresh=2]="Refresh",e[e.CodeRelatedToTest=4]="CodeRelatedToTest",e[e.TestRelatedToCode=8]="TestRelatedToCode"})(El||(El={}));var hr;(function(e){e[e.Run=2]="Run",e[e.Debug=4]="Debug",e[e.Coverage=8]="Coverage",e[e.HasNonDefaultProfile=16]="HasNonDefaultProfile",e[e.HasConfigurable=32]="HasConfigurable",e[e.SupportsContinuousRun=64]="SupportsContinuousRun"})(hr||(hr={}));var SN=[hr.Run,hr.Debug,hr.Coverage,hr.HasNonDefaultProfile,hr.HasConfigurable,hr.SupportsContinuousRun],kI=e=>"runId"in e,Ca;(function(e){e.serialize=t=>({range:t.range.toJSON(),uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({range:mt.lift(i.range),uri:t.asCanonicalUri(E.revive(i.uri))})})(Ca||(Ca={}));var Kr;(function(e){e[e.Error=0]="Error",e[e.Output=1]="Output"})(Kr||(Kr={}));var Zh;(function(e){e.serialize=t=>({label:t.label,uri:t.uri?.toJSON(),position:t.position?.toJSON()}),e.deserialize=(t,i)=>({label:i.label,uri:i.uri?t.asCanonicalUri(E.revive(i.uri)):void 0,position:i.position?xr.lift(i.position):void 0})})(Zh||(Zh={}));var Yh;(function(e){e.serialize=t=>({message:t.message,type:Kr.Error,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&Ca.serialize(t.location),stackTrace:t.stackTrace?.map(Zh.serialize)}),e.deserialize=(t,i)=>({message:i.message,type:Kr.Error,expected:i.expected,actual:i.actual,contextValue:i.contextValue,location:i.location&&Ca.deserialize(t,i.location),stackTrace:i.stackTrace&&i.stackTrace.map(r=>Zh.deserialize(t,r))})})(Yh||(Yh={}));var Kh;(function(e){e.serialize=t=>({message:t.message,type:Kr.Output,offset:t.offset,length:t.length,location:t.location&&Ca.serialize(t.location)}),e.deserialize=(t,i)=>({message:i.message,type:Kr.Output,offset:i.offset,length:i.length,location:i.location&&Ca.deserialize(t,i.location)})})(Kh||(Kh={}));var ed;(function(e){e.serialize=t=>t.type===Kr.Error?Yh.serialize(t):Kh.serialize(t),e.deserialize=(t,i)=>i.type===Kr.Error?Yh.deserialize(t,i):Kh.deserialize(t,i),e.isDiffable=t=>t.type===Kr.Error&&t.actual!==void 0&&t.expected!==void 0})(ed||(ed={}));var Sl;(function(e){e.serializeWithoutMessages=t=>({state:t.state,duration:t.duration,messages:[]}),e.serialize=t=>({state:t.state,duration:t.duration,messages:t.messages.map(ed.serialize)}),e.deserialize=(t,i)=>({state:i.state,duration:i.duration,messages:i.messages.map(r=>ed.deserialize(t,r))})})(Sl||(Sl={}));var s5="\0",td=(e,t)=>e+s5+t,o5=e=>{const t=e.indexOf(s5);return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}},id;(function(e){e.serialize=t=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?.toJSON(),range:t.range?.toJSON()||null,description:t.description,error:t.error,sortText:t.sortText}),e.deserialize=(t,i)=>({extId:i.extId,label:i.label,tags:i.tags,busy:i.busy,children:void 0,uri:i.uri?t.asCanonicalUri(E.revive(i.uri)):void 0,range:i.range?mt.lift(i.range):null,description:i.description,error:i.error,sortText:i.sortText})})(id||(id={}));var Pi;(function(e){e[e.NotExpandable=0]="NotExpandable",e[e.Expandable=1]="Expandable",e[e.BusyExpanding=2]="BusyExpanding",e[e.Expanded=3]="Expanded"})(Pi||(Pi={}));var Fs;(function(e){e.serialize=t=>({expand:t.expand,item:id.serialize(t.item)}),e.deserialize=(t,i)=>({controllerId:Ze.root(i.item.extId),expand:i.expand,item:id.deserialize(t,i.item)})})(Fs||(Fs={}));var xl;(function(e){e.serialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.uri!==void 0&&(i.uri=t.item.uri?.toJSON()),t.item.range!==void 0&&(i.range=t.item.range?.toJSON()),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}},e.deserialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.range!==void 0&&(i.range=t.item.range?mt.lift(t.item.range):null),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}}})(xl||(xl={}));var _m=(e,t)=>{t.expand!==void 0&&(e.expand=t.expand),t.item!==void 0&&(e.item=e.item?Object.assign(e.item,t.item):t.item)},a5;(function(e){e.serializeWithoutMessages=t=>({...Fs.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Sl.serializeWithoutMessages)}),e.serialize=t=>({...Fs.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Sl.serialize)}),e.deserialize=(t,i)=>({...Fs.deserialize(t,i),ownComputedState:i.ownComputedState,computedState:i.computedState,tasks:i.tasks.map(r=>Sl.deserialize(t,r)),retired:!0})})(a5||(a5={}));var Cm;(function(e){e.empty=()=>({covered:0,total:0}),e.sum=(t,i)=>{t.covered+=i.covered,t.total+=i.total}})(Cm||(Cm={}));var c5;(function(e){e.serialize=t=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,testIds:t.testIds,uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({id:i.id,statement:i.statement,branch:i.branch,declaration:i.declaration,testIds:i.testIds,uri:t.asCanonicalUri(E.revive(i.uri))}),e.empty=(t,i)=>({id:t,uri:i,statement:Cm.empty()})})(c5||(c5={}));function Nm(e){return{...e,location:e.location?.toJSON()}}function Om(e){return e.location=e.location?xr.isIPosition(e.location)?xr.lift(e.location):mt.lift(e.location):void 0,e}var Na;(function(e){e[e.Declaration=0]="Declaration",e[e.Statement=1]="Statement",e[e.Branch=2]="Branch"})(Na||(Na={}));var l5;(function(e){e.serialize=t=>t.type===Na.Declaration?nd.serialize(t):sd.serialize(t),e.deserialize=t=>t.type===Na.Declaration?nd.deserialize(t):sd.deserialize(t)})(l5||(l5={}));var rd;(function(e){e.serialize=Nm,e.deserialize=Om})(rd||(rd={}));var nd;(function(e){e.serialize=Nm,e.deserialize=Om})(nd||(nd={}));var sd;(function(e){e.serialize=t=>({...Nm(t),branches:t.branches?.map(rd.serialize)}),e.deserialize=t=>({...Om(t),branches:t.branches?.map(rd.deserialize)})})(sd||(sd={}));var At;(function(e){e[e.Add=0]="Add",e[e.Update=1]="Update",e[e.DocumentSynced=2]="DocumentSynced",e[e.Remove=3]="Remove",e[e.IncrementPendingExtHosts=4]="IncrementPendingExtHosts",e[e.Retire=5]="Retire",e[e.AddTag=6]="AddTag",e[e.RemoveTag=7]="RemoveTag"})(At||(At={}));var od;(function(e){e.deserialize=(t,i)=>i.op===At.Add?{op:i.op,item:Fs.deserialize(t,i.item)}:i.op===At.Update?{op:i.op,item:xl.deserialize(i.item)}:i.op===At.DocumentSynced?{op:i.op,uri:t.asCanonicalUri(E.revive(i.uri)),docv:i.docv}:i,e.serialize=t=>t.op===At.Add?{op:t.op,item:Fs.serialize(t.item)}:t.op===At.Update?{op:t.op,item:xl.serialize(t.item)}:t})(od||(od={}));var DI=class{constructor(e){this.l=e,this.f=new Map,this.g=new Map,this.h=new Set,this.j=0,this.k=0,this.tags=this.f}apply(e){const t=this.x();for(const i of e)switch(i.op){case At.Add:this.p(Fs.deserialize(this.l,i.item),t);break;case At.Update:this.q(xl.deserialize(i.item),t);break;case At.Remove:this.v(i.itemId,t);break;case At.Retire:this.w(i.itemId);break;case At.IncrementPendingExtHosts:this.updatePendingRoots(i.amount);break;case At.AddTag:this.f.set(i.tag.id,i.tag);break;case At.RemoveTag:this.f.delete(i.id);break}t.complete?.()}p(e,t){const i=Ze.parentId(e.item.extId)?.toString();let r;if(!i)r=this.y(e),this.h.add(r),this.g.set(e.item.extId,r);else if(this.g.has(i)){const n=this.g.get(i);n.children.add(e.item.extId),r=this.y(e,n),this.g.set(e.item.extId,r)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return t.add?.(r),e.expand===Pi.BusyExpanding&&this.j++,r}q(e,t){const i=this.g.get(e.extId);if(i)return e.expand!==void 0&&(i.expand===Pi.BusyExpanding&&this.j--,e.expand===Pi.BusyExpanding&&this.j++),_m(i,e),t.update?.(i),i}v(e,t){const i=this.g.get(e);if(!i)return;const r=Ze.parentId(i.item.extId)?.toString();r?this.g.get(r).children.delete(i.item.extId):this.h.delete(i);const n=[[e]];for(;n.length;)for(const s of n.pop()){const o=this.g.get(s);o&&(n.push(o.children),this.g.delete(s),t.remove?.(o,o!==i),o.expand===Pi.BusyExpanding&&this.j--)}}w(e){}updatePendingRoots(e){this.k+=e}x(){return{}}},xi;(function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"})(xi||(xi={}));var kl=(e,t)=>e===t,$I={range:(e,t)=>e===t?!0:!e||!t?!1:e.equalsRange(t),busy:kl,label:kl,description:kl,error:kl,sortText:kl,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.includes(i)))},II=Object.entries($I),AI=(e,t)=>{let i;for(const[r,n]of II)n(e[r],t[r])||(i?i[r]=t[r]:i={[r]:t[r]});return i},PI=class extends Te{get root(){return this.s.root}constructor(e){super(),this.s=e,this.f=this.B(new va(()=>this.flushDiff(),200)),this.g=this.B(new C),this.tree=new Map,this.j=new Map,this.m=[],this.onDidGenerateDiff=this.g.event,this.root.canResolveChildren=!0,this.z(this.root,void 0)}set resolveHandler(e){this.h=e;for(const t of this.tree.values())this.J(t)}get resolveHandler(){return this.h}collectDiff(){const e=this.m;return this.m=[],e}pushDiff(e){switch(e.op){case At.DocumentSynced:{for(const t of this.m)if(t.op===At.DocumentSynced&&t.uri===e.uri){t.docv=e.docv;return}break}case At.Update:{const t=this.m[this.m.length-1];if(t){if(t.op===At.Update&&t.item.extId===e.item.extId){_m(t.item,e.item);return}if(t.op===At.Add&&t.item.item.extId===e.item.extId){_m(t.item,e.item);return}}break}}this.m.push(e),this.f.isScheduled()||this.f.schedule()}expand(e,t){const i=this.tree.get(e);if(i){if((i.expandLevels===void 0||t>i.expandLevels)&&(i.expandLevels=t),i.expand===Pi.Expandable){const r=this.M(i);return r.isOpen()?this.L(i,t-1):r.wait().then(()=>this.L(i,t-1))}else if(i.expand===Pi.Expanded)return i.resolveBarrier?.isOpen()===!1?i.resolveBarrier.wait().then(()=>this.L(i,t-1)):this.L(i,t-1)}}dispose(){for(const e of this.tree.values())this.s.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.m=[],super.dispose()}w(e,t){switch(t.op){case xi.RemoveChild:this.O(Ze.joinToString(e.fullId,t.id));break;case xi.Upsert:this.z(t.item,e);break;case xi.Bulk:for(const i of t.ops)this.w(e,i);break;case xi.SetTags:this.C(t.new,t.old,e.fullId.toString());break;case xi.UpdateCanResolveChildren:this.J(e);break;case xi.SetProp:this.pushDiff({op:At.Update,item:{extId:e.fullId.toString(),item:t.update}});break;case xi.DocumentSynced:this.y(e.actual.uri);break;default:xI(t)}}y(e){e&&this.pushDiff({op:At.DocumentSynced,uri:e,docv:this.s.getDocumentVersion(e)})}z(e,t){const i=Ze.fromExtHostTestItem(e,this.root.id,t?.actual),r=this.s.getApiFor(e);r.parent&&r.parent!==t?.actual&&this.s.getChildren(r.parent).delete(e.id);let n=this.tree.get(i.toString());if(!n){n={fullId:i,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:Pi.NotExpandable},e.tags.forEach(this.D,this),this.tree.set(n.fullId.toString(),n),this.G(e,t),this.pushDiff({op:At.Add,item:{controllerId:this.s.controllerId,expand:n.expand,item:this.s.toITestItem(e)}}),this.I(e,n,t);return}if(n.actual===e){this.H(e,n,t);return}if(n.actual.uri?.toString()!==e.uri?.toString())return this.O(i.toString()),this.z(e,t);const s=this.s.getChildren(n.actual),o=n.actual,a=AI(this.s.toITestItem(o),this.s.toITestItem(e));this.s.getApiFor(o).listener=void 0,n.actual=e,n.resolveBarrier=void 0,n.expand=Pi.NotExpandable,a&&(a.hasOwnProperty("tags")&&(this.C(e.tags,o.tags,i.toString()),delete a.tags),this.w(n,{op:xi.SetProp,update:a})),this.I(e,n,t);for(const[l,u]of s)this.s.getChildren(e).get(u.id)||this.O(Ze.joinToString(i,u.id));const c=n.expandLevels;c!==void 0&&queueMicrotask(()=>{n.expand===Pi.Expandable&&(n.expandLevels=void 0,this.expand(i.toString(),c))}),this.y(n.actual.uri)}C(e,t,i){const r=new Set(t.map(n=>n.id));for(const n of e)r.delete(n.id)||this.D(n);this.pushDiff({op:At.Update,item:{extId:i,item:{tags:e.map(n=>td(this.s.controllerId,n.id))}}}),r.forEach(this.F,this)}D(e){const t=this.j.get(e.id);t?t.refCount++:(this.j.set(e.id,{refCount:1}),this.pushDiff({op:At.AddTag,tag:{id:td(this.s.controllerId,e.id)}}))}F(e){const t=this.j.get(e);t&&!--t.refCount&&(this.j.delete(e),this.pushDiff({op:At.RemoveTag,id:td(this.s.controllerId,e)}))}G(e,t){this.s.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}H(e,t,i){this.G(e,i);const r=this.s.getApiFor(e);r.parent=i?.actual,r.listener=n=>this.w(t,n),this.J(t)}I(e,t,i){this.H(e,t,i);for(const[r,n]of this.s.getChildren(e))this.z(n,t)}J(e){let t;this.h?e.resolveBarrier?t=e.resolveBarrier.isOpen()?Pi.Expanded:Pi.BusyExpanding:t=e.actual.canResolveChildren?Pi.Expandable:Pi.NotExpandable:t=Pi.NotExpandable,t!==e.expand&&(e.expand=t,this.pushDiff({op:At.Update,item:{extId:e.fullId.toString(),expand:t}}),t===Pi.Expandable&&e.expandLevels!==void 0&&this.M(e))}L(e,t){if(t<0)return;const i=[];for(const[r,n]of this.s.getChildren(e.actual)){const s=this.expand(Ze.joinToString(e.fullId,n.id),t);_s(s)&&i.push(s)}if(i.length)return Promise.all(i).then(()=>{})}M(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this.h){const n=new gn;return n.open(),n}e.expand=Pi.BusyExpanding,this.N(e);const t=e.resolveBarrier=new gn,i=n=>{console.error(`Unhandled error in resolveHandler of test controller "${this.s.controllerId}"`,n)};let r;try{r=this.h(e.actual===this.root?void 0:e.actual)}catch(n){i(n)}return _s(r)?r.catch(i).then(()=>{t.open(),this.J(e)}):(t.open(),this.J(e)),e.resolveBarrier}N(e){this.pushDiff({op:At.Update,item:{extId:e.fullId.toString(),expand:e.expand}})}O(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:At.Remove,itemId:e});const i=[t];for(;i.length;){const r=i.pop();if(r){this.s.getApiFor(r.actual).listener=void 0;for(const n of r.actual.tags)this.F(n.id);this.tree.delete(r.fullId.toString());for(const[n,s]of this.s.getChildren(r.actual))i.push(this.tree.get(Ze.joinToString(r.fullId,s.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.g.fire(e)}},RI=class extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}},ad=class extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}},TI=class extends Error{constructor(e,t,i){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${i}".`)}},LI=(e,t,i)=>{let r=new Map;return{get size(){return r.size},forEach(n,s){for(const o of r.values())n.call(s,o,this)},[Symbol.iterator](){return r.entries()},replace(n){const s=new Map,o=new Set(r.keys()),a={op:xi.Bulk,ops:[]};for(const c of n){if(!(c instanceof i))throw new ad(c.id);const l=t(c).controllerId;if(l!==e.controllerId)throw new TI(c.id,l,e.controllerId);if(s.has(c.id))throw new RI(c.id);s.set(c.id,c),o.delete(c.id),a.ops.push({op:xi.Upsert,item:c})}for(const c of o.keys())a.ops.push({op:xi.RemoveChild,id:c});e.listener?.(a),r=s},add(n){if(!(n instanceof i))throw new ad(n.id);r.set(n.id,n),e.listener?.({op:xi.Upsert,item:n})},delete(n){r.delete(n)&&e.listener?.({op:xi.RemoveChild,id:n})},get(n){return r.get(n)},toJSON(){return Array.from(r.values())}}},u5=new WeakMap,_I=(e,t)=>{const i={controllerId:t};return u5.set(e,i),i},cd=e=>{const t=u5.get(e);if(!t)throw new ad(e?.id||"<unknown>");return t},CI=class{constructor(){this.a=new Map}add(e,t){ur(Xe(e)),ur(Qt(t)),ur(!this.a.has(e),"There is already an extension with this id"),this.a.set(e,t)}knows(e){return this.a.has(e)}as(e){return this.a.get(e)||null}},ki=new CI,NI=class extends Te{constructor(e,t="",i="",r=!0,n){super(),this.j=this.B(new C),this.onDidChange=this.j.event,this.z=!0,this.m=e,this.n=t,this.w=i,this.z=r,this.D=n}get id(){return this.m}get label(){return this.n}set label(e){this.F(e)}F(e){this.n!==e&&(this.n=e,this.j.fire({label:e}))}get tooltip(){return this.u||""}set tooltip(e){this.G(e)}G(e){this.u!==e&&(this.u=e,this.j.fire({tooltip:e}))}get class(){return this.w}set class(e){this.H(e)}H(e){this.w!==e&&(this.w=e,this.j.fire({class:e}))}get enabled(){return this.z}set enabled(e){this.I(e)}I(e){this.z!==e&&(this.z=e,this.j.fire({enabled:e}))}get checked(){return this.C}set checked(e){this.J(e)}J(e){this.C!==e&&(this.C=e,this.j.fire({checked:e}))}async run(e,t){this.D&&await this.D(e)}},xN=class Zw{constructor(){this.id=Zw.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let i=[];for(const r of t)r.length&&(i.length?i=[...i,new Zw,...r]:i=r);return i}static{this.ID="vs.actions.separator"}async run(){}},kN=class B8 extends NI{static{this.ID="vs.actions.empty"}constructor(){super(B8.ID,d(41,null),void 0,!1)}},OI={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},FI={id:"default",displayName:d(4053,null),providerDisplayName:d(4054,null)},h5;(function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"})(h5||(h5={}));var d5;(function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"})(d5||(d5={}));function ld(e){if(Ms(e))return!1;const t=e;return t?.original!==void 0&&t.modified!==void 0}function f5(e){if(Ms(e))return!1;const t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function Fm(e){if(Ms(e)||ld(e))return!1;const t=e;return t?.primary!==void 0&&t.secondary!==void 0}function ud(e){if(Ms(e))return!1;const t=e;return E.isUri(t?.base?.resource)&&E.isUri(t?.input1?.resource)&&E.isUri(t?.input2?.resource)&&E.isUri(t?.result?.resource)}var p5;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(p5||(p5={}));var Oa;(function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"})(Oa||(Oa={}));var MI=class{constructor(){this.a=new Map}registerSource(e,t){let i=this.a.get(e);return i||(i={source:e,label:t},this.a.set(e,i)),i.source}getSourceLabel(e){return this.a.get(e)?.label??e}},DN=new MI,g5;(function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"})(g5||(g5={}));var UI=class extends Te{};function Ms(e){return e instanceof UI}function BI(e){const t=e;return E.isUri(t?.preferredResource)}function HI(e){const t=e;return Ms(t?.primary)&&Ms(t?.secondary)}function jI(e){const t=e;return Ms(t?.modified)&&Ms(t?.original)}var m5;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"})(m5||(m5={}));var v5;(function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"})(v5||(v5={}));var Us;(function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"})(Us||(Us={}));var WI=class{getOriginalUri(e,t){if(!e)return;if(ud(e))return b5.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:r,secondary:n}=this.a(e);if(r&&n){if(t?.supportSideBySide===Us.BOTH)return{primary:this.getOriginalUri(r,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(n,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===Us.ANY)return this.getOriginalUri(r,{filterByScheme:t.filterByScheme})??this.getOriginalUri(n,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===Us.PRIMARY?r:n}}if(ld(e)||f5(e)||Fm(e)||ud(e))return;const i=BI(e)?e.preferredResource:e.resource;return!i||!t||!t.filterByScheme?i:this.b(i,t.filterByScheme)}a(e){return HI(e)||Fm(e)?{primary:e.primary,secondary:e.secondary}:jI(e)||ld(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(ud(e))return b5.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:r,secondary:n}=this.a(e);if(r&&n){if(t?.supportSideBySide===Us.BOTH)return{primary:this.getCanonicalUri(r,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(n,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===Us.ANY)return this.getCanonicalUri(r,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(n,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===Us.PRIMARY?r:n}}if(ld(e)||f5(e)||Fm(e)||ud(e))return;const i=e.resource;return!i||!t||!t.filterByScheme?i:this.b(i,t.filterByScheme)}b(e,t){if(Array.isArray(t)){if(t.some(i=>e.scheme===i))return e}else if(t===e.scheme)return e}},w5;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"})(w5||(w5={}));var b5=new WI,y5;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(y5||(y5={}));var zI=class{constructor(){this.c=new Map,this.d=new Map}start(e){const t=this.a=e.get(Th);for(const[i,r]of this.c)this.e(i,r,t);this.c.clear()}e(e,t,i){const r=i.createInstance(t);this.d.set(e,r)}registerFileEditorFactory(e){if(this.b)throw new Error("Can only register one file editor factory.");this.b=e}getFileEditorFactory(){return ma(this.b)}registerEditorSerializer(e,t){if(this.c.has(e)||this.d.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.a?this.e(e,t,this.a):this.c.set(e,t),Ce(()=>{this.c.delete(e),this.d.delete(e)})}getEditorSerializer(e){return this.d.get(typeof e=="string"?e:e.typeId)}};ki.add(OI.EditorFactory,new zI);var E5;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"})(E5||(E5={}));var VI=(e,t)=>e===t,S5=class{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return qI(e,this)}},x5=new Map,Mm=new WeakMap;function qI(e,t){const i=Mm.get(e);if(i)return i;const r=GI(e,t);if(r){let n=x5.get(r)??0;n++,x5.set(r,n);const s=n===1?r:`${r}#${n}`;return Mm.set(e,s),s}}function GI(e,t){const i=Mm.get(e);if(i)return i;const r=t.owner?JI(t.owner)+".":"";let n;const s=t.debugNameSource;if(s!==void 0)if(typeof s=="function"){if(n=s(),n!==void 0)return r+n}else return r+s;const o=t.referenceFn;if(o!==void 0&&(n=Um(o),n!==void 0))return r+n;if(t.owner!==void 0){const a=QI(t.owner,e);if(a!==void 0)return r+a}}function QI(e,t){for(const i in e)if(e[i]===t)return i}var k5=new Map,D5=new WeakMap;function JI(e){const t=D5.get(e);if(t)return t;const i=XI(e);let r=k5.get(i)??0;r++,k5.set(i,r);const n=r===1?i:`${i}#${r}`;return D5.set(e,n),n}function XI(e){const t=e.constructor;return t?t.name:"Object"}function Um(e){const t=e.toString(),r=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(r?r[1]:void 0)?.trim()}var ZI;function Bm(){return ZI}var YI,KI,$5,e3=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,r=t===void 0?e:t;return $5({owner:i,debugName:()=>{const n=Um(r);if(n!==void 0)return n;const o=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(r.toString());if(o)return`${this.debugName}.${o[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:r},n=>r(this.read(n),n))}flatten(){return $5({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(YI(this,t)),this}keepObserved(e){return e.add(KI(this)),this}get a(){return this.get()}},t3=class extends e3{constructor(){super(...arguments),this.b=new Set}addObserver(e){const t=this.b.size;this.b.add(e),t===0&&this.c()}removeObserver(e){this.b.delete(e)&&this.b.size===0&&this.f()}c(){}f(){}},i3=class{constructor(e,t){this._fn=e,this.b=t,this.a=[],Bm()?.handleBeginTransaction(this)}getDebugName(){return this.b?this.b():Um(this._fn)}updateObserver(e,t){this.a.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.a;for(let t=0;t<e.length;t++){const{observer:i,observable:r}=e[t];i.endUpdate(r)}this.a=null,Bm()?.handleEndTransaction()}};function r3(e,t){let i;return typeof e=="string"?i=new S5(void 0,e,void 0):i=new S5(e,void 0,void 0),new n3(i,t,VI)}var n3=class extends t3{get debugName(){return this.e.getDebugName(this)??"ObservableValue"}constructor(e,t,i){super(),this.e=e,this.g=i,this.d=t}get(){return this.d}set(e,t,i){if(i===void 0&&this.g(this.d,e))return;let r;t||(t=r=new i3(()=>{},()=>`Setting ${this.debugName}`));try{const n=this.d;this.h(e),Bm()?.handleObservableChanged(this,{oldValue:n,newValue:e,change:i,didChange:!0,hadValue:!0});for(const s of this.b)t.updateObserver(s,this),s.handleChange(this,i)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this.d}`}h(e){this.d=e}};function Hm(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}var s3=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],I5;(function(e){e[e.System=0]="System",e[e.User=1]="User"})(I5||(I5={}));var jm;(function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"})(jm||(jm={}));var dt=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const i=typeof e=="string"?e:e.value,r=typeof t=="string"?t:t.value;return Ps(i,r)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},Ro=class{get size(){return this.c.size}constructor(e){if(this.c=new Set,e)for(const t of e)this.add(t)}add(e){this.c.add(dt.toKey(e))}delete(e){return this.c.delete(dt.toKey(e))}has(e){return this.c.has(dt.toKey(e))}},Xn=class{constructor(){this.c=new Map}clear(){this.c.clear()}delete(e){this.c.delete(dt.toKey(e))}get(e){return this.c.get(dt.toKey(e))}has(e){return this.c.has(dt.toKey(e))}set(e,t){this.c.set(dt.toKey(e),t)}values(){return this.c.values()}forEach(e){this.c.forEach(e)}[Symbol.iterator](){return this.c[Symbol.iterator]()}},$N=K("IBuiltinExtensionsScannerService"),o3=K("productService"),a3="vscode://schemas/vscode-product",hd=K("configurationService"),fi;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"})(fi||(fi={}));function Wm(e,t){const i=Object.create(null);for(const r in e)A5(i,r,e[r],t);return i}function A5(e,t,i,r){const n=t.split("."),s=n.pop();let o=e;for(let a=0;a<n.length;a++){const c=n[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":if(l===null){r(`Ignoring ${t} as ${n.slice(0,a+1).join(".")} is null`);return}break;default:r(`Ignoring ${t} as ${n.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[s]=i}catch{r(`Ignoring ${t} as ${n.join(".")} is ${JSON.stringify(o)}`)}else r(`Ignoring ${t} as ${n.join(".")} is ${JSON.stringify(o)}`)}function c3(e,t){const i=t.split(".");P5(e,i)}function P5(e,t){const i=t.shift();if(t.length===0){delete e[i];return}if(Object.keys(e).indexOf(i)!==-1){const r=e[i];typeof r=="object"&&!Array.isArray(r)&&(P5(r,t),Object.keys(r).length===0&&delete e[i])}}function dd(e,t,i){function r(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const n=t.split("."),s=r(e,n);return typeof s>"u"?i:s}function l3(e){return e.replace(/[\[\]]/g,"")}function u3(e){let t=!1;const i=new Map,r=new Map;if(h3(e,u=>{if(e===u)return!0;const h=JSON.stringify(u);if(h.length<30)return!0;const f=i.get(h);if(!f){const g={schemas:[u]};return i.set(h,g),r.set(u,g),!0}return f.schemas.push(u),r.set(u,f),t=!0,!1}),i.clear(),!t)return JSON.stringify(e);let s="$defs";for(;e.hasOwnProperty(s);)s+="_";const o=[];function a(u){return JSON.stringify(u,(h,f)=>{if(f!==u){const g=r.get(f);if(g&&g.schemas.length>1)return g.id||(g.id=`_${o.length}`,o.push(g.schemas[0])),{$ref:`#/${s}/${g.id}`}}return f})}const c=a(e),l=[];for(let u=0;u<o.length;u++)l.push(`"_${u}":${a(o[u])}`);return l.length?`${c.substring(0,c.length-1)},"${s}":{${l.join(",")}}}`:c}function Fa(e){return typeof e=="object"&&e!==null}function h3(e,t){if(!e||typeof e!="object")return;const i=(...c)=>{for(const l of c)Fa(l)&&o.push(l)},r=(...c)=>{for(const l of c)if(Fa(l))for(const u in l){const h=l[u];Fa(h)&&o.push(h)}},n=(...c)=>{for(const l of c)if(Array.isArray(l))for(const u of l)Fa(u)&&o.push(u)},s=c=>{if(Array.isArray(c))for(const l of c)Fa(l)&&o.push(l);else Fa(c)&&o.push(c)},o=[e];let a=o.pop();for(;a;)t(a)&&(i(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),r(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),n(a.anyOf,a.allOf,a.oneOf,a.prefixItems),s(a.items)),a=o.pop()}var fd={JSONContribution:"base.contributions.json"};function d3(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}var f3=class{constructor(){this.b=new C,this.onDidChangeSchema=this.b.event,this.a={}}registerSchema(e,t){this.a[d3(e)]=t,this.b.fire(e)}notifySchemaChanged(e){this.b.fire(e)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(e){const t=this.a[e];return t?u3(t):void 0}hasSchemaContent(e){return!!this.a[e]}},p3=new f3;ki.add(fd.JSONContribution,p3);var R5;(function(e){e.Multiline="multilineText",e.Singleline="singlelineText"})(R5||(R5={}));var Ma={Configuration:"base.contributions.configuration"},zt;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.WINDOW=3]="WINDOW",e[e.RESOURCE=4]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"})(zt||(zt={}));var pd={properties:{},patternProperties:{}},gd={properties:{},patternProperties:{}},md={properties:{},patternProperties:{}},vd={properties:{},patternProperties:{}},wd={properties:{},patternProperties:{}},Dl={properties:{},patternProperties:{}},To="vscode://schemas/settings/resourceLanguage",bd=ki.as(fd.JSONContribution),g3=class{constructor(){this.a=[],this.i=new Set,this.j=new C,this.onDidSchemaChange=this.j.event,this.k=new C,this.onDidUpdateConfiguration=this.k.event,this.b=new Map,this.c={id:"defaultOverrides",title:d(1660,null),properties:{}},this.d=[this.c],this.h={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.e={},this.f=new Map,this.g={},bd.registerSchema(To,this.h),this.z()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.r(e,t,i),bd.registerSchema(To,this.h),this.j.fire(),this.k.fire({properties:i})}deregisterConfigurations(e){const t=new Set;this.s(e,t),bd.registerSchema(To,this.h),this.j.fire(),this.k.fire({properties:t})}updateConfigurations({add:e,remove:t}){const i=new Set;this.s(t,i),this.r(e,!1,i),bd.registerSchema(To,this.h),this.j.fire(),this.k.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.l(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}l(e,t){this.a.push(...e);const i=[];for(const{overrides:r,source:n}of e)for(const s in r){t.add(s);const o=this.b.get(s)??this.b.set(s,{configurationDefaultOverrides:[]}).get(s),a=r[s];if(o.configurationDefaultOverrides.push({value:a,source:n}),En.test(s)){const c=this.o(s,a,n,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c,this.n(s,c,n),i.push(...$l(s))}else{const c=this.p(s,a,n,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c;const l=this.e[s];l&&(this.A(s,l),this.w(s,l))}}this.q(i)}deregisterDefaultConfigurations(e){const t=new Set;this.m(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}m(e,t){for(const i of e){const r=this.a.indexOf(i);r!==-1&&this.a.splice(r,1)}for(const{overrides:i,source:r}of e)for(const n in i){const s=this.b.get(n);if(!s)continue;const o=s.configurationDefaultOverrides.findIndex(a=>r?a.source?.id===r.id:a.value===i[n]);if(o!==-1){if(s.configurationDefaultOverrides.splice(o,1),s.configurationDefaultOverrides.length===0&&this.b.delete(n),En.test(n)){let a;for(const c of s.configurationDefaultOverrides)a=this.o(n,c.value,c.source,a);a&&!wy(a.value)?(s.configurationDefaultOverrideValue=a,this.n(n,a,r)):(this.b.delete(n),delete this.e[n],delete this.c.properties[n])}else{let a;for(const l of s.configurationDefaultOverrides)a=this.p(n,l.value,l.source,a);s.configurationDefaultOverrideValue=a;const c=this.e[n];c&&(this.A(n,c),this.w(n,c))}t.add(n)}}this.y()}n(e,t,i){const r={type:"object",default:t.value,description:d(1661,null,l3(e)),$ref:To,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.e[e]=r,this.c.properties[e]=r}o(e,t,i,r){const n=r?.value||{},s=r?.source??new Map;if(!(s instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const o of Object.keys(t)){const a=t[o];if(Qt(a)&&(tl(n[o])||Qt(n[o]))){if(n[o]={...n[o]??{},...a},i)for(const l in a)s.set(`${o}.${l}`,i)}else n[o]=a,i?s.set(o,i):s.delete(o)}return{value:n,source:s}}p(e,t,i,r){const n=this.e[e],s=r?.value??n?.defaultDefaultValue;let o=i;if(Qt(t)&&(n!==void 0&&n.type==="object"||n===void 0&&(tl(s)||Qt(s)))){if(o=r?.source??new Map,!(o instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&o.set(`${e}.${c}`,i);t={...Qt(s)?s:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1;const i=new Set;e.removedDefaults&&(this.m(e.removedDefaults,i),t=!0),e.addedDefaults&&(this.l(e.addedDefaults,i),t=!0),e.removedConfigurations&&this.s(e.removedConfigurations,i),e.addedConfigurations&&this.r(e.addedConfigurations,!1,i),this.j.fire(),this.k.fire({properties:i,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this.j.fire()}registerOverrideIdentifiers(e){this.q(e),this.j.fire()}q(e){for(const t of e)this.i.add(t);this.y()}r(e,t,i){e.forEach(r=>{this.u(r,t,r.extensionInfo,r.restrictedProperties,void 0,i),this.d.push(r),this.v(r)})}s(e,t){const i=r=>{if(r.properties)for(const n in r.properties){t.add(n);const s=this.e[n];s?.policy?.name&&this.f.delete(s.policy.name),delete this.e[n],this.x(n,r.properties[n])}r.allOf?.forEach(n=>i(n))};for(const r of e){i(r);const n=this.d.indexOf(r);n!==-1&&this.d.splice(n,1)}}u(e,t=!0,i,r,n=zt.WINDOW,s){n=Jt(e.scope)?n:e.scope;const o=e.properties;if(o)for(const c in o){const l=o[c];if(t&&v3(c,l)){delete o[c];continue}if(l.source=i,l.defaultDefaultValue=o[c].default,this.A(c,l),En.test(c)?l.scope=void 0:(l.scope=Jt(l.scope)?n:l.scope,l.restricted=Jt(l.restricted)?!!r?.includes(c):l.restricted),o[c].hasOwnProperty("included")&&!o[c].included){this.g[c]=o[c],delete o[c];continue}else this.e[c]=o[c],o[c].policy?.name&&this.f.set(o[c].policy.name,c);!o[c].deprecationMessage&&o[c].markdownDeprecationMessage&&(o[c].deprecationMessage=o[c].markdownDeprecationMessage),s.add(c)}const a=e.allOf;if(a)for(const c of a)this.u(c,t,i,r,n,s)}getConfigurations(){return this.d}getConfigurationProperties(){return this.e}getPolicyConfigurations(){return this.f}getExcludedConfigurationProperties(){return this.g}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,i]of this.b)i.configurationDefaultOverrideValue&&e.set(t,i.configurationDefaultOverrideValue);return e}v(e){const t=i=>{const r=i.properties;if(r)for(const s in r)this.w(s,r[s]);i.allOf?.forEach(t)};t(e)}w(e,t){switch(pd.properties[e]=t,t.scope){case zt.APPLICATION:gd.properties[e]=t;break;case zt.MACHINE:md.properties[e]=t;break;case zt.MACHINE_OVERRIDABLE:vd.properties[e]=t;break;case zt.WINDOW:wd.properties[e]=t;break;case zt.RESOURCE:Dl.properties[e]=t;break;case zt.LANGUAGE_OVERRIDABLE:Dl.properties[e]=t,this.h.properties[e]=t;break}}x(e,t){switch(delete pd.properties[e],t.scope){case zt.APPLICATION:delete gd.properties[e];break;case zt.MACHINE:delete md.properties[e];break;case zt.MACHINE_OVERRIDABLE:delete vd.properties[e];break;case zt.WINDOW:delete wd.properties[e];break;case zt.RESOURCE:case zt.LANGUAGE_OVERRIDABLE:delete Dl.properties[e],delete this.h.properties[e];break}}y(){for(const e of this.i.values()){const t=`[${e}]`,i={type:"object",description:d(1662,null),errorMessage:d(1663,null),$ref:To};this.A(t,i),pd.properties[t]=i,gd.properties[t]=i,md.properties[t]=i,vd.properties[t]=i,wd.properties[t]=i,Dl.properties[t]=i}}z(){const e={type:"object",description:d(1664,null),errorMessage:d(1665,null),$ref:To};pd.patternProperties[Lo]=e,gd.patternProperties[Lo]=e,md.patternProperties[Lo]=e,vd.patternProperties[Lo]=e,wd.patternProperties[Lo]=e,Dl.patternProperties[Lo]=e,this.j.fire()}A(e,t){const i=this.b.get(e)?.configurationDefaultOverrideValue;let r,n;i&&(!t.disallowConfigurationDefault||!i.source)&&(r=i.value,n=i.source),tl(r)&&(r=t.defaultDefaultValue,n=void 0),tl(r)&&(r=m3(t.type)),t.default=r,t.defaultValueSource=n}},T5="\\[([^\\]]+)\\]",L5=new RegExp(T5,"g"),Lo=`^(${T5})+$`,En=new RegExp(Lo);function $l(e){const t=[];if(En.test(e)){let i=L5.exec(e);for(;i?.length;){const r=i[1].trim();r&&t.push(r),i=L5.exec(e)}}return ca(t)}function m3(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var yd=new g3;ki.add(Ma.Configuration,yd);function v3(e,t){return e.trim()?En.test(e)?d(1667,null,e):yd.getConfigurationProperties()[e]!==void 0?d(1668,null,e):t.policy?.name&&yd.getPolicyConfigurations().get(t.policy?.name)!==void 0?d(1669,null,e,t.policy?.name,yd.getPolicyConfigurations().get(t.policy?.name)):null:d(1666,null)}var w3=K("requestService");function b3(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||e.res.statusCode===1223}function y3(e){return e.res.statusCode===204}async function E3(e){if(!b3(e))throw new Error("Server returned "+e.res.statusCode);if(y3(e))return null;const i=(await KS(e.stream)).toString();try{return JSON.parse(i)}catch(r){throw r.message+=`:
`+i,r}}var zm;function S3(e){const t=ki.as(Ma.Configuration),i=zm;zm={id:"http",order:15,title:d(2049,null),type:"object",scope:e,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:d(2050,null),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,description:d(2051,null),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:d(2052,null),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:d(2053,null),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:d(2054,null),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[d(2055,null),d(2056,null),d(2057,null),d(2058,null)],default:"override",description:d(2059,null),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,description:d(2060,null),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,description:d(2061,null),restricted:!0}}},t.updateConfigurations({add:[zm],remove:i?[i]:[]})}S3(zt.APPLICATION);var Il;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(Il||(Il={}));var en;(function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"})(en||(en={}));var IN=class H8 extends Te{static{this.a=100}constructor(t,i=Object.create(null)){super(),this.r=t,this.s=i,this.b=this.B(new wh),this.onDidChangeStorage=this.b.event,this.c=en.None,this.f=new Map,this.g=this.B(new Vk(H8.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.t()}t(){this.B(this.r.onDidChangeItemsExternal(t=>this.u(t)))}u(t){this.b.pause();try{t.changed?.forEach((i,r)=>this.w(r,i)),t.deleted?.forEach(i=>this.w(i,void 0))}finally{this.b.resume()}}w(t,i){if(this.c===en.Closed)return;let r=!1;Jt(i)?r=this.f.delete(t):this.f.get(t)!==i&&(this.f.set(t,i),r=!0),r&&this.b.fire({key:t,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===en.None&&(this.c=en.Initialized,this.s.hint!==Il.STORAGE_DOES_NOT_EXIST&&(this.f=await this.r.getItems()))}get(t,i){const r=this.f.get(t);return Jt(r)?i:r}getBoolean(t,i){const r=this.get(t);return Jt(r)?i:r==="true"}getNumber(t,i){const r=this.get(t);return Jt(r)?i:parseInt(r,10)}getObject(t,i){const r=this.get(t);return Jt(r)?i:$4(r)}async set(t,i,r=!1){if(this.c===en.Closed)return;if(Jt(i))return this.delete(t,r);const n=Qt(i)||Array.isArray(i)?f$(i):String(i);if(this.f.get(t)!==n)return this.f.set(t,n),this.j.set(t,n),this.h.delete(t),this.b.fire({key:t,external:r}),this.D()}async delete(t,i=!1){if(!(this.c===en.Closed||!this.f.delete(t)))return this.h.has(t)||this.h.add(t),this.j.delete(t),this.b.fire({key:t,external:i}),this.D()}async optimize(){if(this.c!==en.Closed)return await this.flush(0),this.r.optimize()}async close(){return this.m||(this.m=this.y()),this.m}async y(){this.c=en.Closed;try{await this.D(0)}catch{}await this.r.close(()=>this.f)}get z(){return this.j.size>0||this.h.size>0}async C(){if(!this.z)return;const t={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.r.updateItems(t).finally(()=>{if(!this.z)for(;this.n.length;)this.n.pop()?.()})}async flush(t){if(!(this.c===en.Closed||this.m))return this.D(t)}async D(t){return this.s.hint===Il.STORAGE_IN_MEMORY?this.C():this.g.trigger(()=>this.C(),t)}async whenFlushed(){if(this.z)return new Promise(t=>this.n.push(t))}isInMemory(){return this.s.hint===Il.STORAGE_IN_MEMORY}},Vm=K("environmentService"),AN=Vm,_5=K("IUriIdentityService"),C5;(function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState"})(C5||(C5={}));function x3(e){const t=e;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&E.isUri(t.location)&&E.isUri(t.globalStorageHome)&&E.isUri(t.settingsResource)&&E.isUri(t.keybindingsResource)&&E.isUri(t.tasksResource)&&E.isUri(t.snippetsHome)&&E.isUri(t.extensionsResource))}var k3=K("IUserDataProfilesService");function Ed(e,t,i,r,n,s){return{id:e,name:t,location:i,isDefault:!1,shortName:n?.shortName,icon:n?.icon,globalStorageHome:s&&n?.useDefaultFlags?.globalState?s.globalStorageHome:Mi(i,"globalStorage"),settingsResource:s&&n?.useDefaultFlags?.settings?s.settingsResource:Mi(i,"settings.json"),keybindingsResource:s&&n?.useDefaultFlags?.keybindings?s.keybindingsResource:Mi(i,"keybindings.json"),tasksResource:s&&n?.useDefaultFlags?.tasks?s.tasksResource:Mi(i,"tasks.json"),snippetsHome:s&&n?.useDefaultFlags?.snippets?s.snippetsHome:Mi(i,"snippets"),extensionsResource:s&&n?.useDefaultFlags?.extensions?s.extensionsResource:Mi(i,"extensions.json"),cacheHome:Mi(r,e),useDefaultFlags:n?.useDefaultFlags,isTransient:n?.transient}}var N5=class extends Te{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.C.profiles,...this.s.profiles]}constructor(t,i,r,n){super(),this.t=t,this.u=i,this.w=r,this.y=n,this.f=!0,this.h=this.B(new C),this.onDidChangeProfiles=this.h.event,this.j=this.B(new C),this.onWillCreateProfile=this.j.event,this.m=this.B(new C),this.onWillRemoveProfile=this.m.event,this.n=this.B(new C),this.onDidResetWorkspaces=this.n.event,this.r=new Map,this.s={profiles:[],folders:new li,workspaces:new li,emptyWindows:new Map},this.profilesHome=Mi(this.t.userRoamingDataHome,"profiles"),this.g=Mi(this.t.cacheHome,"CachedProfilesData")}init(){this.z=void 0}setEnablement(t){this.f!==t&&(this.z=void 0,this.f=t)}isEnabled(){return this.f}get C(){if(!this.z){const t=this.D(),i=[t];if(this.f)try{for(const s of this.O()){if(!s.name||!Xe(s.name)||!s.location){this.y.warn("Skipping the invalid stored profile",s.location||s.name);continue}i.push(Ed(Ls(s.location),s.name,s.location,this.g,{shortName:s.shortName,icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.y.error(s)}const r=new li,n=new Map;if(i.length)try{const s=this.Q();if(s.workspaces)for(const[o,a]of Object.entries(s.workspaces)){const c=E.parse(o),l=i.find(u=>u.id===a);l&&r.set(c,l)}if(s.emptyWindows)for(const[o,a]of Object.entries(s.emptyWindows)){const c=i.find(l=>l.id===a);c&&n.set(o,c)}}catch(s){this.y.error(s)}this.z={profiles:i,workspaces:r,emptyWindows:n}}return this.z}D(){const t=Ed("__default__profile__",d(2440,null),this.t.userRoamingDataHome,this.g);return{...t,extensionsResource:this.S()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const i="Temp",r=new RegExp(`${vo(i)}\\s(\\d+)`);let n=0;for(const o of this.profiles){const a=r.exec(o.name),c=a?parseInt(a[1]):0;n=c>n?c:n}const s=`${i} ${n+1}`;return this.createProfile(ol(Xr()).toString(16),s,{transient:!0},t)}async createNamedProfile(t,i,r){return this.createProfile(ol(Xr()).toString(16),t,i,r)}async createProfile(t,i,r,n){if(!this.f)throw new Error("Profiles are disabled in the current environment.");const s=await this.F(t,i,r);return n&&await this.setProfileForWorkspace(n,s),s}async F(t,i,r){if(!Xe(i)||!i)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.r.get(i);return n||(n=(async()=>{try{if(this.profiles.find(c=>c.name===i||c.id===t))throw new Error(`Profile with ${i} name already exists`);const o=Ed(t,i,Mi(this.profilesHome,t),this.g,r,this.defaultProfile);await this.u.createFolder(o.location);const a=[];return this.j.fire({profile:o,join(c){a.push(c)}}),await ba.settled(a),this.I([o],[],[]),o}finally{this.r.delete(i)}})(),this.r.set(i,n)),n}async updateProfile(t,i){if(!this.f)throw new Error("Profiles are disabled in the current environment.");let r=this.profiles.find(n=>n.id===t.id);if(!r)throw new Error(`Profile '${t.name}' does not exist`);return r=Ed(r.id,i.name??r.name,r.location,this.g,{shortName:i.shortName??r.shortName,icon:i.icon===null?void 0:i.icon??r.icon,transient:i.transient??r.isTransient,useDefaultFlags:i.useDefaultFlags??r.useDefaultFlags},this.defaultProfile),this.I([],[],[r]),r}async removeProfile(t){if(!this.f)throw new Error("Profiles are disabled in the current environment.");if(t.isDefault)throw new Error("Cannot remove default profile");const i=this.profiles.find(n=>n.id===t.id);if(!i)throw new Error(`Profile '${t.name}' does not exist`);const r=[];this.m.fire({profile:i,join(n){r.push(n)}});try{await Promise.allSettled(r)}catch(n){this.y.error(n)}for(const n of[...this.C.emptyWindows.keys()])i.id===this.C.emptyWindows.get(n)?.id&&this.C.emptyWindows.delete(n);for(const n of[...this.C.workspaces.keys()])i.id===this.C.workspaces.get(n)?.id&&this.C.workspaces.delete(n);this.M(),this.I([],[i],[]);try{await this.u.del(i.cacheHome,{recursive:!0})}catch(n){qD(n)!==Sr.FILE_NOT_FOUND&&this.y.error(n)}}async setProfileForWorkspace(t,i){if(!this.f)throw new Error("Profiles are disabled in the current environment.");const r=this.profiles.find(n=>n.id===i.id);if(!r)throw new Error(`Profile '${i.name}' does not exist`);this.L(t,r)}unsetWorkspace(t,i){if(!this.f)throw new Error("Profiles are disabled in the current environment.");this.L(t,void 0,i)}async resetWorkspaces(){this.s.folders.clear(),this.s.workspaces.clear(),this.s.emptyWindows.clear(),this.C.workspaces.clear(),this.C.emptyWindows.clear(),this.M(),this.n.fire()}async cleanUp(){if(this.f&&await this.u.exists(this.profilesHome)){const t=await this.u.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(i=>i.isDirectory&&this.profiles.every(r=>!this.w.extUri.isEqual(r.location,i.resource))).map(i=>this.u.del(i.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){if(!this.f)return;const t=this.s.profiles.filter(i=>!this.H(i));await Promise.allSettled(t.map(i=>this.removeProfile(i)))}getProfileForWorkspace(t){const i=this.G(t),r=E.isUri(i)?this.C.workspaces.get(i):this.C.emptyWindows.get(i);return r||(wm(t)?this.s.folders.get(t.uri):bm(t)?this.s.workspaces.get(t.configPath):this.s.emptyWindows.get(t.id))}G(t){return wm(t)?t.uri:bm(t)?t.configPath:t.id}H(t){return!!([...this.C.emptyWindows.values()].some(i=>this.w.extUri.isEqual(i.location,t.location))||[...this.C.workspaces.values()].some(i=>this.w.extUri.isEqual(i.location,t.location))||[...this.s.emptyWindows.values()].some(i=>this.w.extUri.isEqual(i.location,t.location))||[...this.s.workspaces.values()].some(i=>this.w.extUri.isEqual(i.location,t.location))||[...this.s.folders.values()].some(i=>this.w.extUri.isEqual(i.location,t.location)))}I(t,i,r){const n=[...this.profiles,...t],s=[],o=this.s.profiles;this.s.profiles=[];for(let a of n){if(a.isDefault||i.some(l=>a.id===l.id))continue;a=r.find(l=>a.id===l.id)??a;const c=o.find(l=>a.id===l.id);if(a.isTransient)this.s.profiles.push(a);else{if(c){for(const[l,u]of this.s.emptyWindows.entries())if(a.id===u.id){this.L({id:l},a);break}for(const[l,u]of this.s.workspaces.entries())if(a.id===u.id){this.L({id:"",configPath:l},a);break}for(const[l,u]of this.s.folders.entries())if(a.id===u.id){this.L({id:"",uri:l},a);break}}s.push({location:a.location,name:a.name,shortName:a.shortName,icon:a.icon,useDefaultFlags:a.useDefaultFlags})}}this.P(s),this.z=void 0,this.J(t,i,r)}J(t,i,r){this.h.fire({added:t,removed:i,updated:r,all:this.profiles})}L(t,i,r){if(r=i?.isTransient?!0:r,r)wm(t)?(this.s.folders.delete(t.uri),i&&this.s.folders.set(t.uri,i)):bm(t)?(this.s.workspaces.delete(t.configPath),i&&this.s.workspaces.set(t.configPath,i)):(this.s.emptyWindows.delete(t.id),i&&this.s.emptyWindows.set(t.id,i));else{this.L(t,void 0,!0);const n=this.G(t);E.isUri(n)?(this.C.workspaces.delete(n),i&&this.C.workspaces.set(n,i)):(this.C.emptyWindows.delete(n),i&&this.C.emptyWindows.set(n,i)),this.M()}}M(){const t={};for(const[r,n]of this.C.workspaces.entries())t[r.toString()]=n.id;const i={};for(const[r,n]of this.C.emptyWindows.entries())i[r.toString()]=n.id;this.R({workspaces:t,emptyWindows:i}),this.z=void 0}N(t){const i={},r=this.D();if(t.workspaces)for(const[s,o]of Object.entries(t.workspaces)){const a=E.parse(o);i[s]=this.w.extUri.isEqual(a,r.location)?r.id:this.w.extUri.basename(a)}const n={};if(t.emptyWindows)for(const[s,o]of Object.entries(t.emptyWindows)){const a=E.parse(o);n[s]=this.w.extUri.isEqual(a,r.location)?r.id:this.w.extUri.basename(a)}return{workspaces:i,emptyWindows:n}}O(){return[]}P(t){throw new Error("not implemented")}Q(){return{}}R(t){throw new Error("not implemented")}S(){}};N5=__decorate([__param(0,Vm),__param(1,VD),__param(2,_5),__param(3,ut)],N5);var D3="__$__isNewStorageMarker",Sd="__$__targetStorageMarker",$3=K("storageService"),Ua;(function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"})(Ua||(Ua={}));var oi;(function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"})(oi||(oi={}));var qm;(function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"})(qm||(qm={}));function I3(e){const t=e.get(Sd);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var RN=class j8 extends Te{static{this.a=60*1e3}constructor(t={flushInterval:j8.a}){super(),this.m=t,this.b=this.B(new wh),this.c=this.B(new wh),this.onDidChangeTarget=this.c.event,this.f=this.B(new C),this.onWillSaveState=this.f.event,this.h=this.B(new va(()=>this.n(),this.m.flushInterval)),this.j=this.B(new ho),this.C=void 0,this.F=void 0,this.H=void 0}onDidChangeValue(t,i,r){return Gt.filter(this.b.event,n=>n.scope===t&&(i===void 0||n.key===i),r)}n(){this.j.value=Ay(()=>{this.r()&&this.flush(),this.h.schedule()})}r(){return!0}t(){On([this.j,this.h])}initialize(){return this.g||(this.g=(async()=>{Vi("code/willInitStorage");try{await this.O()}finally{Vi("code/didInitStorage")}this.h.schedule()})()),this.g}u(t,i){const{key:r,external:n}=i;if(r===Sd){switch(t){case oi.APPLICATION:this.H=void 0;break;case oi.PROFILE:this.F=void 0;break;case oi.WORKSPACE:this.C=void 0;break}this.c.fire({scope:t})}else this.b.fire({scope:t,key:r,target:this.J(t)[r],external:n})}w(t){this.f.fire({reason:t})}get(t,i,r){return this.P(i)?.get(t,r)}getBoolean(t,i,r){return this.P(i)?.getBoolean(t,r)}getNumber(t,i,r){return this.P(i)?.getNumber(t,r)}getObject(t,i,r){return this.P(i)?.getObject(t,r)}storeAll(t,i){this.y(()=>{for(const r of t)this.store(r.key,r.value,r.scope,r.target,i)})}store(t,i,r,n,s=!1){if(Jt(i)){this.remove(t,r,s);return}this.y(()=>{this.z(t,r,n),this.P(r)?.set(t,i,s)})}remove(t,i,r=!1){this.y(()=>{this.z(t,i,void 0),this.P(i)?.delete(t,r)})}y(t){this.b.pause(),this.c.pause();try{t()}finally{this.b.resume(),this.c.resume()}}keys(t,i){const r=[],n=this.J(t);for(const s of Object.keys(n))n[s]===i&&r.push(s);return r}z(t,i,r,n=!1){const s=this.J(i);typeof r=="number"?s[t]!==r&&(s[t]=r,this.P(i)?.set(Sd,JSON.stringify(s),n)):typeof s[t]=="number"&&(delete s[t],this.P(i)?.set(Sd,JSON.stringify(s),n))}get D(){return this.C||(this.C=this.L(oi.WORKSPACE)),this.C}get G(){return this.F||(this.F=this.L(oi.PROFILE)),this.F}get I(){return this.H||(this.H=this.L(oi.APPLICATION)),this.H}J(t){switch(t){case oi.APPLICATION:return this.I;case oi.PROFILE:return this.G;default:return this.D}}L(t){const i=this.P(t);return i?I3(i):Object.create(null)}isNew(t){return this.getBoolean(D3,t)===!0}async flush(t=Ua.NONE){this.f.fire({reason:t});const i=this.P(oi.APPLICATION),r=this.P(oi.PROFILE),n=this.P(oi.WORKSPACE);switch(t){case Ua.NONE:await ba.settled([i?.whenFlushed()??Promise.resolve(),r?.whenFlushed()??Promise.resolve(),n?.whenFlushed()??Promise.resolve()]);break;case Ua.SHUTDOWN:await ba.settled([i?.flush(0)??Promise.resolve(),r?.flush(0)??Promise.resolve(),n?.flush(0)??Promise.resolve()]);break}}async log(){const t=this.P(oi.APPLICATION)?.items??new Map,i=this.P(oi.PROFILE)?.items??new Map,r=this.P(oi.WORKSPACE)?.items??new Map;return A3(t,i,r,this.Q(oi.APPLICATION)??"",this.Q(oi.PROFILE)??"",this.Q(oi.WORKSPACE)??"")}async optimize(t){return await this.flush(),this.P(t)?.optimize()}async switch(t,i){return this.w(Ua.NONE),x3(t)?this.R(t,i):this.S(t,i)}M(t,i){return!(t.id===i.id||O5(i)&&O5(t))}N(t,i,r){this.y(()=>{const n=new Set;for(const[s,o]of t)n.add(s),i.get(s)!==o&&this.u(r,{key:s,external:!0});for(const[s]of i.items)n.has(s)||this.u(r,{key:s,external:!0})})}};function O5(e){return e.isDefault||!!e.useDefaultFlags?.globalState}async function A3(e,t,i,r,n,s){const o=b=>{try{return JSON.parse(b)}catch{return b}},a=new Map,c=new Map;e.forEach((b,k)=>{a.set(k,b),c.set(k,o(b))});const l=new Map,u=new Map;t.forEach((b,k)=>{l.set(k,b),u.set(k,o(b))});const h=new Map,f=new Map;i.forEach((b,k)=>{h.set(k,b),f.set(k,o(b))}),console.group(r!==n?`Storage: Application (path: ${r})`:`Storage: Application & Profile (path: ${r}, default profile)`);const g=[];if(a.forEach((b,k)=>{g.push({key:k,value:b})}),console.table(g),console.groupEnd(),console.log(c),r!==n){console.group(`Storage: Profile (path: ${n}, profile specific)`);const b=[];l.forEach((k,I)=>{b.push({key:I,value:k})}),console.table(b),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${s})`);const m=[];h.forEach((b,k)=>{m.push({key:k,value:b})}),console.table(m),console.groupEnd(),console.log(f)}var TN=new X("chatSessionResponseVote","",{type:"string",description:d(4701,null)}),LN=new X("chatVoteUpEnabled",!1,{type:"boolean",description:d(4702,null)}),_N=new X("chatSessionResponseDetectedAgentOrCommand",!1,{type:"boolean",description:d(4703,null)}),CN=new X("chatResponseSupportsIssueReporting",!1,{type:"boolean",description:d(4704,null)}),NN=new X("chatSessionResponseFiltered",!1,{type:"boolean",description:d(4705,null)}),ON=new X("chatSessionResponseError",!1,{type:"boolean",description:d(4706,null)}),FN=new X("chatSessionRequestInProgress",!1,{type:"boolean",description:d(4707,null)}),MN=new X("chatResponse",!1,{type:"boolean",description:d(4708,null)}),UN=new X("chatRequest",!1,{type:"boolean",description:d(4709,null)}),BN=new X("chatEditApplied",!1,{type:"boolean",description:d(4710,null)}),HN=new X("chatInputHasText",!1,{type:"boolean",description:d(4711,null)}),jN=new X("chatInputHasFocus",!1,{type:"boolean",description:d(4712,null)}),WN=new X("inChatInput",!1,{type:"boolean",description:d(4713,null)}),zN=new X("inChat",!1,{type:"boolean",description:d(4714,null)}),P3=new X("chatIsEnabled",!1,{type:"boolean",description:d(4715,null)}),VN=new X("chatCursorAtTop",!1),qN=new X("chatInputHasAgent",!1),GN=new X("chatLocation",void 0),QN=new X("quickChatHasFocus",!1,{type:"boolean",description:d(4716,null)}),Al,Xi;(function(e){e.Panel="panel",e.Terminal="terminal",e.Notebook="notebook",e.Editor="editor"})(Xi||(Xi={})),function(e){function t(i){switch(i){case"panel":return e.Panel;case"terminal":return e.Terminal;case"notebook":return e.Notebook;case"editor":return e.Editor}return e.Panel}e.fromRaw=t}(Xi||(Xi={}));var JN=K("chatAgentService"),F5=class{static{this.AGENT_LEADER="@"}constructor(t){this.f=t,this.b=new Map,this.d=new C,this.onDidChangeAgents=this.d.event,this.g=new Map,this.i=new Map,this.e=P3.bindTo(this.f)}registerAgent(t,i){if(this.getAgent(t))throw new Error(`Agent already registered: ${JSON.stringify(t)}`);const n=this,s=i.slashCommands;i={...i,get slashCommands(){return s.filter(a=>!a.when||n.f.contextMatchesRules(yi.deserialize(a.when)))}};const o={data:i};return this.b.set(t,o),Ce(()=>{this.b.delete(t),this.d.fire(void 0)})}registerAgentImplementation(t,i){const r=this.b.get(t);if(!r)throw new Error(`Unknown agent: ${JSON.stringify(t)}`);if(r.impl)throw new Error(`Agent already has implementation: ${JSON.stringify(t)}`);return r.data.isDefault&&this.e.set(!0),r.impl=i,this.d.fire(new xd(r.data,i)),Ce(()=>{r.impl=void 0,this.d.fire(void 0),r.data.isDefault&&this.e.set(!1)})}registerDynamicAgent(t,i){t.isDynamic=!0;const r={data:t,impl:i};return this.b.set(t.id,r),this.d.fire(new xd(t,i)),Ce(()=>{this.b.delete(t.id),this.d.fire(void 0)})}registerAgentCompletionProvider(t,i){return this.g.set(t,i),{dispose:()=>{this.g.delete(t)}}}async getAgentCompletionItems(t,i,r){return await this.g.get(t)?.(i,r)??[]}updateAgent(t,i){const r=this.b.get(t);if(!r?.impl)throw new Error(`No activated agent with id ${JSON.stringify(t)} registered`);r.data.metadata={...r.data.metadata,...i},this.d.fire(new xd(r.data,r.impl))}getDefaultAgent(t){return DS(this.getActivatedAgents(),i=>!!i.isDefault&&i.locations.includes(t))}getContributedDefaultAgent(t){return this.getAgents().find(i=>!!i.isDefault&&i.locations.includes(t))}getSecondaryAgent(){return vr.find(this.b.values(),t=>!!t.data.metadata.isSecondary)?.data}getAgent(t){if(this.h(t))return this.b.get(t)?.data}h(t){const i=this.b.get(t);return!i?.data.when||this.f.contextMatchesRules(yi.deserialize(i.data.when))}getAgentByFullyQualifiedId(t){const i=vr.find(this.b.values(),r=>R3(r.data)===t)?.data;if(!(i&&!this.h(i.id)))return i}getAgents(){return Array.from(this.b.values()).map(t=>t.data).filter(t=>this.h(t.id))}getActivatedAgents(){return Array.from(this.b.values()).filter(t=>!!t.impl).filter(t=>this.h(t.data.id)).map(t=>new xd(t.data,t.impl))}getAgentsByName(t){return this.getAgents().filter(i=>i.name===t)}agentHasDupeName(t){const i=this.getAgent(t);return i?this.getAgentsByName(i.name).filter(r=>r.extensionId.value!==i.extensionId.value).length>0:!1}async invokeAgent(t,i,r,n,s){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return await o.impl.invoke(i,r,n,s)}async getFollowups(t,i,r,n,s){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return o.impl?.provideFollowups?o.impl.provideFollowups(i,r,n,s):[]}registerChatParticipantDetectionProvider(t,i){return this.i.set(t,i),Ce(()=>{this.i.delete(t)})}hasChatParticipantDetectionProviders(){return this.i.size>0}async detectAgentOrCommand(t,i,r,n){const s=vr.first(this.i.values());if(!s)return;const o=this.getAgents().reduce((u,h)=>{u.push({participant:h.id,disambiguation:h.disambiguation??[]});for(const f of h.slashCommands)u.push({participant:h.id,command:f.name,disambiguation:[]});return u},[]),a=await s.provideParticipantDetection(t,i,{...r,participants:o},n);if(!a)return;const c=this.getAgent(a.participant);if(!c)return;if(!a.command)return{agent:c};const l=c?.slashCommands.find(u=>u.name===a.command);if(l)return{agent:c,command:l}}};F5=__decorate([__param(0,$D)],F5);var xd=class{constructor(e,t){this.b=e,this.d=t}get id(){return this.b.id}get name(){return this.b.name??""}get fullName(){return this.b.fullName??""}get description(){return this.b.description??""}get extensionId(){return this.b.extensionId}get extensionPublisherId(){return this.b.extensionPublisherId}get extensionPublisherDisplayName(){return this.b.publisherDisplayName}get extensionDisplayName(){return this.b.extensionDisplayName}get isDefault(){return this.b.isDefault}get metadata(){return this.b.metadata}get slashCommands(){return this.b.slashCommands}get locations(){return this.b.locations}get disambiguation(){return this.b.disambiguation}async invoke(e,t,i,r){return this.d.invoke(e,t,i,r)}async provideFollowups(e,t,i,r){return this.d.provideFollowups?this.d.provideFollowups(e,t,i,r):[]}provideWelcomeMessage(e,t){if(this.d.provideWelcomeMessage)return this.d.provideWelcomeMessage(e,t)}provideSampleQuestions(e,t){if(this.d.provideSampleQuestions)return this.d.provideSampleQuestions(e,t)}toJSON(){return this.b}},ZN=K("chatAgentNameService"),M5=class{static{Al=this}static{this.b="chat.participantNameRegistry"}constructor(t,i,r,n){if(this.g=i,this.h=r,this.i=n,this.e=r3(this,Object.create(null)),this.f=!1,!t.chatParticipantRegistry)return;this.d=t.chatParticipantRegistry;const s=n.get(Al.b,oi.APPLICATION);try{this.e.set(JSON.parse(s??"{}"),void 0)}catch{n.remove(Al.b,oi.APPLICATION)}this.j()}j(){this.f||this.k().catch(t=>this.h.warn("Failed to fetch chat participant registry",t)).then(()=>mn(5*60*1e3)).then(()=>this.j())}async k(){const t=await this.g.request({type:"GET",url:this.d},Wt.None);if(t.res.statusCode!==200)throw new Error("Could not get extensions report.");const i=await E3(t);if(!i||i.version!==1)throw new Error("Unexpected chat participant registry response.");const r=i.restrictedChatParticipants;this.e.set(r,void 0),this.i.store(Al.b,JSON.stringify(r),oi.APPLICATION,qm.MACHINE)}getAgentNameRestriction(t){const i=this.l(t.name,t).get(),r=!t.fullName||this.l(t.fullName.replace(/\s/g,""),t).get();return i&&r}l(t,i){return this.e.map(n=>n[t.toLowerCase()]).map(n=>n?n.some(s=>Ps(s,s.includes(".")?i.extensionId.value:i.extensionPublisherId)):!0)}dispose(){this.f=!0}};M5=Al=__decorate([__param(0,o3),__param(1,w3),__param(2,ut),__param(3,$3)],M5);function R3(e){return`${e.extensionId.value}.${e.id}`}var Gm="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",KN=new RegExp(Gm),U5;(function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"})(U5||(U5={}));var B5;(function(e){e[e.NoneOrRelevance=0]="NoneOrRelevance",e[e.LastUpdatedDate=1]="LastUpdatedDate",e[e.Title=2]="Title",e[e.PublisherName=3]="PublisherName",e[e.InstallCount=4]="InstallCount",e[e.PublishedDate=10]="PublishedDate",e[e.AverageRating=6]="AverageRating",e[e.WeightedRating=12]="WeightedRating"})(B5||(B5={}));var H5;(function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"})(H5||(H5={}));var j5;(function(e){e.Install="install",e.Uninstall="uninstall"})(j5||(j5={}));var W5;(function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"})(W5||(W5={}));var eO=K("extensionGalleryService"),z5;(function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"})(z5||(z5={}));var V5;(function(e){e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadUninstalled="ReadUninstalled",e.UnsetUninstalled="UnsetUninstalled",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.Signature="Signature",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"})(V5||(V5={}));var tO=K("extensionManagementService"),iO=K("IGlobalExtensionEnablementService"),rO=K("IExtensionTipsService"),nO=em(1778,"Extensions"),sO=em(1779,"Preferences"),oO=K("telemetryService"),aO=K("customEndpointTelemetryService"),Bs;(function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"})(Bs||(Bs={}));var q5;(function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"})(q5||(q5={}));var Qm=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}},T3=class{constructor(){this.telemetryLevel=Bs.NONE,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},cO=new T3,L3="extensionTelemetryLog",_3=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function C3(e){if(!e)return"none";const t=Hm(e);return _3.has(t)?t:"other"}function N3(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let i=e;const r=[];for(const a of t)for(;;){const c=a.exec(e);if(!c)break;r.push([c.index,a.lastIndex])}const n=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,s=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(i="";;){const a=s.exec(e);if(!a)break;const c=r.some(([l,u])=>a.index<u&&l<s.lastIndex);!n.test(a[0])&&!c&&(i+=e.substring(o,a.index)+"<REDACTED: user-file-path>",o=s.lastIndex)}return o<e.length&&(i+=e.substr(o)),i}function O3(e){if(!e)return e;const t=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const i of t)if(i.regex.test(e))return`<REDACTED: ${i.label}>`;return e}function G5(e,t){return Nh(e,i=>{if(i instanceof Qm||Object.hasOwnProperty.call(i,"isTrustedTelemetryValue"))return i.value;if(typeof i=="string"){let r=i.replaceAll("%20"," ");r=N3(r,t);for(const n of t)r=r.replace(n,"");return r=O3(r),r}})}var lO=new dt("pprice.better-merge"),F3=class{constructor(){this.a=new Map,this.b=new WeakMap}register(e,t){this.a.set(e,t)}readActivationEvents(e){return this.b.has(e)||this.b.set(e,this.c(e)),this.b.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const i of e){const r=this.readActivationEvents(i);r.length>0&&(t[dt.toKey(i.identifier)]=r)}return t}c(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let i=0;i<t.length;i++)t[i]==="onUri"&&(t[i]=`onUri:${dt.toKey(e.identifier)}`);if(!e.contributes)return t;for(const i in e.contributes){const r=this.a.get(i);if(!r)continue;const n=e.contributes[i],s=Array.isArray(n)?n:[n];try{r(s,t)}catch(o){mr(o)}}return t}},M3=new F3,U3=Object.freeze({identifier:new dt("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:E.parse("void:location"),isBuiltin:!1,targetPlatform:jm.UNDEFINED,isUserBuiltin:!1,isUnderDevelopment:!1}),B3=K("extensionService"),Q5=class{constructor(e){this.dependency=e}},J5;(function(e){e[e.EagerAutoStart=1]="EagerAutoStart",e[e.EagerManualStart=2]="EagerManualStart",e[e.Lazy=3]="Lazy"})(J5||(J5={}));function pi(e,t){return e.enabledApiProposals?e.enabledApiProposals.includes(t):!1}function B(e,t){if(!pi(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.
Its package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var Jm;(function(e){e[e.Normal=0]="Normal",e[e.Immediate=1]="Immediate"})(Jm||(Jm={}));var H3={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts"},aiTextSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProviderNew.d.ts"},attributableCoverage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.attributableCoverage.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:2},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},chatVariableResolver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribIssueReporter:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribIssueReporter.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemChangesMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemChangesMenu.d.ts"},contribSourceControlHistoryItemGroupMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemGroupMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},createFileSystemWatcher:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts"},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},documentPaste:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileComments:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileComments.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProviderNew.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts"},findFiles2New:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2New.d.ts"},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFilesNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFilesNew.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},lmTools:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.lmTools.d.ts",version:4},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},showLocal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.showLocal.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textSearchCompleteNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchCompleteNew.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProviderNew.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},kd=Object.freeze(H3),Xm=ki.as(fd.JSONContribution),j3=class sg{static a(t){const i=new Ro;for(let r=0,n=t.length;r<n;r++)i.add(t[r].description.identifier);return i}static compute(t,i){if(!t||!t.length)return new sg(i,[]);if(!i||!i.length)return new sg([],t);const r=this.a(t),n=this.a(i),s=i.filter(a=>!r.has(a.description.identifier)),o=t.filter(a=>!n.has(a.description.identifier));return new sg(s,o)}constructor(t,i){this.added=t,this.removed=i}},W3=class{constructor(e,t){this.name=e,this.defaultExtensionKind=t,this.a=null,this.b=null,this.c=null}setHandler(e){if(this.a!==null)throw new Error("Handler already set!");return this.a=e,this.d(),{dispose:()=>{this.a=null}}}acceptUsers(e){this.c=j3.compute(this.b,e),this.b=e,this.d()}d(){if(!(this.a===null||this.b===null||this.c===null))try{this.a(this.b,this.c)}catch(e){mr(e)}}},z3={type:"string",enum:["ui","workspace"],enumDescriptions:[d(12254,null),d(12255,null)]},X5="vscode://schemas/vscode-extensions",Zm={properties:{engines:{type:"object",description:d(12256,null),properties:{vscode:{type:"string",description:d(12257,null),default:"^1.22.0"}}},publisher:{description:d(12258,null),type:"string"},displayName:{description:d(12259,null),type:"string"},categories:{description:d(12260,null),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:s3},{type:"string",const:"Languages",deprecationMessage:d(12261,null)}]}},galleryBanner:{type:"object",description:d(12262,null),properties:{color:{description:d(12263,null),type:"string"},theme:{description:d(12264,null),type:"string",enum:["dark","light"]}}},contributes:{description:d(12265,null),type:"object",properties:{},default:{}},preview:{type:"boolean",description:d(12266,null)},enableProposedApi:{type:"boolean",deprecationMessage:d(12267,null)},enabledApiProposals:{markdownDescription:d(12268,null),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(kd).map(e=>e),markdownEnumDescriptions:Object.values(kd).map(e=>e.proposal)}},api:{markdownDescription:d(12269,null),type:"string",enum:["none"],enumDescriptions:[d(12270,null)]},activationEvents:{description:d(12271,null),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:d(12272,null),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:d(12273,null),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:d(12274,null),body:"onCommand:${2:commandId}"},{label:"onDebug",description:d(12275,null),body:"onDebug"},{label:"onDebugInitialConfigurations",description:d(12276,null),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:d(12277,null),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:d(12278,null),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:d(12279,null),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:d(12280,null),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:d(12281,null),body:"onStartupFinished"},{label:"onTaskType",description:d(12282,null),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:d(12283,null),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:d(12284,null),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:d(12285,null),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:d(12286,null)},{label:"onUri",body:"onUri",description:d(12287,null)},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:d(12288,null)},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:d(12289,null)},{label:"onNotebook",body:"onNotebook:${1:type}",description:d(12290,null)},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:d(12291,null)},{label:"onRenderer",description:d(12292,null),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:d(12293,null)},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:d(12294,null)},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:d(12295,null)},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:d(12296,null)},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:d(12297,null)},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolName}",description:d(12298,null)},{label:"*",description:d(12299,null),body:"*"}]}},badges:{type:"array",description:d(12300,null),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:d(12301,null)},href:{type:"string",description:d(12302,null)},description:{type:"string",description:d(12303,null)}}}},markdown:{type:"string",description:d(12304,null),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:d(12305,null),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:d(12306,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:Gm}},extensionPack:{description:d(12307,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:Gm}},extensionKind:{description:d(12308,null),type:"array",items:z3,default:["workspace"],defaultSnippets:[{body:["ui"],description:d(12309,null)},{body:["workspace"],description:d(12310,null)},{body:["ui","workspace"],description:d(12311,null)},{body:["workspace","ui"],description:d(12312,null)},{body:[],description:d(12313,null)}]},capabilities:{description:d(12314,null),type:"object",properties:{virtualWorkspaces:{description:d(12315,null),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:d(12316,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(12317,null),d(12318,null),d(12319,null)]},description:{type:"string",markdownDescription:d(12320,null)}}},untrustedWorkspaces:{description:d(12321,null),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:d(12322,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(12323,null),d(12324,null),d(12325,null)]},restrictedConfigurations:{description:d(12326,null),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:d(12327,null)}}}}},sponsor:{description:d(12328,null),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:d(12329,null),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:d(12330,null),type:"string"},"vscode:uninstall":{description:d(12331,null),type:"string"}}},icon:{type:"string",description:d(12332,null)},l10n:{type:"string",description:d(12333,null)},pricing:{type:"string",markdownDescription:d(12334,null),enum:["Free","Trial"],default:"Free"}}},V3=class{constructor(){this.a=new Map}registerExtensionPoint(e){if(this.a.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new W3(e.extensionPoint,e.defaultExtensionKind);return this.a.set(e.extensionPoint,t),e.activationEventsGenerator&&M3.register(e.extensionPoint,e.activationEventsGenerator),Zm.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,Xm.registerSchema(X5,Zm),t}getExtensionPoints(){return Array.from(this.a.values())}},Z5={ExtensionsRegistry:"ExtensionsRegistry"};ki.add(Z5.ExtensionsRegistry,new V3);var Y5=ki.as(Z5.ExtensionsRegistry);Xm.registerSchema(X5,Zm),Xm.registerSchema(a3,{properties:{extensionEnabledApiProposals:{description:d(12335,null),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(kd),markdownEnumDescriptions:Object.values(kd).map(e=>e.proposal)}}]}}}});var Zn;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.Assistant=2]="Assistant"})(Zn||(Zn={}));var uO=K("ILanguageModelsService"),K5={type:"object",properties:{vendor:{type:"string",description:d(4721,null)}}},q3=Y5.registerExtensionPoint({extensionPoint:"languageModels",jsonSchema:{description:d(4722,null),oneOf:[K5,{type:"array",items:K5}]},activationEventsGenerator:(e,t)=>{for(const i of e)t.push(`onLanguageModelChat:${i.vendor}`)}}),eE=class{constructor(t,i){this.e=t,this.f=i,this.a=new He,this.b=new Map,this.c=new Set,this.d=this.a.add(new C),this.onDidChangeLanguageModels=this.d.event,this.a.add(q3.setHandler(r=>{this.c.clear();for(const s of r){if(!pi(s.description,"chatProvider")){s.collector.error(d(4723,null));continue}for(const o of vr.wrap(s.value)){if(this.c.has(o.vendor)){s.collector.error(d(4724,null,o.vendor));continue}if(Kc(o.vendor)){s.collector.error(d(4725,null));continue}if(o.vendor.trim()!==o.vendor){s.collector.error(d(4726,null));continue}this.c.add(o.vendor)}}const n=[];for(const[s,o]of this.b)this.c.has(o.metadata.vendor)||(this.b.delete(s),n.push(s));n.length>0&&this.d.fire({removed:n})}))}dispose(){this.a.dispose(),this.b.clear()}getLanguageModelIds(){return Array.from(this.b.keys())}lookupLanguageModel(t){return this.b.get(t)?.metadata}async selectLanguageModels(t){if(t.vendor)await this.e.activateByEvent(`onLanguageModelChat:${t.vendor}}`);else{const r=Array.from(this.c).map(n=>this.e.activateByEvent(`onLanguageModelChat:${n}`));await Promise.all(r)}const i=[];for(const[r,n]of this.b)(t.vendor===void 0||n.metadata.vendor===t.vendor)&&(t.family===void 0||n.metadata.family===t.family)&&(t.version===void 0||n.metadata.version===t.version)&&(t.identifier===void 0||n.metadata.id===t.identifier)&&(!n.metadata.targetExtensions||n.metadata.targetExtensions.some(s=>dt.equals(s,t.extension)))&&i.push(r);return this.f.trace("[LM] selected language models",t,i),i}registerLanguageModelChat(t,i){if(this.f.trace("[LM] registering language model chat",t,i.metadata),!this.c.has(i.metadata.vendor))throw new Error(`Chat response provider uses UNKNOWN vendor ${i.metadata.vendor}.`);if(this.b.has(t))throw new Error(`Chat response provider with identifier ${t} is already registered.`);return this.b.set(t,i),this.d.fire({added:[{identifier:t,metadata:i.metadata}]}),Ce(()=>{this.b.delete(t)&&(this.d.fire({removed:[t]}),this.f.trace("[LM] UNregistered language model chat",t,i.metadata))})}async sendChatRequest(t,i,r,n,s){const o=this.b.get(t);if(!o)throw new Error(`Chat response provider with identifier ${t} is not registered.`);return o.sendChatRequest(r,i,n,s)}computeTokenLength(t,i,r){const n=this.b.get(t);if(!n)throw new Error(`Chat response provider with identifier ${t} is not registered.`);return n.provideTokenCount(i,r)}};eE=__decorate([__param(0,B3),__param(1,ut)],eE);var dO=new X("debugType",void 0,{type:"string",description:d(5715,null)}),fO=new X("debugConfigurationType",void 0,{type:"string",description:d(5716,null)}),pO=new X("debugState","inactive",{type:"string",description:d(5717,null)}),G3="debugUx",gO=new X(G3,"default",{type:"string",description:d(5718,null)}),mO=new X("hasDebugged",!1,{type:"boolean",description:d(5719,null)}),vO=new X("inDebugMode",!1,{type:"boolean",description:d(5720,null)}),wO=new X("inDebugRepl",!1,{type:"boolean",description:d(5721,null)}),bO=new X("breakpointWidgetVisible",!1,{type:"boolean",description:d(5722,null)}),yO=new X("inBreakpointWidget",!1,{type:"boolean",description:d(5723,null)}),EO=new X("breakpointsFocused",!0,{type:"boolean",description:d(5724,null)}),SO=new X("watchExpressionsFocused",!0,{type:"boolean",description:d(5725,null)}),xO=new X("watchExpressionsExist",!1,{type:"boolean",description:d(5726,null)}),kO=new X("variablesFocused",!0,{type:"boolean",description:d(5727,null)}),DO=new X("expressionSelected",!1,{type:"boolean",description:d(5728,null)}),$O=new X("breakpointInputFocused",!1,{type:"boolean",description:d(5729,null)}),IO=new X("callStackItemType",void 0,{type:"string",description:d(5730,null)}),AO=new X("callStackSessionIsAttach",!1,{type:"boolean",description:d(5731,null)}),PO=new X("callStackItemStopped",!1,{type:"boolean",description:d(5732,null)}),RO=new X("callStackSessionHasOneThread",!1,{type:"boolean",description:d(5733,null)}),TO=new X("watchItemType",void 0,{type:"string",description:d(5734,null)}),LO=new X("canViewMemory",void 0,{type:"boolean",description:d(5735,null)}),_O=new X("breakpointItemType",void 0,{type:"string",description:d(5736,null)}),CO=new X("breakpointItemBytes",void 0,{type:"boolean",description:d(5737,null)}),NO=new X("breakpointHasModes",!1,{type:"boolean",description:d(5738,null)}),OO=new X("breakpointSupportsCondition",!1,{type:"boolean",description:d(5739,null)}),FO=new X("loadedScriptsSupported",!1,{type:"boolean",description:d(5740,null)}),MO=new X("loadedScriptsItemType",void 0,{type:"string",description:d(5741,null)}),UO=new X("focusedSessionIsAttach",!1,{type:"boolean",description:d(5742,null)}),BO=new X("focusedSessionIsNoDebug",!1,{type:"boolean",description:d(5743,null)}),HO=new X("stepBackSupported",!1,{type:"boolean",description:d(5744,null)}),jO=new X("restartFrameSupported",!1,{type:"boolean",description:d(5745,null)}),WO=new X("stackFrameSupportsRestart",!1,{type:"boolean",description:d(5746,null)}),zO=new X("jumpToCursorSupported",!1,{type:"boolean",description:d(5747,null)}),VO=new X("stepIntoTargetsSupported",!1,{type:"boolean",description:d(5748,null)}),qO=new X("breakpointsExist",!1,{type:"boolean",description:d(5749,null)}),GO=new X("debuggersAvailable",!1,{type:"boolean",description:d(5750,null)}),QO=new X("debugExtensionAvailable",!0,{type:"boolean",description:d(5751,null)}),JO=new X("debugProtocolVariableMenuContext",void 0,{type:"string",description:d(5752,null)}),XO=new X("debugSetVariableSupported",!1,{type:"boolean",description:d(5753,null)}),ZO=new X("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:d(5754,null)}),YO=new X("debugSetExpressionSupported",!1,{type:"boolean",description:d(5755,null)}),KO=new X("breakWhenValueChangesSupported",!1,{type:"boolean",description:d(5756,null)}),e2=new X("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:d(5757,null)}),t2=new X("breakWhenValueIsReadSupported",!1,{type:"boolean",description:d(5758,null)}),i2=new X("terminateDebuggeeSupported",!1,{type:"boolean",description:d(5759,null)}),r2=new X("suspendDebuggeeSupported",!1,{type:"boolean",description:d(5760,null)}),n2=new X("variableEvaluateNamePresent",!1,{type:"boolean",description:d(5761,null)}),s2=new X("variableIsReadonly",!1,{type:"boolean",description:d(5762,null)}),o2=new X("variableValue",!1,{type:"string",description:d(5763,null)}),a2=new X("variableType",!1,{type:"string",description:d(5764,null)}),c2=new X("variableInterfaces",!1,{type:"array",description:d(5765,null)}),l2=new X("variableName",!1,{type:"string",description:d(5766,null)}),u2=new X("variableLanguage",!1,{type:"string",description:d(5767,null)}),h2=new X("variableExtensionId",!1,{type:"string",description:d(5768,null)}),d2=new X("exceptionWidgetVisible",!1,{type:"boolean",description:d(5769,null)}),f2=new X("multiSessionRepl",!1,{type:"boolean",description:d(5770,null)}),p2=new X("multiSessionDebug",!1,{type:"boolean",description:d(5771,null)}),g2=new X("disassembleRequestSupported",!1,{type:"boolean",description:d(5772,null)}),m2=new X("disassemblyViewFocus",!1,{type:"boolean",description:d(5773,null)}),v2=new X("languageSupportsDisassembleRequest",!1,{type:"boolean",description:d(5774,null)}),w2=new X("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:d(5775,null)}),b2={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:d(5777,null)},tE;(function(e){e[e.Inactive=0]="Inactive",e[e.Initializing=1]="Initializing",e[e.Stopped=2]="Stopped",e[e.Running=3]="Running"})(tE||(tE={}));var iE;(function(e){e[e.Valid=0]="Valid",e[e.Unreadable=1]="Unreadable",e[e.Error=2]="Error"})(iE||(iE={}));var rE;(function(e){e[e.Variable=0]="Variable",e[e.Address=1]="Address"})(rE||(rE={}));var Dd;(function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"})(Dd||(Dd={}));var nE;(function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"})(nE||(nE={}));var y2=K("debugService"),sE;(function(e){e[e.CONDITION=0]="CONDITION",e[e.HIT_COUNT=1]="HIT_COUNT",e[e.LOG_MESSAGE=2]="LOG_MESSAGE",e[e.TRIGGER_POINT=3]="TRIGGER_POINT"})(sE||(sE={}));var $d;(function(e){e[e.Command=0]="Command",e[e.Tree=1]="Tree"})($d||($d={}));var Ym;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(Ym||(Ym={}));var oE;(function(e){e.deserialize=t=>t,e.serialize=t=>t})(oE||(oE={}));var aE;(function(e){e.deserialize=t=>({id:t.id,name:t.name,iconPath:t.iconPath&&{light:E.revive(t.iconPath.light),dark:E.revive(t.iconPath.dark)},iconClass:t.iconClass,visualization:t.visualization}),e.serialize=t=>t})(aE||(aE={}));var Pl="**",Km="/",Id="[/\\\\]",Ad="[^/\\\\]",Q3=/\//g;function cE(e,t){switch(e){case 0:return"";case 1:return`${Ad}*?`;default:return`(?:${Id}|${Ad}+${Id}${t?`|${Id}${Ad}+`:""})*?`}}function e1(e,t){if(!e)return[];const i=[];let r=!1,n=!1,s="";for(const o of e){switch(o){case t:if(!r&&!n){i.push(s),s="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":n=!0;break;case"]":n=!1;break}s+=o}return s&&i.push(s),i}function lE(e){if(!e)return"";let t="";const i=e1(e,Km);if(i.every(r=>r===Pl))t=".*";else{let r=!1;i.forEach((n,s)=>{if(n===Pl){if(r)return;t+=cE(2,s===i.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of n){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let h;u==="-"?h=u:(u==="^"||u==="!")&&!l?h="^":u===Km?h="":h=vo(u),l+=h;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const f=`(?:${e1(a,",").map(g=>lE(g)).join("|")})`;t+=f,o=!1,a="";break}case"]":{t+="["+l+"]",c=!1,l="";break}case"?":t+=Ad;continue;case"*":t+=cE(1);continue;default:t+=vo(u)}}s<i.length-1&&(i[s+1]!==Pl||s+2<i.length)&&(t+=Id)}r=n===Pl})}return t}var J3=/^\*\*\/\*\.[\w\.-]+$/,X3=/^\*\*\/([\w\.-]+)\/?$/,Z3=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Y3=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,K3=/^\*\*((\/[\w\.-]+)+)\/?$/,eA=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,uE=new $g(1e4),hE=function(){return!1},Sn=function(){return null};function t1(e,t){if(!e)return Sn;let i;typeof e!="string"?i=e.pattern:i=e,i=i.trim();const r=`${i}_${!!t.trimForExclusions}`;let n=uE.get(r);if(n)return dE(n,e);let s;return J3.test(i)?n=tA(i.substr(4),i):(s=X3.exec(i1(i,t)))?n=iA(s[1],i):(t.trimForExclusions?Y3:Z3).test(i)?n=rA(i,t):(s=K3.exec(i1(i,t)))?n=fE(s[1].substr(1),i,!0):(s=eA.exec(i1(i,t)))?n=fE(s[1],i,!1):n=nA(i),uE.set(r,n),dE(n,e)}function dE(e,t){if(typeof t=="string")return e;const i=function(r,n){return Ah(r,t.base,!ks)?e(Yx(r.substr(t.base.length),Wr),n):null};return i.allBasenames=e.allBasenames,i.allPaths=e.allPaths,i.basenames=e.basenames,i.patterns=e.patterns,i}function i1(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function tA(e,t){return function(i,r){return typeof i=="string"&&i.endsWith(e)?t:null}}function iA(e,t){const i=`/${e}`,r=`\\${e}`,n=function(o,a){return typeof o!="string"?null:a?a===e?t:null:o===e||o.endsWith(i)||o.endsWith(r)?t:null},s=[e];return n.basenames=s,n.patterns=[t],n.allBasenames=s,n}function rA(e,t){const i=pE(e.slice(1,-1).split(",").map(a=>t1(a,t)).filter(a=>a!==Sn),e),r=i.length;if(!r)return Sn;if(r===1)return i[0];const n=function(a,c){for(let l=0,u=i.length;l<u;l++)if(i[l](a,c))return e;return null},s=i.find(a=>!!a.allBasenames);s&&(n.allBasenames=s.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(n.allPaths=o),n}function fE(e,t,i){const r=Wr===et.sep,n=r?e:e.replace(Q3,Wr),s=Wr+n,o=et.sep+e;let a;return i?a=function(c,l){return typeof c=="string"&&(c===n||c.endsWith(s)||!r&&(c===e||c.endsWith(o)))?t:null}:a=function(c,l){return typeof c=="string"&&(c===n||!r&&c===e)?t:null},a.allPaths=[(i?"*/":"./")+e],a}function nA(e){try{const t=new RegExp(`^${lE(e)}$`);return function(i){return t.lastIndex=0,typeof i=="string"&&t.test(i)?e:null}}catch{return Sn}}function Rl(e,t,i){return!e||typeof t!="string"?!1:Ba(e)(t,void 0,i)}function Ba(e,t={}){if(!e)return hE;if(typeof e=="string"||sA(e)){const i=t1(e,t);if(i===Sn)return hE;const r=function(n,s){return!!i(n,s)};return i.allBasenames&&(r.allBasenames=i.allBasenames),i.allPaths&&(r.allPaths=i.allPaths),r}return oA(e,t)}function sA(e){const t=e;return t?typeof t.base=="string"&&typeof t.pattern=="string":!1}function oA(e,t){const i=pE(Object.getOwnPropertyNames(e).map(a=>aA(a,e[a],t)).filter(a=>a!==Sn)),r=i.length;if(!r)return Sn;if(!i.some(a=>!!a.requiresSiblings)){if(r===1)return i[0];const a=function(u,h){let f;for(let g=0,m=i.length;g<m;g++){const b=i[g](u,h);if(typeof b=="string")return b;_s(b)&&(f||(f=[]),f.push(b))}return f?(async()=>{for(const g of f){const m=await g;if(typeof m=="string")return m}return null})():null},c=i.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=i.reduce((u,h)=>h.allPaths?u.concat(h.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const n=function(a,c,l){let u,h;for(let f=0,g=i.length;f<g;f++){const m=i[f];m.requiresSiblings&&l&&(c||(c=cr(a)),u||(u=c.substr(0,c.length-Bg(a).length)));const b=m(a,c,u,l);if(typeof b=="string")return b;_s(b)&&(h||(h=[]),h.push(b))}return h?(async()=>{for(const f of h){const g=await f;if(typeof g=="string")return g}return null})():null},s=i.find(a=>!!a.allBasenames);s&&(n.allBasenames=s.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(n.allPaths=o),n}function aA(e,t,i){if(t===!1)return Sn;const r=t1(e,i);if(r===Sn)return Sn;if(typeof t=="boolean")return r;if(t){const n=t.when;if(typeof n=="string"){const s=(o,a,c,l)=>{if(!l||!r(o,a))return null;const u=n.replace("$(basename)",()=>c),h=l(u);return _s(h)?h.then(f=>f?e:null):h?e:null};return s.requiresSiblings=!0,s}}return r}function pE(e,t){const i=e.filter(a=>!!a.basenames);if(i.length<2)return e;const r=i.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let n;if(t){n=[];for(let a=0,c=r.length;a<c;a++)n.push(t)}else n=i.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const s=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const h=a.charCodeAt(u-1);if(h===L.Slash||h===L.Backslash)break}c=a.substr(u)}const l=r.indexOf(c);return l!==-1?n[l]:null};s.basenames=r,s.patterns=n,s.allBasenames=r;const o=e.filter(a=>!a.basenames);return o.push(s),o}var cA=K("notebookDocumentService"),r1=["W","X","Y","Z","a","b","c","d","e","f"],lA=new RegExp(`^[${r1.join("")}]+`),gE=7;function mE(e){if(e.scheme!==de.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const i=parseInt(e.fragment.substring(0,t).replace(lA,""),gE),r=ex(e.fragment.substring(t+1)).toString();if(!isNaN(i))return{handle:i,notebook:e.with({scheme:r,fragment:null})}}function uA(e,t){const i=t.toString(gE),n=`${i.length<r1.length?r1[i.length-1]:"z"}${i}s${Sb(Qe.fromString(e.scheme),!0,!0)}`;return e.with({scheme:de.vscodeNotebookCell,fragment:n})}var hA=class{constructor(){this.a=new li}getNotebook(e){if(e.scheme===de.vscodeNotebookCell){const t=mE(e);if(t){const i=this.a.get(t.notebook);if(i)return i}}return this.a.get(e)}addNotebookDocument(e){this.a.set(e.uri,e)}removeNotebookDocument(e){this.a.delete(e.uri)}};vt(cA,hA,gt.Delayed);var Ha;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Ha||(Ha={}));var E2=["application/json","application/javascript","text/html","image/svg+xml",zn.latex,zn.markdown,"image/png","image/jpeg",zn.text],S2=[zn.latex,zn.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",zn.text],vE;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(vE||(vE={}));var Tl;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(Tl||(Tl={}));var wE;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(wE||(wE={}));var bE;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(bE||(bE={}));var yE;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(yE||(yE={}));var tn;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(tn||(tn={}));var EE;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(EE||(EE={}));var Ll;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(Ll||(Ll={}));var SE;(function(e){e.scheme=de.vscodeNotebookCell;function t(a,c){return uA(a,c)}e.generate=t;function i(a){return mE(a)}e.parse=i;function r(a,c){return a.with({scheme:de.vscodeNotebookCellOutput,fragment:`op${c??""},${a.scheme!==de.file?a.scheme:""}`})}e.generateCellOutputUri=r;function n(a){if(a.scheme!==de.vscodeNotebookCellOutput)return;const c=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(a.fragment);if(!c)return;const l=c[1]&&c[1]!==""?c[1]:void 0,u=c[2];return{outputId:l,notebook:a.with({scheme:u||de.file,fragment:null})}}e.parseCellOutputUri=n;function s(a,c,l){return e.generate(a,c).with({scheme:l})}e.generateCellPropertyUri=s;function o(a,c){if(a.scheme===c)return e.parse(a.with({scheme:e.scheme}))}e.parseCellPropertyUri=o})(SE||(SE={}));var x2=new X("notebookEditorCursorAtBoundary","none"),k2=new X("notebookEditorCursorAtLineBoundary","none"),xE;(function(e){e.default="default",e.option="option"})(xE||(xE={}));var kE;(function(e){e.Cells="cells",e.Text="text",e.None="none"})(kE||(kE={}));var Pd;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Pd||(Pd={}));var D2=class og{static{this.d="notebook/"}static create(t){return`${og.d}${t}`}static parse(t){if(t.startsWith(og.d))return t.substring(og.d.length)}};function DE(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}var dA=new TextDecoder;function fA(e){const t=[];let i=!1;for(const o of e)(t.length===0||i)&&(t.push(o),i=!0);let r=gA(t);const n=Qe.concat(t.map(o=>Qe.wrap(o))),s=yA(n);return r=r||s.byteLength!==n.byteLength,{data:s,didCompression:r}}var Rd="\x1B[A",n1=Rd.split("").map(e=>e.charCodeAt(0)),pA=10;function gA(e){let t=!1;return e.forEach((i,r)=>{if(r===0||i.length<Rd.length)return;const n=e[r-1],s=i.subarray(0,Rd.length);if(s[0]===n1[0]&&s[1]===n1[1]&&s[2]===n1[2]){const o=n.lastIndexOf(pA);if(o===-1)return;t=!0,e[r-1]=n.subarray(0,o),e[r]=i.subarray(Rd.length)}}),t}function mA(e){let t=e;do e=t,t=e.replace(/[^\n]\x08/gm,"");while(t.length<e.length);return e}function vA(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let i=e.match(/\r+(.*)$/m)[1];i=i+t.slice(i.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,i)}return e}var wA=8,bA=13;function yA(e){return!e.buffer.includes(wA)&&!e.buffer.includes(bA)?e:Qe.fromString(vA(mA(dA.decode(e.buffer))))}var EA=K("editorGroupsService"),$E;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})($E||($E={}));var IE;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"})(IE||(IE={}));var AE;(function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"})(AE||(AE={}));var PE;(function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"})(PE||(PE={}));var RE;(function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"})(RE||(RE={}));var TE;(function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(TE||(TE={}));var LE;(function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"})(LE||(LE={}));var $2=K("editorService"),SA=-1,xA=-2,I2=K("remoteAuthorityResolverService"),Td;(function(e){e[e.WebSocket=0]="WebSocket",e[e.Managed=1]="Managed"})(Td||(Td={}));var kA=class{constructor(e){this.id=e,this.type=Td.Managed}toString(){return`Managed(${this.id})`}},DA=class{constructor(e,t){this.host=e,this.port=t,this.type=Td.WebSocket}toString(){return`WebSocket(${this.host}:${this.port})`}},Yn;(function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"})(Yn||(Yn={}));function _E(e){const t=e.indexOf("+");return t===-1?e:e.substring(0,t)}var s1,_o,Kn,o1,Co,Hs,No,a1,c1,Ld,_l,l1,xn,kn,u1,Zi,h1;function be(e){return Object.assign(e,{apply:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const r=i.length===1?[]:i[1];return Reflect.construct(e,r,i[0].constructor)}},call:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const[r,...n]=i;return Reflect.construct(e,n,r.constructor)}}})}var d1;(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"})(d1||(d1={}));var CE;(function(e){e[e.TerminalCommand=0]="TerminalCommand",e[e.Opener=1]="Opener",e[e.Command=3]="Command"})(CE||(CE={}));var Ye=s1=class{static from(...t){let i=t;return new s1(function(){if(i){for(const r of i)r&&typeof r.dispose=="function"&&r.dispose();i=void 0}})}#e;constructor(t){this.#e=t}dispose(){typeof this.#e=="function"&&(this.#e(),this.#e=void 0)}};Ye=s1=__decorate([be],Ye);var Ve=_o=class{static Min(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let r=1;r<t.length;r++){const n=t[r];n.isBefore(i)&&(i=n)}return i}static Max(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let r=1;r<t.length;r++){const n=t[r];n.isAfter(i)&&(i=n)}return i}static isPosition(t){if(!t)return!1;if(t instanceof _o)return!0;const{line:i,character:r}=t;return typeof i=="number"&&typeof r=="number"}static of(t){if(t instanceof _o)return t;if(this.isPosition(t))return new _o(t.line,t.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this.c}get character(){return this.e}constructor(t,i){if(t<0)throw je("line must be non-negative");if(i<0)throw je("character must be non-negative");this.c=t,this.e=i}isBefore(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<t.e}isBeforeOrEqual(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<=t.e}isAfter(t){return!this.isBeforeOrEqual(t)}isAfterOrEqual(t){return!this.isBefore(t)}isEqual(t){return this.c===t.c&&this.e===t.e}compareTo(t){return this.c<t.c?-1:this.c>t.line?1:this.e<t.e?-1:this.e>t.e?1:0}translate(t,i=0){if(t===null||i===null)throw je();let r;return typeof t>"u"?r=0:typeof t=="number"?r=t:(r=typeof t.lineDelta=="number"?t.lineDelta:0,i=typeof t.characterDelta=="number"?t.characterDelta:0),r===0&&i===0?this:new _o(this.line+r,this.character+i)}with(t,i=this.character){if(t===null||i===null)throw je();let r;return typeof t>"u"?r=this.line:typeof t=="number"?r=t:(r=typeof t.line=="number"?t.line:this.line,i=typeof t.character=="number"?t.character:this.character),r===this.line&&i===this.character?this:new _o(r,i)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};Ve=_o=__decorate([be],Ve);var Be=Kn=class{static isRange(t){return t instanceof Kn?!0:t?Ve.isPosition(t.start)&&Ve.isPosition(t.end):!1}static of(t){if(t instanceof Kn)return t;if(this.isRange(t))return new Kn(t.start,t.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this.c}get end(){return this.e}constructor(t,i,r,n){let s,o;if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof n=="number"?(s=new Ve(t,i),o=new Ve(r,n)):Ve.isPosition(t)&&Ve.isPosition(i)&&(s=Ve.of(t),o=Ve.of(i)),!s||!o)throw new Error("Invalid arguments");s.isBefore(o)?(this.c=s,this.e=o):(this.c=o,this.e=s)}contains(t){return Kn.isRange(t)?this.contains(t.start)&&this.contains(t.end):Ve.isPosition(t)?!(Ve.of(t).isBefore(this.c)||this.e.isBefore(t)):!1}isEqual(t){return this.c.isEqual(t.c)&&this.e.isEqual(t.e)}intersection(t){const i=Ve.Max(t.start,this.c),r=Ve.Min(t.end,this.e);if(!i.isAfter(r))return new Kn(i,r)}union(t){if(this.contains(t))return this;if(t.contains(this))return t;const i=Ve.Min(t.start,this.c),r=Ve.Max(t.end,this.end);return new Kn(i,r)}get isEmpty(){return this.c.isEqual(this.e)}get isSingleLine(){return this.c.line===this.e.line}with(t,i=this.end){if(t===null||i===null)throw je();let r;return t?Ve.isPosition(t)?r=t:(r=t.start||this.start,i=t.end||this.end):r=this.start,r.isEqual(this.c)&&i.isEqual(this.end)?this:new Kn(r,i)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return NE(this)}};Be=Kn=__decorate([be],Be);var es=o1=class extends Be{static isSelection(t){return t instanceof o1?!0:t?Be.isRange(t)&&Ve.isPosition(t.anchor)&&Ve.isPosition(t.active)&&typeof t.isReversed=="boolean":!1}get anchor(){return this.f}get active(){return this.g}constructor(t,i,r,n){let s,o;if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof n=="number"?(s=new Ve(t,i),o=new Ve(r,n)):Ve.isPosition(t)&&Ve.isPosition(i)&&(s=Ve.of(t),o=Ve.of(i)),!s||!o)throw new Error("Invalid arguments");super(s,o),this.f=s,this.g=o}get isReversed(){return this.f===this.e}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return $A(this)}};es=o1=__decorate([be],es);function NE(e){return e.isEmpty?`[${e.start.line}:${e.start.character})`:`[${e.start.line}:${e.start.character} -> ${e.end.line}:${e.end.character})`}function $A(e){let t=NE(e);return e.isEmpty||(e.active.isEqual(e.start)?t=`|${t}`:t=`${t}|`),t}var OE=e=>{if(typeof e!="string"||e.length===0||!/^[0-9A-Za-z_\-]+$/.test(e))throw je("connectionToken")},IA=class{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,i){if(typeof e!="string"||e.length===0)throw je("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw je("port");typeof i<"u"&&OE(i),this.host=e,this.port=Math.round(t),this.connectionToken=i}},_d=class{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&OE(t)}},ja=class ag extends Error{static NotAvailable(t,i){return new ag(t,Yn.NotAvailable,i)}static TemporarilyNotAvailable(t){return new ag(t,Yn.TemporarilyNotAvailable)}constructor(t,i=Yn.Unknown,r){super(t),this._message=t,this._code=i,this._detail=r,Object.setPrototypeOf(this,ag.prototype)}},rn;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(rn||(rn={}));var Wa;(function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"})(Wa||(Wa={}));var js=Co=class{static isTextEdit(t){return t instanceof Co?!0:t?Be.isRange(t)&&typeof t.newText=="string":!1}static replace(t,i){return new Co(t,i)}static insert(t,i){return Co.replace(new Be(t,t),i)}static delete(t){return Co.replace(t,"")}static setEndOfLine(t){const i=new Co(new Be(new Ve(0,0),new Ve(0,0)),"");return i.newEol=t,i}get range(){return this.c}set range(t){if(t&&!Be.isRange(t))throw je("range");this.c=t}get newText(){return this.e||""}set newText(t){if(t&&typeof t!="string")throw je("newText");this.e=t}get newEol(){return this.f}set newEol(t){if(t&&typeof t!="number")throw je("newEol");this.f=t}constructor(t,i){this.c=t,this.e=i}toJSON(){return{range:this.range,newText:this.newText,newEol:this.f}}};js=Co=__decorate([be],js);var Cd=Hs=class{static isNotebookCellEdit(t){return t instanceof Hs?!0:t?is.isNotebookRange(t)&&Array.isArray(t.newCells):!1}static replaceCells(t,i){return new Hs(t,i)}static insertCells(t,i){return new Hs(new is(t,t),i)}static deleteCells(t){return new Hs(t,[])}static updateCellMetadata(t,i){const r=new Hs(new is(t,t),[]);return r.newCellMetadata=i,r}static updateNotebookMetadata(t){const i=new Hs(new is(0,0),[]);return i.newNotebookMetadata=t,i}constructor(t,i){this.range=t,this.newCells=i}};Cd=Hs=__decorate([be],Cd);var f1=class cg{static isSnippetTextEdit(t){return t instanceof cg?!0:t?Be.isRange(t.range)&&Fo.isSnippetString(t.snippet):!1}static replace(t,i){return new cg(t,i)}static insert(t,i){return cg.replace(new Be(t,t),i)}constructor(t,i){this.range=t,this.snippet=i}},Vt;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"})(Vt||(Vt={}));var Oo=class{constructor(){this.c=[]}_allEntries(){return this.c}renameFile(t,i,r,n){this.c.push({_type:Vt.File,from:t,to:i,options:r,metadata:n})}createFile(t,i,r){this.c.push({_type:Vt.File,from:void 0,to:t,options:i,metadata:r})}deleteFile(t,i,r){this.c.push({_type:Vt.File,from:t,to:void 0,options:i,metadata:r})}e(t,i,r){this.c.push({_type:Vt.Cell,metadata:r,uri:t,edit:{editType:Ll.DocumentMetadata,metadata:i},notebookMetadata:i})}f(t,i,r,n){const s=i.start,o=i.end;(s!==o||r.length>0)&&this.c.push({_type:Vt.CellReplace,uri:t,index:s,count:o-s,cells:r,metadata:n})}g(t,i,r,n){this.c.push({_type:Vt.Cell,metadata:n,uri:t,edit:{editType:Ll.Metadata,index:i,metadata:r}})}replace(t,i,r,n){this.c.push({_type:Vt.Text,uri:t,edit:new js(i,r),metadata:n})}insert(t,i,r,n){this.replace(t,new Be(i,i),r,n)}delete(t,i,r){this.replace(t,i,"",r)}has(t){return this.c.some(i=>i._type===Vt.Text&&i.uri.toString()===t.toString())}set(t,i){if(i)for(const r of i){if(!r)continue;let n,s;Array.isArray(r)?(n=r[0],s=r[1]):n=r,Cd.isNotebookCellEdit(n)?n.newCellMetadata?this.g(t,n.range.start,n.newCellMetadata,s):n.newNotebookMetadata?this.e(t,n.newNotebookMetadata,s):this.f(t,n.range,n.newCells,s):f1.isSnippetTextEdit(n)?this.c.push({_type:Vt.Snippet,uri:t,range:n.range,edit:n.snippet,metadata:s}):this.c.push({_type:Vt.Text,uri:t,edit:n,metadata:s})}else{for(let r=0;r<this.c.length;r++){const n=this.c[r];switch(n._type){case Vt.Text:case Vt.Snippet:case Vt.Cell:case Vt.CellReplace:n.uri.toString()===t.toString()&&(this.c[r]=void 0);break}}RS(this.c)}}get(t){const i=[];for(const r of this.c)r._type===Vt.Text&&r.uri.toString()===t.toString()&&i.push(r.edit);return i}entries(){const t=new li;for(const i of this.c)if(i._type===Vt.Text){let r=t.get(i.uri);r||(r=[i.uri,[]],t.set(i.uri,r)),r[1].push(i.edit)}return[...t.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};Oo=__decorate([be],Oo);var Fo=No=class{static isSnippetString(t){return t instanceof No?!0:t?typeof t.value=="string":!1}static c(t){return t.replace(/\$|}|\\/g,"\\$&")}constructor(t){this.e=1,this.value=t||""}appendText(t){return this.value+=No.c(t),this}appendTabstop(t=this.e++){return this.value+="$",this.value+=t,this}appendPlaceholder(t,i=this.e++){if(typeof t=="function"){const r=new No;r.e=this.e,t(r),this.e=r.e,t=r.value}else t=No.c(t);return this.value+="${",this.value+=i,this.value+=":",this.value+=t,this.value+="}",this}appendChoice(t,i=this.e++){const r=t.map(n=>n.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=i,this.value+="|",this.value+=r,this.value+="|}",this}appendVariable(t,i){if(typeof i=="function"){const r=new No;r.e=this.e,i(r),this.e=r.e,i=r.value}else typeof i=="string"&&(i=i.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=t,i&&(this.value+=":",this.value+=i),this.value+="}",this}};Fo=No=__decorate([be],Fo);var Mo;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(Mo||(Mo={}));var Ri;(function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"})(Ri||(Ri={}));var kr=a1=class{static isLocation(t){return t instanceof a1?!0:t?Be.isRange(t.range)&&E.isUri(t.uri):!1}constructor(t,i){if(this.uri=t,i)if(Be.isRange(i))this.range=Be.of(i);else if(Ve.isPosition(i))this.range=new Be(i,i);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};kr=a1=__decorate([be],kr);var Cl=class{static is(t){return t?typeof t.message=="string"&&t.location&&Be.isRange(t.location.range)&&E.isUri(t.location.uri):!1}constructor(t,i){this.location=t,this.message=i}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.location.range.isEqual(i.location.range)&&t.location.uri.toString()===i.location.uri.toString()}};Cl=__decorate([be],Cl);var Nd=class{constructor(t,i,r=Ri.Error){if(!Be.isRange(t))throw new TypeError("range must be set");if(!i)throw new TypeError("message must be set");this.range=t,this.message=i,this.severity=r}toJSON(){return{severity:Ri[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.severity===i.severity&&t.code===i.code&&t.severity===i.severity&&t.source===i.source&&t.range.isEqual(i.range)&&Nn(t.tags,i.tags)&&Nn(t.relatedInformation,i.relatedInformation,Cl.isEqual)}};Nd=__decorate([be],Nd);var Od=class{constructor(t,i){if(!t)throw new Error("Illegal argument, contents must be defined");Array.isArray(t)?this.contents=t:this.contents=[t],this.range=i}};Od=__decorate([be],Od);var Fd=class extends Od{constructor(t,i,r,n){super(t,i),this.canIncreaseVerbosity=r,this.canDecreaseVerbosity=n}};Fd=__decorate([be],Fd);var p1;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(p1||(p1={}));var Nl;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(Nl||(Nl={}));var Md=class{constructor(t,i=Nl.Text){this.range=t,this.kind=i}toJSON(){return{range:this.range,kind:Nl[this.kind]}}};Md=__decorate([be],Md);var Ud=class{constructor(t,i){this.uri=t,this.highlights=i}toJSON(){return{uri:this.uri,highlights:this.highlights.map(t=>t.toJSON())}}};Ud=__decorate([be],Ud);var wt;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(wt||(wt={}));var Ol;(function(e){e[e.Deprecated=1]="Deprecated"})(Ol||(Ol={}));var Fl=c1=class{static validate(t){if(!t.name)throw new Error("name must not be falsy")}constructor(t,i,r,n,s){this.name=t,this.kind=i,this.containerName=s,typeof r=="string"&&(this.containerName=r),n instanceof kr?this.location=n:r instanceof Be&&(this.location=new kr(n,r)),c1.validate(this)}toJSON(){return{name:this.name,kind:wt[this.kind],location:this.location,containerName:this.containerName}}};Fl=c1=__decorate([be],Fl);var Ml=Ld=class{static validate(t){if(!t.name)throw new Error("name must not be falsy");if(!t.range.contains(t.selectionRange))throw new Error("selectionRange must be contained in fullRange");t.children?.forEach(Ld.validate)}constructor(t,i,r,n,s){this.name=t,this.detail=i,this.kind=r,this.range=n,this.selectionRange=s,this.children=[],Ld.validate(this)}};Ml=Ld=__decorate([be],Ml);var Ul;(function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"})(Ul||(Ul={}));var Bd=class{constructor(t,i){this.title=t,this.kind=i}};Bd=__decorate([be],Bd);var Lt=class{static{_l=this}static{this.c="."}constructor(t){this.value=t}append(t){return new _l(this.value?this.value+_l.c+t:t)}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+_l.c)}};Lt=_l=__decorate([be],Lt),Lt.Empty=new Lt(""),Lt.QuickFix=Lt.Empty.append("quickfix"),Lt.Refactor=Lt.Empty.append("refactor"),Lt.RefactorExtract=Lt.Refactor.append("extract"),Lt.RefactorInline=Lt.Refactor.append("inline"),Lt.RefactorMove=Lt.Refactor.append("move"),Lt.RefactorRewrite=Lt.Refactor.append("rewrite"),Lt.Source=Lt.Empty.append("source"),Lt.SourceOrganizeImports=Lt.Source.append("organizeImports"),Lt.SourceFixAll=Lt.Source.append("fixAll"),Lt.Notebook=Lt.Empty.append("notebook");var Bl=class{constructor(t,i){if(this.range=t,this.parent=i,i&&!i.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};Bl=__decorate([be],Bl);var g1=class{constructor(e,t,i,r,n,s){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=n,this.selectionRange=s}},FE=class{constructor(e,t){this.fromRanges=t,this.from=e}},ME=class{constructor(e,t){this.fromRanges=t,this.to=e}},za;(function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(za||(za={}));var Hd=class{constructor(t,i){this.range=t,this.command=i}get isResolved(){return!!this.command}};Hd=__decorate([be],Hd);var dr=l1=class{#e;static isMarkdownString(t){return t instanceof l1?!0:t&&t.appendCodeblock&&t.appendMarkdown&&t.appendText&&t.value!==void 0}constructor(t,i=!1){this.#e=new k4(t,{supportThemeIcons:i})}get value(){return this.#e.value}set value(t){this.#e.value=t}get isTrusted(){return this.#e.isTrusted}set isTrusted(t){this.#e.isTrusted=t}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(t){this.#e.supportThemeIcons=t}get supportHtml(){return this.#e.supportHtml}set supportHtml(t){this.#e.supportHtml=t}get baseUri(){return this.#e.baseUri}set baseUri(t){this.#e.baseUri=t}appendText(t){return this.#e.appendText(t),this}appendMarkdown(t){return this.#e.appendMarkdown(t),this}appendCodeblock(t,i){return this.#e.appendCodeblock(i??"",t),this}};dr=l1=__decorate([be],dr);var m1=class{constructor(t,i){this.label=t,this.documentation=i}};m1=__decorate([be],m1);var v1=class{constructor(t,i){this.label=t,this.documentation=i,this.parameters=[]}};v1=__decorate([be],v1);var w1=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};w1=__decorate([be],w1);var b1;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(b1||(b1={}));var y1;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(y1||(y1={}));var jd=class{constructor(t){this.value=t}};jd=__decorate([be],jd);var Wd=class{constructor(t,i,r){this.position=t,this.label=i,this.kind=r}};Wd=__decorate([be],Wd);var Va;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Va||(Va={}));var De;(function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"})(De||(De={}));var Hl;(function(e){e[e.Deprecated=1]="Deprecated"})(Hl||(Hl={}));var zd=class{constructor(t,i){this.label=t,this.kind=i}toJSON(){return{label:this.label,kind:this.kind&&De[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};zd=__decorate([be],zd);var qa=class{constructor(t=[],i=!1){this.items=t,this.isIncomplete=i}};qa=__decorate([be],qa);var E1=class{constructor(t,i,r){this.insertText=t,this.range=i,this.command=r}};E1=__decorate([be],E1);var S1=class{constructor(t){this.commands=void 0,this.suppressSuggestions=void 0,this.items=t}};S1=__decorate([be],S1);var Uo;(function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"})(Uo||(Uo={}));var jl;(function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"})(jl||(jl={}));var Ws;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Ws||(Ws={}));function AA(e,t){return`${dt.toKey(e)}.${t}`}var nn;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"})(nn||(nn={}));var Ga;(function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"})(Ga||(Ga={}));var Vd;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Vd||(Vd={}));var Qa;(function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"})(Qa||(Qa={}));var Wl;(function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"})(Wl||(Wl={}));var Bo;(function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"})(Bo||(Bo={})),function(e){function t(i){switch(i){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":return e.Command}}e.fromValue=t}(Qa||(Qa={}));var Ja;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(Ja||(Ja={})),function(e){function t(i){switch(i){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}e.toString=t}(Ja||(Ja={}));var qd=class{constructor(t,i){if(i&&!E.isUri(i))throw je("target");if(!Be.isRange(t)||t.isEmpty)throw je("range");this.range=t,this.target=i}};qd=__decorate([be],qd);var Xa=class{constructor(t,i,r,n){this.red=t,this.green=i,this.blue=r,this.alpha=n}};Xa=__decorate([be],Xa);var Gd=class{constructor(t,i){if(i&&!(i instanceof Xa))throw je("color");if(!Be.isRange(t)||t.isEmpty)throw je("range");this.range=t,this.color=i}};Gd=__decorate([be],Gd);var Qd=class{constructor(t){if(!t||typeof t!="string")throw je("label");this.label=t}};Qd=__decorate([be],Qd);var UE;(function(e){e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e[e.HSL=2]="HSL"})(UE||(UE={}));var x1;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(x1||(x1={}));var k1;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(k1||(k1={}));var Jd;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(Jd||(Jd={}));var PA=class{constructor(e,t,i){if(this.startIndex=e,this.length=t,this.tooltip=i,typeof e!="number"||e<0)throw je("startIndex");if(typeof t!="number"||t<1)throw je("length");if(i!==void 0&&typeof i!="string")throw je("tooltip")}},RA=class{constructor(e){this.uri=e}},TA=class{constructor(e){this.terminalCommand=e}},D1;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(D1||(D1={}));var LA=class{constructor(e){if(this.options=e,typeof e!="object")throw je("options")}},$1;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})($1||($1={}));var I1;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(I1||(I1={}));var zl=class{static{xn=this}static{this.Clean=new xn("clean","Clean")}static{this.Build=new xn("build","Build")}static{this.Rebuild=new xn("rebuild","Rebuild")}static{this.Test=new xn("test","Test")}static from(t){switch(t){case"clean":return xn.Clean;case"build":return xn.Build;case"rebuild":return xn.Rebuild;case"test":return xn.Test;default:return}}constructor(t,i){if(this.label=i,typeof t!="string"||typeof i!="string")throw je("name");this.c=t}get id(){return this.c}};zl=xn=__decorate([be],zl);function BE(e){let t="";for(let i=0;i<e.length;i++)t+=e[i].replace(/,/g,",,")+",";return t}var Za=class{constructor(t,i,r){if(typeof t!="string")throw je("process");this.e=[],this.c=t,i!==void 0&&(Array.isArray(i)?(this.e=i,this.f=r):this.f=i)}get process(){return this.c}set process(t){if(typeof t!="string")throw je("process");this.c=t}get args(){return this.e}set args(t){Array.isArray(t)||(t=[]),this.e=t}get options(){return this.f}set options(t){this.f=t}computeId(){const t=[];if(t.push("process"),this.c!==void 0&&t.push(this.c),this.e&&this.e.length>0)for(const i of this.e)t.push(i);return BE(t)}};Za=__decorate([be],Za);var Ho=class{constructor(t,i,r){if(this.f=[],Array.isArray(i)){if(!t)throw je("command can't be undefined or null");if(typeof t!="string"&&typeof t.value!="string")throw je("command");this.e=t,this.f=i,this.g=r}else{if(typeof t!="string")throw je("commandLine");this.c=t,this.g=i}}get commandLine(){return this.c}set commandLine(t){if(typeof t!="string")throw je("commandLine");this.c=t}get command(){return this.e?this.e:""}set command(t){if(typeof t!="string"&&typeof t.value!="string")throw je("command");this.e=t}get args(){return this.f}set args(t){this.f=t||[]}get options(){return this.g}set options(t){this.g=t}computeId(){const t=[];if(t.push("shell"),this.c!==void 0&&t.push(this.c),this.e!==void 0&&t.push(typeof this.e=="string"?this.e:this.e.value),this.f&&this.f.length>0)for(const i of this.f)t.push(typeof i=="string"?i:i.value);return BE(t)}};Ho=__decorate([be],Ho);var A1;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(A1||(A1={}));var zs;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"})(zs||(zs={}));var P1=class{constructor(e){this.c=e}computeId(){return"customExecution"+Xr()}set callback(e){this.c=e}get callback(){return this.c}},Xd=class{static{kn=this}static{this.c="customExecution"}static{this.e="process"}static{this.f="shell"}static{this.g="$empty"}constructor(t,i,r,n,s,o){this.k=!1,this.l=this.definition=t;let a;typeof i=="string"?(this.o=this.name=i,this.w=this.source=r,this.execution=n,a=s,this.k=!0):i===zs.Global||i===zs.Workspace?(this.target=i,this.o=this.name=r,this.w=this.source=n,this.execution=s,a=o):(this.target=i,this.o=this.name=r,this.w=this.source=n,this.execution=s,a=o),typeof a=="string"?(this.r=[a],this.t=!0):Array.isArray(a)?(this.r=a,this.t=!0):(this.r=[],this.t=!1),this.u=!1,this.y=Object.create(null),this.z=Object.create(null)}get _id(){return this.j}set _id(t){this.j=t}get _deprecated(){return this.k}B(){this.j!==void 0&&(this.j=void 0,this.m=void 0,this.C())}C(){this.q instanceof Za?this.l={type:kn.e,id:this.q.computeId()}:this.q instanceof Ho?this.l={type:kn.f,id:this.q.computeId()}:this.q instanceof P1?this.l={type:kn.c,id:this.q.computeId()}:this.l={type:kn.g,id:Xr()}}get definition(){return this.l}set definition(t){if(t==null)throw je("Kind can't be undefined or null");this.B(),this.l=t}get scope(){return this.m}set target(t){this.B(),this.m=t}get name(){return this.o}set name(t){if(typeof t!="string")throw je("name");this.B(),this.o=t}get execution(){return this.q}set execution(t){t===null&&(t=void 0),this.B(),this.q=t;const i=this.l.type;(kn.g===i||kn.e===i||kn.f===i||kn.c===i)&&this.C()}get problemMatchers(){return this.r}set problemMatchers(t){if(Array.isArray(t))this.B(),this.r=t,this.t=!0;else{this.B(),this.r=[],this.t=!1;return}}get hasDefinedMatchers(){return this.t}get isBackground(){return this.u}set isBackground(t){t!==!0&&t!==!1&&(t=!1),this.B(),this.u=t}get source(){return this.w}set source(t){if(typeof t!="string"||t.length===0)throw je("source must be a string of length > 0");this.B(),this.w=t}get group(){return this.x}set group(t){t===null&&(t=void 0),this.B(),this.x=t}get detail(){return this.A}set detail(t){t===null&&(t=void 0),this.A=t}get presentationOptions(){return this.y}set presentationOptions(t){t==null&&(t=Object.create(null)),this.B(),this.y=t}get runOptions(){return this.z}set runOptions(t){t==null&&(t=Object.create(null)),this.B(),this.z=t}};Xd=kn=__decorate([be],Xd);var jo;(function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"})(jo||(jo={}));var R1;(function(e){function t(i){const r=i;return Rs(r.value)?r.tooltip&&!Xe(r.tooltip)?(console.log("INVALID view badge, invalid tooltip",r.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",r.value),!1)}e.isViewBadge=t})(R1||(R1={}));var Zd=u1=class{static isTreeItem(t,i){const r=t;if(r.checkboxState!==void 0){const n=Rs(r.checkboxState)?r.checkboxState:Qt(r.checkboxState)&&Rs(r.checkboxState.state)?r.checkboxState.state:void 0,s=!Rs(r.checkboxState)&&Qt(r.checkboxState)?r.checkboxState.tooltip:void 0;if(n===void 0||n!==Dn.Checked&&n!==Dn.Unchecked||s!==void 0&&!Xe(s))return console.log("INVALID tree item, invalid checkboxState",r.checkboxState),!1}if(t instanceof u1)return!0;if(r.label!==void 0&&!Xe(r.label)&&!r.label?.label)return console.log("INVALID tree item, invalid label",r.label),!1;if(r.id!==void 0&&!Xe(r.id))return console.log("INVALID tree item, invalid id",r.id),!1;if(r.iconPath!==void 0&&!Xe(r.iconPath)&&!E.isUri(r.iconPath)&&(!r.iconPath||!Xe(r.iconPath.id))){const n=r.iconPath;if(!n||!Xe(n.light)&&!E.isUri(n.light)&&!Xe(n.dark)&&!E.isUri(n.dark))return console.log("INVALID tree item, invalid iconPath",r.iconPath),!1}return r.description!==void 0&&!Xe(r.description)&&typeof r.description!="boolean"?(console.log("INVALID tree item, invalid description",r.description),!1):r.resourceUri!==void 0&&!E.isUri(r.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",r.resourceUri),!1):r.tooltip!==void 0&&!Xe(r.tooltip)&&!(r.tooltip instanceof dr)?(console.log("INVALID tree item, invalid tooltip",r.tooltip),!1):r.command!==void 0&&!r.command.command?(console.log("INVALID tree item, invalid command",r.command),!1):r.collapsibleState!==void 0&&r.collapsibleState<Wo.None&&r.collapsibleState>Wo.Expanded?(console.log("INVALID tree item, invalid collapsibleState",r.collapsibleState),!1):r.contextValue!==void 0&&!Xe(r.contextValue)?(console.log("INVALID tree item, invalid contextValue",r.contextValue),!1):r.accessibilityInformation!==void 0&&!r.accessibilityInformation?.label?(console.log("INVALID tree item, invalid accessibilityInformation",r.accessibilityInformation),!1):!0}constructor(t,i=Wo.None){this.collapsibleState=i,E.isUri(t)?this.resourceUri=t:this.label=t}};Zd=u1=__decorate([be],Zd);var Wo;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(Wo||(Wo={}));var Dn;(function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"})(Dn||(Dn={}));var Yd=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(t){this.value=t}};Yd=__decorate([be],Yd);var Kd=class extends Yd{},_A=class extends Kd{#e;constructor(e){super(""),this.#e=e}asFile(){return this.#e}},CA=class{constructor(e,t,i,r){this.name=e,this.uri=t,this._itemId=i,this.c=r}data(){return this.c()}},Vl=class{#e=new Map;constructor(t){for(const[i,r]of t??[]){const n=this.#e.get(this.#t(i));n?n.push(r):this.#e.set(this.#t(i),[r])}}get(t){return this.#e.get(this.#t(t))?.[0]}set(t,i){this.#e.set(this.#t(t),[i])}forEach(t,i){for(const[r,n]of this.#e)for(const s of n)t.call(i,s,r,this)}*[Symbol.iterator](){for(const[t,i]of this.#e)for(const r of i)yield[t,r]}#t(t){return t.toLowerCase()}};Vl=__decorate([be],Vl);var T1=class{constructor(t,i,r){this.insertText=t,this.title=i,this.kind=r}};T1=__decorate([be],T1);var L1;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(L1||(L1={}));var ef=class lg{static{this.c="."}constructor(t){this.value=t}append(...t){return new lg((this.value?[this.value,...t]:t).join(lg.c))}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+lg.c)}};ef.Empty=new ef("");var NA=class{constructor(e,t,i){this.title=t,this.insertText=e,this.kind=i}},Bi=class{constructor(t,i){this.id=t,this.color=i}static isThemeIcon(t){return typeof t.id!="string"?(console.log("INVALID ThemeIcon, invalid id",t.id),!1):!0}};Bi=__decorate([be],Bi),Bi.File=new Bi("file"),Bi.Folder=new Bi("folder");var ql=class{constructor(t){this.id=t}};ql=__decorate([be],ql);var Ya;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"})(Ya||(Ya={}));var Ka=class{get base(){return this.c}set base(t){this.c=t,this.e=E.file(t)}get baseUri(){return this.e}set baseUri(t){this.e=t,this.c=t.fsPath}constructor(t,i){if(typeof t!="string"&&(!t||!E.isUri(t)&&!E.isUri(t.uri)))throw je("base");if(typeof i!="string")throw je("pattern");typeof t=="string"?this.baseUri=E.file(t):E.isUri(t)?this.baseUri=t:this.baseUri=t.uri,this.pattern=i}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};Ka=__decorate([be],Ka);var HE=new WeakMap;function OA(e,t){HE.set(e,t)}var ec=class{constructor(t,i,r,n,s){this.enabled=typeof t=="boolean"?t:!0,typeof i=="string"&&(this.condition=i),typeof r=="string"&&(this.hitCondition=r),typeof n=="string"&&(this.logMessage=n),typeof s=="string"&&(this.mode=s)}get id(){return this.c||(this.c=HE.get(this)??Xr()),this.c}};ec=__decorate([be],ec);var zo=class extends ec{constructor(t,i,r,n,s,o){if(super(i,r,n,s,o),t===null)throw je("location");this.location=t}};zo=__decorate([be],zo);var Vo=class extends ec{constructor(t,i,r,n,s,o){super(i,r,n,s,o),this.functionName=t}};Vo=__decorate([be],Vo);var tf=class extends ec{constructor(t,i,r,n,s,o,a,c){if(super(n,s,o,a,c),!i)throw je("dataId");this.label=t,this.dataId=i,this.canPersist=r}};tf=__decorate([be],tf);var rf=class{constructor(t,i,r){this.command=t,this.args=i||[],this.options=r}};rf=__decorate([be],rf);var Gl=class{constructor(t,i){this.port=t,this.host=i}};Gl=__decorate([be],Gl);var nf=class{constructor(t){this.path=t}};nf=__decorate([be],nf);var sf=class{constructor(t){this.implementation=t}};sf=__decorate([be],sf);var jE=class{constructor(e,t,i){this.session=e,this.threadId=t,this.frameId=i}},WE=class{constructor(e,t){this.session=e,this.threadId=t}},of=class{constructor(t,i){this.range=t,this.expression=i}};of=__decorate([be],of);var Ql;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Ql||(Ql={}));var af=class{constructor(t,i){this.range=t,this.text=i}};af=__decorate([be],af);var cf=class{constructor(t,i,r=!0){this.range=t,this.variableName=i,this.caseSensitiveLookup=r}};cf=__decorate([be],cf);var lf=class{constructor(t,i){this.range=t,this.expression=i}};lf=__decorate([be],lf);var _1=class{constructor(t,i){this.frameId=t,this.stoppedLocation=i}};_1=__decorate([be],_1);var C1;(function(e){e[e.AIGenerated=1]="AIGenerated"})(C1||(C1={}));var Jl;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Jl||(Jl={}));var FA=class{constructor(e,t){this.newSymbolName=e,this.tags=t}},tc;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(tc||(tc={}));var ui=Zi=class extends Error{static FileExists(t){return new Zi(t,Ne.FileExists,Zi.FileExists)}static FileNotFound(t){return new Zi(t,Ne.FileNotFound,Zi.FileNotFound)}static FileNotADirectory(t){return new Zi(t,Ne.FileNotADirectory,Zi.FileNotADirectory)}static FileIsADirectory(t){return new Zi(t,Ne.FileIsADirectory,Zi.FileIsADirectory)}static NoPermissions(t){return new Zi(t,Ne.NoPermissions,Zi.NoPermissions)}static Unavailable(t){return new Zi(t,Ne.Unavailable,Zi.Unavailable)}constructor(t,i=Ne.Unknown,r){super(E.isUri(t)?t.toString(!0):t),this.code=r?.name??"Unknown",n4(this,i),Object.setPrototypeOf(this,Zi.prototype),typeof Error.captureStackTrace=="function"&&typeof r=="function"&&Error.captureStackTrace(this,r)}};ui=Zi=__decorate([be],ui);var N1=class{constructor(t,i,r){this.start=t,this.end=i,this.kind=r}};N1=__decorate([be],N1);var ts;(function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"})(ts||(ts={}));var Xl;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(Xl||(Xl={}));var O1;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(O1||(O1={}));var F1;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(F1||(F1={}));var Zl;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Zl||(Zl={}));var Yl;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Yl||(Yl={}));var Kl;(function(e){e[e.Reply=1]="Reply",e[e.Comment=2]="Comment"})(Kl||(Kl={}));var M1=class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}};function MA(e){return typeof e>"u"||pk(e)}var UA=class W8{constructor(t){if(this.c=0,this.e=0,this.f=!0,this.g=[],this.j=0,this.k=new Map,this.l=new Map,this.m=!1,t){this.m=!0;for(let i=0,r=t.tokenTypes.length;i<r;i++)this.k.set(t.tokenTypes[i],i);for(let i=0,r=t.tokenModifiers.length;i<r;i++)this.l.set(t.tokenModifiers[i],i)}}push(t,i,r,n,s){if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof n=="number"&&(typeof s=="number"||typeof s>"u"))return typeof s>"u"&&(s=0),this.q(t,i,r,n,s);if(Be.isRange(t)&&typeof i=="string"&&MA(r))return this.o(t,i,r);throw je()}o(t,i,r){if(!this.m)throw new Error("Legend must be provided in constructor");if(t.start.line!==t.end.line)throw new Error("`range` cannot span multiple lines");if(!this.k.has(i))throw new Error("`tokenType` is not in the provided legend");const n=t.start.line,s=t.start.character,o=t.end.character-t.start.character,a=this.k.get(i);let c=0;if(r)for(const l of r){if(!this.l.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this.l.get(l);c|=1<<u>>>0}this.q(n,s,o,a,c)}q(t,i,r,n,s){if(this.f&&(t<this.c||t===this.c&&i<this.e)){this.f=!1;const c=this.g.length/5|0;let l=0,u=0;for(let h=0;h<c;h++){let f=this.g[5*h],g=this.g[5*h+1];f===0?(f=l,g+=u):f+=l,this.g[5*h]=f,this.g[5*h+1]=g,l=f,u=g}}let o=t,a=i;this.f&&this.j>0&&(o-=this.c,o===0&&(a-=this.e)),this.g[this.j++]=o,this.g[this.j++]=a,this.g[this.j++]=r,this.g[this.j++]=n,this.g[this.j++]=s,this.c=t,this.e=i}static r(t){const i=[],r=t.length/5|0;for(let a=0;a<r;a++)i[a]=a;i.sort((a,c)=>{const l=t[5*a],u=t[5*c];if(l===u){const h=t[5*a+1],f=t[5*c+1];return h-f}return l-u});const n=new Uint32Array(t.length);let s=0,o=0;for(let a=0;a<r;a++){const c=5*i[a],l=t[c+0],u=t[c+1],h=t[c+2],f=t[c+3],g=t[c+4],m=l-s,b=m===0?u-o:u,k=5*a;n[k+0]=m,n[k+1]=b,n[k+2]=h,n[k+3]=f,n[k+4]=g,s=l,o=u}return n}build(t){return this.f?new ic(new Uint32Array(this.g),t):new ic(W8.r(this.g),t)}},ic=class{constructor(e,t){this.resultId=t,this.data=e}},zE=class{constructor(e,t,i){this.start=e,this.deleteCount=t,this.data=i}},uf=class{constructor(e,t){this.resultId=t,this.edits=e}},hf;(function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"})(hf||(hf={}));var BA=class{constructor(e){this.name=e}},U1;(function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"})(U1||(U1={}));var eu=class{static{this.Back={iconPath:new Bi("arrow-left")}}constructor(){}};eu=__decorate([be],eu);var tu;(function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"})(tu||(tu={}));var rc;(function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(rc||(rc={}));var qo;(function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"})(qo||(qo={}));var B1=class{static validate(e){if(typeof e.badge=="string"){let t=uy(e.badge,0);if(t<e.badge.length&&(t+=uy(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!Bi.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,i){this.badge=e,this.tooltip=t,this.color=i}},df=class{constructor(t){this.kind=t}};df=__decorate([be],df);var Vs;(function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"})(Vs||(Vs={}));var is=class Yw{static isNotebookRange(t){return t instanceof Yw?!0:t?typeof t.start=="number"&&typeof t.end=="number":!1}get start(){return this.c}get end(){return this.e}get isEmpty(){return this.c===this.e}constructor(t,i){if(t<0)throw je("start must be positive");if(i<0)throw je("end must be positive");t<=i?(this.c=t,this.e=i):(this.c=i,this.e=t)}with(t){let i=this.c,r=this.e;return t.start!==void 0&&(i=t.start),t.end!==void 0&&(r=t.end),i===this.c&&r===this.e?this:new Yw(i,r)}},ff=class Kw{static validate(t){if(typeof t.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof t.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof t.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every(i=>Kw.isNotebookCellData(i))}static isNotebookCellData(t){return!0}constructor(t,i,r,n,s,o,a){this.kind=t,this.value=i,this.languageId=r,this.mime=n,this.outputs=s??[],this.metadata=o,this.executionSummary=a,Kw.validate(this)}},VE=class{constructor(e){this.cells=e}},qE=class vs{static isNotebookCellOutputItem(t){return t instanceof vs?!0:t?typeof t.mime=="string"&&t.data instanceof Uint8Array:!1}static error(t){const i={name:t.name,message:t.message,stack:t.stack};return vs.json(i,"application/vnd.code.notebook.error")}static stdout(t){return vs.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return vs.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,i="application/octet-stream"){return new vs(t,i)}static#e=new TextEncoder;static text(t,i=zn.text){const r=vs.#e.encode(String(t));return new vs(r,i)}static json(t,i="text/x-json"){const r=JSON.stringify(t,void 0,"	");return vs.text(r,i)}constructor(t,i){this.data=t,this.mime=i;const r=I4(i,!0);if(!r)throw new Error(`INVALID mime type: ${i}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=r}},pf=class eb{static isNotebookCellOutput(t){return t instanceof eb?!0:!t||typeof t!="object"?!1:typeof t.id=="string"&&Array.isArray(t.items)}static ensureUniqueMimeTypes(t,i=!1){const r=new Set,n=new Set;for(let s=0;s<t.length;s++){const o=t[s],a=I4(o.mime);if(!r.has(a)||DE(a)){r.add(a);continue}n.add(s),i&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return n.size===0?t:t.filter((s,o)=>!n.has(o))}constructor(t,i,r){this.items=eb.ensureUniqueMimeTypes(t,!0),typeof i=="string"?(this.id=i,this.metadata=r):(this.id=Xr(),this.metadata=i??r)}},Go;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Go||(Go={}));var nc;(function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(nc||(nc={}));var gf;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(gf||(gf={}));var mf;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(mf||(mf={}));var HA=class{constructor(e,t){this.text=e,this.alignment=t}},H1;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"})(H1||(H1={}));var vf;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"})(vf||(vf={}));var GE=class{constructor(e,t=[]){this.uri=e,this.provides=fn(t)}},jA=class{constructor(e){this.label=e}},iu;(function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"})(iu||(iu={}));var j1=class{constructor(t,i){this.label=t,this.timestamp=i}};j1=__decorate([be],j1);var sc;(function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"})(sc||(sc={}));var wf;(function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"})(wf||(wf={}));var qs;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(qs||(qs={}));var WA=class{constructor(e,t){this.ranges=e,this.wordPattern=t}},zA=class{constructor(e){this.c=e}get autoForwardAction(){return this.c}},W1;(function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(W1||(W1={}));var oc;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(oc||(oc={}));var bf=class{constructor(t=void 0,i=void 0,r=void 0,n=!1,s=!0){this.include=t,this.exclude=i,this.profile=r,this.continuous=n,this.preserveFocus=s}};bf=__decorate([be],bf);var yf=h1=class{static diff(t,i,r){const n=new h1(t);return n.expectedOutput=i,n.actualOutput=r,n}constructor(t){this.message=t}};yf=h1=__decorate([be],yf);var ru=class{constructor(t){this.id=t}};ru=__decorate([be],ru);var VA=class{constructor(e,t,i){this.label=e,this.uri=t,this.position=i}},Ef=class{constructor(e,t){this.covered=e,this.total=t,Sf(this)}};function Sf(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}var nu=class z8{static fromDetails(t,i){const r=new Ef(0,0),n=new Ef(0,0),s=new Ef(0,0);for(const a of i)if("branches"in a){r.total+=1,r.covered+=a.executed?1:0;for(const c of a.branches)n.total+=1,n.covered+=c.executed?1:0}else s.total+=1,s.covered+=a.executed?1:0;const o=new z8(t,r,n.total>0?n:void 0,s.total>0?s:void 0);return o.detailedCoverage=i,o}constructor(t,i,r,n,s=[]){this.uri=t,this.statementCoverage=i,this.branchCoverage=r,this.declarationCoverage=n,this.fromTests=s}},qA=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i=[]){this.executed=e,this.location=t,this.branches=i}},GA=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.executed=e,this.location=t,this.label=i}},QA=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.name=e,this.executed=t,this.location=i}},z1;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(z1||(z1={}));var V1;(function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"})(V1||(V1={}));var q1;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(q1||(q1={}));var G1=class{constructor(e,t,i,r,n,s){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=n,this.selectionRange=s}},Q1=class{constructor(e){this.uri=e}},xf=class{constructor(e,t){this.original=e,this.modified=t}},QE=class{constructor(e,t,i,r){this.base=e,this.input1=t,this.input2=i,this.result=r}},J1=class{constructor(e,t){this.uri=e,this.viewType=t}},JE=class{constructor(e){this.viewType=e}},X1=class{constructor(e,t){this.uri=e,this.notebookType=t}},Z1=class{constructor(e,t,i){this.original=e,this.modified=t,this.notebookType=i}},XE=class{constructor(){}},ZE=class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},YE=class{constructor(){}},KE=class{constructor(e){this.textDiffs=e}},Y1;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(Y1||(Y1={}));var K1;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(K1||(K1={}));var ev;(function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"})(ev||(ev={}));var JA=class{constructor(e,t,i){this.id=e,this.label=t,this.values=i}},tv;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"})(tv||(tv={}));var su;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(su||(su={}));var kf=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new dr(e):e}},ou=class{constructor(e,t){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new dr(e):e,this.vulnerabilities=t}},au=class{constructor(e,t){this.participant=e,this.command=t}},Df=class{constructor(e,t,i,r){this.title=e,this.message=t,this.data=i,this.buttons=r}},$f=class{constructor(e,t){this.value=e,this.baseUri=t}},If=class{constructor(e,t){this.value=e,this.title=t}},cu=class{constructor(e){this.value=e}},e7=class{constructor(e,t){this.value=e,this.task=t}},lu=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new dr(e):e}},Af=class{constructor(e){this.value=e}},rs=class{constructor(e,t,i){this.value=e,this.iconPath=t,this.options=i}},Pf=class{constructor(e,t,i){this.value=e,this.license=t,this.snippet=i}},Rf=class{constructor(e,t){this.uri=e,this.range=t}},uu=class{constructor(e,t){this.uri=e,this.edits=Array.isArray(t)?t:[t]}},t7=class{constructor(e,t,i,r){this.prompt=e,this.command=t,this.references=i,this.participant=r}},i7=class{constructor(e,t,i,r){this.response=e,this.result=t,this.participant=i,this.command=r}},sn;(function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor"})(sn||(sn={}));var iv;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(iv||(iv={}));var r7=class{constructor(e,t,i){this.document=e,this.selection=t,this.wholeRange=i}},n7=class{constructor(e){this.cell=e}},Rr;(function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"})(Rr||(Rr={}));var Tf=class{constructor(e,t,i){this.name=e,this.content=t,this.isError=i??!1}},s7=class tb{static User(t,i){const r=new tb(Rr.User,typeof t=="string"?t:"",i);return r.content2=t,r}static Assistant(t,i){return new tb(Rr.Assistant,t,i)}constructor(t,i,r){this.role=t,this.content=i,this.content2=i,this.name=r}},rv=class{constructor(e,t){this.name=e,this.parameters=t}},hu=class{constructor(e){this.value=e}},ns=class oa extends Error{static NotFound(t){return new oa(t,oa.NotFound.name)}static NoPermissions(t){return new oa(t,oa.NoPermissions.name)}static Blocked(t){return new oa(t,oa.Blocked.name)}constructor(t,i,r){super(t,{cause:r}),this.name="LanguageModelError",this.code=i??""}},nv;(function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"})(nv||(nv={}));var sv;(function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"})(sv||(sv={}));var ov;(function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"})(ov||(ov={}));var av;(function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"})(av||(av={}));var XA=class{constructor(e,t){this.text=e,this.range=t}},du;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(du||(du={}));var on;(function(e){function t(r){const{selectionStartLineNumber:n,selectionStartColumn:s,positionLineNumber:o,positionColumn:a}=r,c=new Ve(n-1,s-1),l=new Ve(o-1,a-1);return new es(c,l)}e.to=t;function i(r){const{anchor:n,active:s}=r;return{selectionStartLineNumber:n.line+1,selectionStartColumn:n.character+1,positionLineNumber:s.line+1,positionColumn:s.character+1}}e.from=i})(on||(on={}));var W;(function(e){function t(r){if(!r)return;const{start:n,end:s}=r;return{startLineNumber:n.line+1,startColumn:n.character+1,endLineNumber:s.line+1,endColumn:s.character+1}}e.from=t;function i(r){if(!r)return;const{startLineNumber:n,startColumn:s,endLineNumber:o,endColumn:a}=r;return new Be(n-1,s-1,o-1,a-1)}e.to=i})(W||(W={}));var Gs;(function(e){function t(r){return{uri:r.uri,range:W.from(r.range)}}e.from=t;function i(r){return new kr(E.revive(r.uri),W.to(r.range))}e.to=i})(Gs||(Gs={}));var cv;(function(e){function t(i){switch(i){case Aa.Comment:return qs.Comment;case Aa.Other:return qs.Other;case Aa.RegEx:return qs.RegEx;case Aa.String:return qs.String}}e.to=t})(cv||(cv={}));var lt;(function(e){function t(r){return new Ve(r.lineNumber-1,r.column-1)}e.to=t;function i(r){return{lineNumber:r.line+1,column:r.character+1}}e.from=i})(lt||(lt={}));var ac;(function(e){function t(n,s,o){return ci(fn(n).map(a=>i(a,s,o)))}e.from=t;function i(n,s,o){if(typeof n=="string")return{$serialized:!0,language:n,isBuiltin:o?.isBuiltin};if(n)return{$serialized:!0,language:n.language,scheme:r(n.scheme,s),pattern:fr.from(n.pattern)??void 0,exclusive:n.exclusive,notebookType:n.notebookType,isBuiltin:o?.isBuiltin}}function r(n,s){return s&&typeof n=="string"?s.transformOutgoingScheme(n):n}})(ac||(ac={}));var Lf;(function(e){function t(r){switch(r){case Mo.Unnecessary:return _a.Unnecessary;case Mo.Deprecated:return _a.Deprecated}}e.from=t;function i(r){switch(r){case _a.Unnecessary:return Mo.Unnecessary;case _a.Deprecated:return Mo.Deprecated;default:return}}e.to=i})(Lf||(Lf={}));var cc;(function(e){function t(r){let n;return r.code&&(Xe(r.code)||Rs(r.code)?n=String(r.code):n={value:String(r.code.value),target:r.code.target}),{...W.from(r.range),message:r.message,source:r.source,code:n,severity:Cf.from(r.severity),relatedInformation:r.relatedInformation&&r.relatedInformation.map(_f.from),tags:Array.isArray(r.tags)?ci(r.tags.map(Lf.from)):void 0}}e.from=t;function i(r){const n=new Nd(W.to(r),r.message,Cf.to(r.severity));return n.source=r.source,n.code=Xe(r.code)?r.code:r.code?.value,n.relatedInformation=r.relatedInformation&&r.relatedInformation.map(_f.to),n.tags=r.tags&&ci(r.tags.map(Lf.to)),n}e.to=i})(cc||(cc={}));var _f;(function(e){function t(r){return{...W.from(r.location.range),message:r.message,resource:r.location.uri}}e.from=t;function i(r){return new Cl(new kr(r.resource,W.to(r)),r.message)}e.to=i})(_f||(_f={}));var Cf;(function(e){function t(r){switch(r){case Ri.Error:return Ji.Error;case Ri.Warning:return Ji.Warning;case Ri.Information:return Ji.Info;case Ri.Hint:return Ji.Hint}return Ji.Error}e.from=t;function i(r){switch(r){case Ji.Info:return Ri.Information;case Ji.Warning:return Ri.Warning;case Ji.Error:return Ri.Error;case Ji.Hint:return Ri.Hint;default:return Ri.Error}}e.to=i})(Cf||(Cf={}));var hi;(function(e){function t(r){return typeof r=="number"&&r>=jl.One?r-1:r===jl.Beside?xA:SA}e.from=t;function i(r){if(typeof r=="number"&&r>=0)return r+1;throw new Error("invalid 'EditorGroupColumn'")}e.to=i})(hi||(hi={}));function ZA(e){return typeof e.range<"u"}function o7(e){return e.length===0?!0:!!ZA(e[0])}var Ge;(function(e){function t(a){return a.map(e.from)}e.fromMany=t;function i(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function r(a){let c;if(i(a)){const{language:h,value:f}=a;c={value:"```"+h+`
`+f+"\n```\n"}}else dr.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=({href:h})=>{try{let f=E.parse(h,!0);f=f.with({query:n(f.query,l)}),l[h]=f}catch{}return""};return D4.walkTokens(D4.lexer(c.value),h=>{h.type==="link"?u({href:h.href}):h.type==="image"&&typeof h.href=="string"&&u(d$(h.href))}),c}e.from=r;function n(a,c){if(!a)return a;let l;try{l=$4(a)}catch{}if(!l)return a;let u=!1;return l=Nh(l,h=>{if(E.isUri(h)){const f=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[f]=h,u=!0,f}else return}),u?JSON.stringify(l):a}function s(a){const c=new dr(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?E.from(a.baseUri):void 0,c}e.to=s;function o(a){if(a)return typeof a=="string"?a:e.from(a)}e.fromStrict=o})(Ge||(Ge={}));function YA(e){return o7(e)?e.map(t=>({range:W.from(t.range),hoverMessage:Array.isArray(t.hoverMessage)?Ge.fromMany(t.hoverMessage):t.hoverMessage?Ge.from(t.hoverMessage):void 0,renderOptions:t.renderOptions})):e.map(t=>({range:W.from(t)}))}function Nf(e){return typeof e>"u"?e:typeof e=="string"?E.file(e):e}var lc;(function(e){function t(i){return typeof i>"u"?i:{contentText:i.contentText,contentIconPath:i.contentIconPath?Nf(i.contentIconPath):void 0,border:i.border,borderColor:i.borderColor,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,color:i.color,backgroundColor:i.backgroundColor,margin:i.margin,width:i.width,height:i.height}}e.from=t})(lc||(lc={}));var Of;(function(e){function t(i){return typeof i>"u"?i:{backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?Nf(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?lc.from(i.before):void 0,after:i.after?lc.from(i.after):void 0}}e.from=t})(Of||(Of={}));var lv;(function(e){function t(i){if(typeof i>"u")return i;switch(i){case Bo.OpenOpen:return La.AlwaysGrowsWhenTypingAtEdges;case Bo.ClosedClosed:return La.NeverGrowsWhenTypingAtEdges;case Bo.OpenClosed:return La.GrowsOnlyWhenTypingBefore;case Bo.ClosedOpen:return La.GrowsOnlyWhenTypingAfter}}e.from=t})(lv||(lv={}));var uv;(function(e){function t(i){return{isWholeLine:i.isWholeLine,rangeBehavior:i.rangeBehavior?lv.from(i.rangeBehavior):void 0,overviewRulerLane:i.overviewRulerLane,light:i.light?Of.from(i.light):void 0,dark:i.dark?Of.from(i.dark):void 0,backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?Nf(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?lc.from(i.before):void 0,after:i.after?lc.from(i.after):void 0}}e.from=t})(uv||(uv={}));var gi;(function(e){function t(r){return{text:r.newText,eol:r.newEol&&fc.from(r.newEol),range:W.from(r.range)}}e.from=t;function i(r){const n=new js(W.to(r.range),r.text);return n.newEol=typeof r.eol>"u"?void 0:fc.to(r.eol),n}e.to=i})(gi||(gi={}));var Hi;(function(e){function t(r,n){const s={edits:[]};if(r instanceof Oo){const o=new bb;for(const a of r._allEntries())a._type===Vt.File&&E.isUri(a.to)&&a.from===void 0&&o.add(a.to);for(const a of r._allEntries())if(a._type===Vt.File){let c;a.options?.contents&&(ArrayBuffer.isView(a.options.contents)?c={type:"base64",value:Sb(Qe.wrap(a.options.contents))}:c={type:"dataTransferItem",id:a.options.contents._itemId}),s.edits.push({oldResource:a.from,newResource:a.to,options:{...a.options,contents:c},metadata:a.metadata})}else a._type===Vt.Text?s.edits.push({resource:a.uri,textEdit:gi.from(a.edit),versionId:o.has(a.uri)?void 0:n?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===Vt.Snippet?s.edits.push({resource:a.uri,textEdit:{range:W.from(a.range),text:a.edit.value,insertAsSnippet:!0},versionId:o.has(a.uri)?void 0:n?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===Vt.Cell?s.edits.push({metadata:a.metadata,resource:a.uri,cellEdit:a.edit,notebookMetadata:a.notebookMetadata,notebookVersionId:n?.getNotebookDocumentVersion(a.uri)}):a._type===Vt.CellReplace&&s.edits.push({metadata:a.metadata,resource:a.uri,notebookVersionId:n?.getNotebookDocumentVersion(a.uri),cellEdit:{editType:Ll.Replace,index:a.index,count:a.count,cells:a.cells.map(bu.from)}})}return s}e.from=t;function i(r){const n=new Oo,s=new li;for(const o of r.edits)if(o.textEdit){const a=o,c=E.revive(a.resource),l=W.to(a.textEdit.range),u=a.textEdit.text,h=a.textEdit.insertAsSnippet;let f;h?f=f1.replace(l,new Fo(u)):f=js.replace(l,u);const g=s.get(c);g?g.push(f):s.set(c,[f])}else n.renameFile(E.revive(o.oldResource),E.revive(o.newResource),o.options);for(const[o,a]of s)n.set(o,a);return n}e.to=i})(Hi||(Hi={}));var Tr;(function(e){const t=Object.create(null);t[wt.File]=ae.File,t[wt.Module]=ae.Module,t[wt.Namespace]=ae.Namespace,t[wt.Package]=ae.Package,t[wt.Class]=ae.Class,t[wt.Method]=ae.Method,t[wt.Property]=ae.Property,t[wt.Field]=ae.Field,t[wt.Constructor]=ae.Constructor,t[wt.Enum]=ae.Enum,t[wt.Interface]=ae.Interface,t[wt.Function]=ae.Function,t[wt.Variable]=ae.Variable,t[wt.Constant]=ae.Constant,t[wt.String]=ae.String,t[wt.Number]=ae.Number,t[wt.Boolean]=ae.Boolean,t[wt.Array]=ae.Array,t[wt.Object]=ae.Object,t[wt.Key]=ae.Key,t[wt.Null]=ae.Null,t[wt.EnumMember]=ae.EnumMember,t[wt.Struct]=ae.Struct,t[wt.Event]=ae.Event,t[wt.Operator]=ae.Operator,t[wt.TypeParameter]=ae.TypeParameter;function i(n){return typeof t[n]=="number"?t[n]:ae.Property}e.from=i;function r(n){for(const s in t)if(t[s]===n)return Number(s);return wt.Property}e.to=r})(Tr||(Tr={}));var ss;(function(e){function t(r){switch(r){case Ol.Deprecated:return Qh.Deprecated}}e.from=t;function i(r){switch(r){case Qh.Deprecated:return Ol.Deprecated}}e.to=i})(ss||(ss={}));var fu;(function(e){function t(r){return{name:r.name,kind:Tr.from(r.kind),tags:r.tags&&r.tags.map(ss.from),containerName:r.containerName,location:Yi.from(r.location)}}e.from=t;function i(r){const n=new Fl(r.name,Tr.to(r.kind),r.containerName,Yi.to(r.location));return n.tags=r.tags&&r.tags.map(ss.to),n}e.to=i})(fu||(fu={}));var hv;(function(e){function t(r){const n={name:r.name||"!!MISSING: name!!",detail:r.detail,range:W.from(r.range),selectionRange:W.from(r.selectionRange),kind:Tr.from(r.kind),tags:r.tags?.map(ss.from)??[]};return r.children&&(n.children=r.children.map(t)),n}e.from=t;function i(r){const n=new Ml(r.name,r.detail,Tr.to(r.kind),W.to(r.range),W.to(r.selectionRange));return Hc(r.tags)&&(n.tags=r.tags.map(ss.to)),r.children&&(n.children=r.children.map(i)),n}e.to=i})(hv||(hv={}));var Qo;(function(e){function t(r){const n=new g1(Tr.to(r.kind),r.name,r.detail||"",E.revive(r.uri),W.to(r.range),W.to(r.selectionRange));return n._sessionId=r._sessionId,n._itemId=r._itemId,n}e.to=t;function i(r,n,s){if(n=n??r._sessionId,s=s??r._itemId,n===void 0||s===void 0)throw new Error("invalid item");return{_sessionId:n,_itemId:s,name:r.name,detail:r.detail,kind:Tr.from(r.kind),uri:r.uri,range:W.from(r.range),selectionRange:W.from(r.selectionRange),tags:r.tags?.map(ss.from)}}e.from=i})(Qo||(Qo={}));var dv;(function(e){function t(i){return new FE(Qo.to(i.from),i.fromRanges.map(r=>W.to(r)))}e.to=t})(dv||(dv={}));var fv;(function(e){function t(i){return new ME(Qo.to(i.to),i.fromRanges.map(r=>W.to(r)))}e.to=t})(fv||(fv={}));var Yi;(function(e){function t(r){return{range:r.range&&W.from(r.range),uri:r.uri}}e.from=t;function i(r){return new kr(E.revive(r.uri),W.to(r.range))}e.to=i})(Yi||(Yi={}));var pu;(function(e){function t(r){const n=r,s=r;return{originSelectionRange:n.originSelectionRange?W.from(n.originSelectionRange):void 0,uri:n.targetUri?n.targetUri:s.uri,range:W.from(n.targetRange?n.targetRange:s.range),targetSelectionRange:n.targetSelectionRange?W.from(n.targetSelectionRange):void 0}}e.from=t;function i(r){return{targetUri:E.revive(r.uri),targetRange:W.to(r.range),targetSelectionRange:r.targetSelectionRange?W.to(r.targetSelectionRange):void 0,originSelectionRange:r.originSelectionRange?W.to(r.originSelectionRange):void 0}}e.to=i})(pu||(pu={}));var gu;(function(e){function t(r){return{range:W.from(r.range),contents:Ge.fromMany(r.contents),canIncreaseVerbosity:r.canIncreaseVerbosity,canDecreaseVerbosity:r.canDecreaseVerbosity}}e.from=t;function i(r){const n=r.contents.map(Ge.to),s=W.to(r.range),o=r.canIncreaseVerbosity,a=r.canDecreaseVerbosity;return new Fd(n,s,o,a)}e.to=i})(gu||(gu={}));var pv;(function(e){function t(r){return{range:W.from(r.range),expression:r.expression}}e.from=t;function i(r){return new of(W.to(r.range),r.expression)}e.to=i})(pv||(pv={}));var Ff;(function(e){function t(r){if(r instanceof af)return{type:"text",range:W.from(r.range),text:r.text};if(r instanceof cf)return{type:"variable",range:W.from(r.range),variableName:r.variableName,caseSensitiveLookup:r.caseSensitiveLookup};if(r instanceof lf)return{type:"expression",range:W.from(r.range),expression:r.expression};throw new Error("Unknown 'InlineValue' type")}e.from=t;function i(r){switch(r.type){case"text":return{range:W.to(r.range),text:r.text};case"variable":return{range:W.to(r.range),variableName:r.variableName,caseSensitiveLookup:r.caseSensitiveLookup};case"expression":return{range:W.to(r.range),expression:r.expression}}}e.to=i})(Ff||(Ff={}));var Mf;(function(e){function t(r){return{frameId:r.frameId,stoppedLocation:W.from(r.stoppedLocation)}}e.from=t;function i(r){return new _1(r.frameId,W.to(r.stoppedLocation))}e.to=i})(Mf||(Mf={}));var uc;(function(e){function t(r){return{range:W.from(r.range),kind:r.kind}}e.from=t;function i(r){return new Md(W.to(r.range),r.kind)}e.to=i})(uc||(uc={}));var gv;(function(e){function t(r){return{uri:r.uri,highlights:r.highlights.map(uc.from)}}e.from=t;function i(r){return new Ud(E.revive(r.uri),r.highlights.map(uc.to))}e.to=i})(gv||(gv={}));var mv;(function(e){function t(i){switch(i){case ml.TriggerCharacter:return Va.TriggerCharacter;case ml.TriggerForIncompleteCompletions:return Va.TriggerForIncompleteCompletions;case ml.Invoke:default:return Va.Invoke}}e.to=t})(mv||(mv={}));var vv;(function(e){function t(i){return{triggerKind:mv.to(i.triggerKind),triggerCharacter:i.triggerCharacter}}e.to=t})(vv||(vv={}));var Uf;(function(e){function t(r){switch(r){case Hl.Deprecated:return Vh.Deprecated}}e.from=t;function i(r){switch(r){case Vh.Deprecated:return Hl.Deprecated}}e.to=i})(Uf||(Uf={}));var Bf;(function(e){const t=new Map([[De.Method,G.Method],[De.Function,G.Function],[De.Constructor,G.Constructor],[De.Field,G.Field],[De.Variable,G.Variable],[De.Class,G.Class],[De.Interface,G.Interface],[De.Struct,G.Struct],[De.Module,G.Module],[De.Property,G.Property],[De.Unit,G.Unit],[De.Value,G.Value],[De.Constant,G.Constant],[De.Enum,G.Enum],[De.EnumMember,G.EnumMember],[De.Keyword,G.Keyword],[De.Snippet,G.Snippet],[De.Text,G.Text],[De.Color,G.Color],[De.File,G.File],[De.Reference,G.Reference],[De.Folder,G.Folder],[De.Event,G.Event],[De.Operator,G.Operator],[De.TypeParameter,G.TypeParameter],[De.Issue,G.Issue],[De.User,G.User]]);function i(s){return t.get(s)??G.Property}e.from=i;const r=new Map([[G.Method,De.Method],[G.Function,De.Function],[G.Constructor,De.Constructor],[G.Field,De.Field],[G.Variable,De.Variable],[G.Class,De.Class],[G.Interface,De.Interface],[G.Struct,De.Struct],[G.Module,De.Module],[G.Property,De.Property],[G.Unit,De.Unit],[G.Value,De.Value],[G.Constant,De.Constant],[G.Enum,De.Enum],[G.EnumMember,De.EnumMember],[G.Keyword,De.Keyword],[G.Snippet,De.Snippet],[G.Text,De.Text],[G.Color,De.Color],[G.File,De.File],[G.Reference,De.Reference],[G.Folder,De.Folder],[G.Event,De.Event],[G.Operator,De.Operator],[G.TypeParameter,De.TypeParameter],[G.User,De.User],[G.Issue,De.Issue]]);function n(s){return r.get(s)??De.Property}e.to=n})(Bf||(Bf={}));var wv;(function(e){function t(i,r){const n=new zd(i.label);return n.insertText=i.insertText,n.kind=Bf.to(i.kind),n.tags=i.tags?.map(Uf.to),n.detail=i.detail,n.documentation=$o(i.documentation)?Ge.to(i.documentation):i.documentation,n.sortText=i.sortText,n.filterText=i.filterText,n.preselect=i.preselect,n.commitCharacters=i.commitCharacters,mt.isIRange(i.range)?n.range=W.to(i.range):typeof i.range=="object"&&(n.range={inserting:W.to(i.range.insert),replacing:W.to(i.range.replace)}),n.keepWhitespace=typeof i.insertTextRules>"u"?!1:!!(i.insertTextRules&Po.KeepWhitespace),typeof i.insertTextRules<"u"&&i.insertTextRules&Po.InsertAsSnippet?n.insertText=new Fo(i.insertText):(n.insertText=i.insertText,n.textEdit=n.range instanceof Be?new js(n.range,n.insertText):void 0),i.additionalTextEdits&&i.additionalTextEdits.length>0&&(n.additionalTextEdits=i.additionalTextEdits.map(s=>gi.to(s))),n.command=r&&i.command?r.fromInternal(i.command):void 0,n}e.to=t})(wv||(wv={}));var Hf;(function(e){function t(r){if(typeof r.label!="string"&&!Array.isArray(r.label))throw new TypeError("Invalid label");return{label:r.label,documentation:Ge.fromStrict(r.documentation)}}e.from=t;function i(r){return{label:r.label,documentation:$o(r.documentation)?Ge.to(r.documentation):r.documentation}}e.to=i})(Hf||(Hf={}));var jf;(function(e){function t(r){return{label:r.label,documentation:Ge.fromStrict(r.documentation),parameters:Array.isArray(r.parameters)?r.parameters.map(Hf.from):[],activeParameter:r.activeParameter}}e.from=t;function i(r){return{label:r.label,documentation:$o(r.documentation)?Ge.to(r.documentation):r.documentation,parameters:Array.isArray(r.parameters)?r.parameters.map(Hf.to):[],activeParameter:r.activeParameter}}e.to=i})(jf||(jf={}));var mu;(function(e){function t(r){return{activeSignature:r.activeSignature,activeParameter:r.activeParameter,signatures:Array.isArray(r.signatures)?r.signatures.map(jf.from):[]}}e.from=t;function i(r){return{activeSignature:r.activeSignature,activeParameter:r.activeParameter,signatures:Array.isArray(r.signatures)?r.signatures.map(jf.to):[]}}e.to=i})(mu||(mu={}));var bv;(function(e){function t(i,r){const n=new Wd(lt.to(r.position),typeof r.label=="string"?r.label:r.label.map(yv.to.bind(void 0,i)),r.kind&&Wf.to(r.kind));return n.textEdits=r.textEdits&&r.textEdits.map(gi.to),n.tooltip=$o(r.tooltip)?Ge.to(r.tooltip):r.tooltip,n.paddingLeft=r.paddingLeft,n.paddingRight=r.paddingRight,n}e.to=t})(bv||(bv={}));var yv;(function(e){function t(i,r){const n=new jd(r.label);return n.tooltip=$o(r.tooltip)?Ge.to(r.tooltip):r.tooltip,Pm.is(r.command)&&(n.command=i.fromInternal(r.command)),r.location&&(n.location=Yi.to(r.location)),n}e.to=t})(yv||(yv={}));var Wf;(function(e){function t(r){return r}e.from=t;function i(r){return r}e.to=i})(Wf||(Wf={}));var Jo;(function(e){function t(r){return{range:W.from(r.range),url:r.target,tooltip:r.tooltip}}e.from=t;function i(r){let n;if(r.url)try{n=typeof r.url=="string"?E.parse(r.url,!0):E.revive(r.url)}catch{}const s=new qd(W.to(r.range),n);return s.tooltip=r.tooltip,s}e.to=i})(Jo||(Jo={}));var zf;(function(e){function t(r){const n=new Qd(r.label);return r.textEdit&&(n.textEdit=gi.to(r.textEdit)),r.additionalTextEdits&&(n.additionalTextEdits=r.additionalTextEdits.map(s=>gi.to(s))),n}e.to=t;function i(r){return{label:r.label,textEdit:r.textEdit?gi.from(r.textEdit):void 0,additionalTextEdits:r.additionalTextEdits?r.additionalTextEdits.map(n=>gi.from(n)):void 0}}e.from=i})(zf||(zf={}));var hc;(function(e){function t(r){return new Xa(r[0],r[1],r[2],r[3])}e.to=t;function i(r){return[r.red,r.green,r.blue,r.alpha]}e.from=i})(hc||(hc={}));var Ev;(function(e){function t(r){return{range:W.from(r.range)}}e.from=t;function i(r){return new Bl(W.to(r.range))}e.to=i})(Ev||(Ev={}));var Vf;(function(e){function t(i){switch(i){case Oa.AUTO:return Ga.AfterDelay;case Oa.EXPLICIT:return Ga.Manual;case Oa.FOCUS_CHANGE:case Oa.WINDOW_CHANGE:return Ga.FocusOut}}e.to=t})(Vf||(Vf={}));var dc;(function(e){function t(r){switch(r){case nn.Off:return Ni.Off;case nn.Relative:return Ni.Relative;case nn.Interval:return Ni.Interval;case nn.On:default:return Ni.On}}e.from=t;function i(r){switch(r){case Ni.Off:return nn.Off;case Ni.Relative:return nn.Relative;case Ni.Interval:return nn.Interval;case Ni.On:default:return nn.On}}e.to=i})(dc||(dc={}));var fc;(function(e){function t(r){if(r===rn.CRLF)return Ta.CRLF;if(r===rn.LF)return Ta.LF}e.from=t;function i(r){if(r===Ta.CRLF)return rn.CRLF;if(r===Ta.LF)return rn.LF}e.to=i})(fc||(fc={}));var Sv;(function(e){function t(i){if(typeof i=="object")return i.viewId;switch(i){case jo.SourceControl:return yl.Scm;case jo.Window:return yl.Window;case jo.Notification:return yl.Notification}throw new Error("Unknown 'ProgressLocation'")}e.from=t})(Sv||(Sv={}));var qf;(function(e){function t(r){const n={start:r.start+1,end:r.end+1};return r.kind&&(n.kind=Gf.from(r.kind)),n}e.from=t;function i(r){const n={start:r.start-1,end:r.end-1};return r.kind&&(n.kind=Gf.to(r.kind)),n}e.to=i})(qf||(qf={}));var Gf;(function(e){function t(r){if(r)switch(r){case ts.Comment:return Pa.Comment;case ts.Imports:return Pa.Imports;case ts.Region:return Pa.Region}}e.from=t;function i(r){if(r)switch(r.value){case Pa.Comment.value:return ts.Comment;case Pa.Imports.value:return ts.Imports;case Pa.Region.value:return ts.Region}}e.to=i})(Gf||(Gf={}));var vu;(function(e){function t(i){if(i)return{pinned:typeof i.preview=="boolean"?!i.preview:void 0,inactive:i.background,preserveFocus:i.preserveFocus,selection:typeof i.selection=="object"?W.from(i.selection):void 0,override:typeof i.override=="boolean"?FI.id:void 0}}e.from=t})(vu||(vu={}));var fr;(function(e){function t(s){return s instanceof Ka?s.toJSON():typeof s=="string"?s:i(s)||r(s)?new Ka(s.baseUri??s.base,s.pattern).toJSON():s}e.from=t;function i(s){const o=s;return o?E.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function r(s){const o=s;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function n(s){return typeof s=="string"?s:new Ka(E.revive(s.baseUri),s.pattern)}e.to=n})(fr||(fr={}));var xv;(function(e){function t(i){if(i){if(Array.isArray(i))return i.map(t);if(typeof i=="string")return i;{const r=i;return{language:r.language,scheme:r.scheme,pattern:fr.from(r.pattern),exclusive:r.exclusive,notebookType:r.notebookType}}}else return}e.from=t})(xv||(xv={}));var Qf;(function(e){function t(r){return!!r&&typeof r=="object"&&"documents"in r&&Array.isArray(r.documents)&&r.documents.every(n=>Array.isArray(n)&&n.every(s=>s&&typeof s=="object"&&"uri"in s&&E.isUri(s.uri)&&"version"in s&&typeof s.version=="number"&&"ranges"in s&&Array.isArray(s.ranges)&&s.ranges.every(o=>o instanceof Be)))}e.is=t;function i(r){return{documents:r.documents.map(n=>n.map(s=>({uri:E.from(s.uri),version:s.version,ranges:s.ranges.map(o=>W.from(o))})))}}e.from=i})(Qf||(Qf={}));var $n;(function(e){function t(r){return{start:r.start,end:r.end}}e.from=t;function i(r){return new is(r.start,r.end)}e.to=i})($n||($n={}));var pc;(function(e){function t(r){return{timing:typeof r.runStartTime=="number"&&typeof r.runEndTime=="number"?{startTime:r.runStartTime,endTime:r.runEndTime}:void 0,executionOrder:r.executionOrder,success:r.lastRunSuccess}}e.to=t;function i(r){return{lastRunSuccess:r.success,runStartTime:r.timing?.startTime,runEndTime:r.timing?.endTime,executionOrder:r.executionOrder}}e.from=i})(pc||(pc={}));var kv;(function(e){function t(i){if(i===Tl.Unconfirmed)return nc.Pending;if(i===Tl.Pending)return;if(i===Tl.Executing)return nc.Executing;throw new Error(`Unknown state: ${i}`)}e.to=t})(kv||(kv={}));var wu;(function(e){function t(r){switch(r){case Go.Markup:return Ha.Markup;case Go.Code:default:return Ha.Code}}e.from=t;function i(r){switch(r){case Ha.Markup:return Go.Markup;case Ha.Code:default:return Go.Code}}e.to=i})(wu||(wu={}));var Qs;(function(e){function t(r){const n={metadata:r.metadata??Object.create(null),cells:[]};for(const s of r.cells)ff.validate(s),n.cells.push(bu.from(s));return n}e.from=t;function i(r){const n=new VE(r.cells.map(bu.to));return wy(r.metadata)||(n.metadata=r.metadata),n}e.to=i})(Qs||(Qs={}));var bu;(function(e){function t(r){return{cellKind:wu.from(r.kind),language:r.languageId,mime:r.mime,source:r.value,metadata:r.metadata,internalMetadata:pc.from(r.executionSummary??{}),outputs:r.outputs?r.outputs.map(Js.from):[]}}e.from=t;function i(r){return new ff(wu.to(r.cellKind),r.source,r.language,r.mime,r.outputs?r.outputs.map(Js.to):void 0,r.metadata,r.internalMetadata?pc.to(r.internalMetadata):void 0)}e.to=i})(bu||(bu={}));var gc;(function(e){function t(r){return{mime:r.mime,valueBytes:Qe.wrap(r.data)}}e.from=t;function i(r){return new qE(r.valueBytes.buffer,r.mime)}e.to=i})(gc||(gc={}));var Js;(function(e){function t(r){return{outputId:r.id,items:r.items.map(gc.from),metadata:r.metadata}}e.from=t;function i(r){const n=r.items.map(gc.to);return new pf(n,r.outputId,r.metadata)}e.to=i})(Js||(Js={}));var Jf;(function(e){function t(n){return r(n)?{include:fr.from(n.include)??void 0,exclude:fr.from(n.exclude)??void 0}:fr.from(n)??void 0}e.from=t;function i(n){return r(n)?{include:fr.to(n.include),exclude:fr.to(n.exclude)}:fr.to(n)}e.to=i;function r(n){const s=n;return s?!Jt(s.include)&&!Jt(s.exclude):!1}})(Jf||(Jf={}));var Dv;(function(e){function t(i,r,n){const s=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{alignment:i.alignment===gf.Left?Pd.Left:Pd.Right,command:r.toInternal(s,n),text:i.text,tooltip:i.tooltip,accessibilityInformation:i.accessibilityInformation,priority:i.priority}}e.from=t})(Dv||(Dv={}));var $v;(function(e){function t(i,r,n){const s=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{command:r.toInternal(s,n),label:i.label,description:i.description,detail:i.detail,documentation:i.documentation}}e.from=t})($v||($v={}));var Iv;(function(e){function t(i){return{transientOutputs:i?.transientOutputs??!1,transientCellMetadata:i?.transientCellMetadata??{},transientDocumentMetadata:i?.transientDocumentMetadata??{},cellContentMetadata:i?.cellContentMetadata??{}}}e.from=t})(Iv||(Iv={}));var Xf;(function(e){function t(r){return{uri:r.uri,provides:r.provides}}e.from=t;function i(r){return new GE(E.revive(r.uri),r.provides)}e.to=i})(Xf||(Xf={}));var mc;(function(e){function t(r){return{message:Ge.fromStrict(r.message)||"",type:Kr.Error,expected:r.expectedOutput,actual:r.actualOutput,contextValue:r.contextValue,location:r.location&&{range:W.from(r.location.range),uri:r.location.uri},stackTrace:r.stackTrace?.map(n=>({label:n.label,position:n.position&&lt.from(n.position),uri:n.uri&&E.revive(n.uri).toJSON()}))}}e.from=t;function i(r){const n=new yf(typeof r.message=="string"?r.message:Ge.to(r.message));return n.actualOutput=r.actual,n.expectedOutput=r.expected,n.contextValue=r.contextValue,n.location=r.location?Yi.to(r.location):void 0,n}e.to=i})(mc||(mc={}));var an;(function(e){e.namespace=td,e.denamespace=o5})(an||(an={}));var Xs;(function(e){function t(r){const n=cd(r).controllerId;return{extId:Ze.fromExtHostTestItem(r,n).toString(),label:r.label,uri:E.revive(r.uri),busy:r.busy,tags:r.tags.map(s=>an.namespace(n,s.id)),range:mt.lift(W.from(r.range)),description:r.description||null,sortText:r.sortText||null,error:r.error&&Ge.fromStrict(r.error)||null}}e.from=t;function i(r){return{parent:void 0,error:void 0,id:Ze.fromString(r.extId).localId,label:r.label,uri:E.revive(r.uri),tags:(r.tags||[]).map(n=>{const{tagId:s}=an.denamespace(n);return new ru(s)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:W.to(r.range||void 0),canResolveChildren:!1,busy:r.busy,description:r.description||void 0,sortText:r.sortText||void 0}}e.toPlain=i})(Xs||(Xs={})),function(e){function t(r){return{id:r.id}}e.from=t;function i(r){return new ru(r.id)}e.to=i}(an||(an={}));var Av;(function(e){const t=(r,n)=>{const s=r.value;if(!s)return;const o={...Xs.toPlain(s.item),parent:n,taskStates:s.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===Kr.Error).map(mc.to)})),children:[]};if(r.children)for(const a of r.children.values()){const c=t(a,o);c&&o.children.push(c)}return o};function i(r){const n=new m$;for(const a of r.items)n.insert(Ze.fromString(a.item.extId).path,a);const s=[n.nodes],o=[];for(;s.length;)for(const a of s.pop())a.value?o.push(a):a.children&&s.push(a.children.values());return{completedAt:r.completedAt,results:o.map(a=>t(a)).filter(bo)}}e.to=i})(Av||(Av={}));var Zf;(function(e){function t(s){return{covered:s.covered,total:s.total}}function i(s){return"line"in s?lt.from(s):W.from(s)}function r(s){if(typeof s.executed=="number"&&s.executed<0)throw new Error(`Invalid coverage count ${s.executed}`);return"branches"in s?{count:s.executed,location:i(s.location),type:Na.Statement,branches:s.branches.length?s.branches.map(o=>({count:o.executed,location:o.location&&i(o.location),label:o.label})):void 0}:{type:Na.Declaration,name:s.name,count:s.executed,location:i(s.location)}}e.fromDetails=r;function n(s,o,a){return Sf(a.statementCoverage),Sf(a.branchCoverage),Sf(a.declarationCoverage),{id:o,uri:a.uri,statement:t(a.statementCoverage),branch:a.branchCoverage&&t(a.branchCoverage),declaration:a.declarationCoverage&&t(a.declarationCoverage),testIds:a instanceof nu&&a.fromTests.length?a.fromTests.map(c=>Ze.fromExtHostTestItem(c,s).toString()):void 0}}e.fromFile=n})(Zf||(Zf={}));var Pv;(function(e){function t(i){switch(i){case Gh.Invoke:return Ul.Invoke;case Gh.Auto:return Ul.Automatic}}e.to=t})(Pv||(Pv={}));var Xo;(function(e){function t(r){const n=new G1(Tr.to(r.kind),r.name,r.detail||"",E.revive(r.uri),W.to(r.range),W.to(r.selectionRange));return n._sessionId=r._sessionId,n._itemId=r._itemId,n}e.to=t;function i(r,n,s){if(n=n??r._sessionId,s=s??r._itemId,n===void 0||s===void 0)throw new Error("invalid item");return{_sessionId:n,_itemId:s,kind:Tr.from(r.kind),name:r.name,detail:r.detail??"",uri:r.uri,range:W.from(r.range),selectionRange:W.from(r.selectionRange),tags:r.tags?.map(ss.from)}}e.from=i})(Xo||(Xo={}));var Yf;(function(e){function t(i){if(i)return{value:i.value,tooltip:i.tooltip}}e.from=t})(Yf||(Yf={}));var Kf;(function(e){function t(s,o,a){const c=o.fileData;return c?new _A(new CA(c.name,E.revive(c.uri),c.id,Ig(()=>a(c.id)))):s===zn.uriList&&o.uriListData?new Kd(n(o.uriListData)):new Kd(o.asString)}e.to=t;async function i(s,o){const a=await o.asString();if(s===zn.uriList)return{asString:a,fileData:void 0,uriListData:r(a)};const c=o.asFile();return{asString:a,fileData:c?{name:c.name,uri:c.uri,id:c._itemId??c.id}:void 0}}e.from=i;function r(s){return ym.split(s).map(o=>{if(o.startsWith("#"))return o;try{return E.parse(o)}catch{}return o})}function n(s){return ym.create(s.map(o=>typeof o=="string"?o:E.revive(o)))}})(Kf||(Kf={}));var Zs;(function(e){function t(r,n){const s=r.items.map(([o,a])=>[o,Kf.to(o,a,n)]);return new Vl(s)}e.toDataTransfer=t;async function i(r){const n={items:[]},s=[];for(const[o,a]of r)s.push((async()=>{n.items.push([o,await Kf.from(o,a)])})());return await Promise.all(s),n}e.from=i})(Zs||(Zs={}));var yu;(function(e){function t(r,n){return{kind:"reply",agentId:r.participant??n?.agentId??"",subCommand:r.command??n?.command,message:r.prompt,title:r.label}}e.from=t;function i(r){return{prompt:r.message,label:r.title,participant:r.agentId,command:r.subCommand}}e.to=i})(yu||(yu={}));var ep;(function(e){function t(r){switch(r){case Zn.System:return Rr.System;case Zn.User:return Rr.User;case Zn.Assistant:return Rr.Assistant}}e.to=t;function i(r){switch(r){case Rr.System:return Zn.System;case Rr.User:return Zn.User;case Rr.Assistant:return Zn.Assistant}return Zn.User}e.from=i})(ep||(ep={}));var vc;(function(e){function t(r){let n="",s;r.content.type==="text"?n=r.content.value:s=new Tf(r.content.name,r.content.value,r.content.isError);const o=ep.to(r.role),a=new s7(o,n,r.name);return s!==void 0&&(a.content2=s),a}e.to=t;function i(r){const n=ep.from(r.role),s=r.name;let o;return r.content2 instanceof Tf?o={type:"function_result",name:r.content2.name,value:r.content2.content,isError:r.content2.isError}:o={type:"text",value:r.content},{role:n,name:s,content:o}}e.from=i})(vc||(vc={}));var Eu;(function(e){function t(r){return{kind:"markdownContent",content:Ge.from(r.value)}}e.from=t;function i(r){return new kf(Ge.to(r.content))}e.to=i})(Eu||(Eu={}));var tp;(function(e){function t(r){return{kind:"markdownVuln",content:Ge.from(r.value),vulnerabilities:r.vulnerabilities}}e.from=t;function i(r){return new ou(Ge.to(r.content),r.vulnerabilities)}e.to=i})(tp||(tp={}));var ip;(function(e){function t(r){return{kind:"agentDetection",agentId:r.participant,command:r.command}}e.from=t;function i(r){return new au(r.agentId,r.command)}e.to=i})(ip||(ip={}));var rp;(function(e){function t(i){return{kind:"confirmation",title:i.title,message:i.message,data:i.data,buttons:i.buttons}}e.from=t})(rp||(rp={}));var Su;(function(e){function t(r){const{value:n,baseUri:s}=r;function o(a,c){return a.map(l=>{const u=E.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:Ls(s),uri:s,children:o(n,s)}}}e.from=t;function i(r){const n=Gi(r.treeData);function s(c){return c.map(l=>({name:l.label,children:l.children&&s(l.children)}))}const o=n.uri,a=n.children?s(n.children):[];return new $f(a,o)}e.to=i})(Su||(Su={}));var xu;(function(e){function t(r){const n=s=>E.isUri(s);return{kind:"inlineReference",name:r.title,inlineReference:n(r.value)?r.value:Gs.from(r.value)}}e.from=t;function i(r){const n=Gi(r);return new If(E.isUri(n.inlineReference)?n.inlineReference:Gs.to(n.inlineReference),r.name)}e.to=i})(xu||(xu={}));var wc;(function(e){function t(r){return{kind:"progressMessage",content:Ge.from(r.value)}}e.from=t;function i(r){return new cu(r.content.value)}e.to=i})(wc||(wc={}));var ku;(function(e){function t(r){return{kind:"warning",content:Ge.from(r.value)}}e.from=t;function i(r){return new lu(r.content.value)}e.to=i})(ku||(ku={}));var Rv;(function(e){function t(r){return{kind:"move",uri:r.uri,range:W.from(r.range)}}e.from=t;function i(r){return new Rf(E.revive(r.uri),W.to(r.range))}e.to=i})(Rv||(Rv={}));var Tv;(function(e){function t(i){return{kind:"progressTask",content:Ge.from(i.value)}}e.from=t})(Tv||(Tv={}));var Lv;(function(e){function t(i){return{kind:"progressTaskResult",content:typeof i=="string"?Ge.from(i):void 0}}e.from=t})(Lv||(Lv={}));var Du;(function(e){function t(r,n,s){return{kind:"command",command:n.toInternal(r.value,s)??{command:r.value.command,title:r.value.title}}}e.from=t;function i(r,n){return new Af(n.fromInternal(r.command)??{command:r.command.id,title:r.command.title})}e.to=i})(Du||(Du={}));var np;(function(e){function t(r){return{kind:"textEdit",uri:r.uri,edits:r.edits.map(n=>gi.from(n))}}e.from=t;function i(r){return new uu(E.revive(r.uri),r.edits.map(n=>gi.to(n)))}e.to=i})(np||(np={}));var os;(function(e){function t(r){const n=Ai.isThemeIcon(r.iconPath)?r.iconPath:E.isUri(r.iconPath)?{light:E.revive(r.iconPath)}:r.iconPath&&"light"in r.iconPath&&"dark"in r.iconPath&&E.isUri(r.iconPath.light)&&E.isUri(r.iconPath.dark)?{light:E.revive(r.iconPath.light),dark:E.revive(r.iconPath.dark)}:void 0;return typeof r.value=="object"&&"variableName"in r.value?{kind:"reference",reference:{variableName:r.value.variableName,value:E.isUri(r.value.value)||!r.value.value?r.value.value:Gs.from(r.value.value)},iconPath:n,options:r.options}:{kind:"reference",reference:E.isUri(r.value)||typeof r.value=="string"?r.value:Gs.from(r.value),iconPath:n,options:r.options}}e.from=t;function i(r){const n=Gi(r),s=o=>E.isUri(o)?o:Gs.to(o);return new rs(typeof n.reference=="string"?n.reference:"variableName"in n.reference?{variableName:n.reference.variableName,value:n.reference.value&&s(n.reference.value)}:s(n.reference))}e.to=i})(os||(os={}));var sp;(function(e){function t(i){return{kind:"codeCitation",value:i.value,license:i.license,snippet:i.snippet}}e.from=t})(sp||(sp={}));var op;(function(e){function t(n,s,o){return n instanceof kf?Eu.from(n):n instanceof If?xu.from(n):n instanceof rs?os.from(n):n instanceof cu?wc.from(n):n instanceof $f?Su.from(n):n instanceof Af?Du.from(n,s,o):n instanceof uu?np.from(n):n instanceof ou?tp.from(n):n instanceof au?ip.from(n):n instanceof lu?ku.from(n):n instanceof Df?rp.from(n):n instanceof Pf?sp.from(n):n instanceof Rf?Rv.from(n):{kind:"markdownContent",content:Ge.from("")}}e.from=t;function i(n,s){switch(n.kind){case"reference":return os.to(n);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return r(n,s)}}e.to=i;function r(n,s){switch(n.kind){case"markdownContent":return Eu.to(n);case"inlineReference":return xu.to(n);case"progressMessage":return;case"treeData":return Su.to(n);case"command":return Du.to(n,s)}}e.toContent=r})(op||(op={}));var ap;(function(e){function t(i,r){const n=i.variables.variables.filter(o=>o.isTool),s=i.variables.variables.filter(o=>!o.isTool);return{prompt:i.message,command:i.command,attempt:i.attempt??0,enableCommandDetection:i.enableCommandDetection??!0,references:s.map(cp.to),toolReferences:n.map(lp.to),location:bc.to(i.location),acceptedConfirmationData:i.acceptedConfirmationData,rejectedConfirmationData:i.rejectedConfirmationData,location2:r}}e.to=t})(ap||(ap={}));var bc;(function(e){function t(r){switch(r){case Xi.Notebook:return sn.Notebook;case Xi.Terminal:return sn.Terminal;case Xi.Panel:return sn.Panel;case Xi.Editor:return sn.Editor}}e.to=t;function i(r){switch(r){case sn.Notebook:return Xi.Notebook;case sn.Terminal:return Xi.Terminal;case sn.Panel:return Xi.Panel;case sn.Editor:return Xi.Editor}}e.from=i})(bc||(bc={}));var cp;(function(e){function t(i){const r=i.value;if(!r)throw new Error("Invalid value reference");return{id:i.id,name:i.name,range:i.range&&[i.range.start,i.range.endExclusive],value:jb(r)?E.revive(r):r&&typeof r=="object"&&"uri"in r&&"range"in r&&jb(r.uri)?Gs.to(Gi(r)):r,modelDescription:i.modelDescription}}e.to=t})(cp||(cp={}));var lp;(function(e){function t(i){if(i.value)throw new Error("Invalid tool reference");return{id:i.id,range:i.range&&[i.range.start,i.range.endExclusive]}}e.to=t})(lp||(lp={}));var _v;(function(e){function t(i,r,n){return{id:i.id,label:i.label,fullName:i.fullName,icon:i.icon?.id,value:i.values[0].value,insertText:i.insertText,detail:i.detail,documentation:i.documentation,command:r.toInternal(i.command,n)}}e.from=t})(_v||(_v={}));var yc;(function(e){function t(i){return{errorDetails:i.errorDetails,metadata:i.metadata,nextQuestion:i.nextQuestion}}e.to=t})(yc||(yc={}));var Cv;(function(e){function t(i,r,n){if(r.action.kind==="vote")return;const s=yc.to(i);if(r.action.kind==="command"){const o=r.action.commandButton.command;return{action:{kind:"command",commandButton:{command:n.fromInternal(o)??{command:o.id,title:o.title}}},result:s}}else return r.action.kind==="followUp"?{action:{kind:"followUp",followup:yu.to(r.action.followup)},result:s}:r.action.kind==="inlineChat"?{action:{kind:"editor",accepted:r.action.action==="accepted"},result:s}:{action:r.action,result:s}}e.to=t})(Cv||(Cv={}));var up;(function(e){function t(r){return{...r,string:r.toString()}}e.from=t;function i(r){const n={...r,toString:()=>r.string};return delete n.string,n}e.to=i})(up||(up={}));var hp;(function(e){function t(i,r,n){return"terminalCommand"in i?{terminalCommand:i.terminalCommand,shouldExecute:i.shouldExecute}:"uri"in i?{uri:i.uri}:r.toInternal(i,n)}e.from=t})(hp||(hp={}));var Nv;(function(e){function t(i){return{kind:Ov.to(i.kind)}}e.to=t})(Nv||(Nv={}));var Ov;(function(e){function t(i){switch(i){case gl.Word:return Uo.Word;case gl.Line:return Uo.Line;case gl.Suggest:return Uo.Suggest;default:return Uo.Unknown}}e.to=t})(Ov||(Ov={}));var Fv;(function(e){function t(i,r){return{id:r,label:i.label,description:i.description,canEdit:i.canEdit,collapsibleState:i.collapsibleState||Ym.None,contextValue:i.contextValue}}e.from=t})(Fv||(Fv={}));var Mv;(function(e){function t(i){return{id:i.id,modelDescription:i.modelDescription,parametersSchema:i.parametersSchema,displayName:i.displayName}}e.to=t})(Mv||(Mv={}));var Zo=class{constructor(e,t,i){this.uri=e,this.ranges=t,this.previewText=i}},a7=class{constructor(e,t,i){this.uri=e,this.text=t,this.lineNumber=i}},as;(function(e){e[e.None=1]="None",e[e.FilesExclude=2]="FilesExclude",e[e.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(as||(as={}));var dp;(function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"})(dp||(dp={}));var c7=2e4,l7="\u27EA ",u7=" characters skipped \u27EB",KA=(l7.length+u7.length+5)*2,HF=K("searchService"),h7;(function(e){e[e.file=0]="file",e[e.text=1]="text",e[e.aiText=2]="aiText"})(h7||(h7={}));var Ec;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.aiText=3]="aiText"})(Ec||(Ec={}));function eP(e){return!!e.rangeLocations&&!!e.previewText}var d7;(function(e){e[e.Normal=0]="Normal",e[e.NewSearchStarted=1]="NewSearchStarted"})(d7||(d7={}));var tP=class{constructor(e,t,i,r){this.rangeLocations=[],this.webviewIndex=r;const n=Array.isArray(t)?t:[t];if(i&&i.matchLines===1&&iP(n)){e=dk(e,i.matchLines);let s="",o=0,a=0;const c=Math.floor(i.charsPerLine/5);for(const l of n){const u=Math.max(l.startColumn-c,0),h=l.startColumn+i.charsPerLine;if(u>a+c+KA){const f=l7+(u-a)+u7;s+=f+e.slice(u,h),o+=u-(a+f.length)}else s+=e.slice(a,h);a=h,this.rangeLocations.push({source:l,preview:new rP(0,l.startColumn-o,l.endColumn-o)})}this.previewText=s}else{const s=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber,o=kg(t,a=>({preview:new f7(a.startLineNumber-s,a.startColumn,a.endLineNumber-s,a.endColumn),source:a}));this.rangeLocations=Array.isArray(o)?o:[o],this.previewText=e}}};function iP(e){const t=e[0].startLineNumber;for(const i of e)if(i.startLineNumber!==t||i.endLineNumber!==t)return!1;return!0}var f7=class{constructor(e,t,i,r){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=r}},rP=class extends f7{constructor(e,t,i){super(e,t,e,i)}},p7;(function(e){e.List="list",e.Tree="tree"})(p7||(p7={}));var g7;(function(e){e.Default="default",e.FileNames="fileNames",e.Type="type",e.Modified="modified",e.CountDescending="countDescending",e.CountAscending="countAscending"})(g7||(g7={}));function nP(e,t=!0){const i=e&&e.files&&e.files.exclude,r=t&&e&&e.search&&e.search.exclude;if(!i&&!r)return;if(!i||!r)return i||r||void 0;let n=Object.create(null);return n=ko(n,Tt(i)),n=ko(n,Tt(r),!0),n}function m7(e,t){return e.excludePattern&&Rl(e.excludePattern,t)?!1:e.includePattern||e.usingSearchPaths?e.includePattern&&Rl(e.includePattern,t)?!0:e.usingSearchPaths?!!e.folderQueries&&e.folderQueries.some(i=>{const r=i.folder.fsPath;if(Ah(t,r)){const n=Yc(r,t);return!i.includePattern||!!Rl(i.includePattern,n)}else return!1}):!1:!0}var v7;(function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"})(v7||(v7={}));function fp(e,t){const i={...e||{},...t||{}};return Object.keys(i).filter(r=>{const n=i[r];return typeof n=="boolean"&&n})}var w7=class{constructor(e,t){this.c=null,this.a={...e.excludePattern||{},...t.excludePattern?.pattern||{}},this.b=Ba(this.a);let i=e.includePattern;t.includePattern&&(i?i={...i,...t.includePattern}:i=t.includePattern),i&&(this.c=Ba(i))}matchesExcludesSync(e,t,i){return!!(this.b&&this.b(e,t,i))}includedInQuerySync(e,t,i){return!(this.b&&this.b(e,t,i)||this.c&&!this.c(e,t,i))}includedInQuery(e,t,i){const r=this.b(e,t,i),n=()=>this.c?!!this.c(e,t,i):!0;return _s(r)?r.then(s=>s?!1:n()):n()}hasSiblingExcludeClauses(){return sP(this.a)}};function sP(e){for(const t in e)if(typeof e[t]!="boolean")return!0;return!1}function oP(e){if(!e)return;let t;return i=>(t||(t=(e()||Promise.resolve([])).then(r=>r?b7(r):{})),t.then(r=>!!r[i]))}function aP(e){if(!e)return;let t;return i=>{if(!t){const r=e();t=r?b7(r):{}}return!!t[i]}}function b7(e){const t={};for(const i of e)t[i]=!0;return t}function y7(e,t){return t.map(i=>e?{baseUri:e,pattern:i}:i)}function $u(e,t,i){return new il(r=>Uv(r,i)).isEqual(e,t)}function cP(e,t,i){return $u(e.uri,t.uri,i)?0:wo(e.uri.toString(),t.uri.toString())}function lP(e,t,i){return e.index!==t.index?e.index<t.index?-1:1:$u(e.uri,t.uri,i)?wo(e.name,t.name):wo(e.uri.toString(),t.uri.toString())}function E7(e,t,i,r){const n=e.slice(0).sort((o,a)=>i(o,a,r)),s=t.slice(0).sort((o,a)=>i(o,a,r));return PS(n,s,(o,a)=>i(o,a,r))}function Uv(e,t){const i=t.getCapabilities(e.scheme);return!(i&&i&vn.PathCaseSensitive)}var Bv=class ib extends JD{static toExtHostWorkspace(t,i,r,n){if(!t)return{workspace:null,added:[],removed:[]};const{id:s,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=t,h=[],f=i;i?a.forEach((k,I)=>{const R=E.revive(k.uri),N=ib.o(r||i,R,n);N?(N.name=k.name,N.index=k.index,h.push(N)):h.push({uri:R,name:k.name,index:I})}):h.push(...a.map(({uri:k,name:I,index:R})=>({uri:E.revive(k),name:I,index:R}))),h.sort((k,I)=>k.index<I.index?-1:1);const g=new ib(s,o,h,!!l,c?E.revive(c):null,!!u,k=>Uv(k,n)),{added:m,removed:b}=E7(f?f.workspaceFolders:[],g.workspaceFolders,cP,n);return{workspace:g,added:m,removed:b}}static o(t,i,r){for(let n=0;n<t.folders.length;n++){const s=t.workspaceFolders[n];if($u(s.uri,i,r))return s}}constructor(t,i,r,n,s,o,a){super(t,r.map(c=>new u4(c)),n,s,a),this.t=i,this.u=o,this.q=[],this.s=Wn.forUris(a,()=>!0),r.forEach(c=>{this.q.push(c),this.s.set(c.uri,c)})}get name(){return this.t}get isUntitled(){return this.u}get workspaceFolders(){return this.q.slice(0)}getWorkspaceFolder(t,i){return i&&this.s.get(t)&&(t=Xg(t)),this.s.findSubstr(t)}resolveWorkspaceFolder(t){return this.s.get(t)}},Hv=class{constructor(t,i,r,n,s){this.c=new C,this.onDidChangeWorkspace=this.c.event,this.g=new C,this.onDidGrantWorkspaceTrust=this.g.event,this.u=[],this.v=!1,this.w=new Map,this.A=0,this.B=new qc,this.C=new Map,this.h=n,this.s=r,this.t=s,this.j=new zD,this.k=new gn,this.o=t.getProxy(se.MainThreadWorkspace),this.q=t.getProxy(se.MainThreadMessageService);const o=i.workspace;this.l=o?new Bv(o.id,o.name,[],!!o.transient,o.configuration?E.revive(o.configuration):null,!!o.isUntitled,a=>Uv(a,r)):void 0}$initializeWorkspace(t,i){this.v=i,this.$acceptWorkspaceData(t),this.k.open()}waitForInitializeCall(){return this.k.wait()}get workspace(){return this.x}get name(){return this.x?this.x.name:void 0}get workspaceFile(){if(this.x&&this.x.configuration)return this.x.isUntitled?E.from({scheme:de.untitled,path:Ls(Xg(this.x.configuration))}):this.x.configuration}get x(){return this.n||this.l}getWorkspaceFolders(){if(this.x)return this.x.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this.k.wait(),!!this.x)return this.x.workspaceFolders.slice(0)}updateWorkspaceFolders(t,i,r,...n){const s=[];if(Array.isArray(n)&&n.forEach(u=>{E.isUri(u.uri)&&!s.some(h=>$u(h.uri,u.uri,this.s))&&s.push({uri:u.uri,name:u.name||Jg(u.uri)})}),this.n||[i,r].some(u=>typeof u!="number"||u<0)||r===0&&s.length===0)return!1;const o=this.x?this.x.workspaceFolders:[];if(i+r>o.length)return!1;const a=o.slice(0);a.splice(i,r,...s.map(u=>({uri:u.uri,name:u.name||Jg(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const h=a[u];if(a.some((f,g)=>g!==u&&$u(h.uri,f.uri,this.s)))return!1}a.forEach((u,h)=>u.index=h);const{added:c,removed:l}=E7(o,a,lP,this.s);if(c.length===0&&l.length===0)return!1;if(this.o){const u=t.displayName||t.name;this.o.$updateWorkspaceFolders(u,i,r,s).then(void 0,h=>{this.n=void 0;const f={source:{identifier:t.identifier,label:t.displayName||t.name}};this.q.$showMessage(QD.Error,d(2716,null,u,h.toString()),f,[])})}return this.y(a),!0}getWorkspaceFolder(t,i){if(this.x)return this.x.getWorkspaceFolder(t,i)}async getWorkspaceFolder2(t,i){if(await this.k.wait(),!!this.x)return this.x.getWorkspaceFolder(t,i)}async resolveWorkspaceFolder(t){if(await this.k.wait(),!!this.x)return this.x.resolveWorkspaceFolder(t)}getPath(){if(!this.x)return;const{folders:t}=this.x;if(t.length!==0)return t[0].uri.fsPath}getRelativePath(t,i){let r,n="";if(typeof t=="string"?(r=E.file(t),n=t):typeof t<"u"&&(r=t,n=t.fsPath),!r)return n;const s=this.getWorkspaceFolder(r,!0);if(!s)return n;typeof i>"u"&&this.x&&(i=this.x.folders.length>1);let o=ky(s.uri,r);return i&&s.name&&(o=`${s.name}/${o}`),o}y(t){this.x&&(this.n=Bv.toExtHostWorkspace({id:this.x.id,name:this.x.name,configuration:this.x.configuration,folders:t,isUntitled:this.x.isUntitled},this.x,void 0,this.s).workspace||void 0)}$acceptWorkspaceData(t){const{workspace:i,added:r,removed:n}=Bv.toExtHostWorkspace(t,this.l,this.n,this.s);this.l=i||void 0,this.n=void 0,this.c.fire(Object.freeze({added:r,removed:n}))}findFiles(t,i,r,n,s=Wt.None){this.h.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${n.value}, entryPoint: findFiles`);let o="",a=!0;return i===null?a=!1:i!==void 0&&(typeof i=="string"?o=i:o=i.pattern),this.z(t,void 0,{exclude:o,maxResults:r,useDefaultExcludes:a,useDefaultSearchExcludes:!1,useIgnoreFiles:!1},s)}findFiles2(t,i={},r,n=Wt.None){return this.h.trace(`extHostWorkspace#findFiles2: fileSearch, extension: ${r.value}, entryPoint: findFiles2`),this.z(void 0,t,i,n)}async z(t,i,r,n=Wt.None){if(n&&n.isCancellationRequested)return Promise.resolve([]);const s=typeof r.exclude=="string"?r.exclude:r.exclude?r.exclude.pattern:void 0,o={ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles=="boolean"?!r.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof r.useGlobalIgnoreFiles=="boolean"?!r.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof r.useParentIgnoreFiles=="boolean"?!r.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof r.useDefaultExcludes=="boolean"?!r.useDefaultExcludes:!1,disregardSearchExcludeSettings:typeof r.useDefaultSearchExcludes=="boolean"?!r.useDefaultSearchExcludes:!1,maxResults:r.maxResults,excludePattern:s,shouldGlobSearch:typeof r.fuzzy=="boolean"?!r.fuzzy:!0,_reason:"startFileSearch"};let a;if(t){const{includePattern:c,folder:l}=jv(fr.from(t));a=l,o.includePattern=c}else{const{includePattern:c,folder:l}=jv(fr.from(i));a=l,o.filePattern=c}return this.o.$startFileSearch(a??null,o,n).then(c=>Array.isArray(c)?c.map(l=>E.revive(l)):[])}async findTextInFiles(t,i,r,n,s=Wt.None){this.h.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${n.value}, entryPoint: findTextInFiles`);const o=this.j.getNext(),a=typeof i.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:i.previewOptions,{includePattern:c,folder:l}=jv(fr.from(i.include)),u=typeof i.exclude=="string"?i.exclude:i.exclude?i.exclude.pattern:void 0,h={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useGlobalIgnoreFiles=="boolean"?!i.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof i.useParentIgnoreFiles=="boolean"?!i.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof i.useDefaultExcludes=="boolean"?!i.useDefaultExcludes:!0,disregardSearchExcludeSettings:typeof i.useSearchExclude=="boolean"?!i.useSearchExclude:!0,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:a,surroundingContext:i.afterContext,includePattern:c,excludePattern:u},f=!1;if(this.u[o]=g=>{if(f)return;const m=E.revive(g.resource);g.results.forEach(b=>{const k=Gi(b);eP(k)?r({uri:m,preview:{text:k.previewText,matches:kg(k.rangeLocations,I=>new Be(I.preview.startLineNumber,I.preview.startColumn,I.preview.endLineNumber,I.preview.endColumn))},ranges:kg(k.rangeLocations,I=>new Be(I.source.startLineNumber,I.source.startColumn,I.source.endLineNumber,I.source.endColumn))}):r({uri:m,text:k.text,lineNumber:k.lineNumber})})},s.isCancellationRequested)return{};try{const g=await this.o.$startTextSearch(t,l??null,h,o,s);return delete this.u[o],g||{}}catch(g){throw delete this.u[o],g}}$handleTextSearchResult(t,i){this.u[i]?.(t)}async save(t){const i=await this.o.$save(t,{saveAs:!1});return E.revive(i)}async saveAs(t){const i=await this.o.$save(t,{saveAs:!0});return E.revive(i)}saveAll(t){return this.o.$saveAll(t)}resolveProxy(t){return this.o.$resolveProxy(t)}lookupAuthorization(t){return this.o.$lookupAuthorization(t)}lookupKerberosAuthorization(t){return this.o.$lookupKerberosAuthorization(t)}loadCertificates(){return this.o.$loadCertificates()}get trusted(){return this.v}requestWorkspaceTrust(t){return this.o.$requestWorkspaceTrust(t)}$onDidGrantWorkspaceTrust(){this.v||(this.v=!0,this.g.fire())}registerEditSessionIdentityProvider(t,i){if(this.w.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.w.set(t,i);const r=this.t.transformOutgoingScheme(t),n=this.A++;return this.o.$registerEditSessionIdentityProvider(n,r),Ce(()=>{this.w.delete(t),this.o.$unregisterEditSessionIdentityProvider(n)})}async $getEditSessionIdentifier(t,i){this.h.info("Getting edit session identifier for workspaceFolder",t);const r=await this.resolveWorkspaceFolder(E.revive(t));if(!r){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",r);const n=this.w.get(r.uri.scheme);if(this.h.info(`Provider for scheme ${r.uri.scheme} is defined: `,!!n),!n)return;const s=await n.provideEditSessionIdentity(r,i);if(this.h.info("Provider returned edit session identifier: ",s),!!s)return s}async $provideEditSessionIdentityMatch(t,i,r,n){this.h.info("Getting edit session identifier for workspaceFolder",t);const s=await this.resolveWorkspaceFolder(E.revive(t));if(!s){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",s);const o=this.w.get(s.uri.scheme);if(this.h.info(`Provider for scheme ${s.uri.scheme} is defined: `,!!o),!o)return;const a=await o.provideEditSessionIdentityMatch?.(i,r,n);if(this.h.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(t){return(i,r,n)=>{const s=function(a){i.call(r,a)};return s.extension=t,this.B.event(s,void 0,n)}}async $onWillCreateEditSessionIdentity(t,i,r){const n=await this.resolveWorkspaceFolder(E.revive(t));if(n===void 0)throw new Error("Unable to resolve workspace folder");await this.B.fireAsync({workspaceFolder:n},i,async(s,o)=>{const a=Date.now();await Promise.resolve(s),Date.now()-a>r&&this.h.warn("SLOW edit session create-participant",o.extension.identifier)}),i.isCancellationRequested}registerCanonicalUriProvider(t,i){if(this.C.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.C.set(t,i);const r=this.t.transformOutgoingScheme(t),n=this.A++;return this.o.$registerCanonicalUriProvider(n,r),Ce(()=>{this.C.delete(t),this.o.$unregisterCanonicalUriProvider(n)})}async provideCanonicalUri(t,i,r){const n=this.C.get(t.scheme);if(!n)return;const s=await n.provideCanonicalUri?.(E.revive(t),i,r);if(s)return s}async $provideCanonicalUri(t,i,r){return this.provideCanonicalUri(E.revive(t),{targetScheme:i},r)}};Hv=__decorate([__param(0,at),__param(1,Ci),__param(2,xa),__param(3,ut),__param(4,_h)],Hv);var cs=K("IExtHostWorkspace");function jv(e){let t,i;return e&&(typeof e=="string"?t=e:(t=e.pattern,i=E.revive(e.baseUri))),{includePattern:t,folder:i}}var mi;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(mi||(mi={}));var Ee;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(Ee||(Ee={}));var Mt;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(Mt||(Mt={}));var Wv;(function(e){e.DEFAULT={allowTrailingComma:!0}})(Wv||(Wv={}));function uP(e,t=!1){let i=0;const r=e.length;let n="",s=0,o=Ee.Unknown,a=mi.None;function c(b){let k=0,I=0;for(;k<b;){const R=e.charCodeAt(i);if(R>=ue._0&&R<=ue._9)I=I*16+R-ue._0;else if(R>=ue.A&&R<=ue.F)I=I*16+R-ue.A+10;else if(R>=ue.a&&R<=ue.f)I=I*16+R-ue.a+10;else break;i++,k++}return k<b&&(I=-1),I}function l(b){i=b,n="",s=0,o=Ee.Unknown,a=mi.None}function u(){const b=i;if(e.charCodeAt(i)===ue._0)i++;else for(i++;i<e.length&&Sc(e.charCodeAt(i));)i++;if(i<e.length&&e.charCodeAt(i)===ue.dot)if(i++,i<e.length&&Sc(e.charCodeAt(i)))for(i++;i<e.length&&Sc(e.charCodeAt(i));)i++;else return a=mi.UnexpectedEndOfNumber,e.substring(b,i);let k=i;if(i<e.length&&(e.charCodeAt(i)===ue.E||e.charCodeAt(i)===ue.e))if(i++,(i<e.length&&e.charCodeAt(i)===ue.plus||e.charCodeAt(i)===ue.minus)&&i++,i<e.length&&Sc(e.charCodeAt(i))){for(i++;i<e.length&&Sc(e.charCodeAt(i));)i++;k=i}else a=mi.UnexpectedEndOfNumber;return e.substring(b,k)}function h(){let b="",k=i;for(;;){if(i>=r){b+=e.substring(k,i),a=mi.UnexpectedEndOfString;break}const I=e.charCodeAt(i);if(I===ue.doubleQuote){b+=e.substring(k,i),i++;break}if(I===ue.backslash){if(b+=e.substring(k,i),i++,i>=r){a=mi.UnexpectedEndOfString;break}switch(e.charCodeAt(i++)){case ue.doubleQuote:b+='"';break;case ue.backslash:b+="\\";break;case ue.slash:b+="/";break;case ue.b:b+="\b";break;case ue.f:b+="\f";break;case ue.n:b+=`
`;break;case ue.r:b+="\r";break;case ue.t:b+="	";break;case ue.u:{const N=c(4);N>=0?b+=String.fromCharCode(N):a=mi.InvalidUnicode;break}default:a=mi.InvalidEscapeCharacter}k=i;continue}if(I>=0&&I<=31)if(pp(I)){b+=e.substring(k,i),a=mi.UnexpectedEndOfString;break}else a=mi.InvalidCharacter;i++}return b}function f(){if(n="",a=mi.None,s=i,i>=r)return s=r,o=Ee.EOF;let b=e.charCodeAt(i);if(zv(b)){do i++,n+=String.fromCharCode(b),b=e.charCodeAt(i);while(zv(b));return o=Ee.Trivia}if(pp(b))return i++,n+=String.fromCharCode(b),b===ue.carriageReturn&&e.charCodeAt(i)===ue.lineFeed&&(i++,n+=`
`),o=Ee.LineBreakTrivia;switch(b){case ue.openBrace:return i++,o=Ee.OpenBraceToken;case ue.closeBrace:return i++,o=Ee.CloseBraceToken;case ue.openBracket:return i++,o=Ee.OpenBracketToken;case ue.closeBracket:return i++,o=Ee.CloseBracketToken;case ue.colon:return i++,o=Ee.ColonToken;case ue.comma:return i++,o=Ee.CommaToken;case ue.doubleQuote:return i++,n=h(),o=Ee.StringLiteral;case ue.slash:{const k=i-1;if(e.charCodeAt(i+1)===ue.slash){for(i+=2;i<r&&!pp(e.charCodeAt(i));)i++;return n=e.substring(k,i),o=Ee.LineCommentTrivia}if(e.charCodeAt(i+1)===ue.asterisk){i+=2;const I=r-1;let R=!1;for(;i<I;){if(e.charCodeAt(i)===ue.asterisk&&e.charCodeAt(i+1)===ue.slash){i+=2,R=!0;break}i++}return R||(i++,a=mi.UnexpectedEndOfComment),n=e.substring(k,i),o=Ee.BlockCommentTrivia}return n+=String.fromCharCode(b),i++,o=Ee.Unknown}case ue.minus:if(n+=String.fromCharCode(b),i++,i===r||!Sc(e.charCodeAt(i)))return o=Ee.Unknown;case ue._0:case ue._1:case ue._2:case ue._3:case ue._4:case ue._5:case ue._6:case ue._7:case ue._8:case ue._9:return n+=u(),o=Ee.NumericLiteral;default:for(;i<r&&g(b);)i++,b=e.charCodeAt(i);if(s!==i){switch(n=e.substring(s,i),n){case"true":return o=Ee.TrueKeyword;case"false":return o=Ee.FalseKeyword;case"null":return o=Ee.NullKeyword}return o=Ee.Unknown}return n+=String.fromCharCode(b),i++,o=Ee.Unknown}}function g(b){if(zv(b)||pp(b))return!1;switch(b){case ue.closeBrace:case ue.closeBracket:case ue.openBrace:case ue.openBracket:case ue.doubleQuote:case ue.colon:case ue.comma:case ue.slash:return!1}return!0}function m(){let b;do b=f();while(b>=Ee.LineCommentTrivia&&b<=Ee.Trivia);return b}return{setPosition:l,getPosition:()=>i,scan:t?m:f,getToken:()=>o,getTokenValue:()=>n,getTokenOffset:()=>s,getTokenLength:()=>i-s,getTokenError:()=>a}}function zv(e){return e===ue.space||e===ue.tab||e===ue.verticalTab||e===ue.formFeed||e===ue.nonBreakingSpace||e===ue.ogham||e>=ue.enQuad&&e<=ue.zeroWidthSpace||e===ue.narrowNoBreakSpace||e===ue.mathematicalSpace||e===ue.ideographicSpace||e===ue.byteOrderMark}function pp(e){return e===ue.lineFeed||e===ue.carriageReturn||e===ue.lineSeparator||e===ue.paragraphSeparator}function Sc(e){return e>=ue._0&&e<=ue._9}var ue;(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(ue||(ue={}));function hP(e,t,i=Wv.DEFAULT){const r=uP(e,!1);function n(fe){return fe?()=>fe(r.getTokenOffset(),r.getTokenLength()):()=>!0}function s(fe){return fe?We=>fe(We,r.getTokenOffset(),r.getTokenLength()):()=>!0}const o=n(t.onObjectBegin),a=s(t.onObjectProperty),c=n(t.onObjectEnd),l=n(t.onArrayBegin),u=n(t.onArrayEnd),h=s(t.onLiteralValue),f=s(t.onSeparator),g=n(t.onComment),m=s(t.onError),b=i&&i.disallowComments,k=i&&i.allowTrailingComma;function I(){for(;;){const fe=r.scan();switch(r.getTokenError()){case mi.InvalidUnicode:R(Mt.InvalidUnicode);break;case mi.InvalidEscapeCharacter:R(Mt.InvalidEscapeCharacter);break;case mi.UnexpectedEndOfNumber:R(Mt.UnexpectedEndOfNumber);break;case mi.UnexpectedEndOfComment:b||R(Mt.UnexpectedEndOfComment);break;case mi.UnexpectedEndOfString:R(Mt.UnexpectedEndOfString);break;case mi.InvalidCharacter:R(Mt.InvalidCharacter);break}switch(fe){case Ee.LineCommentTrivia:case Ee.BlockCommentTrivia:b?R(Mt.InvalidCommentToken):g();break;case Ee.Unknown:R(Mt.InvalidSymbol);break;case Ee.Trivia:case Ee.LineBreakTrivia:break;default:return fe}}}function R(fe,We=[],Ae=[]){if(m(fe),We.length+Ae.length>0){let bt=r.getToken();for(;bt!==Ee.EOF;){if(We.indexOf(bt)!==-1){I();break}else if(Ae.indexOf(bt)!==-1)break;bt=I()}}}function N(fe){const We=r.getTokenValue();return fe?h(We):a(We),I(),!0}function z(){switch(r.getToken()){case Ee.NumericLiteral:{let fe=0;try{fe=JSON.parse(r.getTokenValue()),typeof fe!="number"&&(R(Mt.InvalidNumberFormat),fe=0)}catch{R(Mt.InvalidNumberFormat)}h(fe);break}case Ee.NullKeyword:h(null);break;case Ee.TrueKeyword:h(!0);break;case Ee.FalseKeyword:h(!1);break;default:return!1}return I(),!0}function q(){return r.getToken()!==Ee.StringLiteral?(R(Mt.PropertyNameExpected,[],[Ee.CloseBraceToken,Ee.CommaToken]),!1):(N(!1),r.getToken()===Ee.ColonToken?(f(":"),I(),re()||R(Mt.ValueExpected,[],[Ee.CloseBraceToken,Ee.CommaToken])):R(Mt.ColonExpected,[],[Ee.CloseBraceToken,Ee.CommaToken]),!0)}function ee(){o(),I();let fe=!1;for(;r.getToken()!==Ee.CloseBraceToken&&r.getToken()!==Ee.EOF;){if(r.getToken()===Ee.CommaToken){if(fe||R(Mt.ValueExpected,[],[]),f(","),I(),r.getToken()===Ee.CloseBraceToken&&k)break}else fe&&R(Mt.CommaExpected,[],[]);q()||R(Mt.ValueExpected,[],[Ee.CloseBraceToken,Ee.CommaToken]),fe=!0}return c(),r.getToken()!==Ee.CloseBraceToken?R(Mt.CloseBraceExpected,[Ee.CloseBraceToken],[]):I(),!0}function pe(){l(),I();let fe=!1;for(;r.getToken()!==Ee.CloseBracketToken&&r.getToken()!==Ee.EOF;){if(r.getToken()===Ee.CommaToken){if(fe||R(Mt.ValueExpected,[],[]),f(","),I(),r.getToken()===Ee.CloseBracketToken&&k)break}else fe&&R(Mt.CommaExpected,[],[]);re()||R(Mt.ValueExpected,[],[Ee.CloseBracketToken,Ee.CommaToken]),fe=!0}return u(),r.getToken()!==Ee.CloseBracketToken?R(Mt.CloseBracketExpected,[Ee.CloseBracketToken],[]):I(),!0}function re(){switch(r.getToken()){case Ee.OpenBracketToken:return pe();case Ee.OpenBraceToken:return ee();case Ee.StringLiteral:return N(!0);default:return z()}}return I(),r.getToken()===Ee.EOF?i.allowEmptyContent?!0:(R(Mt.ValueExpected,[],[]),!1):re()?(r.getToken()!==Ee.EOF&&R(Mt.EndOfFileExpected,[],[]),!0):(R(Mt.ValueExpected,[],[]),!1)}function Iu(e){return Object.isFrozen(e)?e:e4(e)}var xc=class aa{static createEmptyModel(t){return new aa({},[],[],void 0,t)}constructor(t,i,r,n,s){this.b=t,this.c=i,this.d=r,this.raw=n,this.f=s,this.a=new Map}get rawConfiguration(){if(!this.g)if(this.raw?.length){const t=this.raw.map(i=>{if(i instanceof aa)return i;const r=new dP("",this.f);return r.parseRaw(i),r.configurationModel});this.g=t.reduce((i,r)=>r===i?r:i.merge(r),t[0])}else this.g=this;return this.g}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?dd(this.contents,t):this.contents}inspect(t,i){const r=this;return{get value(){return Iu(r.rawConfiguration.getValue(t))},get override(){return i?Iu(r.rawConfiguration.getOverrideValue(t,i)):void 0},get merged(){return Iu(i?r.rawConfiguration.override(i).getValue(t):r.rawConfiguration.getValue(t))},get overrides(){const n=[];for(const{contents:s,identifiers:o,keys:a}of r.rawConfiguration.overrides){const c=new aa(s,a,[],void 0,r.f).getValue(t);c!==void 0&&n.push({identifiers:o,value:c})}return n.length?Iu(n):void 0}}}getOverrideValue(t,i){const r=this.j(i);return r?t?dd(r,t):r:void 0}getKeysForOverrideIdentifier(t){const i=[];for(const r of this.overrides)r.identifiers.includes(t)&&i.push(...r.keys);return ca(i)}getAllOverrideIdentifiers(){const t=[];for(const i of this.overrides)t.push(...i.identifiers);return ca(t)}override(t){let i=this.a.get(t);return i||(i=this.h(t),this.a.set(t,i)),i}merge(...t){const i=Tt(this.contents),r=Tt(this.overrides),n=[...this.keys],s=this.raw?.length?[...this.raw]:[this];for(const o of t)if(s.push(...o.raw?.length?o.raw:[o]),!o.isEmpty()){this.i(i,o.contents);for(const a of o.overrides){const[c]=r.filter(l=>Nn(l.identifiers,a.identifiers));c?(this.i(c.contents,a.contents),c.keys.push(...a.keys),c.keys=ca(c.keys)):r.push(Tt(a))}for(const a of o.keys)n.indexOf(a)===-1&&n.push(a)}return new aa(i,n,r,s.every(o=>o instanceof aa)?void 0:s,this.f)}h(t){const i=this.j(t);if(!i||typeof i!="object"||!Object.keys(i).length)return this;const r={};for(const n of ca([...Object.keys(this.contents),...Object.keys(i)])){let s=this.contents[n];const o=i[n];o&&(typeof s=="object"&&typeof o=="object"?(s=Tt(s),this.i(s,o)):s=o),r[n]=s}return new aa(r,this.keys,this.overrides,void 0,this.f)}i(t,i){for(const r of Object.keys(i)){if(r in t&&Qt(t[r])&&Qt(i[r])){this.i(t[r],i[r]);continue}t[r]=Tt(i[r])}}j(t){let i=null,r=null;const n=s=>{s&&(r?this.i(r,s):r=Tt(s))};for(const s of this.overrides)s.identifiers.length===1&&s.identifiers[0]===t?i=s.contents:s.identifiers.includes(t)&&n(s.contents);return n(i),r}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,i){this.k(t,i,!0)}setValue(t,i){this.k(t,i,!1)}removeValue(t){const i=this.keys.indexOf(t);i!==-1&&(this.keys.splice(i,1),c3(this.contents,t),En.test(t)&&this.overrides.splice(this.overrides.findIndex(r=>Nn(r.identifiers,$l(t))),1))}k(t,i,r){if(A5(this.contents,t,i,n=>this.f.error(n)),r=r||this.keys.indexOf(t)===-1,r&&this.keys.push(t),En.test(t)){const n=$l(t),s={identifiers:n,keys:Object.keys(this.contents[t]),contents:Wm(this.contents[t],a=>this.f.error(a))},o=this.overrides.findIndex(a=>Nn(a.identifiers,n));o!==-1?this.overrides[o]=s:this.overrides.push(s)}}},dP=class{constructor(e,t){this.f=e,this.g=t,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||xc.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(e,t){if(!Jt(e)){const i=this.h(e);this.parseRaw(i,t)}}reparse(e){this.a&&this.parseRaw(this.a,e)}parseRaw(e,t){this.a=e;const{contents:i,keys:r,overrides:n,restricted:s,hasExcludedProperties:o}=this.i(e,t);this.b=new xc(i,r,n,o?[e]:void 0,this.g),this.c=s||[]}h(e){let t={},i=null,r=[];const n=[],s=[];function o(c){Array.isArray(r)?r.push(c):i!==null&&(r[i]=c)}const a={onObjectBegin:()=>{const c={};o(c),n.push(r),r=c,i=null},onObjectProperty:c=>{i=c},onObjectEnd:()=>{r=n.pop()},onArrayBegin:()=>{const c=[];o(c),n.push(r),r=c,i=null},onArrayEnd:()=>{r=n.pop()},onLiteralValue:o,onError:(c,l,u)=>{s.push({error:c,offset:l,length:u})}};if(e)try{hP(e,a),t=r[0]||{}}catch(c){this.g.error(`Error while parsing settings file ${this.f}: ${c}`),this.d=[c]}return t}i(e,t){const i=ki.as(Ma.Configuration).getConfigurationProperties(),r=this.j(e,i,!0,t);e=r.raw;const n=Wm(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`)),s=Object.keys(e),o=this.l(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`));return{contents:n,keys:s,overrides:o,restricted:r.restricted,hasExcludedProperties:r.hasExcludedProperties}}j(e,t,i,r){let n=!1;if(!r?.scopes&&!r?.skipRestricted&&!r?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:n};const s={},o=[];for(const a in e)if(En.test(a)&&i){const c=this.j(e[a],t,!1,r);s[a]=c.raw,n=n||c.hasExcludedProperties,o.push(...c.restricted)}else{const c=t[a],l=c?typeof c.scope<"u"?c.scope:zt.WINDOW:void 0;c?.restricted&&o.push(a),!r.exclude?.includes(a)&&(r.include?.includes(a)||(l===void 0||r.scopes===void 0||r.scopes.includes(l))&&!(r.skipRestricted&&c?.restricted))?s[a]=e[a]:n=!0}return{raw:s,restricted:o,hasExcludedProperties:n}}l(e,t){const i=[];for(const r of Object.keys(e))if(En.test(r)){const n={};for(const s in e[r])n[s]=e[r][s];i.push({identifiers:$l(r),keys:Object.keys(n),contents:Wm(n,t)})}return i}},fP=class{constructor(e,t,i,r,n,s,o,a,c,l,u,h,f){this.a=e,this.b=t,this.c=i,this.overrideIdentifiers=r,this.d=n,this.f=s,this.g=o,this.h=a,this.i=c,this.j=l,this.k=u,this.l=h,this.m=f}get value(){return Iu(this.c)}n(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}},Vv=class V8{constructor(t,i,r,n,s,o,a,c,l,u){this.j=t,this.l=i,this.m=r,this.n=n,this.p=s,this.q=o,this.r=a,this.s=c,this.t=l,this.u=u,this.h=null,this.i=new li,this.v=null}getValue(t,i,r){return this.w(t,i,r).getValue(t)}updateValue(t,i,r={}){let n;r.resource?(n=this.t.get(r.resource),n||(n=xc.createEmptyModel(this.u),this.t.set(r.resource,n))):n=this.s,i===void 0?n.removeValue(t):n.setValue(t,i),r.resource||(this.h=null)}inspect(t,i,r){const n=this.w(t,i,r),s=this.A(i.resource,r),o=i.resource?this.t.get(i.resource)||this.s:this.s,a=new Set;for(const c of n.overrides)for(const l of c.identifiers)n.getOverrideValue(t,l)!==void 0&&a.add(l);return new fP(t,i,n.getValue(t),a.size?[...a]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,r?this.q:void 0,s||void 0,o)}keys(t){const i=this.A(void 0,t);return{default:this.j.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:i?i.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,i){this.r.set(t,i),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,i){const r=[];if(!i){const{added:n,updated:s,removed:o}=Ys(this.j,t);i=[...n,...s,...o]}for(const n of i)for(const s of $l(n)){const o=this.j.getKeysForOverrideIdentifier(s),a=t.getKeysForOverrideIdentifier(s),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!Qr(this.j.override(s).getValue(l),t.override(s).getValue(l)))];r.push([s,c])}return this.updateDefaultConfiguration(t),{keys:i,overrides:r}}compareAndUpdatePolicyConfiguration(t){const{added:i,updated:r,removed:n}=Ys(this.l,t),s=[...i,...r,...n];return s.length&&this.updatePolicyConfiguration(t),{keys:s,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:i,updated:r,removed:n,overrides:s}=Ys(this.applicationConfiguration,t),o=[...i,...r,...n];return o.length&&this.updateApplicationConfiguration(t),{keys:o,overrides:s}}compareAndUpdateLocalUserConfiguration(t){const{added:i,updated:r,removed:n,overrides:s}=Ys(this.localUserConfiguration,t),o=[...i,...r,...n];return o.length&&this.updateLocalUserConfiguration(t),{keys:o,overrides:s}}compareAndUpdateRemoteUserConfiguration(t){const{added:i,updated:r,removed:n,overrides:s}=Ys(this.remoteUserConfiguration,t),o=[...i,...r,...n];return o.length&&this.updateRemoteUserConfiguration(t),{keys:o,overrides:s}}compareAndUpdateWorkspaceConfiguration(t){const{added:i,updated:r,removed:n,overrides:s}=Ys(this.workspaceConfiguration,t),o=[...i,...r,...n];return o.length&&this.updateWorkspaceConfiguration(t),{keys:o,overrides:s}}compareAndUpdateFolderConfiguration(t,i){const r=this.folderConfigurations.get(t),{added:n,updated:s,removed:o,overrides:a}=Ys(r,i),c=[...n,...s,...o];return(c.length||!r)&&this.updateFolderConfiguration(t,i),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(t){const i=this.folderConfigurations.get(t);if(!i)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:r,updated:n,removed:s,overrides:o}=Ys(i,void 0);return{keys:[...r,...n,...s],overrides:o}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){return this.v||(this.v=this.p.isEmpty()?this.n:this.n.merge(this.p)),this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,i,r){let n=this.x(i,r);return i.overrideIdentifier&&(n=n.override(i.overrideIdentifier)),!this.l.isEmpty()&&this.l.getValue(t)!==void 0&&(n=n.merge(this.l)),n}x({resource:t},i){let r=this.y();if(i&&t){const n=i.getFolder(t);n&&(r=this.z(n.uri)||r);const s=this.t.get(t);s&&(r=r.merge(s))}return r}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let i=this.i.get(t);if(!i){const r=this.y(),n=this.r.get(t);n?(i=r.merge(n),this.i.set(t,i)):i=r}return i}A(t,i){if(i&&t){const r=i.getFolder(t);if(r)return this.r.get(r.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,i)=>{const{contents:r,overrides:n,keys:s}=this.r.get(i);return t.push([i,{contents:r,overrides:n,keys:s}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(i=>t.add(i)),this.userConfiguration.keys.forEach(i=>t.add(i)),this.q.keys.forEach(i=>t.add(i)),this.r.forEach(i=>i.keys.forEach(r=>t.add(r))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.userConfiguration.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.q.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.r.forEach(i=>i.getAllOverrideIdentifiers().forEach(r=>t.add(r))),[...t.values()]}D(t){const i=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.q.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.r.forEach(r=>r.getKeysForOverrideIdentifier(t).forEach(n=>i.add(n))),[...i.values()]}static parse(t,i){const r=this.E(t.defaults,i),n=this.E(t.policy,i),s=this.E(t.application,i),o=this.E(t.user,i),a=this.E(t.workspace,i),c=t.folders.reduce((l,u)=>(l.set(E.revive(u[0]),this.E(u[1],i)),l),new li);return new V8(r,n,s,o,xc.createEmptyModel(i),a,c,xc.createEmptyModel(i),new li,i)}static E(t,i){return new xc(t.contents,t.keys,t.overrides,void 0,i)}},pP=class{constructor(e,t,i,r,n){this.change=e,this.f=t,this.g=i,this.h=r,this.i=n,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const s of e.keys)this.affectedKeys.add(s);for(const[,s]of e.overrides)for(const o of s)this.affectedKeys.add(o);this.d=this.a;for(const s of this.affectedKeys)this.d+=s+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=Vv.parse(this.f.data,this.i)),this.j}affectsConfiguration(e,t){const i=this.a+e,r=this.d.indexOf(i);if(r<0)return!1;const n=r+i.length;if(n>=this.d.length)return!1;const s=this.d.charCodeAt(n);if(s!==this.b&&s!==this.c)return!1;if(t){const o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.f?.workspace):void 0,a=this.g.getValue(e,t,this.h);return!Qr(o,a)}return!0}};function Ys(e,t){const{added:i,removed:r,updated:n}=S7(t?.rawConfiguration,e?.rawConfiguration),s=[],o=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const c=a.filter(l=>!o.includes(l));for(const l of c)s.push([l,t.getKeysForOverrideIdentifier(l)])}if(e){const c=o.filter(l=>!a.includes(l));for(const l of c)s.push([l,e.getKeysForOverrideIdentifier(l)])}if(t&&e){for(const c of o)if(a.includes(c)){const l=S7({contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)},{contents:t.getOverrideValue(void 0,c)||{},keys:t.getKeysForOverrideIdentifier(c)});s.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:i,removed:r,updated:n,overrides:s}}function S7(e,t){const i=e?t?e.keys.filter(s=>t.keys.indexOf(s)===-1):[...e.keys]:[],r=t?e?t.keys.filter(s=>e.keys.indexOf(s)===-1):[...t.keys]:[],n=[];if(e&&t){for(const s of t.keys)if(e.keys.indexOf(s)!==-1){const o=dd(t.contents,s),a=dd(e.contents,s);Qr(o,a)||n.push(s)}}return{added:i,removed:r,updated:n}}function Au(e,t){if(t){const i=t.split(".");let r=e;for(let n=0;r&&n<i.length;n++)r=r[i[n]];return r}}function gP(e){return e instanceof E}function mP(e){return e&&e.uri instanceof E&&e.languageId&&typeof e.languageId=="string"}function vP(e){return e&&!e.uri&&e.languageId&&typeof e.languageId=="string"}function wP(e){return e&&e.uri instanceof E&&(!e.name||typeof e.name=="string")&&(!e.index||typeof e.index=="number")}function x7(e){if(gP(e))return{resource:e};if(mP(e))return{resource:e.uri,overrideIdentifier:e.languageId};if(vP(e))return{overrideIdentifier:e.languageId};if(wP(e))return{resource:e.uri};if(e===null)return{resource:null}}var qv=class{constructor(t,i,r){this.a=t.getProxy(se.MainThreadConfiguration),this.c=i,this.b=r,this.d=new gn,this.e=null}getConfigProvider(){return this.d.wait().then(t=>this.e)}$initializeConfiguration(t){this.e=new bP(this.a,this.c,t,this.b),this.d.open()}$acceptConfigurationChanged(t,i){this.getConfigProvider().then(r=>r.$acceptConfigurationChanged(t,i))}};qv=__decorate([__param(0,at),__param(1,cs),__param(2,ut)],qv);var bP=class{constructor(e,t,i,r){this.a=new C,this.b=e,this.f=r,this.c=t,this.e=Vv.parse(i,r),this.d=this.k(i.configurationScopes)}get onDidChangeConfiguration(){return this.a&&this.a.event}$acceptConfigurationChanged(e,t){const i={data:this.e.toData(),workspace:this.c.workspace};this.e=Vv.parse(e,this.f),this.d=this.k(e.configurationScopes),this.a.fire(this.j(t,i))}getConfiguration(e,t,i){const r=x7(t)||{},n=this.g(e?Au(this.e.getValue(void 0,r,this.c.workspace),e):this.e.getValue(void 0,r,this.c.workspace));e&&this.h(e,r,i?.identifier);function s(a){if(a==null)return null;if(typeof a=="boolean")return a?fi.USER:fi.WORKSPACE;switch(a){case Ya.Global:return fi.USER;case Ya.Workspace:return fi.WORKSPACE;case Ya.WorkspaceFolder:return fi.WORKSPACE_FOLDER}}const o={has(a){return typeof Au(n,a)<"u"},get:(a,c)=>{this.h(e?`${e}.${a}`:a,r,i?.identifier);let l=Au(n,a);if(typeof l>"u")l=c;else{let u;const h=(f,g)=>{if(Qt(f)){let m;const b=()=>{u=u||Tt(n),m=m||Au(u,g)};return new Proxy(f,{get:(k,I)=>{if(typeof I=="string"&&I.toLowerCase()==="tojson")return b(),()=>m;if(u)return m=m||Au(u,g),m[I];const R=k[I];return typeof I=="string"?h(R,`${g}.${I}`):R},set:(k,I,R)=>(b(),m&&(m[I]=R),!0),deleteProperty:(k,I)=>(b(),m&&delete m[I],!0),defineProperty:(k,I,R)=>(b(),m&&Object.defineProperty(m,I,R),!0)})}return Array.isArray(f)?Tt(f):f};l=h(l,a)}return l},update:(a,c,l,u)=>{a=e?`${e}.${a}`:a;const h=s(l);return c!==void 0?this.b.$updateConfigurationOption(h,a,c,r,u):this.b.$removeConfigurationOption(h,a,r,u)},inspect:a=>{a=e?`${e}.${a}`:a;const c=this.e.inspect(a,r,this.c.workspace);if(c)return{key:a,defaultValue:Tt(c.policy?.value??c.default?.value),globalValue:Tt(c.user?.value??c.application?.value),workspaceValue:Tt(c.workspace?.value),workspaceFolderValue:Tt(c.workspaceFolder?.value),defaultLanguageValue:Tt(c.default?.override),globalLanguageValue:Tt(c.user?.override??c.application?.override),workspaceLanguageValue:Tt(c.workspace?.override),workspaceFolderLanguageValue:Tt(c.workspaceFolder?.override),languageIds:Tt(c.overrideIdentifiers)}}};return typeof n=="object"&&ko(o,n,!1),Object.freeze(o)}g(e){const t=i=>Qt(i)?new Proxy(i,{get:(r,n)=>t(r[n]),set:(r,n,s)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(n)}' of object`)},deleteProperty:(r,n)=>{throw new Error(`TypeError: Cannot delete read only property '${String(n)}' of object`)},defineProperty:(r,n)=>{throw new Error(`TypeError: Cannot define property '${String(n)}' for a readonly object`)},setPrototypeOf:r=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):i;return t(e)}h(e,t,i){const r=En.test(e)?zt.RESOURCE:this.d.get(e),n=i?`[${i.value}] `:"";if(zt.RESOURCE===r){typeof t?.resource>"u"&&this.f.warn(`${n}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(zt.WINDOW===r){t?.resource&&this.f.warn(`${n}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}j(e,t){const i=new pP(e,t,this.e,this.c.workspace,this.f);return Object.freeze({affectsConfiguration:(r,n)=>i.affectsConfiguration(r,x7(n))})}k(e){return e.reduce((t,i)=>(t.set(i[0],i[1]),t),new Map)}},ls=K("IExtHostConfiguration"),yP=class{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}},Pu=class q8{static isHostExtension(t,i,r){if(i.getExtensionDescription(t))return!1;const n=r.getExtensionDescription(t);return n?!!((n.main||n.browser)&&n.api==="none"):!1}constructor(t,i){this.j=t,this.c=new C,this.onDidChange=this.c.event,this.d=0,this.e=i,this.k()}k(){this.e.sort(SP),this.f=new Xn,this.g=[],this.h=new Map;for(const t of this.e){if(this.f.has(t.identifier)){console.error("Extension `"+t.identifier.value+"` is already registered");continue}this.f.set(t.identifier,t),this.g.push(t);const i=this.j.readActivationEvents(t);for(const r of i)this.h.has(r)||this.h.set(r,[]),this.h.get(r).push(t)}}set(t){return this.e=t,this.k(),this.d++,this.c.fire(void 0),{versionId:this.d}}deltaExtensions(t,i){this.e=k7(this.e,i),this.e=this.e.concat(t);const r=q8.l(this.e);return this.e=k7(this.e,r.map(n=>n.identifier)),this.k(),this.d++,this.c.fire(void 0),new yP(this.d,r)}static l(t){const i=new class{constructor(){this.c=new Map,this.d=new Set,this.e=[]}addNode(a){this.d.has(a)||(this.d.add(a),this.e.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this.c.has(a)?this.c.get(a).push(c):this.c.set(a,[c])}getArcs(a){return this.c.has(a)?this.c.get(a):[]}hasOnlyGoodArcs(a,c){const l=i.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this.e}},r=new Xn;for(const a of t)if(r.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)i.addArc(dt.toKey(a.identifier),dt.toKey(c));const n=new Set;i.getNodes().filter(a=>i.getArcs(a).length===0).forEach(a=>n.add(a));const s=i.getNodes().filter(a=>!n.has(a));let o;do{o=!1;for(let a=0;a<s.length;a++){const c=s[a];i.hasOnlyGoodArcs(c,n)&&(s.splice(a,1),a--,n.add(c),o=!0)}}while(o);return s.map(a=>r.get(a))}containsActivationEvent(t){return this.h.has(t)}containsExtension(t){return this.f.has(t)}getExtensionDescriptionsForActivationEvent(t){const i=this.h.get(t);return i?i.slice(0):[]}getAllExtensionDescriptions(){return this.g.slice(0)}getSnapshot(){return new EP(this.d,this.getAllExtensionDescriptions())}getExtensionDescription(t){const i=this.f.get(t);return i||void 0}getExtensionDescriptionByUUID(t){for(const i of this.g)if(i.uuid===t)return i}getExtensionDescriptionByIdOrUUID(t,i){return this.getExtensionDescription(t)??(i?this.getExtensionDescriptionByUUID(i):void 0)}},EP=class{constructor(e,t){this.versionId=e,this.extensions=t}},Ks;(function(e){e[e.Builtin=0]="Builtin",e[e.User=1]="User",e[e.Dev=2]="Dev"})(Ks||(Ks={}));function SP(e,t){const i=e.isBuiltin?Ks.Builtin:e.isUnderDevelopment?Ks.Dev:Ks.User,r=t.isBuiltin?Ks.Builtin:t.isUnderDevelopment?Ks.Dev:Ks.User;if(i!==r)return i-r;const n=et.basename(e.extensionLocation.path),s=et.basename(t.extensionLocation.path);return n<s?-1:n>s?1:0}function k7(e,t){const i=new Ro(t);return e.filter(r=>!i.has(r.identifier))}var gp=class G8{static{this.NONE=new G8(!1,-1,-1,-1)}constructor(t,i,r,n){this.startup=t,this.codeLoadingTime=i,this.activateCallTime=r,this.activateResolvedTime=n}},D7=class{constructor(e){this.a=e,this.b=-1,this.c=-1,this.d=-1,this.f=-1,this.g=-1,this.h=-1}j(e,t){return e===-1||t===-1?-1:t-e}build(){return new gp(this.a,this.j(this.b,this.c),this.j(this.d,this.f),this.j(this.g,this.h))}codeLoadingStart(){this.b=Date.now()}codeLoadingStop(){this.c=Date.now()}activateCallStart(){this.d=Date.now()}activateCallStop(){this.f=Date.now()}activateResolveStart(){this.g=Date.now()}activateResolveStop(){this.h=Date.now()}},mp=class{constructor(e,t,i,r,n,s){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=i,this.module=r,this.exports=n,this.disposable=s}},xP=class extends mp{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,Te.None)}},kP=class extends mp{constructor(){super(!1,null,gp.NONE,{activate:void 0,deactivate:void 0},void 0,Te.None)}},vp=class extends mp{constructor(e){super(!0,e,gp.NONE,{activate:void 0,deactivate:void 0},void 0,Te.None)}},Gv=class{constructor(t,i,r,n){this.g=n,this.a=t,this.b=i,this.c=r,this.d=new Xn,this.f=Object.create(null)}dispose(){for(const[t,i]of this.d)i.dispose()}async waitForActivatingExtensions(){const t=[];for(const[i,r]of this.d)t.push(r.wait());await Promise.all(t)}isActivated(t){const i=this.d.get(t);return!!(i&&i.value)}getActivatedExtension(t){const i=this.d.get(t);if(!i||!i.value)throw new Error(`Extension '${t.value}' is not known or not activated`);return i.value}async activateByEvent(t,i){if(this.f[t])return;const r=this.a.getExtensionDescriptionsForActivationEvent(t);await this.h(r.map(n=>({id:n.identifier,reason:{startup:i,extensionId:n.identifier,activationEvent:t}}))),this.f[t]=!0}activateById(t,i){const r=this.a.getExtensionDescription(t);if(!r)throw new Error(`Extension '${t.value}' is not known`);return this.h([{id:r.identifier,reason:i}])}async h(t){const i=t.filter(r=>!this.isActivated(r.id)).map(r=>this.j(r));await Promise.all(i.map(r=>r.wait()))}j(t){if(this.d.has(t.id))return this.d.get(t.id);if(this.l(t.id))return this.k(t,null,[],null);const i=this.a.getExtensionDescription(t.id);if(!i){const s=new Error(`Cannot activate unknown extension '${t.id.value}'`),o=this.k(t,null,[],new vp(s));return this.c.onExtensionActivationError(t.id,s,new Q5(t.id.value)),o}const r=[],n=typeof i.extensionDependencies>"u"?[]:i.extensionDependencies;for(const s of n){if(this.m(s))continue;const o=this.d.get(s);if(o){r.push(o);continue}if(this.l(s)){r.push(this.j({id:this.b.getExtensionDescription(s).identifier,reason:t.reason}));continue}const a=this.a.getExtensionDescription(s);if(a){if(!a.main&&!a.browser)continue;r.push(this.j({id:a.identifier,reason:t.reason}));continue}const c=i.displayName||i.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${s}'`),u=this.k(t,i.displayName,[],new vp(l));return this.c.onExtensionActivationError(i.identifier,l,new Q5(s)),u}return this.k(t,i.displayName,r,null)}k(t,i,r,n){const s=new Qv(t.id,i,t.reason,r,n,this.c,this.g);return this.d.set(t.id,s),s}l(t){return Pu.isHostExtension(t,this.a,this.b)}m(t){const i=this.b.getExtensionDescription(t);return i?!i.main&&!i.browser:!1}};Gv=__decorate([__param(3,ut)],Gv);var Qv=class{get value(){return this.h}get friendlyName(){return this.d||this.c.value}constructor(t,i,r,n,s,o,a){this.c=t,this.d=i,this.f=r,this.g=n,this.h=s,this.j=o,this.k=a,this.a=new gn,this.b=!1,this.l()}dispose(){this.b=!0}wait(){return this.a.wait()}async l(){await this.m(),this.a.open()}async m(){if(!this.h){for(;this.g.length>0;){for(let t=0;t<this.g.length;t++){const i=this.g[t];if(i.value&&!i.value.activationFailed){this.g.splice(t,1),t--;continue}if(i.value&&i.value.activationFailed){const r=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${i.friendlyName}' failed to activate`);r.detail=i.value.activationFailedError,this.h=new vp(r),this.j.onExtensionActivationError(this.c,r,null);return}}this.g.length>0&&await Promise.race(this.g.map(t=>t.wait()))}await this.n()}}async n(){try{this.h=await this.j.actualActivateExtension(this.c,this.f)}catch(t){const i=new Error;if(t&&t.name&&(i.name=t.name),t&&t.message?i.message=`Activating extension '${this.c.value}' failed: ${t.message}.`:i.message=`Activating extension '${this.c.value}' failed: ${t}.`,t&&t.stack&&(i.stack=t.stack),this.h=new vp(i),this.b&&co(t))return;this.j.onExtensionActivationError(this.c,i,null),this.k.error(`Activating extension ${this.c.value} failed due to an error:`),this.k.error(t)}}};Qv=__decorate([__param(6,ut)],Qv);var $7=class{constructor(e,t){this.c=t,this.b=new C,this.onDidChangeStorage=this.b.event,this.a=e.getProxy(se.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this.a.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,i){const r=await this.a.$initializeExtensionStorage(e,t);let n;return r&&(n=this.d(e,t,r)),n||i}setValue(e,t,i){return this.a.$setValue(e,t,i)}$acceptValue(e,t,i){const r=this.d(e,t,i);r&&this.b.fire({shared:e,key:t,value:r})}d(e,t,i){try{return JSON.parse(i)}catch(r){this.c.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${r}`)}}},Jv=K("IExtHostStorage"),I7=class{constructor(e,t,i){this.h=new Map,this.a=e,this.b=t,this.c=i,this.d=this.c.initializeExtensionStorage(this.b,this.a,Object.create(null)).then(r=>(this.f=r,this)),this.g=this.c.onDidChangeStorage(r=>{r.shared===this.b&&r.key===this.a&&(this.f=r.value)}),this.i=new va(()=>{const r=this.h;this.h=new Map,(async()=>{try{await this.c.setValue(this.b,this.a,this.f);for(const n of r.values())n.complete()}catch(n){for(const s of r.values())s.error(n)}})()},0)}keys(){return Object.entries(this.f??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this.d}get(e,t){let i=this.f[e];return typeof i>"u"&&(i=t),i}update(e,t){this.f[e]=t;const i=this.h.get(e);if(i!==void 0)return i.p;const r=new wa;return this.h.set(e,r),this.i.isScheduled()||this.i.schedule(),r.p}dispose(){this.g.dispose()}},DP=class extends I7{setKeysForSync(e){this.c.registerExtensionStorageKeysToSync({id:this.a,version:this.j.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this.j=e}},In,Xv=In=class{constructor(t,i){this.b=new Map,this.c=new Jk,this.a=t.getProxy(se.MainThreadFileSystem);const r=this;this.value=Object.freeze({async stat(n){try{let s;const o=r.b.get(n.scheme);return o?(await r.a.$ensureActivation(n.scheme),s=await o.impl.stat(n)):s=await r.a.$stat(n),{type:s.type,ctime:s.ctime,mtime:s.mtime,size:s.size,permissions:s.permissions===Sa.Readonly?1:void 0}}catch(s){In.e(s)}},async readDirectory(n){try{const s=r.b.get(n.scheme);return s?(await r.a.$ensureActivation(n.scheme),(await s.impl.readDirectory(n)).slice()):await r.a.$readdir(n)}catch(s){return In.e(s)}},async createDirectory(n){try{const s=r.b.get(n.scheme);return s&&!s.isReadonly?(await r.a.$ensureActivation(n.scheme),await r.d(s.impl,s.extUri,n)):await r.a.$mkdir(n)}catch(s){return In.e(s)}},async readFile(n){try{const s=r.b.get(n.scheme);return s?(await r.a.$ensureActivation(n.scheme),(await s.impl.readFile(n)).slice()):(await r.a.$readFile(n)).buffer}catch(s){return In.e(s)}},async writeFile(n,s){try{const o=r.b.get(n.scheme);return o&&!o.isReadonly?(await r.a.$ensureActivation(n.scheme),await r.d(o.impl,o.extUri,o.extUri.dirname(n)),await r.c.queueFor(n,()=>Promise.resolve(o.impl.writeFile(n,s,{create:!0,overwrite:!0})))):await r.a.$writeFile(n,Qe.wrap(s))}catch(o){return In.e(o)}},async delete(n,s){try{const o=r.b.get(n.scheme);return o&&!o.isReadonly&&!s?.useTrash?(await r.a.$ensureActivation(n.scheme),await o.impl.delete(n,{recursive:!1,...s})):await r.a.$delete(n,{recursive:!1,useTrash:!1,atomic:!1,...s})}catch(o){return In.e(o)}},async rename(n,s,o){try{return await r.a.$rename(n,s,{overwrite:!1,...o})}catch(a){return In.e(a)}},async copy(n,s,o){try{return await r.a.$copy(n,s,{overwrite:!1,...o})}catch(a){return In.e(a)}},isWritableFileSystem(n){const s=i.getCapabilities(n);if(typeof s=="number")return!(s&vn.Readonly)}})}async d(t,i,r){const n=[];for(;!i.isEqual(r,i.dirname(r));)try{if(!((await t.stat(r)).type&Do.Directory))throw ui.FileExists(`Unable to create folder '${r.scheme===de.file?r.fsPath:r.toString(!0)}' that already exists but is not a directory`);break}catch(s){if(Oh(s)!==Ne.FileNotFound)throw s;n.push(i.basename(r)),r=i.dirname(r)}for(let s=n.length-1;s>=0;s--){r=i.joinPath(r,n[s]);try{await t.createDirectory(r)}catch(o){if(Oh(o)!==Ne.FileExists)throw o}}}static e(t){if(t instanceof ui)throw t;if(t instanceof r4)switch(t.code){case Ne.FileExists:throw ui.FileExists(t.message);case Ne.FileNotFound:throw ui.FileNotFound(t.message);case Ne.FileNotADirectory:throw ui.FileNotADirectory(t.message);case Ne.FileIsADirectory:throw ui.FileIsADirectory(t.message);case Ne.NoPermissions:throw ui.NoPermissions(t.message);case Ne.Unavailable:throw ui.Unavailable(t.message);default:throw new ui(t.message,t.name)}if(!(t instanceof Error))throw new ui(String(t));if(t.name==="ENOPRO"||t.message.includes("ENOPRO"))throw ui.Unavailable(t.message);switch(t.name){case Ne.FileExists:throw ui.FileExists(t.message);case Ne.FileNotFound:throw ui.FileNotFound(t.message);case Ne.FileNotADirectory:throw ui.FileNotADirectory(t.message);case Ne.FileIsADirectory:throw ui.FileIsADirectory(t.message);case Ne.NoPermissions:throw ui.NoPermissions(t.message);case Ne.Unavailable:throw ui.Unavailable(t.message);default:throw new ui(t.message,t.name)}}addFileSystemProvider(t,i,r){return this.b.set(t,{impl:i,extUri:r?.isCaseSensitive?st:Ck,isReadonly:!!r?.isReadonly}),Ce(()=>this.b.delete(t))}getFileSystemProviderExtUri(t){return this.b.get(t)?.extUri??st}};Xv=In=__decorate([__param(0,at),__param(1,xa)],Xv);var wp=K("IExtHostConsumerFileSystem"),Zv=K("IExtensionStoragePaths"),Yv=class{constructor(t,i,r){this.d=i,this.f=r,this.a=t.workspace??void 0,this.b=t.environment,this.whenReady=this.h().then(n=>this.c=n)}async g(t){return E.joinPath(this.b.workspaceStorageHome,t)}async h(){if(!this.a)return Promise.resolve(void 0);const t=this.a.id,i=await this.g(t);try{return await this.f.value.stat(i),this.d.trace("[ExtHostStorage] storage dir already exists",i),i}catch{}try{return this.d.trace("[ExtHostStorage] creating dir and metadata-file",i),await this.f.value.createDirectory(i),await this.f.value.writeFile(E.joinPath(i,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this.a.id,configuration:E.revive(this.a.configuration)?.toString(),name:this.a.name},void 0,2))),i}catch(r){this.d.error("[ExtHostStorage]",r);return}}workspaceValue(t){if(this.c)return E.joinPath(this.c,t.identifier.value)}globalValue(t){return E.joinPath(this.b.globalStorageHome,t.identifier.value.toLowerCase())}onWillDeactivateAll(){}};Yv=__decorate([__param(0,Ci),__param(1,ut),__param(2,wp)],Yv);var QF=K("tunnelService"),JF=K("sharedTunnelsService"),A7;(function(e){e.Http="http",e.Https="https"})(A7||(A7={}));var Yo;(function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"})(Yo||(Yo={}));var P7;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(P7||(P7={}));function $P(e){if(e.scheme!=="http"&&e.scheme!=="https")return;const t=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(e.authority);if(t)return{address:t[1],port:+t[2]}}var Kv=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function R7(e){return Kv.indexOf(e)>=0}var e0=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function T7(e){return e0.indexOf(e)>=0}var IP=class{constructor(e,t,i){this.remoteAddress=e,this.localAddress=t,this.b=i,this.a=new C,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},L7=class extends Te{constructor(t,i){super(),this.r=t,this.s=i,this.a=new C,this.onTunnelOpened=this.a.event,this.b=new C,this.onTunnelClosed=this.b.event,this.c=new C,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get t(){const t=this.s.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this.g=t,t?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this.h=t.elevation,this.m=t.privacyOptions,this.j=t.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.u()}async u(){const t=[],i=Array.from(this.f.values());for(const r of i){const n=Array.from(r.values());for(const s of n){const o=await s.value;o&&typeof o!="string"&&t.push(o)}}return t}async dispose(){super.dispose();for(const t of this.f.values()){for(const{value:i}of t.values())await i.then(r=>typeof r!="string"?r?.dispose():void 0);t.clear()}this.f.clear()}setEnvironmentTunnel(t,i,r,n,s){this.z(t,i,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:i,localAddress:r,privacy:n,protocol:s,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,i){(T7(t)||R7(t))&&(t=Kv[0]);const r=this.D(t,i);if(r)return++r.refcount,r.value}openTunnel(t,i,r,n,s,o=!1,a,c){this.r.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${i}:${r} on local port ${s}.`);const l=this.g??t;if(!l)return;if(i||(i="localhost"),n||(n=this.t),this.g&&this.n.has(r)){this.r.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(l,i,r,n,s,o,a,c);return u?u.then(h=>{if(h){if(typeof h=="string")return this.r.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.C(i,r),h}else{this.r.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.C(i,r);return}this.r.trace("ForwardedPorts: (TunnelService) New tunnel established.");const f=this.w(h);return(h.tunnelRemoteHost!==i||h.tunnelRemotePort!==r)&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&h.privacy!==a&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(f),f}):(this.r.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}w(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.r.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);const i=this.f.get(t.tunnelRemoteHost);if(i){const r=i.get(t.tunnelRemotePort);r&&(r.refcount--,await this.y(t.tunnelRemoteHost,t.tunnelRemotePort,r))}}}}async y(t,i,r){if(r.refcount<=0){this.r.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${i}.`);const n=r.value.then(async s=>{s&&typeof s!="string"&&(await s.dispose(!0),this.b.fire({host:s.tunnelRemoteHost,port:s.tunnelRemotePort}))});return this.f.has(t)&&this.f.get(t).delete(i),n}}async closeTunnel(t,i){this.r.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${i} `);const r=this.f.get(t);if(r&&r.has(i)){const n=r.get(i);n.refcount=0,await this.y(t,i,n)}}z(t,i,r){this.f.has(t)||this.f.set(t,new Map),this.f.get(t).set(i,{refcount:1,value:r})}async C(t,i){const r=this.f.get(t);if(r){const n=r.get(i),s=n?await n.value:void 0;(!s||typeof s=="string")&&r.delete(i),r.size===0&&this.f.delete(t)}}D(t,i){const r=[t];R7(t)?(r.push(...Kv),r.push(...e0)):T7(t)&&r.push(...e0);const n=r.map(s=>this.f.get(s));for(const s of n){const o=s?.get(i);if(o)return o}}canTunnel(t){return!!$P(t)}G(t,i,r,n,s,o,a){this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${i}:${r} on local port ${n}.`);const c=r;this.n.add(c);const l=n===void 0?r:n,u={elevationRequired:s?this.isPortPrivileged(l):!1},h={remoteAddress:{host:i,port:r},localAddressPort:n,privacy:o,public:o?o!==Yo.Private:void 0,protocol:a},f=t.forwardPort(h,u);return f?(this.z(i,r,f),f.finally(()=>{this.r.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(c)})):this.n.delete(c),f}};L7=__decorate([__param(0,ut),__param(1,hd)],L7);var AP=class extends IP{},t0;(function(e){function t(r){return{remoteAddress:r.remoteAddress,localAddress:r.localAddress,public:!!r.public,privacy:r.privacy??(r.public?Yo.Public:Yo.Private),protocol:r.protocol}}e.fromApiTunnel=t;function i(r){return{remoteAddress:{host:r.tunnelRemoteHost,port:r.tunnelRemotePort},localAddress:r.localAddress,public:r.privacy!==Yo.ConstantPrivate&&r.privacy!==Yo.ConstantPrivate,privacy:r.privacy,protocol:r.protocol}}e.fromServiceTunnel=i})(t0||(t0={}));var i0=K("IExtHostTunnelService"),r0=class extends Te{constructor(t,i,r){super(),this.s=r,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new C,this.onDidChangeTunnels=this.h.event,this.n=0,this.r=new Map,this.a=t.getProxy(se.MainThreadTunnelService)}async openTunnel(t,i){this.s.trace(`ForwardedPorts: (ExtHostTunnelService) ${t.identifier.value} called openTunnel API for ${i.remoteAddress.host}:${i.remoteAddress.port}.`);const r=await this.a.$openTunnel(i,t.displayName);if(r){const n=new AP(r.remoteAddress,r.localAddress,()=>this.a.$closeTunnel(r.remoteAddress));return this.B(n),n}}async getTunnels(){return this.a.$getTunnels()}u(){return this.n++}registerPortsAttributesProvider(t,i){t.portRange===void 0&&t.commandPattern===void 0&&this.s.error("PortAttributesProvider must specify either a portRange or a commandPattern");const r=this.u();return this.r.set(r,{selector:t,provider:i}),this.a.$registerPortsAttributesProvider(t,r),new Ye(()=>{this.r.delete(r),this.a.$unregisterPortsAttributesProvider(r)})}async $providePortAttributes(t,i,r,n,s){const o=[];for(const c of t){const l=this.r.get(c);if(!l)return[];o.push(...await Promise.all(i.map(async u=>{let h;try{h=await l.provider.providePortAttributes({port:u,pid:r,commandLine:n},s)}catch{h=await l.provider.providePortAttributes(u,r,n,s)}return{providedAttributes:h,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(t){}registerTunnelProvider(t,i){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(n,s)=>await t.provideTunnel(n,s,Wt.None)??void 0;const r=i.tunnelFeatures?{elevation:!!i.tunnelFeatures?.elevation,privacyOptions:i.tunnelFeatures?.privacyOptions,protocol:i.tunnelFeatures.protocol===void 0?!0:i.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(r),Promise.resolve(Ce(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0)}))}async setTunnelFactory(t,i){if(t){t.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(t.candidatePortSource),t.showCandidatePort&&(this.f=t.showCandidatePort,this.a.$setCandidateFilter());const r=t.tunnelFactory??(i?this.w(i):void 0);if(r){this.b=r;let n=t.tunnelFeatures?.privacyOptions??[];t.tunnelFeatures?.public&&n.length===0&&(n=[{id:"private",label:d(2714,null),themeIcon:"lock"},{id:"public",label:d(2715,null),themeIcon:"eye"}]);const s=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,public:!!t.tunnelFeatures?.public,privacyOptions:n,protocol:!0}:void 0;this.a.$setTunnelProvider(s)}}else this.b=void 0;return Ce(()=>{this.b=void 0})}w(t){}async $closeTunnel(t,i){if(this.g.has(t.host)){const r=this.g.get(t.host);r.has(t.port)&&(i&&r.get(t.port).disposeListener.dispose(),await r.get(t.port).tunnel.dispose(),r.delete(t.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(t,i){if(this.b)try{this.s.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const r=this.b(t,i);if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),r!==void 0){const n=await r;if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),n===void 0){this.s.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(t.remoteAddress.host)||this.g.set(t.remoteAddress.host,new Map);const s=this.B(n.onDidDispose(()=>(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(n.remoteAddress))));return this.g.get(t.remoteAddress.host).set(t.remoteAddress.port,{tunnel:n,disposeListener:s}),t0.fromApiTunnel(n)}else this.s.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(r){if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),r instanceof Error)return r.message}}async $applyCandidateFilter(t){const i=await Promise.all(t.map(n=>this.f(n.host,n.port,n.detail??""))),r=t.filter((n,s)=>i[s]);return this.s.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${t.map(n=>n.port).join(", ")} to ${r.map(n=>n.port).join(", ")}`),r}};r0=__decorate([__param(0,at),__param(1,Ci),__param(2,ut)],r0);function PP(e){return[...e.entries()]}function RP(e){return e?[...e.entries()]:[]}var YF=new X("terminalTabFocusMode",!1,!0),_7;(function(e){e.AutomationProfile="terminal.integrated.automationProfile.",e.DefaultProfile="terminal.integrated.defaultProfile.",e.Profiles="terminal.integrated.profiles."})(_7||(_7={}));var C7;(function(e){e.SendKeybindingsToShell="terminal.integrated.sendKeybindingsToShell",e.AutomationProfileLinux="terminal.integrated.automationProfile.linux",e.AutomationProfileMacOs="terminal.integrated.automationProfile.osx",e.AutomationProfileWindows="terminal.integrated.automationProfile.windows",e.ProfilesWindows="terminal.integrated.profiles.windows",e.ProfilesMacOs="terminal.integrated.profiles.osx",e.ProfilesLinux="terminal.integrated.profiles.linux",e.DefaultProfileLinux="terminal.integrated.defaultProfile.linux",e.DefaultProfileMacOs="terminal.integrated.defaultProfile.osx",e.DefaultProfileWindows="terminal.integrated.defaultProfile.windows",e.UseWslProfiles="terminal.integrated.useWslProfiles",e.TabsDefaultColor="terminal.integrated.tabs.defaultColor",e.TabsDefaultIcon="terminal.integrated.tabs.defaultIcon",e.TabsEnabled="terminal.integrated.tabs.enabled",e.TabsEnableAnimation="terminal.integrated.tabs.enableAnimation",e.TabsHideCondition="terminal.integrated.tabs.hideCondition",e.TabsShowActiveTerminal="terminal.integrated.tabs.showActiveTerminal",e.TabsShowActions="terminal.integrated.tabs.showActions",e.TabsLocation="terminal.integrated.tabs.location",e.TabsFocusMode="terminal.integrated.tabs.focusMode",e.MacOptionIsMeta="terminal.integrated.macOptionIsMeta",e.MacOptionClickForcesSelection="terminal.integrated.macOptionClickForcesSelection",e.AltClickMovesCursor="terminal.integrated.altClickMovesCursor",e.CopyOnSelection="terminal.integrated.copyOnSelection",e.EnableMultiLinePasteWarning="terminal.integrated.enableMultiLinePasteWarning",e.DrawBoldTextInBrightColors="terminal.integrated.drawBoldTextInBrightColors",e.FontFamily="terminal.integrated.fontFamily",e.FontSize="terminal.integrated.fontSize",e.LetterSpacing="terminal.integrated.letterSpacing",e.LineHeight="terminal.integrated.lineHeight",e.MinimumContrastRatio="terminal.integrated.minimumContrastRatio",e.TabStopWidth="terminal.integrated.tabStopWidth",e.FastScrollSensitivity="terminal.integrated.fastScrollSensitivity",e.MouseWheelScrollSensitivity="terminal.integrated.mouseWheelScrollSensitivity",e.BellDuration="terminal.integrated.bellDuration",e.FontWeight="terminal.integrated.fontWeight",e.FontWeightBold="terminal.integrated.fontWeightBold",e.CursorBlinking="terminal.integrated.cursorBlinking",e.CursorStyle="terminal.integrated.cursorStyle",e.CursorStyleInactive="terminal.integrated.cursorStyleInactive",e.CursorWidth="terminal.integrated.cursorWidth",e.Scrollback="terminal.integrated.scrollback",e.DetectLocale="terminal.integrated.detectLocale",e.DefaultLocation="terminal.integrated.defaultLocation",e.GpuAcceleration="terminal.integrated.gpuAcceleration",e.TerminalTitleSeparator="terminal.integrated.tabs.separator",e.TerminalTitle="terminal.integrated.tabs.title",e.TerminalDescription="terminal.integrated.tabs.description",e.RightClickBehavior="terminal.integrated.rightClickBehavior",e.MiddleClickBehavior="terminal.integrated.middleClickBehavior",e.Cwd="terminal.integrated.cwd",e.ConfirmOnExit="terminal.integrated.confirmOnExit",e.ConfirmOnKill="terminal.integrated.confirmOnKill",e.EnableBell="terminal.integrated.enableBell",e.EnableVisualBell="terminal.integrated.enableVisualBell",e.CommandsToSkipShell="terminal.integrated.commandsToSkipShell",e.AllowChords="terminal.integrated.allowChords",e.AllowMnemonics="terminal.integrated.allowMnemonics",e.TabFocusMode="terminal.integrated.tabFocusMode",e.EnvMacOs="terminal.integrated.env.osx",e.EnvLinux="terminal.integrated.env.linux",e.EnvWindows="terminal.integrated.env.windows",e.EnvironmentChangesIndicator="terminal.integrated.environmentChangesIndicator",e.EnvironmentChangesRelaunch="terminal.integrated.environmentChangesRelaunch",e.ExperimentalWindowsUseConptyDll="terminal.integrated.experimental.windowsUseConptyDll",e.ShowExitAlert="terminal.integrated.showExitAlert",e.SplitCwd="terminal.integrated.splitCwd",e.WindowsEnableConpty="terminal.integrated.windowsEnableConpty",e.WordSeparators="terminal.integrated.wordSeparators",e.EnableFileLinks="terminal.integrated.enableFileLinks",e.AllowedLinkSchemes="terminal.integrated.allowedLinkSchemes",e.UnicodeVersion="terminal.integrated.unicodeVersion",e.EnablePersistentSessions="terminal.integrated.enablePersistentSessions",e.PersistentSessionReviveProcess="terminal.integrated.persistentSessionReviveProcess",e.HideOnStartup="terminal.integrated.hideOnStartup",e.CustomGlyphs="terminal.integrated.customGlyphs",e.RescaleOverlappingGlyphs="terminal.integrated.rescaleOverlappingGlyphs",e.PersistentSessionScrollback="terminal.integrated.persistentSessionScrollback",e.InheritEnv="terminal.integrated.inheritEnv",e.ShowLinkHover="terminal.integrated.showLinkHover",e.IgnoreProcessNames="terminal.integrated.ignoreProcessNames",e.AutoReplies="terminal.integrated.autoReplies",e.ShellIntegrationEnabled="terminal.integrated.shellIntegration.enabled",e.ShellIntegrationShowWelcome="terminal.integrated.shellIntegration.showWelcome",e.ShellIntegrationDecorationsEnabled="terminal.integrated.shellIntegration.decorationsEnabled",e.ShellIntegrationCommandHistory="terminal.integrated.shellIntegration.history",e.EnableImages="terminal.integrated.enableImages",e.SmoothScrolling="terminal.integrated.smoothScrolling",e.IgnoreBracketedPasteMode="terminal.integrated.ignoreBracketedPasteMode",e.FocusAfterRun="terminal.integrated.focusAfterRun",e.DeveloperPtyHostLatency="terminal.integrated.developer.ptyHost.latency",e.DeveloperPtyHostStartupDelay="terminal.integrated.developer.ptyHost.startupDelay",e.DevMode="terminal.integrated.developer.devMode"})(C7||(C7={}));var N7;(function(e){e.Bash="bash",e.Fish="fish",e.Sh="sh",e.Csh="csh",e.Ksh="ksh",e.Zsh="zsh"})(N7||(N7={}));var O7;(function(e){e.CommandPrompt="cmd",e.Wsl="wsl",e.GitBash="gitbash"})(O7||(O7={}));var F7;(function(e){e.PowerShell="pwsh",e.Python="python",e.Julia="julia",e.NuShell="nu"})(F7||(F7={}));var M7;(function(e){e[e.Api=0]="Api",e[e.Process=1]="Process",e[e.Sequence=2]="Sequence",e[e.Config=3]="Config"})(M7||(M7={}));var U7;(function(e){e.LocalPty="localPty",e.PtyHost="ptyHost",e.PtyHostWindow="ptyHostWindow",e.Logger="logger",e.Heartbeat="heartbeat"})(U7||(U7={}));var kc;(function(e){e.Cwd="cwd",e.InitialCwd="initialCwd",e.FixedDimensions="fixedDimensions",e.Title="title",e.ShellType="shellType",e.HasChildProcesses="hasChildProcesses",e.ResolvedShellLaunchConfig="resolvedShellLaunchConfig",e.OverrideDimensions="overrideDimensions",e.FailedShellIntegrationActivation="failedShellIntegrationActivation",e.UsedShellIntegrationInjection="usedShellIntegrationInjection"})(kc||(kc={}));var KF=K("ptyService"),B7;(function(e){e[e.BeatInterval=5e3]="BeatInterval",e[e.ConnectingBeatInterval=2e4]="ConnectingBeatInterval",e[e.FirstWaitMultiplier=1.2]="FirstWaitMultiplier",e[e.SecondWaitMultiplier=1]="SecondWaitMultiplier",e[e.CreateProcessTimeout=5e3]="CreateProcessTimeout"})(B7||(B7={}));var H7;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(H7||(H7={}));var j7;(function(e){e.TerminalView="view",e.Editor="editor"})(j7||(j7={}));var W7;(function(e){e[e.GraceTime=6e4]="GraceTime",e[e.ShortGraceTime=6e3]="ShortGraceTime"})(W7||(W7={}));var z7;(function(e){e[e.HighWatermarkChars=1e5]="HighWatermarkChars",e[e.LowWatermarkChars=5e3]="LowWatermarkChars",e[e.CharCountAckSize=5e3]="CharCountAckSize"})(z7||(z7={}));var V7;(function(e){e.GitBash="Git Bash",e.Pwsh="PowerShell"})(V7||(V7={}));var q7;(function(e){e[e.Off=0]="Off",e[e.FinalTerm=1]="FinalTerm",e[e.VSCode=2]="VSCode"})(q7||(q7={}));var G7;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(G7||(G7={}));var TP={Backend:"workbench.contributions.terminal.processBackend"},LP=class{constructor(){this.a=new Map}get backends(){return this.a}registerTerminalBackend(e){const t=this.b(e.remoteAuthority);if(this.a.has(t))throw new Error(`A terminal backend with remote authority '${t}' was already registered.`);this.a.set(t,e)}getTerminalBackend(e){return this.a.get(this.b(e))}b(e){return e?.toLowerCase()??""}};ki.add(TP.Backend,new LP);var eM=K("localPtyService"),tM=K("terminalLogService"),_P=class{constructor(e){this.b=e,this.a=new Map}dispose(){for(const e of this.a.values())e.dispose()}startBuffering(e,t,i=5){const r=t(n=>{const s=typeof n=="string"?n:n.data;let o=this.a.get(e);if(o){o.data.push(s);return}const a=setTimeout(()=>this.flushBuffer(e),i);o={data:[s],timeoutId:a,dispose:()=>{clearTimeout(a),this.flushBuffer(e),r.dispose()}},this.a.set(e,o)});return r}stopBuffering(e){this.a.get(e)?.dispose()}flushBuffer(e){const t=this.a.get(e);t&&(this.a.delete(e),this.b(e,t.data.join("")))}},Ko=(e,t,i,r)=>{let n=t;return{enumerable:!0,configurable:!1,get(){return n},set(s){if(!i(n,s)){const o=n;n=s,e.listener?.(r(s,o))}}}},Dc=(e,t)=>e===t,eo={range:(e,t)=>e===t?!0:!e||!t?!1:e.isEqual(t),label:Dc,description:Dc,sortText:Dc,busy:Dc,error:Dc,canResolveChildren:Dc,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.find(r=>i.id===r.id)))},$c=e=>t=>({op:xi.SetProp,update:e(t)}),CP=(e,t)=>({range:(()=>{let i;const r=$c(n=>({range:mt.lift(W.from(n))}));return{enumerable:!0,configurable:!1,get(){return i},set(n){e.listener?.({op:xi.DocumentSynced}),eo.range(i,n)||(i=n,e.listener?.(r(n)))}}})(),label:Ko(e,t,eo.label,$c(i=>({label:i}))),description:Ko(e,void 0,eo.description,$c(i=>({description:i}))),sortText:Ko(e,void 0,eo.sortText,$c(i=>({sortText:i}))),canResolveChildren:Ko(e,!1,eo.canResolveChildren,i=>({op:xi.UpdateCanResolveChildren,state:i})),busy:Ko(e,!1,eo.busy,$c(i=>({busy:i}))),error:Ko(e,void 0,eo.error,$c(i=>({error:Ge.fromStrict(i)||null}))),tags:Ko(e,[],eo.tags,(i,r)=>({op:xi.SetTags,new:i.map(an.from),old:r.map(an.from)}))}),NP=e=>{const t=Ze.fromString(e.extId),i=new Ru(t.controllerId,t.localId,e.label,E.revive(e.uri)||void 0);return i.range=W.to(e.range||void 0),i.description=e.description||void 0,i.sortText=e.sortText||void 0,i.tags=e.tags.map(r=>an.to({id:o5(r).tagId})),i},Q7=e=>{let t;for(const i of e.tests){const r=NP(i.item);cd(r).parent=t,t=r}return t},Ru=class Q8{constructor(t,i,r,n){if(i.includes(Pr.Delimiter))throw new Error(`Test IDs may not include the ${JSON.stringify(i)} symbol`);const s=_I(this,t);Object.defineProperties(this,{id:{value:i,enumerable:!0,writable:!1},uri:{value:n,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return s.parent instanceof n0?void 0:s.parent}},children:{value:LI(s,cd,Q8),enumerable:!0,writable:!1},...CP(s,r)})}},n0=class extends Ru{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}},OP=class extends PI{constructor(e,t,i){super({controllerId:e,getDocumentVersion:r=>r&&i.getDocument(r)?.version,getApiFor:cd,getChildren:r=>r.children,root:new n0(e,t),toITestItem:Xs.from})}},s0=class extends Te{constructor(t,i){super(),this.s=t,this.t=i,this.a=this.B(new C),this.onDidChangeTelemetryEnabled=this.a.event,this.b=this.B(new C),this.onDidChangeTelemetryConfiguration=this.b.event,this.c={usage:!0,error:!0},this.f=Bs.NONE,this.g=!1,this.j=!1,this.r=new Map,this.m=E.revive(this.s.environment.extensionTelemetryLogResource),this.j=this.s.environment.isExtensionTelemetryLoggingOnly,this.n=i.createLogger(this.m,{id:L3,name:d(2711,null,this.j?" (Not Sent)":""),hidden:!0}),this.B(this.n),this.B(i.onDidChangeLogLevel(r=>{ID(r)&&this.u()})),this.n.info("Below are logs for extension telemetry events sent to the telemetry output channel API once the log level is set to trace."),this.n.info("===========================================================")}u(){this.t.setVisibility(this.m,this.g&&this.t.getLogLevel()===it.Trace)}getTelemetryConfiguration(){return this.f===Bs.USAGE}getTelemetryDetails(){return{isCrashEnabled:this.f>=Bs.CRASH,isErrorsEnabled:this.c.error?this.f>=Bs.ERROR:!1,isUsageEnabled:this.c.usage?this.f>=Bs.USAGE:!1}}instantiateLogger(t,i,r){const n=this.getTelemetryDetails(),s=new J7(i,r,t,this.n,this.j,this.getBuiltInCommonProperties(t),{isUsageEnabled:n.isUsageEnabled,isErrorsEnabled:n.isErrorsEnabled}),o=this.r.get(t.identifier.value)??[];return this.r.set(t.identifier.value,[...o,s]),s.apiTelemetryLogger}$initializeTelemetryLevel(t,i,r){this.f=t,this.g=i,this.c=r??{usage:!0,error:!0},this.u()}getBuiltInCommonProperties(t){const i=Object.create(null);switch(i["common.extname"]=`${t.publisher}.${t.name}`,i["common.extversion"]=t.version,i["common.vscodemachineid"]=this.s.telemetryInfo.machineId,i["common.vscodesessionid"]=this.s.telemetryInfo.sessionId,i["common.sqmid"]=this.s.telemetryInfo.sqmId,i["common.devDeviceId"]=this.s.telemetryInfo.devDeviceId,i["common.vscodeversion"]=this.s.version,i["common.isnewappinstall"]=X7(this.s.telemetryInfo.firstSessionDate),i["common.product"]=this.s.environment.appHost,this.s.uiKind){case Gc.Web:i["common.uikind"]="web";break;case Gc.Desktop:i["common.uikind"]="desktop";break;default:i["common.uikind"]="unknown"}return i["common.remotename"]=Hm(C3(this.s.remote.authority)),i}$onDidChangeTelemetryLevel(t){this.h=this.getTelemetryConfiguration(),this.f=t;const i=this.getTelemetryDetails();this.r.forEach((r,n)=>{const s=r.filter(o=>!o.isDisposed);s.length===0?this.r.delete(n):this.r.set(n,s)}),this.r.forEach(r=>{for(const n of r)n.updateTelemetryEnablements(i.isUsageEnabled,i.isErrorsEnabled)}),this.h!==this.getTelemetryConfiguration()&&this.a.fire(this.getTelemetryConfiguration()),this.b.fire(this.getTelemetryDetails()),this.u()}onExtensionError(t,i){const n=this.r.get(t.value)?.filter(o=>!o.isDisposed);if(!n)return this.r.delete(t.value),!1;let s=!1;for(const o of n)o.ignoreUnhandledExtHostErrors||(o.logError(i),s=!0);return s}};s0=__decorate([__param(0,Ci),__param(1,dl)],s0);var J7=class{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,i,r,n,s,o){this.g=i,this.h=r,this.i=n,this.j=s,this.a=new C,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this.b=t?.ignoreBuiltInCommonProperties??!1,this.c=t?.additionalCommonProperties,this.f=e,this.d={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this.e&&(this.d={isUsageEnabled:e,isErrorsEnabled:t},this.a.fire(this.e))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=G5(t,[]),this.c&&(t=ko(t,this.c)),this.b||(t=ko(t,this.j)),"properties"in e?e.properties=t:e=t,e}k(e,t){this.f&&(this.g.publisher==="vscode"?e=this.g.name+"/"+e:e=this.g.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f?.sendEventData(e,t),this.h.trace(e,t))}logUsage(e,t){this.d.isUsageEnabled&&this.k(e,t)}logError(e,t){if(!(!this.d.isErrorsEnabled||!this.f))if(typeof e=="string")this.k(e,t);else{const i={name:e.name,message:e.message,stack:e.stack,cause:e.cause},r=G5(i,[]),n=new Error(r.message,{cause:r.cause});n.stack=r.stack,n.name=r.name,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f.sendErrorData(n,t),this.h.trace("exception",t)}}get apiTelemetryLogger(){if(!this.e){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e.d.isUsageEnabled},get isErrorsEnabled(){return e.d.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e.a.event.bind(e)};this.e=Object.freeze(t)}return this.e}get isDisposed(){return!this.f}dispose(){if(this.f?.flush){let e=this.f;this.f=void 0,Promise.resolve(e.flush()).then(e=void 0),this.e=void 0}else this.f=void 0}};function X7(e){const t=Date.now()-new Date(e).getTime();return isNaN(t)?!1:t<1e3*60*60*24}var bp=K("IExtHostTelemetry"),o0=class{#e;#t;#i;constructor(t,i,r){this.b=new Map,this.c=new Map,this.#e=t.getProxy(se.MainThreadCommands),this.d=i,this.#i=r,this.#t=t.getProxy(se.MainThreadTelemetry),this.converter=new FP(this,n=>{const s=this.c.get(n);return s?.result===Ie.Void?s:void 0},i),this.f=[{processArgument(n){return Gi(n)}},{processArgument(n){return Nh(n,function(s){if(mt.isIRange(s))return W.to(s);if(xr.isIPosition(s))return lt.to(s);if(mt.isIRange(s.range)&&E.isUri(s.uri))return Yi.to(s);if(s instanceof Qe)return s.buffer.buffer;if(!Array.isArray(s))return s})}}]}registerArgumentProcessor(t){this.f.push(t)}registerApiCommand(t){const i=this.registerCommand(!1,t.id,async(...r)=>{const n=t.args.map((o,a)=>{if(!o.validate(r[a]))throw new Error(`Invalid argument '${o.name}' when running '${t.id}', received: ${typeof r[a]=="object"?JSON.stringify(r[a],null,"	"):r[a]} `);return o.convert(r[a])}),s=await this.executeCommand(t.internalId,...n);return t.result.convert(s,r,this.converter)},void 0,{description:t.description,args:t.args,returns:t.result.description});return this.c.set(t.id,t),new Ye(()=>{i.dispose(),this.c.delete(t.id)})}registerCommand(t,i,r,n,s,o){if(this.d.trace("ExtHostCommands#registerCommand",i),!i.trim().length)throw new Error("invalid id");if(this.b.has(i))throw new Error(`command '${i}' already exists`);return this.b.set(i,{callback:r,thisArg:n,metadata:s,extension:o}),t&&this.#e.$registerCommand(i),new Ye(()=>{this.b.delete(i)&&t&&this.#e.$unregisterCommand(i)})}executeCommand(t,...i){return this.d.trace("ExtHostCommands#executeCommand",t),this.g(t,i,!0)}async g(t,i,r){if(this.b.has(t))return this.#e.$fireCommandActivationEvent(t),this.h(t,i,!1);{let n=!1;const s=Nh(i,function(o){if(o instanceof Ve)return lt.from(o);if(o instanceof Be)return W.from(o);if(o instanceof kr)return Yi.from(o);if(is.isNotebookRange(o))return $n.from(o);if(o instanceof ArrayBuffer)return n=!0,Qe.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return n=!0,Qe.wrap(o);if(o instanceof Qe)return n=!0,o;if(!Array.isArray(o))return o});try{const o=await this.#e.$executeCommand(t,n?new br(s):s,r);return Gi(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this.g(t,i,!1);throw o}}}async h(t,i,r){const n=this.b.get(t);if(!n)throw new Error("Unknown command");const{callback:s,thisArg:o,metadata:a}=n;if(a?.args)for(let l=0;l<a.args.length;l++)try{wk(i[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${t}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}const c=fo.create();try{return await s.apply(o,i)}catch(l){if(t===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...i);u&&(t=u.command)}if(this.d.error(l,t,n.extension?.identifier),!r)throw l;if(n.extension?.identifier){const u=this.#i.onExtensionError(n.extension.identifier,l);this.d.trace("forwarded error to extension?",u,n.extension?.identifier)}throw new class extends Error{constructor(){super(Eo(l)),this.id=t,this.source=n.extension?.displayName??n.extension?.name}}}finally{this.j(n,t,c.elapsed())}}j(t,i,r){t.extension&&this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:t.extension.identifier.value,id:new Qm(i),duration:r})}$executeContributedCommand(t,...i){this.d.trace("ExtHostCommands#$executeContributedCommand",t);const r=this.b.get(t);return r?(i=i.map(n=>this.f.reduce((s,o)=>o.processArgument(s,r.extension?.identifier),n)),this.h(t,i,!0)):Promise.reject(new Error(`Contributed command '${t}' does not exist.`))}getCommands(t=!1){return this.d.trace("ExtHostCommands#getCommands",t),this.#e.$getCommands().then(i=>(t&&(i=i.filter(r=>r[0]!=="_")),i))}$getContributedCommandMetadata(){const t=Object.create(null);for(const[i,r]of this.b){const{metadata:n}=r;n&&(t[i]=n)}return Promise.resolve(t)}};o0=__decorate([__param(0,at),__param(1,ut),__param(2,bp)],o0);var ea=K("IExtHostCommands"),FP=class{constructor(e,t,i){this.d=e,this.f=t,this.g=i,this.delegatingCommandId=`__vsc${Xr()}`,this.b=new Map,this.c=0,this.d.registerCommand(!0,this.delegatingCommandId,this.h,this)}toInternal(e,t){if(!e)return;const i={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return i;const r=this.f(e.command);if(r)i.id=r.internalId,i.arguments=r.args.map((n,s)=>n.convert(e.arguments&&e.arguments[s]));else if(Hc(e.arguments)){const n=`${e.command} /${++this.c}`;this.b.set(n,e),t.add(Ce(()=>{this.b.delete(n),this.g.trace("CommandsConverter#DISPOSE",n)})),i.$ident=n,i.id=this.delegatingCommandId,i.arguments=[n],this.g.trace("CommandsConverter#CREATE",e.command,n)}return i}fromInternal(e){return typeof e.$ident=="string"?this.b.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this.b.get(e[0])}h(...e){const t=this.getActualCommand(...e);return this.g.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this.d.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}},Q=class ir{static{this.Uri=new ir("uri","Uri of a text document",t=>E.isUri(t),t=>t)}static{this.Position=new ir("position","A position in a text document",t=>Ve.isPosition(t),lt.from)}static{this.Range=new ir("range","A range in a text document",t=>Be.isRange(t),W.from)}static{this.Selection=new ir("selection","A selection in a text document",t=>es.isSelection(t),on.from)}static{this.Number=new ir("number","",t=>typeof t=="number",t=>t)}static{this.String=new ir("string","",t=>typeof t=="string",t=>t)}static{this.StringArray=ir.Arr(ir.String)}static Arr(t){return new ir(`${t.name}_array`,`Array of ${t.name}, ${t.description}`,i=>Array.isArray(i)&&i.every(r=>t.validate(r)),i=>i.map(r=>t.convert(r)))}static{this.CallHierarchyItem=new ir("item","A call hierarchy item",t=>t instanceof g1,Qo.from)}static{this.TypeHierarchyItem=new ir("item","A type hierarchy item",t=>t instanceof G1,Xo.from)}static{this.TestItem=new ir("testItem","A VS Code TestItem",t=>t instanceof Ru,Xs.from)}constructor(t,i,r,n){this.name=t,this.description=i,this.validate=r,this.convert=n}optional(){return new ir(this.name,`(optional) ${this.description}`,t=>t==null||this.validate(t),t=>t===void 0?void 0:t===null?null:this.convert(t))}with(t,i){return new ir(t??this.name,i??this.description,this.validate,this.convert)}},Ie=class J8{static{this.Void=new J8("no result",t=>t)}constructor(t,i){this.description=t,this.convert=i}},Pe=class{constructor(e,t,i,r,n){this.id=e,this.internalId=t,this.description=i,this.args=r,this.result=n}},Ic=K("IExtHostTerminalService"),Z7=class extends Te{constructor(e,t,i,r){super(),this.u=e,this._id=t,this.w=i,this.y=r,this.a=!1,this.m={isInteractedWith:!1},this.isOpen=!1,this.s=this.B(new C),this.onWillDispose=this.s.event,this.w=Object.freeze(this.w),this.b=new Promise(s=>this.g=s);const n=this;this.value={get name(){return n.y||""},get processId(){return n.b},get creationOptions(){return n.w},get exitStatus(){return n.j},get state(){return n.m},get selection(){return n.n},get shellIntegration(){return n.shellIntegration},sendText(s,o=!0){n.C(),n.u.$sendText(n._id,s,o)},show(s){n.C(),n.u.$show(n._id,s)},hide(){n.C(),n.u.$hide(n._id)},dispose(){n.a||(n.a=!0,n.u.$dispose(n._id))},get dimensions(){if(!(n.f===void 0||n.h===void 0))return{columns:n.f,rows:n.h}}}}dispose(){this.s.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this.u.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:K7(e.iconPath)??void 0,color:ka.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this.z(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,i,r,n){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this.u.$createTerminal(this._id,{name:this.y,isExtensionCustomPtyTerminal:!0,icon:r,color:ka.isThemeColor(n)?n.id:void 0,location:t?.location||this.z(e,i),isTransient:!0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}z(e,t){return typeof e=="object"?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:hi.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}C(){if(this.a)throw new Error("Terminal has already been disposed")}set name(e){this.y=e}setExitStatus(e,t){this.j=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this.f&&t===this.h||e===0||t===0?!1:(this.f=e,this.h=t,!0)}setInteractedWith(){return this.m.isInteractedWith?!1:(this.m={isInteractedWith:!0},!0)}setSelection(e){this.n=e}_setProcessId(e){this.g?(this.g(e),this.g=void 0):this.b.then(t=>{t!==e&&(this.b=Promise.resolve(e))})}},a0=class{get onProcessReady(){return this.b.event}constructor(e){this.g=e,this.id=0,this.shouldPersist=!1,this.a=new C,this.onProcessData=this.a.event,this.b=new C,this.d=new C,this.onDidChangeProperty=this.d.event,this.f=new C,this.onProcessExit=this.f.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this.g.close()}input(e){this.g.handleInput?.(e)}resize(e,t){this.g.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this.g.onDidWrite(t=>this.a.fire(t)),this.g.onDidClose?.((t=void 0)=>{this.f.fire(t===void 0?void 0:t)}),this.g.onDidOverrideDimensions?.(t=>{t&&this.d.fire({type:kc.OverrideDimensions,value:{cols:t.columns,rows:t.rows}})}),this.g.onDidChangeName?.(t=>{this.d.fire({type:kc.Title,value:t})}),this.g.open(e||void 0),e&&this.g.setDimensions?.(e),this.b.fire({pid:-1,cwd:"",windowsPty:void 0})}},MP=1,c0=class extends Te{get activeTerminal(){return this.b?.value}get terminals(){return this.f.map(t=>t.value)}constructor(t,i,r){super(),this.Q=i,this.f=[],this.g=new Map,this.h={},this.j={},this.m={},this.n=new Map,this.w=this.B(new ho),this.z=new Set,this.C=new Map,this.D=new Map,this.F=new Map,this.G=new Map,this.H=new C,this.onDidCloseTerminal=this.H.event,this.I=new C,this.onDidOpenTerminal=this.I.event,this.J=new C,this.onDidChangeActiveTerminal=this.J.event,this.L=new C,this.onDidChangeTerminalDimensions=this.L.event,this.M=new C,this.onDidChangeTerminalState=this.M.event,this.N=new C,this.onDidChangeShell=this.N.event,this.O=new C({onWillAddFirstListener:()=>this.a.$startSendingDataEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this.O.event,this.P=new C({onWillAddFirstListener:()=>this.a.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this.P.event,this.a=r.getProxy(se.MainThreadTerminalService),this.y=new _P(this.a.$sendProcessData),this.a.$registerProcessSupport(t),this.Q.registerArgumentProcessor({processArgument:n=>{const s=o=>{const a=o;return this.getTerminalById(a.instanceId)?.value};switch(n?.$mid){case Dt.TerminalContext:return s(n);default:{if(Array.isArray(n))for(let o=0;o<n.length&&n[o].$mid===Dt.TerminalContext;o++)n[o]=s(n[o]);return n}}}}),this.B({dispose:()=>{for(const[n,s]of this.g)s.shutdown(!0)}})}getDefaultShell(t){return(t?this.u:this.s)?.path||""}getDefaultShellArgs(t){return(t?this.u:this.s)?.args||[]}createExtensionTerminal(t,i){const r=new Z7(this.a,Xr(),t,t.name),n=new a0(t.pty);return r.createExtensionTerminal(t.location,i,this.R(t,i).resolvedExtHostIdentifier,K7(t.iconPath),BP(t.color)).then(s=>{const o=this.S(s,n);this.h[s]=o}),this.f.push(r),r.value}R(t,i){if(i=i||{},t.location&&typeof t.location=="object"&&"parentTerminal"in t.location){const r=t.location.parentTerminal;if(r){const n=this.f.find(s=>s.value===r);n&&(i.resolvedExtHostIdentifier=n._id)}}else t.location&&typeof t.location!="object"?i.location=t.location:i.location&&typeof i.location=="object"&&"splitActiveTerminal"in i.location&&(i.location={splitActiveTerminal:!0});return i}attachPtyToTerminal(t,i){if(!this.getTerminalById(t))throw new Error(`Cannot resolve terminal with id ${t} for virtual process`);const n=new a0(i),s=this.S(t,n);this.h[t]=s}async $acceptActiveTerminalChanged(t){const i=this.b;if(t===null){this.b=void 0,i!==this.b&&this.J.fire(this.b);return}const r=this.getTerminalById(t);r&&(this.b=r,i!==this.b&&this.J.fire(this.b.value))}async $acceptTerminalProcessData(t,i){const r=this.getTerminalById(t);r&&this.O.fire({terminal:r.value,data:i})}async $acceptTerminalDimensions(t,i,r){const n=this.getTerminalById(t);n&&n.setDimensions(i,r)&&this.L.fire({terminal:n.value,dimensions:n.value.dimensions})}async $acceptDidExecuteCommand(t,i){const r=this.getTerminalById(t);r&&this.P.fire({terminal:r.value,...i})}async $acceptTerminalMaximumDimensions(t,i,r){this.g.get(t)?.resize(i,r)}async $acceptTerminalTitleChange(t,i){const r=this.getTerminalById(t);r&&(r.name=i)}async $acceptTerminalClosed(t,i,r){const n=this.X(this.f,t);if(n!==null){const s=this.f.splice(n,1)[0];s.setExitStatus(i,r),this.H.fire(s.value)}}$acceptTerminalOpened(t,i,r,n){if(i){const a=this.X(this.f,i);if(a!==null){this.f[a]._id=t,this.I.fire(this.terminals[a]),this.f[a].isOpen=!0;return}}const s={name:n.name,shellPath:n.executable,shellArgs:n.args,cwd:typeof n.cwd=="string"?n.cwd:E.revive(n.cwd),env:n.env,hideFromUser:n.hideFromUser},o=new Z7(this.a,t,s,r);this.f.push(o),this.I.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(t,i){this.getTerminalById(t)?._setProcessId(i)}async $startExtensionTerminal(t,i){const r=this.getTerminalById(t);if(!r)return{message:d(2712,null,t)};r.isOpen||await new Promise(s=>{const o=this.onDidOpenTerminal(async a=>{a===r.value&&(o.dispose(),s())})});const n=this.g.get(t);n?n.startSendingEvents(i):this.j[t]={initialDimensions:i}}S(t,i){const r=new He;r.add(i.onProcessReady(s=>this.a.$sendProcessReady(t,s.pid,s.cwd,s.windowsPty))),r.add(i.onDidChangeProperty(s=>this.a.$sendProcessProperty(t,s))),this.y.startBuffering(t,i.onProcessData),r.add(i.onProcessExit(s=>this.U(t,s))),this.g.set(t,i);const n=this.j[t];return n&&i instanceof a0&&(i.startSendingEvents(n.initialDimensions),delete this.j[t]),r}$acceptProcessAckDataEvent(t,i){this.g.get(t)?.acknowledgeDataEvent(i)}$acceptProcessInput(t,i){this.g.get(t)?.input(i)}$acceptTerminalInteraction(t){const i=this.getTerminalById(t);i?.setInteractedWith()&&this.M.fire(i.value)}$acceptTerminalSelection(t,i){this.getTerminalById(t)?.setSelection(i)}$acceptProcessResize(t,i,r){try{this.g.get(t)?.resize(i,r)}catch(n){if(n.code!=="EPIPE"&&n.code!=="ERR_IPC_CHANNEL_CLOSED")throw n}}$acceptProcessShutdown(t,i){this.g.get(t)?.shutdown(i)}$acceptProcessRequestInitialCwd(t){this.g.get(t)?.getInitialCwd().then(i=>this.a.$sendProcessProperty(t,{type:kc.InitialCwd,value:i}))}$acceptProcessRequestCwd(t){this.g.get(t)?.getCwd().then(i=>this.a.$sendProcessProperty(t,{type:kc.Cwd,value:i}))}$acceptProcessRequestLatency(t){return Promise.resolve(t)}registerLinkProvider(t){return this.z.add(t),this.z.size===1&&this.a.$startLinkProvider(),new Ye(()=>{this.z.delete(t),this.z.size===0&&this.a.$stopLinkProvider()})}registerProfileProvider(t,i,r){if(this.C.has(i))throw new Error(`Terminal profile provider "${i}" already registered`);return this.C.set(i,r),this.a.$registerProfileProvider(i,t.identifier.value),new Ye(()=>{this.C.delete(i),this.a.$unregisterProfileProvider(i)})}registerTerminalQuickFixProvider(t,i,r){if(this.D.has(t))throw new Error(`Terminal quick fix provider "${t}" is already registered`);return this.D.set(t,r),this.a.$registerQuickFixProvider(t,i),new Ye(()=>{this.D.delete(t),this.a.$unregisterQuickFixProvider(t)})}async $provideTerminalQuickFixes(t,i){const r=new ri().token;if(r.isCancellationRequested)return;const n=this.D.get(t);if(!n)return;const s=await n.provideTerminalQuickFixes(i,r);if(s===null||Array.isArray(s)&&s.length===0)return;const o=new He;if(this.w.value=o,!Array.isArray(s))return s?hp.from(s,this.Q.converter,o):void 0;const a=[];for(const c of s){const l=hp.from(c,this.Q.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(t,i){const r=new ri().token;let n=await this.C.get(t)?.provideTerminalProfile(r);if(!r.isCancellationRequested){if(n&&!("options"in n)&&(n={options:n}),!n||!("options"in n))throw new Error(`No terminal profile options provided for id "${t}"`);if("pty"in n.options){this.createExtensionTerminal(n.options,i);return}this.createTerminalFromOptions(n.options,i)}}async $provideLinks(t,i){const r=this.getTerminalById(t);if(!r)return[];this.F.delete(t),this.G.get(t)?.dispose(!0);const s=new ri;this.G.set(t,s);const o=[],a={terminal:r.value,line:i},c=[];for(const h of this.z)c.push(ba.withAsyncBody(async f=>{s.token.onCancellationRequested(()=>f({provider:h,links:[]}));const g=await h.provideTerminalLinks(a,s.token)||[];s.token.isCancellationRequested||f({provider:h,links:g})}));const l=await Promise.all(c);if(s.token.isCancellationRequested)return[];const u=new Map;for(const h of l)h&&h.links.length>0&&o.push(...h.links.map(f=>{const g={id:MP++,startIndex:f.startIndex,length:f.length,label:f.tooltip};return u.set(g.id,{provider:h.provider,link:f}),g}));return this.F.set(t,u),o}$activateLink(t,i){const r=this.F.get(t)?.get(i);r&&r.provider.handleTerminalLink(r.link)}U(t,i){this.y.stopBuffering(t),this.g.delete(t),delete this.j[t];const r=this.h[t];r&&(r.dispose(),delete this.h[t]),this.a.$sendProcessExit(t,i)}getTerminalById(t){return this.W(this.f,t)}getTerminalIdByApiObject(t){const i=this.f.findIndex(r=>r.value===t);return i>=0?i:null}W(t,i){const r=this.X(t,i);return r!==null?t[r]:null}X(t,i){const r=t.findIndex(n=>n._id===i);return r>=0?r:null}getEnvironmentVariableCollection(t){let i=this.n.get(t.identifier.value);return i||(i=this.B(new Y7),this.Z(t.identifier.value,i)),i.getScopedEnvironmentVariableCollection(void 0)}Y(t,i){const r=PP(i.map),n=RP(i.descriptionMap);this.a.$setEnvironmentVariableCollection(t,i.persistent,r.length===0?void 0:r,n)}$initEnvironmentVariableCollections(t){t.forEach(i=>{const r=i[0],n=this.B(new Y7(i[1]));this.Z(r,n)})}$acceptDefaultProfile(t,i){const r=this.s;this.s=t,this.u=i,r?.path!==t.path&&this.N.fire(t.path)}Z(t,i){this.n.set(t,i),this.B(i.onDidChangeCollection(()=>{this.Y(t,i)}))}};c0=__decorate([__param(1,ea),__param(2,at)],c0);var Y7=class extends Te{get persistent(){return this.b}set persistent(e){this.b=e,this.f.fire()}get onDidChangeCollection(){return this.f&&this.f.event}constructor(e){super(),this.map=new Map,this.a=new Map,this.descriptionMap=new Map,this.b=!0,this.f=new C,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.j(e);let i=this.a.get(t);return i||(i=new UP(this,e),this.a.set(t,i),this.B(i.onDidChangeCollection(()=>this.f.fire()))),i}replace(e,t,i,r){this.g(e,{value:t,type:Wa.Replace,options:i??{applyAtProcessCreation:!0},scope:r})}append(e,t,i,r){this.g(e,{value:t,type:Wa.Append,options:i??{applyAtProcessCreation:!0},scope:r})}prepend(e,t,i,r){this.g(e,{value:t,type:Wa.Prepend,options:i??{applyAtProcessCreation:!0},scope:r})}g(e,t){if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const i=this.h(e,t.scope),r=this.map.get(i),n=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!r||r.value!==t.value||r.type!==t.type||r.options?.applyAtProcessCreation!==n.applyAtProcessCreation||r.options?.applyAtShellIntegration!==n.applyAtShellIntegration||r.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const s=this.h(e,t.scope),o={variable:e,...t,options:n};this.map.set(s,o),this.f.fire()}}get(e,t){const i=this.h(e,t),r=this.map.get(i);return r?e6(r):void 0}h(e,t){const i=this.j(t);return i.length?`${e}:::${i}`:e}j(e){return this.m(e?.workspaceFolder)??""}m(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[i,r]of this.map)this.j(r.scope)===this.j(e)&&t.set(r.variable,e6(r));return t}delete(e,t){const i=this.h(e,t);this.map.delete(i),this.f.fire()}clear(e){if(e?.workspaceFolder){for(const[t,i]of this.map)i.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.n(e)}else this.map.clear(),this.descriptionMap.clear();this.f.fire()}setDescription(e,t){const i=this.j(t),r=this.descriptionMap.get(i);if(!r||r.description!==e){let n;typeof e=="string"?n=e:n=e?.value.split(`

`)[0];const s={description:n,scope:t};this.descriptionMap.set(i,s),this.f.fire()}}getDescription(e){const t=this.j(e);return this.descriptionMap.get(t)?.description}n(e){const t=this.j(e);this.descriptionMap.delete(t)}},UP=class{get persistent(){return this.b.persistent}set persistent(e){this.b.persistent=e}get onDidChangeCollection(){return this.a&&this.a.event}constructor(e,t){this.b=e,this.d=t,this.a=new C}getScoped(e){return this.b.getScopedEnvironmentVariableCollection(e)}replace(e,t,i){this.b.replace(e,t,i,this.d)}append(e,t,i){this.b.append(e,t,i,this.d)}prepend(e,t,i){this.b.prepend(e,t,i,this.d)}get(e){return this.b.get(e,this.d)}forEach(e,t){this.b.getVariableMap(this.d).forEach((i,r)=>e.call(t,r,i,this),this.d)}[Symbol.iterator](){return this.b.getVariableMap(this.d).entries()}delete(e){this.b.delete(e,this.d),this.a.fire(void 0)}clear(){this.b.clear(this.d)}set description(e){this.b.setDescription(e,this.d)}get description(){return this.b.getDescription(this.d)}},l0=class extends c0{constructor(t,i){super(!1,t,i)}createTerminal(t,i,r){throw new Sg}createTerminalFromOptions(t,i){throw new Sg}};l0=__decorate([__param(0,ea),__param(1,at)],l0);function K7(e){if(!(!e||typeof e=="string"))return"id"in e?{id:e.id,color:e.color}:e}function BP(e){return ka.isThemeColor(e)?e:void 0}function e6(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}var t6="__",aM=K("IAuthenticationService"),cM=K("IAuthenticationExtensionsService"),u0=K("IExtHostAuthentication"),h0=class{constructor(t){this.b=new Map,this.c=new C,this.onDidChangeSessions=this.c.event,this.d=new HP,this.a=t.getProxy(se.MainThreadAuthentication)}async getSession(t,i,r,n={}){const s=dt.toKey(t.identifier),o=[...r].sort().join(" ");return await this.d.getOrCreate(`${s} ${i} ${o}`,async()=>{await this.a.$ensureProvider(i);const a=t.displayName||t.name;return this.a.$getSession(i,r,s,a,n)})}async getAccounts(t){return await this.a.$ensureProvider(t),await this.a.$getAccounts(t)}async removeSession(t,i){const r=this.b.get(t);return r?r.provider.removeSession(i):this.a.$removeSession(t,i)}registerAuthenticationProvider(t,i,r,n){if(this.b.get(t))throw new Error(`An authentication provider with id '${t}' is already registered.`);this.b.set(t,{label:i,provider:r,options:n??{supportsMultipleAccounts:!1}});const s=r.onDidChangeSessions(o=>this.a.$sendDidChangeSessions(t,o));return this.a.$registerAuthenticationProvider(t,i,n?.supportsMultipleAccounts??!1),new Ye(()=>{s.dispose(),this.b.delete(t),this.a.$unregisterAuthenticationProvider(t)})}async $createSession(t,i,r){const n=this.b.get(t);if(n)return await n.provider.createSession(i,r);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $removeSession(t,i){const r=this.b.get(t);if(r)return await r.provider.removeSession(i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $getSessions(t,i,r){const n=this.b.get(t);if(n)return await n.provider.getSessions(i,r);throw new Error(`Unable to find authentication provider with handle: ${t}`)}$onDidChangeAuthenticationSessions(t,i){return t.startsWith(t6)||this.c.fire({provider:{id:t,label:i}}),Promise.resolve()}};h0=__decorate([__param(0,at)],h0);var HP=class{constructor(){this.a=new Map}getOrCreate(e,t){const i=this.a.get(e);if(i)return i;const r=t().finally(()=>this.a.delete(e));return this.a.set(e,r),r}},d0,f0=K("IExtHostLanguageModels"),i6=class{constructor(e,t){this.option=e,this.stream=new Zg,this.stream=t??new Zg}},jP=class{constructor(){this.a=new Map,this.b=new Zg,this.c=!1;const e=this;this.apiObject={get stream(){return e.b.asyncIterable},get text(){return rl.map(e.b.asyncIterable,t=>{if(t instanceof hu)return t.value}).coalesce()}}}*d(){if(this.a.size>0)for(const[,e]of this.a)yield e.stream;else yield this.b}handleFragment(e){if(this.c)return;let t=this.a.get(e.index);t||(this.a.size===0?t=new i6(e.index,this.b):t=new i6(e.index),this.a.set(e.index,t));let i;e.part.type==="text"?i=new hu(e.part.value):i=new rv(e.part.name,e.part.parameters),t.stream.emitOne(i)}reject(e){this.c=!0;for(const t of this.d())t.reject(e)}resolve(){this.c=!0;for(const e of this.d())e.resolve()}},p0=class{static{d0=this}static{this.a=1}constructor(t,i,r){this.j=i,this.k=r,this.c=new C,this.d=new C,this.onDidChangeProviders=this.d.event,this.f=new Map,this.g=new Map,this.h=new Xn,this.i=new Map,this.s=new Set,this.b=t.getProxy(se.MainThreadLanguageModels)}dispose(){this.c.dispose(),this.d.dispose()}registerLanguageModel(t,i,r,n){const s=d0.a++;this.f.set(s,{extension:t.identifier,provider:r,languageModelId:i});let o;n.auth&&(o={providerLabel:t.displayName||t.name,accountLabel:typeof n.auth=="object"?n.auth.label:void 0}),this.b.$registerLanguageModelProvider(s,`${dt.toKey(t.identifier)}/${s}/${i}`,{extension:t.identifier,id:i,vendor:n.vendor??dt.toKey(t.identifier),name:n.name??"",family:n.family??"",version:n.version,maxInputTokens:n.maxInputTokens,maxOutputTokens:n.maxOutputTokens,auth:o,targetExtensions:n.extensions});const a=r.onDidReceiveLanguageModelResponse2?.(({extensionId:c,participant:l,tokenCount:u})=>{this.b.$whenLanguageModelChatRequestMade(i,new dt(c),l,u)});return Ce(()=>{this.f.delete(s),this.b.$unregisterProvider(s),a?.dispose()})}async $startChatRequest(t,i,r,n,s,o){const a=this.f.get(t);if(!a)throw new Error("Provider not found");const c=new Lm(async u=>{if(o.isCancellationRequested){this.j.warn(`[CHAT](${a.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}let h;if(u.part instanceof rv?h={type:"function_use",name:u.part.name,parameters:u.part.parameters}:u.part instanceof hu&&(h={type:"text",value:u.part.value}),!h){this.j.warn(`[CHAT](${a.extension.value}) UNKNOWN part ${JSON.stringify(u)}`);return}this.b.$reportResponsePart(i,{index:u.index,part:h})});let l;if(a.provider.provideLanguageModelResponse2)l=Promise.resolve(a.provider.provideLanguageModelResponse2(n.map(vc.to),s,dt.toKey(r),c,o));else{const u=new Lm(async h=>{c.report({index:h.index,part:new hu(h.part)})});l=Promise.resolve(a.provider.provideLanguageModelResponse(n.map(vc.to),s?.modelOptions??{},dt.toKey(r),u,o))}l.then(()=>{this.b.$reportResponseDone(i,void 0)},u=>{this.b.$reportResponseDone(i,Bc(u))})}$provideTokenLength(t,i,r){const n=this.f.get(t);return n?Promise.resolve(n.provider.provideTokenCount(i,r)):Promise.resolve(0)}$acceptChatModelMetadata(t){if(t.added)for(const{identifier:i,metadata:r}of t.added)this.g.set(i,{metadata:r,apiObjects:new Xn});if(t.removed)for(const i of t.removed){this.g.delete(i);for(const[r,n]of this.i)n.languageModelId===i&&(n.res.reject(new Cn),this.i.delete(r))}t.added?.forEach(i=>this.q(i.metadata)),this.d.fire(void 0)}async selectLanguageModels(t,i){const r=await this.b.$selectChatModels({...i,extension:t.identifier}),n=[],s=this;for(const o of r){const a=this.g.get(o);if(!a)continue;this.o(t.identifier,a.metadata)&&await this.q(a.metadata);let c=a.apiObjects.get(t.identifier);c||(c={id:o,vendor:a.metadata.vendor,family:a.metadata.family,version:a.metadata.version,name:a.metadata.name,maxInputTokens:a.metadata.maxInputTokens,countTokens(l,u){if(!s.g.has(o))throw ns.NotFound(o);return s.r(o,l,u??Wt.None)},sendRequest(l,u,h){if(!s.g.has(o))throw ns.NotFound(o);return s.l(t,o,l,u??{},h??Wt.None)}},Object.freeze(c),a.apiObjects.set(t.identifier,c)),n.push(c)}return n}async l(t,i,r,n,s){const o=this.m(t,r),a=t.identifier,c=this.g.get(i)?.metadata;if(!c||!this.g.has(i))throw ns.NotFound(`Language model '${i}' is unknown.`);if(this.o(a,c)&&(!await this.n(t,{identifier:c.extension,displayName:c.auth.providerLabel},n.justification,!1)||!this.h.get(a)?.has(c.extension)))throw ns.NoPermissions(`Language model '${i}' cannot be used by '${a.value}'.`);try{const l=Math.random()*1e6|0,u=new jP;this.i.set(l,{languageModelId:i,res:u});try{await this.b.$tryStartChatRequest(a,i,l,o,n,s)}catch(h){throw this.i.delete(l),h}return u.apiObject}catch(l){throw l.name===ns.name?l:new ns(`Language model '${i}' errored: ${Eo(l)}`,"Unknown",l)}}m(t,i){const r=[];for(const n of i)n.role===Rr.System&&B(t,"languageModelSystem"),n.content2 instanceof Tf&&B(t,"lmTools"),r.push(vc.from(n));return r}async $acceptResponsePart(t,i){const r=this.i.get(t);r&&r.res.handleFragment(i)}async $acceptResponseDone(t,i){const r=this.i.get(t);r&&(this.i.delete(t),i?r.res.reject(SS(i)):r.res.resolve())}async n(t,i,r,n){const s=t6+i.identifier.value;if(await this.k.getSession(t,s,[],{silent:!0}))return this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0;if(n)return!1;try{const a=r?d(2703,null,i.displayName,r):void 0;return await this.k.getSession(t,s,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0}catch{return!1}}o(t,i){return!!i.auth&&!dt.equals(i.extension,t)}async q(t){if(t.auth)for(const i of this.s)try{await this.n(i,{identifier:t.extension,displayName:""},void 0,!0)}catch(r){this.j.error("Fake Auth request failed"),this.j.error(r)}}async r(t,i,r){if(!this.g.get(t))throw ns.NotFound(`Language model '${t}' is unknown.`);const s=vr.find(this.f.values(),o=>o.languageModelId===t);return s?s.provider.provideTokenCount(i,r):this.b.$countTokens(t,typeof i=="string"?i:vc.from(i),r)}$updateModelAccesslist(t){const i=new Array;for(const{from:r,to:n,enabled:s}of t){const o=this.h.get(r)??new Ro;if(o.has(n)!==s){s?o.add(n):o.delete(n),this.h.set(r,o);const c={from:r,to:n};i.push(c),this.c.fire(c)}}}createLanguageModelAccessInformation(t){this.s.add(t);const i=this,r=Gt.signal(Gt.filter(this.c.event,s=>dt.equals(s.from,t.identifier))),n=Gt.signal(this.d.event);return{get onDidChange(){return Gt.any(r,n)},canSendRequest(s){let o;e:for(const[c,l]of i.g)for(const u of l.apiObjects.values())if(u===s){o=l.metadata;break e}if(!o)return;if(!i.o(t.identifier,o))return!0;const a=i.h.get(t.identifier);if(a)return a.has(o.extension)}}}};p0=d0=__decorate([__param(0,at),__param(1,ut),__param(2,u0)],p0);function Tu(e,t=sr){return kk(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}function WP(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var r6;(function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"})(r6||(r6={}));var n6=class X8{constructor(t){const i=iy(t);this.c=i,this.a=X8.d(i),this.b=new Map}static d(t){const i=new Uint8Array(256);return i.fill(t),i}set(t,i){const r=iy(i);t>=0&&t<256?this.a[t]=r:this.b.set(t,r)}get(t){return t>=0&&t<256?this.a[t]:this.b.get(t)||this.c}clear(){this.a.fill(this.c),this.b.clear()}},s6;(function(e){e[e.False=0]="False",e[e.True=1]="True"})(s6||(s6={}));var An;(function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"})(An||(An={}));var zP=class extends n6{constructor(e,t){super(An.Regular),this.e=null,this.f=null,this.g=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this.e=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this.e=null;for(let i=0,r=e.length;i<r;i++)this.set(e.charCodeAt(i),An.WordSeparator);this.set(L.Space,An.Whitespace),this.set(L.Tab,An.Whitespace)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const r of this.h(e)){if(r.index>t)break;i=r}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this.h(e))if(!(i.index<t))return i;return null}h(e){return this.e?this.f===e?this.g:(this.f=e,this.g=this.j(this.e.segment(e)),this.g):[]}j(e){const t=[];for(const i of e)this.k(i)&&t.push(i);return t}k(e){return!!e.isWordLike}},o6=new $g(10);function VP(e,t){const i=`${e}/${t.join(",")}`;let r=o6.get(i);return r||(r=new zP(e,t),o6.set(i,r)),r}var a6=class{constructor(e,t,i,r){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=r}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=c6(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=Kx(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new yI(t,this.wordSeparators?VP(this.wordSeparators,[]):null,i?this.searchString:null)}};function c6(e){if(!e||e.length===0)return!1;for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(r===L.LineFeed)return!0;if(r===L.Backslash){if(t++,t>=i)break;const n=e.charCodeAt(t);if(n===L.n||n===L.r||n===L.W)return!0}}return!1}function l6(e,t,i){if(!i)return new Tm(e,null);const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n];return new Tm(e,r)}function qP(e,t,i,r,n){if(r===0)return!0;const s=t.charCodeAt(r-1);if(e.get(s)!==An.Regular||s===L.CarriageReturn||s===L.LineFeed)return!0;if(n>0){const o=t.charCodeAt(r);if(e.get(o)!==An.Regular)return!0}return!1}function GP(e,t,i,r,n){if(r+n===i)return!0;const s=t.charCodeAt(r+n);if(e.get(s)!==An.Regular||s===L.CarriageReturn||s===L.LineFeed)return!0;if(n>0){const o=t.charCodeAt(r+n-1);if(e.get(o)!==An.Regular)return!0}return!1}function u6(e,t,i,r,n){return qP(e,t,i,r,n)&&GP(e,t,i,r,n)}var QP=class{constructor(e,t){this._wordSeparators=e,this.a=t,this.b=-1,this.c=0}reset(e){this.a.lastIndex=e,this.b=-1,this.c=0}next(e){const t=e.length;let i;do{if(this.b+this.c===t||(i=this.a.exec(e),!i))return null;const r=i.index,n=i[0].length;if(r===this.b&&n===this.c){if(n===0){ly(e,t,this.a.lastIndex)>65535?this.a.lastIndex+=2:this.a.lastIndex+=1;continue}return null}if(this.b=r,this.c=n,!this._wordSeparators||u6(this._wordSeparators,e,t,r,n))return i}while(i);return null}};function h6(e){return e.scheme!==de.file&&e.scheme!==de.vscodeRemote}function JP(e){if(e.folders.length)return e.folders.every(t=>h6(t.uri))?e.folders[0].uri:void 0;if(e.configuration&&h6(e.configuration))return e.configuration}function XP(e){return JP(e)?.scheme}var ZP=Vm,d6=K("remoteAgentService"),hM=new class{constructor(){this.maxSampleCount=5,this.sampleDelay=2e3,this.initial=[],this.maxInitialCount=3,this.average=[],this.maxAverageCount=100,this.highLatencyMultiple=2,this.highLatencyMinThreshold=500,this.highLatencyMaxThreshold=1500,this.lastMeasurement=void 0}get latency(){return this.lastMeasurement}async measure(e){let t=1/0;for(let r=0;r<this.maxSampleCount;r++){const n=await e.getRoundTripTime();if(n===void 0)return;t=Math.min(t,n/2),await mn(this.sampleDelay)}this.average.push(t),this.average.length>this.maxAverageCount&&this.average.shift();let i;return this.initial.length<this.maxInitialCount?this.initial.push(t):i=this.initial.reduce((r,n)=>r+n,0)/this.initial.length,this.lastMeasurement={initial:i,current:t,average:this.average.reduce((r,n)=>r+n,0)/this.average.length,high:typeof i>"u"?!1:t>this.highLatencyMaxThreshold||t>this.highLatencyMinThreshold&&t>i*this.highLatencyMultiple},this.lastMeasurement}},g0,YP=K("pathService"),f6=g0=class{constructor(t,i,r,n){this.d=t,this.e=i,this.f=r,this.g=n,this.a=(async()=>(await this.e.getEnvironment())?.os||$x)(),this.b=(async()=>{const s=await this.e.getEnvironment();return this.c=s?.userHome??t})()}hasValidBasename(t,i,r){return typeof i=="string"||typeof i>"u"?this.a.then(n=>this.h(t,n,i)):this.h(t,i,r)}h(t,i,r){return t.scheme===de.file||t.scheme===de.vscodeRemote?xk(r??Ls(t),i===Un.Windows):!0}get defaultUriScheme(){return g0.findDefaultUriScheme(this.f,this.g)}static findDefaultUriScheme(t,i){if(t.remoteAuthority)return de.vscodeRemote;const r=XP(i.getWorkspace());if(r)return r;const n=i.getWorkspace().folders[0];if(n)return n.uri.scheme;const s=i.getWorkspace().configuration;return s?s.scheme:de.file}userHome(t){return t?.preferLocal?this.d:this.b}get resolvedUserHome(){return this.c}get path(){return this.a.then(t=>t===Un.Windows?ii:et)}async fileURI(t){let i="";if(await this.a===Un.Windows&&(t=t.replace(/\\/g,"/")),t[0]==="/"&&t[1]==="/"){const n=t.indexOf("/",2);n===-1?(i=t.substring(2),t="/"):(i=t.substring(2,n),t=t.substring(n)||"/")}return E.from({scheme:de.file,authority:i,path:t,query:"",fragment:""})}};f6=g0=__decorate([__param(1,d6),__param(2,ZP),__param(3,vm)],f6);function p6(e){return typeof e=="object"&&"uri"in e&&"pattern"in e}var g6=class{constructor(t,i,r,n,s,o){this.a=t,this.b=i,this.c=r,this.d=n,this.e=s,this.f=o}text(t,i,r={}){t=this.g(t,r);const n=this.a.getValue(),s=i&&i.some(a=>!this.a.getValue({resource:a}).search.useRipgrep);return{...this.i(i?.map(h4),r),type:Ec.Text,contentPattern:t,previewOptions:r.previewOptions,maxFileSize:r.maxFileSize,usePCRE2:n.search.usePCRE2||s||!1,surroundingContext:r.surroundingContext,userDisabledExcludesAndIgnoreFiles:r.disregardExcludeSettings&&r.disregardIgnoreFiles}}g(t,i){const r=this.a.getValue();t.isRegExp&&(t.pattern=t.pattern.replace(/\r?\n/g,"\\n"));const n={...t,wordSeparators:r.editor.wordSeparators};return this.k(t,i)&&(n.isCaseSensitive=!0),this.l(t)&&(n.isMultiline=!0),i.notebookSearchConfig?.includeMarkupInput&&(n.notebookInfo||(n.notebookInfo={}),n.notebookInfo.isInNotebookMarkdownInput=i.notebookSearchConfig.includeMarkupInput),i.notebookSearchConfig?.includeMarkupPreview&&(n.notebookInfo||(n.notebookInfo={}),n.notebookInfo.isInNotebookMarkdownPreview=i.notebookSearchConfig.includeMarkupPreview),i.notebookSearchConfig?.includeCodeInput&&(n.notebookInfo||(n.notebookInfo={}),n.notebookInfo.isInNotebookCellInput=i.notebookSearchConfig.includeCodeInput),i.notebookSearchConfig?.includeOutput&&(n.notebookInfo||(n.notebookInfo={}),n.notebookInfo.isInNotebookCellOutput=i.notebookSearchConfig.includeOutput),n}file(t,i={}){return{...this.i(t,i),type:Ec.File,filePattern:i.filePattern?i.filePattern.trim():i.filePattern,exists:i.exists,sortByScore:i.sortByScore,cacheKey:i.cacheKey,shouldGlobMatchFilePattern:i.shouldGlobSearch}}h(t,i){return t?(t=Array.isArray(t)?t.map(yp):yp(t),i?this.parseSearchPaths(t):{pattern:m0(...Array.isArray(t)?t:[t])}):{}}i(t=[],i={}){const r=i.excludePattern&&p6(i.excludePattern)?i.excludePattern.pattern:i.excludePattern,n=this.h(i.includePattern,i.expandPatterns),s=this.h(r,i.expandPatterns),o=t.length>1,a=(n.searchPaths&&n.searchPaths.length?n.searchPaths.map(u=>this.r(u,i,s)):t.map(u=>this.t(u,i,s,o))).filter(u=>!!u),c={_reason:i._reason,folderQueries:a,usingSearchPaths:!!(n.searchPaths&&n.searchPaths.length),extraFileResources:i.extraFileResources,excludePattern:s.pattern,includePattern:n.pattern,onlyOpenEditors:i.onlyOpenEditors,maxResults:i.maxResults};if(i.onlyOpenEditors){const u=ci(this.c.groups.flatMap(g=>g.editors.map(m=>m.resource)));this.d.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));const h=u.filter(g=>m7(c,g.fsPath)),f=this.j(h);return this.d.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(f)),{...c,...f}}const l=i.extraFileResources&&i.extraFileResources.filter(u=>m7(c,u.fsPath));return c.extraFileResources=l&&l.length?l:void 0,c}j(t){const i=[],r=new li,n={};let s=!1;return t.forEach(o=>{if(o.scheme===de.walkThrough)return;if(Nk(o)){const c=this.b.getWorkspaceFolder(o)?.uri??this.f.extUri.dirname(o);let l=r.get(c);l||(s=!0,l={folder:c,includePattern:{}},i.push(l),r.set(c,l));const u=Yc(c.fsPath,o.fsPath);ma(l.includePattern)[u.replace(/\\/g,"/")]=!0}else o.fsPath&&(s=!0,n[o.fsPath]=!0)}),{folderQueries:i,includePattern:n,usingSearchPaths:!0,excludePattern:s?void 0:{"**/*":!0}}}k(t,i){if(i.isSmartCase){if(t.isRegExp){if(fy(t.pattern,!0))return!0}else if(fy(t.pattern))return!0}return!!t.isCaseSensitive}l(t){return t.isMultiline||t.isRegExp&&c6(t.pattern)||t.pattern.indexOf(`
`)>=0?!0:!!t.isMultiline}parseSearchPaths(t){const i=h=>Mg(h)||/^\.\.?([\/\\]|$)/.test(h),n=(Array.isArray(t)?t:eR(t)).map(h=>{const f=this.e.resolvedUserHome;return f?WP(h,f.scheme===de.file?f.fsPath:f.path):h}),s=gb(n,h=>i(h)?"searchPaths":"exprSegments"),o=(s.exprSegments||[]).map(h=>ny(h,"/")).map(h=>ny(h,"\\")).map(h=>(h[0]==="."&&(h="*"+h),tR(h))),a={},c=this.n(s.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=o.flat(),u=m0(...l);return u&&(a.pattern=u),a}m(t,i){return i.disregardExcludeSettings?void 0:nP(t,!i.disregardSearchExcludeSettings)}n(t){if(!t||!t.length)return[];const i=t.flatMap(n=>{let{pathPortion:s,globPortion:o}=KP(n);return o&&(o=v0(o)),this.o(s).flatMap(c=>this.q(c,o))}),r=new Map;return i.forEach(n=>{const s=n.searchPath.toString(),o=r.get(s);o?n.pattern&&(o.pattern=o.pattern||{},o.pattern[n.pattern]=!0):r.set(s,{searchPath:n.searchPath,pattern:n.pattern?m0(n.pattern):void 0})}),Array.from(r.values())}o(t){if(Mg(t)){const i=this.b.getWorkspace().folders;return i[0]&&i[0].uri.scheme!==de.file?[{searchPath:i[0].uri.with({path:t})}]:[{searchPath:E.file(ha(t))}]}if(this.b.getWorkbenchState()===Fh.FOLDER){const i=this.b.getWorkspace().folders[0].uri;if(t=yp(t),t.startsWith("../")||t===".."){const n=et.resolve(i.path,t);return[{searchPath:i.with({path:n})}]}const r=v0(t);return[{searchPath:i,pattern:r}]}else{if(t==="./"||t===".\\")return[];{const i=t.replace(/^\.[\/\\]/,""),n=this.b.getWorkspace().folders.map(s=>{const o=i.match(new RegExp(`^${vo(s.name)}(?:/(.*)|$)`));return o?{match:o,folder:s}:null}).filter(bo);if(n.length)return n.map(s=>{const o=s.match[1];return{searchPath:s.folder.uri,pattern:o&&v0(o)}});{const s=t.match(/\.[\/\\](.+)[\/\\]?/),o=s?s[1]:t,a=d(12545,null,o);throw new Error(a)}}}}q(t,i){const r=t.pattern&&i?`${t.pattern}/${i}`:t.pattern||i,n=[{searchPath:t.searchPath,pattern:r}];return r&&!r.endsWith("**")&&n.push({searchPath:t.searchPath,pattern:r+"/**"}),n}r(t,i,r){const n=this.t(h4(t.searchPath),i,r,!1);return n?{...n,includePattern:t.pattern}:null}t(t,i,r,n){let s;const o=E.isUri(t)?t:t.uri,a=i.excludePattern&&p6(i.excludePattern)?i.excludePattern.uri:void 0,l=!a||!(E.isUri(t)&&this.f.extUri.isEqual(t,a))?a:void 0;if(r.searchPaths){const b=r.searchPaths.filter(k=>xy(k.searchPath,o))[0];if(b&&!b.pattern)return null;b&&(s=b.pattern)}const u=this.a.getValue({resource:o}),f={...this.m(u,i)||{},...s||{}},g=E.isUri(t)?Ls(t):t.name,m=Object.keys(f).length>0?{folder:l,pattern:f}:void 0;return{folder:o,folderName:n?g:void 0,excludePattern:m,fileEncoding:u.files&&u.files.encoding,disregardIgnoreFiles:typeof i.disregardIgnoreFiles=="boolean"?i.disregardIgnoreFiles:!u.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof i.disregardGlobalIgnoreFiles=="boolean"?i.disregardGlobalIgnoreFiles:!u.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof i.disregardParentIgnoreFiles=="boolean"?i.disregardParentIgnoreFiles:!u.search.useParentIgnoreFiles,ignoreSymlinks:typeof i.ignoreSymlinks=="boolean"?i.ignoreSymlinks:!u.search.followSymlinks}}};g6=__decorate([__param(0,hd),__param(1,vm),__param(2,EA),__param(3,ut),__param(4,YP),__param(5,_5)],g6);function KP(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const i=t.index,r=e.substr(0,i).match(/[/|\\][^/\\]*$/);if(r){let n=e.substr(0,r.index);return n.match(/[/\\]/)||(n+="/"),{pathPortion:n,globPortion:e.substr((r.index||0)+1)}}}return{pathPortion:e}}function m0(...e){return e.length?e.reduce((t,i)=>(t[i]=!0,t),Object.create(null)):void 0}function eR(e){return e1(e,",").map(t=>t.trim()).filter(t=>!!t.length)}function tR(e){return[`**/${e}/**`,`**/${e}`].map(i=>i.replace(/\*\*\/\*\*/g,"**"))}function yp(e){return e.replace(/\\/g,"/")}function v0(e){return yp(e).replace(/^\.\//,"").replace(/\/+$/g,"")}var iR=7e3;function rR(e,t){const i=t.activationEvents;if(!i)return Promise.resolve(void 0);const r=[],n=[];for(const u of i)if(/^workspaceContains:/.test(u)){const h=u.substr(18);h.indexOf("*")>=0||h.indexOf("?")>=0||e.forceUsingSearch?n.push(h):r.push(h)}if(r.length===0&&n.length===0)return Promise.resolve(void 0);const{promise:s,resolve:o}=Bk(),a=u=>o({activationEvent:u}),c=Promise.all(r.map(u=>nR(e,u,a))).then(()=>{}),l=sR(e,t.identifier,n,a);return Promise.all([c,l]).then(()=>{o(void 0)}),s}async function nR(e,t,i){for(const r of e.folders)if(await e.exists(Mi(E.revive(r),t))){i(`workspaceContains:${t}`);return}}async function sR(e,t,i,r){if(i.length===0)return Promise.resolve(void 0);const n=new ri,s=e.checkExists(e.folders,i,n.token),o=setTimeout(async()=>{n.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${i.join(",")}`)},iR);let a=!1;try{a=await s}catch(c){co(c)||mr(c)}n.dispose(),clearTimeout(o),a&&r(`workspaceContains:${i.join(",")}`)}var m6=class{constructor(e){this.b=new C,this.onDidChangePassword=this.b.event,this.a=e.getProxy(se.MainThreadSecretState)}async $onDidChangePassword(e){this.b.fire(e)}get(e,t){return this.a.$getPassword(e,t)}store(e,t,i){return this.a.$setPassword(e,t,i)}delete(e,t){return this.a.$deletePassword(e,t)}},w0=K("IExtHostSecretState"),oR=class{#e;constructor(e,t){this.disposables=new He,this.a=dt.toKey(e.identifier),this.#e=t,this.onDidChange=Gt.map(Gt.filter(this.#e.onDidChangePassword,i=>i.extensionId===this.a),i=>({key:i.key}),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#e.get(this.a,e)}store(e,t){return this.#e.store(this.a,e,t)}delete(e){return this.#e.delete(this.a,e)}},b0=class{constructor(t,i,r){this.f=r,this.d=new Map,this.a=i.getProxy(se.MainThreadLocalization),this.b=t.environment.appLanguage,this.c=this.b===po}getMessage(t,i){const{message:r,args:n,comment:s}=i;if(this.c)return ry(r,n??{});let o=r;s&&s.length>0&&(o+=`/${Array.isArray(s)?s.join(""):s}`);const a=this.d.get(t)?.contents[o];return a||this.f.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),ry(a??r,n??{})}getBundle(t){return this.d.get(t)?.contents}getBundleUri(t){return this.d.get(t)?.uri}async initializeLocalizedMessages(t){if(this.c||!t.l10n&&!t.isBuiltin||this.d.has(t.identifier.value))return;let i;const r=await this.g(t);if(!r){this.f.error(`No bundle location found for extension ${t.identifier.value}`);return}try{const n=await this.a.$fetchBundleContents(r),s=JSON.parse(n);i=t.isBuiltin?s.contents?.bundle:s}catch(n){this.f.error(`Failed to load translations for ${t.identifier.value} from ${r}: ${n.message}`);return}i&&this.d.set(t.identifier.value,{contents:i,uri:r})}async g(t){if(t.isBuiltin){const i=await this.a.$fetchBuiltInBundleUri(t.identifier.value,this.b);return E.revive(i)}return t.l10n?E.joinPath(t.extensionLocation,t.l10n,`bundle.l10n.${this.b}.json`):void 0}};b0=__decorate([__param(0,Ci),__param(1,at),__param(2,ut)],b0);var y0=K("IExtHostLocalizationService"),E0=K("IExtHostManagedSockets"),S0=class{constructor(t){this.b=0,this.c=null,this.d=new Map,this.a=t.getProxy(se.MainThreadManagedSockets)}setFactory(t,i){for(const r of this.d.values())r.dispose();this.c&&this.a.$unregisterSocketFactory(this.c.socketFactoryId),this.c=new aR(t,i),this.a.$registerSocketFactory(this.c.socketFactoryId)}async $openRemoteSocket(t){if(!this.c||this.c.socketFactoryId!==t)throw new Error(`No socket factory with id ${t}`);const i=++this.b,r=await this.c.makeConnection(),n=new He;return this.d.set(i,new cR(i,r,n)),n.add(Ce(()=>this.d.delete(i))),n.add(r.onDidEnd(()=>{this.a.$onDidManagedSocketEnd(i),n.dispose()})),n.add(r.onDidClose(s=>{this.a.$onDidManagedSocketClose(i,s?.stack??s?.message),n.dispose()})),n.add(r.onDidReceiveMessage(s=>this.a.$onDidManagedSocketHaveData(i,Qe.wrap(s)))),i}$remoteSocketWrite(t,i){this.d.get(t)?.actual.send(i.buffer)}$remoteSocketEnd(t){const i=this.d.get(t);i&&(i.actual.end(),i.dispose())}async $remoteSocketDrain(t){await this.d.get(t)?.actual.drain?.()}};S0=__decorate([__param(0,at)],S0);var aR=class{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}},cR=class extends Te{constructor(e,t,i){super(),this.socketId=e,this.actual=t,this.B(i)}},x0,v6=K("IHostUtils"),k0=x0=class extends Te{constructor(t,i,r,n,s,o,a,c,l,u,h,f,g){super(),this.Y=f,this.Z=g,this.a=this.B(new C),this.onDidChangeRemoteConnectionData=this.a.event,this.R=new Map,this.W=!1,this.c=i,this.g=r,this.f=a,this.j=n,this.m=s,this.s=o,this.t=l,this.u=u,this.w=h,this.y=this.g.getProxy(se.MainThreadWorkspace),this.z=this.g.getProxy(se.MainThreadTelemetry),this.C=this.g.getProxy(se.MainThreadExtensionService),this.D=new gn,this.F=new gn,this.G=new gn,this.H=new gn,this.I=new uR(this.f.extensions.activationEvents),this.L=new Pu(this.I,this.f.extensions.allExtensions);const m=new Ro(this.f.extensions.myExtensions);this.J=new Pu(this.I,y6(this.L,m)),go&&(this.s.info(`Creating extension host with the following global extensions: ${Ac(this.L)}`),this.s.info(`Creating extension host with the following local extensions: ${Ac(this.J)}`)),this.M=new $7(this.g,this.s),this.N=new m6(this.g),this.O=c,this.h=this.q.add(t.createChild(new fm([Jv,this.M],[w0,this.N]))),this.P=this.B(new Gv(this.J,this.L,{onExtensionActivationError:(b,k,I)=>{this.C.$onExtensionActivationError(b,Bc(k),I)},actualActivateExtension:async(b,k)=>{if(Pu.isHostExtension(b,this.J,this.L))return await this.C.$activateExtension(b,k),new kP;const I=this.J.getExtensionDescription(b);return this.fb(I,k)}},this.s)),this.Q=null,this.S=Object.create(null),this.U=!1,this.X=this.f.remote.connectionData}getRemoteConnectionData(){return this.X}async initialize(){try{await this.vb(),this.D.open(),await this.j.waitForInitializeCall(),Vi("code/extHost/ready"),this.F.open(),this.f.autoStart&&this.tb()}catch(t){mr(t)}}async $(){this.O.onWillDeactivateAll();let t=[];try{t=this.J.getAllExtensionDescriptions().map(s=>s.identifier).filter(s=>this.isActivated(s)).map(s=>this.eb(s))}catch{}await Promise.all(t)}terminate(t,i=0){if(this.W)return;this.W=!0,this.s.info(`Extension host terminating: ${t}`),this.s.flush(),this.u.dispose(),this.P.dispose(),bg(n=>{this.s.error(n)}),this.g.dispose();const r=this.$();Promise.race([mn(5e3),r]).finally(()=>{this.c.pid?this.s.info(`Extension host with pid ${this.c.pid} exiting with code ${i}`):this.s.info(`Extension host exiting with code ${i}`),this.s.flush(),this.s.dispose(),this.c.exit(i)})}isActivated(t){return this.G.isOpen()?this.P.isActivated(t):!1}async getExtension(t){const i=await this.C.$getExtension(t);return i&&{...i,identifier:new dt(i.identifier.value),extensionLocation:E.revive(i.extensionLocation)}}ab(t,i){return this.P.activateByEvent(t,i)}bb(t,i){return this.P.activateById(t,i)}activateByIdWithErrors(t,i){return this.bb(t,i).then(()=>{const r=this.P.getActivatedExtension(t);if(r.activationFailed)return Promise.reject(r.activationFailedError)})}getExtensionRegistry(){return this.G.wait().then(t=>this.J)}getExtensionExports(t){if(this.G.isOpen())return this.P.getActivatedExtension(t).exports;try{return this.P.getActivatedExtension(t).exports}catch{return null}}async cb(t){if(t.scheme===de.file&&this.c.fsRealpath){const i=t.fsPath;this.R.has(i)||this.R.set(i,this.c.fsRealpath(i));const r=await this.R.get(i);return E.file(r)}return t}async getExtensionPathIndex(){return this.Q||(this.Q=this.db(this.J.getAllExtensionDescriptions()).then(t=>new lR(t))),this.Q}async db(t){const i=Wn.forUris(r=>_k.ignorePathCasing(r));return await Promise.all(t.map(async r=>{if(this.wb(r)){const n=await this.cb(r.extensionLocation);i.set(n,r)}})),i}eb(t){let i=Promise.resolve(void 0);if(!this.G.isOpen()||!this.P.isActivated(t))return i;const r=this.P.getActivatedExtension(t);if(!r)return i;try{typeof r.module.deactivate=="function"&&(i=Promise.resolve(r.module.deactivate()).then(void 0,n=>(this.s.error(n),Promise.resolve(void 0))))}catch(n){this.s.error(`An error occurred when deactivating the extension '${t.value}':`),this.s.error(n)}try{r.disposable.dispose()}catch(n){this.s.error(`An error occurred when disposing the subscriptions for extension '${t.value}':`),this.s.error(n)}return i}async fb(t,i){return this.f.remote.isRemote?this.C.$onWillActivateExtension(t.identifier):await this.C.$onWillActivateExtension(t.identifier),this.hb(t,i).then(r=>{const n=r.activationTimes;return this.C.$onDidActivateExtension(t.identifier,n.codeLoadingTime,n.activateCallTime,n.activateResolvedTime,i),this.gb(t,i,"success",n),r},r=>{throw this.gb(t,i,"failure"),r})}gb(t,i,r,n){const s=b6(t,i);this.z.$publicLog2("extensionActivationTimes",{...s,...n||{},outcome:r})}hb(t,i){const r=b6(t,i);this.z.$publicLog2("activatePlugin",r);const n=this.wb(t);if(!n)return Promise.resolve(new xP(gp.NONE));this.s.info(`ExtensionService#_doActivateExtension ${t.identifier.value}, startup: ${i.startup}, activationEvent: '${i.activationEvent}'${t.identifier.value!==i.extensionId.value?`, root cause: ${i.extensionId.value}`:""}`),this.s.flush();const s=new He,o=new D7(i.startup);return Promise.all([this.xb(t,Mi(t.extensionLocation,n),o),this.ib(t,s)]).then(a=>(Vi(`code/extHost/willActivateExtension/${t.identifier.value}`),x0.jb(this.s,t.identifier,a[0],a[1],s,o))).then(a=>(Vi(`code/extHost/didActivateExtension/${t.identifier.value}`),a))}ib(t,i){const r=this.Z.createLanguageModelAccessInformation(t),n=i.add(new DP(t,this.M)),s=i.add(new I7(t.identifier.value,!1,this.M)),o=i.add(new oR(t,this.N)),a=t.isUnderDevelopment?this.f.environment.extensionTestsLocationURI?sc.Test:sc.Development:sc.Production,c=this.f.remote.isRemote?qo.Workspace:qo.UI;return this.s.trace(`ExtensionService#loadExtensionContext ${t.identifier.value}`),Promise.all([n.whenReady,s.whenReady,this.O.whenReady]).then(()=>{const l=this;let u,h;const f=pi(t,"ipc")?this.f.messagePorts?.get(dt.toKey(t.identifier)):void 0;return Object.freeze({globalState:n,workspaceState:s,secrets:o,subscriptions:[],get languageModelAccessInformation(){return r},get extensionUri(){return t.extensionLocation},get extensionPath(){return t.extensionLocation.fsPath},asAbsolutePath(g){return Ug(t.extensionLocation.fsPath,g)},get storagePath(){return l.O.workspaceValue(t)?.fsPath},get globalStoragePath(){return l.O.globalValue(t).fsPath},get logPath(){return Ug(l.f.logsLocation.fsPath,t.identifier.value)},get logUri(){return E.joinPath(l.f.logsLocation,t.identifier.value)},get storageUri(){return l.O.workspaceValue(t)},get globalStorageUri(){return l.O.globalValue(t)},get extensionMode(){return a},get extension(){return u===void 0&&(u=new Lu(l,t.identifier,t,c,!1)),u},get extensionRuntime(){return B(t,"extensionRuntime"),l.extensionRuntime},get environmentVariableCollection(){return l.u.getEnvironmentVariableCollection(t)},get messagePassingProtocol(){if(!h){if(!f)return;const g=Gt.buffer(Gt.fromDOMEventEmitter(f,"message",m=>m.data));f.start(),h={onDidReceiveMessage:g,postMessage:f.postMessage.bind(f)}}return h}})})}static jb(t,i,r,n,s,o){return r=r||{activate:void 0,deactivate:void 0},this.kb(t,i,r,n,o).then(a=>new mp(!1,null,o.build(),r,a,Ce(()=>{s.dispose(),On(n.subscriptions)})))}static kb(t,i,r,n,s){if(typeof r.activate=="function")try{s.activateCallStart(),t.trace(`ExtensionService#_callActivateOptional ${i.value}`);const o=typeof global=="object"?global:self,a=r.activate.apply(o,[n]);return s.activateCallStop(),s.activateResolveStart(),Promise.resolve(a).then(c=>(s.activateResolveStop(),c))}catch(o){return Promise.reject(o)}else return Promise.resolve(r)}lb(t,i){this.bb(t.identifier,{startup:!1,extensionId:t.identifier,activationEvent:i}).then(void 0,r=>{this.s.error(r)})}mb(t,i=0){const n=Date.now();Nb(()=>{for(let s=i;s<t.length;s+=1){const o=t[s];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-n>50){this.mb(t,s);break}else this.lb(o,a)}})}nb(){this.C.$setPerformanceMarks(gx()),this.m.getConfigProvider().then(t=>{const i=t.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),r=this.J.getAllExtensionDescriptions();if(i)this.mb(r);else for(const n of r)if(n.activationEvents)for(const s of n.activationEvents)s==="onStartupFinished"&&this.lb(n,s)})}ob(){const t=this.ab("*",!0).then(void 0,o=>{this.s.error(o)});this.B(this.j.onDidChangeWorkspace(o=>this.pb(o.added)));const i=this.j.workspace?this.j.workspace.folders:[],r=this.pb(i),n=this.rb(),s=Promise.all([n,t,r]).then(()=>{});return Promise.race([s,mn(1e4)]).then(()=>{this.nb()}),s}pb(t){return t.length===0?Promise.resolve(void 0):Promise.all(this.J.getAllExtensionDescriptions().map(i=>this.qb(t,i))).then(()=>{})}async qb(t,i){if(this.isActivated(i.identifier))return;const r=!this.f.remote.isRemote&&!!this.f.remote.authority,n={logService:this.s,folders:t.map(o=>o.uri),forceUsingSearch:r||!this.c.fsExists,exists:o=>this.c.fsExists(o.fsPath),checkExists:(o,a,c)=>this.y.$checkExists(o,a,c)},s=await rR(n,i);if(s)return this.bb(i.identifier,{startup:!0,extensionId:i.identifier,activationEvent:s.activationEvent}).then(void 0,o=>this.s.error(o))}async rb(){if(this.f.remote.authority)return this.ab(`onResolveRemoteAuthority:${this.f.remote.authority}`,!1)}async $extensionTestsExecute(){await this.H.wait();try{return await this.sb()}catch(t){throw console.error(t),t}}async sb(){const{extensionDevelopmentLocationURI:t,extensionTestsLocationURI:i}=this.f.environment;if(!t||!i)throw new Error(d(2699,null));const r=await this.xb(null,i,new D7(!1));if(!r||typeof r.run!="function")throw new Error(d(2700,null,i.toString()));return new Promise((n,s)=>{const o=(l,u)=>{l?(go&&this.s.error("Test runner called back with error",l),s(l)):(go&&(u?this.s.info(`Test runner called back with ${u} failures.`):this.s.info("Test runner called back with successful outcome.")),n(typeof u=="number"&&u>0?1:0))},a=Vr(i),c=r.run(a,o);c&&c.then&&c.then(()=>{go&&this.s.info("Test runner finished successfully."),n(0)}).catch(l=>{go&&this.s.error("Test runner finished with error",l),s(l instanceof Error&&l.stack?l.stack:String(l))})})}tb(){if(this.U)throw new Error("Extension host is already started!");return this.U=!0,this.F.wait().then(()=>this.G.open()).then(()=>Promise.race([this.P.waitForActivatingExtensions(),mn(1e3)])).then(()=>this.ob()).then(()=>{this.H.open(),this.s.info("Eager extensions activated")})}registerRemoteAuthorityResolver(t,i){return this.S[t]=i,Ce(()=>{delete this.S[t]})}async getRemoteExecServer(t){const{resolver:i}=await this.ub(t);return i?.resolveExecServer?.(t,{resolveAttempt:0})}async ub(t){const i=t.indexOf("+");if(i===-1)throw new ja("Not an authority that can be resolved!",Yn.InvalidAuthority);const r=t.substr(0,i);return await this.D.wait(),await this.ab(`onResolveRemoteAuthority:${r}`,!1),{authorityPrefix:r,resolver:this.S[r]}}async $resolveAuthority(t,i){const r=fo.create(!1),n=()=>`[resolveAuthority(${_E(t)},${i})][${r.elapsed()}ms] `,s=R=>this.s.info(`${n()}${R}`),o=R=>this.s.warn(`${n()}${R}`),a=(R,N=void 0)=>this.s.error(`${n()}${R}`,N),c=R=>{if(R instanceof ja)return{type:"error",error:{code:R._code,message:R._message,detail:R._detail}};throw R},l=async R=>{s(`activating resolver for ${R}...`);const{resolver:N,authorityPrefix:z}=await this.ub(R);if(!N)throw a(`no resolver for ${z}`),new ja(`No remote extension installed to resolve ${z}.`,Yn.NoResolverFound);return{resolver:N,authorityPrefix:z,remoteAuthority:R}},u=t.split(/@|%40/g).reverse();s(`activating remote resolvers ${u.join(" -> ")}`);let h;try{h=await Promise.all(u.map(l)).catch(async R=>{if(!(R instanceof ja)||R._code!==Yn.InvalidAuthority)throw R;return o(`resolving nested authorities failed: ${R.message}`),[await l(t)]})}catch(R){return c(R)}const f=new Xk;f.cancelAndSet(()=>s("waiting..."),1e3);let g,m;for(const[R,{authorityPrefix:N,resolver:z,remoteAuthority:q}]of h.entries())try{if(R===h.length-1)s("invoking final resolve()..."),Vi(`code/extHost/willResolveAuthority/${N}`),g=await z.resolve(q,{resolveAttempt:i,execServer:m}),Vi(`code/extHost/didResolveAuthorityOK/${N}`),s("setting tunnel factory..."),this.B(await this.t.setTunnelFactory(z,_d.isManagedResolvedAuthority(g)?g:void 0));else{if(s(`invoking resolveExecServer() for ${q}`),Vi(`code/extHost/willResolveExecServer/${N}`),m=await z.resolveExecServer?.(q,{resolveAttempt:i,execServer:m}),!m)throw new ja(`Exec server was not available for ${q}`,Yn.NoResolverFound);Vi(`code/extHost/didResolveExecServerOK/${N}`)}}catch(ee){return Vi(`code/extHost/didResolveAuthorityError/${N}`),a("returned an error",ee),f.dispose(),c(ee)}f.dispose();const b={environmentTunnels:g.environmentTunnels,features:g.tunnelFeatures?{elevation:g.tunnelFeatures.elevation,privacyOptions:g.tunnelFeatures.privacyOptions,protocol:g.tunnelFeatures.protocol===void 0?!0:g.tunnelFeatures.protocol}:void 0},k={extensionHostEnv:g.extensionHostEnv,isTrusted:g.isTrusted,authenticationSession:g.authenticationSessionForInitializingExtensions?{id:g.authenticationSessionForInitializingExtensions.id,providerId:g.authenticationSessionForInitializingExtensions.providerId}:void 0};s(`returned ${_d.isManagedResolvedAuthority(g)?"managed authority":`${g.host}:${g.port}`}`);let I;if(_d.isManagedResolvedAuthority(g)){const R=i;this.Y.setFactory(R,g.makeConnection),I={authority:t,connectTo:new kA(R),connectionToken:g.connectionToken}}else I={authority:t,connectTo:new DA(g.host,g.port),connectionToken:g.connectionToken};return{type:"ok",value:{authority:I,options:k,tunnelInformation:b}}}async $getCanonicalURI(t,i){this.s.info(`$getCanonicalURI invoked for authority (${_E(t)})`);const{resolver:r}=await this.ub(t);if(!r)return null;const n=E.revive(i);if(typeof r.getCanonicalURI>"u")return n;const s=await _i(()=>r.getCanonicalURI(n));return s||n}async $startExtensionHost(t){t.toAdd.forEach(o=>o.extensionLocation=E.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:r}=w6(this.I,this.L,this.J,t),n=await this.db(r);return(await this.getExtensionPathIndex()).setSearchTree(n),this.L.set(i.getAllExtensionDescriptions()),this.J.set(r),go&&(this.s.info(`$startExtensionHost: global extensions: ${Ac(this.L)}`),this.s.info(`$startExtensionHost: local extensions: ${Ac(this.J)}`)),this.tb()}$activateByEvent(t,i){return i===Jm.Immediate?this.D.wait().then(r=>this.ab(t,!1)):this.G.wait().then(r=>this.ab(t,!1))}async $activate(t,i){return await this.G.wait(),this.J.getExtensionDescription(t)?(await this.bb(t,i),!0):!1}async $deltaExtensions(t){t.toAdd.forEach(o=>o.extensionLocation=E.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:r}=w6(this.I,this.L,this.J,t),n=await this.db(r);return(await this.getExtensionPathIndex()).setSearchTree(n),this.L.set(i.getAllExtensionDescriptions()),this.J.set(r),go&&(this.s.info(`$deltaExtensions: global extensions: ${Ac(this.L)}`),this.s.info(`$deltaExtensions: local extensions: ${Ac(this.J)}`)),Promise.resolve(void 0)}async $test_latency(t){return t}async $test_up(t){return t.byteLength}async $test_down(t){const i=Qe.alloc(t),r=Math.random()%256;for(let n=0;n<t;n++)i.writeUInt8(r,n);return i}async $updateRemoteConnectionData(t){this.X=t,this.a.fire()}};k0=x0=__decorate([__param(0,Th),__param(1,v6),__param(2,at),__param(3,cs),__param(4,ls),__param(5,ut),__param(6,Ci),__param(7,Zv),__param(8,i0),__param(9,Ic),__param(10,y0),__param(11,E0),__param(12,f0)],k0);function w6(e,t,i,r){e.addActivationEvents(r.addActivationEvents);const n=new Pu(e,t.getAllExtensionDescriptions());n.deltaExtensions(r.toAdd,r.toRemove);const s=new Ro(i.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of r.myToRemove)s.delete(a);for(const a of r.myToAdd)s.add(a);const o=y6(n,s);return{globalRegistry:n,myExtensions:o}}function b6(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function Ac(e){return e.getAllExtensionDescriptions().map(t=>t.identifier.value).join(",")}var to=K("IExtHostExtensionService"),Lu=class{#e;#t;#i;constructor(e,t,i,r,n){this.#e=e,this.#t=t,this.#i=i.identifier,this.id=i.identifier.value,this.extensionUri=i.extensionLocation,this.extensionPath=ha(Vr(i.extensionLocation)),this.packageJSON=i,this.extensionKind=r,this.isFromDifferentExtensionHost=n}get isActive(){return this.#e.isActivated(this.#i)}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return this.#e.getExtensionExports(this.#i)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#e.activateByIdWithErrors(this.#i,{startup:!1,extensionId:this.#t,activationEvent:"api"}),this.exports}};function y6(e,t){return e.getAllExtensionDescriptions().filter(i=>t.has(i.identifier))}var lR=class{constructor(e){this.a=e}setSearchTree(e){this.a=e}findSubstr(e){return this.a.findSubstr(e)}forEach(e){return this.a.forEach(e)}},uR=class{constructor(e){this.a=new Xn,this.addActivationEvents(e)}readActivationEvents(e){return this.a.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this.a.set(t,e[t])}},E6=class{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(ut),r=e.get(at).getProxy(se.MainThreadErrors);bg(n=>{t.error(n);const s=Bc(n);r.$onUnexpectedError(s)})}static async installFullHandler(e){const t=e.get(ut),i=e.get(at),r=e.get(to),n=e.get(bp),s=i.getProxy(se.MainThreadExtensionService),o=i.getProxy(se.MainThreadErrors),a=await r.getExtensionPathIndex(),c=new WeakMap;function l(f,g){if(c.has(f))return c.get(f).stack;let m="",b,k;for(const R of g)m+=`
	at ${R.toString()}`,k=R.getFileName(),!b&&k&&(b=a.findSubstr(E.file(k)));const I=`${f.name||"Error"}: ${f.message||""}${m}`;return c.set(f,{extensionIdentifier:b?.identifier,stack:I}),I}const u=Symbol("prepareStackTrace wrapped");let h=l;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return h},set(f){if(f===l||!f||f[u]){h=f||l;return}h=function(g,m){return l(g,m),f.call(Error,g,m)},Object.assign(h,{[u]:!0})}}),bg(f=>{t.error(f);const g=Bc(f),m=c.get(f);if(!m?.extensionIdentifier){o.$onUnexpectedError(g);return}s.$onExtensionRuntimeError(m.extensionIdentifier,g);const b=n.onExtensionError(m.extensionIdentifier,f);t.trace("forwarded error to extension?",b,m)})}},hR=class Z8{constructor(t,i,r,n,s){this.a=r,this.b=new sD(t,null,n),i=Z8.e(i,this.b);const o=new fm(...CD());o.set(Ci,{_serviceBrand:void 0,...i,messagePorts:s}),o.set(at,new MD(this.b)),o.set(_h,new UD(n)),o.set(v6,r);const a=new FD(o,!0);a.invokeFunction(E6.installEarlyHandler),this.d=a.invokeFunction(c=>c.get(ut)),Vi("code/extHost/didCreateServices"),this.a.pid?this.d.info(`Extension host with pid ${this.a.pid} started`):this.d.info("Extension host started"),this.d.trace("initData",i),this.c=a.invokeFunction(c=>c.get(to)),this.c.initialize(),a.invokeFunction(E6.installFullHandler)}async asBrowserUri(t){const i=this.b.getProxy(se.MainThreadExtensionService);return E.revive(await i.$asBrowserUri(t))}terminate(t){this.c.terminate(t)}static e(t,i){t.extensions.allExtensions.forEach(n=>{n.extensionLocation=E.revive(i.transformIncomingURIs(n.extensionLocation))}),t.environment.appRoot=E.revive(i.transformIncomingURIs(t.environment.appRoot));const r=t.environment.extensionDevelopmentLocationURI;return r&&(t.environment.extensionDevelopmentLocationURI=r.map(n=>E.revive(i.transformIncomingURIs(n)))),t.environment.extensionTestsLocationURI=E.revive(i.transformIncomingURIs(t.environment.extensionTestsLocationURI)),t.environment.globalStorageHome=E.revive(i.transformIncomingURIs(t.environment.globalStorageHome)),t.environment.workspaceStorageHome=E.revive(i.transformIncomingURIs(t.environment.workspaceStorageHome)),t.environment.extensionTelemetryLogResource=E.revive(i.transformIncomingURIs(t.environment.extensionTelemetryLogResource)),t.nlsBaseUrl=E.revive(i.transformIncomingURIs(t.nlsBaseUrl)),t.logsLocation=E.revive(i.transformIncomingURIs(t.logsLocation)),t.workspace=i.transformIncomingURIs(t.workspace),t}},dR=function(t){const i=r=>{globalThis.removeEventListener("message",i);const n=r.data;Object.defineProperties(globalThis,{postMessage:{value(s,o){n.postMessage(s,o)}},onmessage:{get(){return n.onmessage},set(s){n.onmessage=s}}}),n.addEventListener("message",s=>{globalThis.dispatchEvent(new MessageEvent("message",{data:s.data,ports:s.ports?[...s.ports]:void 0}))}),n.start(),globalThis.Worker=class{constructor(){throw new TypeError("Nested workers from within nested worker are NOT supported.")}},importScripts(t)};globalThis.addEventListener("message",i)}.toString(),fR=class extends EventTarget{constructor(e,t,i){super(),this.onmessage=null,this.onmessageerror=null,this.onerror=null;const r=`((${dR})('${t}'))`,n=new Blob([r],{type:"application/javascript"}),s=URL.createObjectURL(n),o=new MessageChannel,a=s,c={type:"_newWorker",id:a,port:o.port2,url:s,options:i};e(c,[o.port2]),this.postMessage=o.port1.postMessage.bind(o.port1),this.terminate=()=>{e({type:"_terminateWorker",id:a}),URL.revokeObjectURL(s),o.port1.close(),o.port2.close()},Object.defineProperties(this,{onmessage:{get(){return o.port1.onmessage},set(l){o.port1.onmessage=l}},onmessageerror:{get(){return o.port1.onmessageerror},set(l){o.port1.onmessageerror=l}}}),o.port1.addEventListener("messageerror",l=>{const u=new MessageEvent("messageerror",{data:l.data});this.dispatchEvent(u)}),o.port1.addEventListener("message",l=>{const u=new MessageEvent("message",{data:l.data});this.dispatchEvent(u)}),o.port1.start()}},vM=new X("inOutput",!1),wM=new X("activeLogOutput",!1),bM=new X("activeLogOutput.levelSettable",!1),yM=new X("activeLogOutput.level",""),EM=new X("activeLogOutput.levelIsDefault",!1),SM=new X("outputView.scrollLock",!1),xM=K("outputService"),_u;(function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"})(_u||(_u={}));var pR={OutputChannels:"workbench.contributions.outputChannels"},gR=class{constructor(){this.a=new Map,this.b=new C,this.onDidRegisterChannel=this.b.event,this.c=new C,this.onDidRemoveChannel=this.c.event}registerChannel(e){this.a.has(e.id)||(this.a.set(e.id,e),this.b.fire(e.id))}getChannels(){const e=[];return this.a.forEach(t=>e.push(t)),e}getChannel(e){return this.a.get(e)}removeChannel(e){this.a.delete(e),this.c.fire(e)}};ki.add(pR.OutputChannels,new gR);var kM=new X("activeOutputChannel",""),mR=60,vR=mR*60,D0=vR*24,DM=D0*7,$M=D0*30,IM=D0*365;function wR(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var S6=class extends Jy{get disposed(){return this.n}constructor(e,t,i,r,n){super(),this.id=e,this.name=t,this.r=i,this.s=r,this.extension=n,this.m=0,this.n=!1,this.visible=!1,this.setLevel(i.getLevel()),this.B(i.onDidChangeLogLevel(s=>this.setLevel(s)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.m;this.r.flush(),this.s.$update(this.id,_u.Clear,e)}replace(e){const t=this.m;this.info(e),this.s.$update(this.id,_u.Replace,t),this.visible&&this.r.flush()}show(e,t){this.r.flush(),this.s.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.s.$close(this.id)}g(e,t){this.m+=Qe.fromString(t).byteLength,PD(this.r,e,t),this.visible&&(this.r.flush(),this.s.$update(this.id,_u.Append))}dispose(){super.dispose(),this.n||(this.s.$dispose(this.id),this.n=!0)}},bR=class extends S6{appendLine(e){this.append(e)}},$0=class{constructor(t,i,r,n,s,o){this.i=i,this.j=r,this.k=n,this.l=s,this.m=o,this.d=new Map,this.f=1,this.g=new Map,this.h=null,this.a=t.getProxy(se.MainThreadOutputService),this.b=this.k.extUri.joinPath(i.logsLocation,`output_logging_${wR(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(t){this.h=t;for(const[i,r]of this.g)r.visible=i===this.h}createOutputChannel(t,i,r){if(t=t.trim(),!t)throw new Error("illegal argument `name`. must not be falsy");const n=typeof i=="object"&&i.log,s=Xe(i)?i:void 0;if(Xe(s)&&!s.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const a=this.i.environment.extensionLogLevel?.find(([l])=>dt.equals(r.identifier,l))?.[1];a&&(o=_D(a));const c=n?this.o(t,o,r):this.n(t,s,r);return c.then(l=>{this.g.set(l.id,l),l.visible=l.id===this.h}),n?this.r(t,o??this.m.getLevel(),c):this.q(t,c)}async n(t,i,r){this.c||(this.c=this.j.value.createDirectory(this.b).then(()=>this.b));const n=await this.c,s=this.k.extUri.joinPath(n,`${this.f++}-${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),o=this.l.createLogger(s,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0}),a=await this.a.$register(t,s,i,r.identifier.value);return new S6(a,t,o,this.a,r)}async o(t,i,r){const n=await this.p(r),s=t.replace(/[\\/:\*\?"<>\|]/g,""),o=this.k.extUri.joinPath(n,`${s}.log`),a=`${r.identifier.value}.${s}`,c=this.l.createLogger(o,{id:a,name:t,logLevel:i,extensionId:r.identifier.value});return new bR(a,t,c,this.a,r)}p(t){let i=this.d.get(t.identifier.value);if(!i){const r=this.k.extUri.joinPath(this.i.logsLocation,t.identifier.value);this.d.set(t.identifier.value,i=(async()=>{try{await this.j.value.createDirectory(r)}catch(n){if(Oh(n)!==Ne.FileExists)throw n}return r})())}return i}q(t,i){let r=!1;const n=()=>{if(r)throw new Error("Channel has been closed")};return{get name(){return t},append(s){n(),i.then(o=>o.append(s))},appendLine(s){n(),i.then(o=>o.appendLine(s))},clear(){n(),i.then(s=>s.clear())},replace(s){n(),i.then(o=>o.replace(s))},show(s,o){n(),i.then(a=>a.show(s,o))},hide(){n(),i.then(s=>s.hide())},dispose(){r=!0,i.then(s=>s.dispose())}}}r(t,i,r){const n=new He,s=()=>{if(n.isDisposed)throw new Error("Channel has been closed")},o=n.add(new C);function a(c){i=c,o.fire(c)}return r.then(c=>{n.add(c),c.logLevel!==i&&a(c.logLevel),n.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.q(t,r),get logLevel(){return i},onDidChangeLogLevel:o.event,trace(c,...l){s(),r.then(u=>u.trace(c,...l))},debug(c,...l){s(),r.then(u=>u.debug(c,...l))},info(c,...l){s(),r.then(u=>u.info(c,...l))},warn(c,...l){s(),r.then(u=>u.warn(c,...l))},error(c,...l){s(),r.then(u=>u.error(c,...l))},dispose(){n.dispose()}}}};$0=__decorate([__param(0,at),__param(1,Ci),__param(2,wp),__param(3,xa),__param(4,dl),__param(5,ut)],$0);var x6=K("IExtHostOutputService"),Cu,I0=class{static{Cu=this}static{this.c=0}static{this.d=250}constructor(t,i){this.h=i,this.f=new Map,this.g=t.getProxy(se.MainThreadDecorations)}registerFileDecorationProvider(t,i){const r=Cu.c++;this.f.set(r,{provider:t,extensionDescription:i}),this.g.$registerDecorationProvider(r,i.identifier.value);const n=t.onDidChangeFileDecorations&&t.onDidChangeFileDecorations(s=>{if(!s){this.g.$onDidChange(r,null);return}const o=fn(s);if(o.length<=Cu.d){this.g.$onDidChange(r,o);return}this.h.warn("[Decorations] CAPPING events from decorations provider",i.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:Zx(u.path,"/")})),c=AS(a,(u,h)=>u.rank-h.rank||wo(u.uri.path,h.uri.path)),l=[];e:for(const u of c){let h;for(const f of u){const g=da(f.uri.path);if(h!==g&&(h=g,l.push(f.uri)>=Cu.d))break e}}this.g.$onDidChange(r,l)});return new Ye(()=>{n?.dispose(),this.g.$unregisterDecorationProvider(r),this.f.delete(r)})}async $provideDecorations(t,i,r){if(!this.f.has(t))return Object.create(null);const n=Object.create(null),{provider:s,extensionDescription:o}=this.f.get(t);return await Promise.all(i.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(s.provideFileDecoration(E.revive(c),r));if(!u)return;try{B1.validate(u),u.badge&&typeof u.badge!="string"&&B(o,"codiconDecoration"),n[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(h){this.h.warn(`INVALID decoration from extension '${o.identifier.value}': ${h}`)}}catch(c){this.h.error(c)}})),n}};I0=Cu=__decorate([__param(0,at),__param(1,ut)],I0);var k6=K("IExtHostDecorations"),yR=class{constructor(e){this.a=e,this.b=new Uint32Array(e.length),this.c=new Int32Array(1),this.c[0]=-1}getCount(){return this.a.length}insertValues(e,t){e=ga(e);const i=this.a,r=this.b,n=t.length;return n===0?!1:(this.a=new Uint32Array(i.length+n),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e),e+n),this.a.set(t,e),e-1<this.c[0]&&(this.c[0]=e-1),this.b=new Uint32Array(this.a.length),this.c[0]>=0&&this.b.set(r.subarray(0,this.c[0]+1)),!0)}setValue(e,t){return e=ga(e),t=ga(t),this.a[e]===t?!1:(this.a[e]=t,e-1<this.c[0]&&(this.c[0]=e-1),!0)}removeValues(e,t){e=ga(e),t=ga(t);const i=this.a,r=this.b;if(e>=i.length)return!1;const n=i.length-e;return t>=n&&(t=n),t===0?!1:(this.a=new Uint32Array(i.length-t),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e+t),e),this.b=new Uint32Array(this.a.length),e-1<this.c[0]&&(this.c[0]=e-1),this.c[0]>=0&&this.b.set(r.subarray(0,this.c[0]+1)),!0)}getTotalSum(){return this.a.length===0?0:this.d(this.a.length-1)}getPrefixSum(e){return e<0?0:(e=ga(e),this.d(e))}d(e){if(e<=this.c[0])return this.b[e];let t=this.c[0]+1;t===0&&(this.b[0]=this.a[0],t++),e>=this.a.length&&(e=this.a.length-1);for(let i=t;i<=e;i++)this.b[i]=this.b[i-1]+this.a[i];return this.c[0]=Math.max(this.c[0],e),this.b[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.a.length-1,r=0,n=0,s=0;for(;t<=i;)if(r=t+(i-t)/2|0,n=this.b[r],s=n-this.a[r],e<s)i=r-1;else if(e>=n)t=r+1;else break;return new ER(r,e-s)}},ER=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},SR=class{constructor(e,t,i,r){this.d=e,this.f=t,this.g=i,this.h=r,this.j=null,this.k=null}dispose(){this.f.length=0}get version(){return this.h}getText(){return this.k===null&&(this.k=this.f.join(this.g)),this.k}onEvents(e){e.eol&&e.eol!==this.g&&(this.g=e.eol,this.j=null);const t=e.changes;for(const i of t)this.o(i.range),this.p(new xr(i.range.startLineNumber,i.range.startColumn),i.text);this.h=e.versionId,this.k=null}l(){if(!this.j){const e=this.g.length,t=this.f.length,i=new Uint32Array(t);for(let r=0;r<t;r++)i[r]=this.f[r].length+e;this.j=new yR(i)}}n(e,t){this.f[e]=t,this.j&&this.j.setValue(e,this.f[e].length+this.g.length)}o(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this.n(e.startLineNumber-1,this.f[e.startLineNumber-1].substring(0,e.startColumn-1)+this.f[e.startLineNumber-1].substring(e.endColumn-1));return}this.n(e.startLineNumber-1,this.f[e.startLineNumber-1].substring(0,e.startColumn-1)+this.f[e.endLineNumber-1].substring(e.endColumn-1)),this.f.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this.j&&this.j.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}p(e,t){if(t.length===0)return;const i=oy(t);if(i.length===1){this.n(e.lineNumber-1,this.f[e.lineNumber-1].substring(0,e.column-1)+i[0]+this.f[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this.f[e.lineNumber-1].substring(e.column-1),this.n(e.lineNumber-1,this.f[e.lineNumber-1].substring(0,e.column-1)+i[0]);const r=new Uint32Array(i.length-1);for(let n=1;n<i.length;n++)this.f.splice(e.lineNumber+n-1,0,i[n]),r[n-1]=i[n].length+this.g.length;this.j&&this.j.insertValues(e.lineNumber,r)}},A0=new Map;function xR(e,t){t?A0.set(e,t):A0.delete(e)}function kR(e){return A0.get(e)}var DR=class extends SR{constructor(e,t,i,r,n,s,o){super(t,i,r,n),this.c=e,this.m=s,this.q=o,this.b=!1}dispose(){ur(!this.b),this.b=!0,this.q=!1}equalLines(e){return Nn(this.f,e)}get document(){if(!this.a){const e=this;this.a={get uri(){return e.d},get fileName(){return e.d.fsPath},get isUntitled(){return e.d.scheme===de.untitled},get languageId(){return e.m},get version(){return e.h},get isClosed(){return e.b},get isDirty(){return e.q},save(){return e.r()},getText(t){return t?e.s(t):e.getText()},get eol(){return e.g===`
`?rn.LF:rn.CRLF},get lineCount(){return e.f.length},lineAt(t){return e.t(t)},offsetAt(t){return e.u(t)},positionAt(t){return e.v(t)},validateRange(t){return e.w(t)},validatePosition(t){return e.x(t)},getWordRangeAtPosition(t,i){return e.y(t,i)},[Symbol.for("debug.description")](){return`TextDocument(${e.d.toString()})`}}}return Object.freeze(this.a)}_acceptLanguageId(e){ur(!this.b),this.m=e}_acceptIsDirty(e){ur(!this.b),this.q=e}r(){return this.b?Promise.reject(new Error("Document has been closed")):this.c.$trySaveDocument(this.d)}s(e){const t=this.w(e);if(t.isEmpty)return"";if(t.isSingleLine)return this.f[t.start.line].substring(t.start.character,t.end.character);const i=this.g,r=t.start.line,n=t.end.line,s=[];s.push(this.f[r].substring(t.start.character));for(let o=r+1;o<n;o++)s.push(this.f[o]);return s.push(this.f[n].substring(0,t.end.character)),s.join(i)}t(e){let t;if(e instanceof Ve?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this.f.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new $R(t,this.f[t],t===this.f.length-1)}u(e){return e=this.x(e),this.l(),this.j.getPrefixSum(e.line-1)+e.character}v(e){e=Math.floor(e),e=Math.max(0,e),this.l();const t=this.j.getIndexOf(e),i=this.f[t.index].length;return new Ve(t.index,Math.min(t.remainder,i))}w(e){if(!(e instanceof Be))throw new Error("Invalid argument");const t=this.x(e.start),i=this.x(e.end);return t===e.start&&i===e.end?e:new Be(t.line,t.character,i.line,i.character)}x(e){if(!(e instanceof Ve))throw new Error("Invalid argument");if(this.f.length===0)return e.with(0,0);let{line:t,character:i}=e,r=!1;if(t<0)t=0,i=0,r=!0;else if(t>=this.f.length)t=this.f.length-1,i=this.f[t].length,r=!0;else{const n=this.f[t].length;i<0?(i=0,r=!0):i>n&&(i=n,r=!0)}return r?new Ve(t,i):e}y(e,t){const i=this.x(e);if(!t)t=kR(this.m);else if(sy(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const r=_4(i.character+1,T4(t),this.f[i.line],0);if(r)return new Be(i.line,r.startColumn-1,i.line,r.endColumn-1)}},$R=class{constructor(e,t,i){this.a=e,this.b=t,this.c=i}get lineNumber(){return this.a}get text(){return this.b}get range(){return new Be(this.a,0,this.a,this.b.length)}get rangeIncludingLineBreak(){return this.c?this.range:new Be(this.a,0,this.a+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this.b)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this.b.length}},Ep=class{constructor(e){this.a=e,this.b=0}nextId(){return this.a+ ++this.b}},RM=new Ep("id#"),IR=class Y8{static{this.c=new Ep("TextEditorDecorationType")}constructor(t,i,r){const n=Y8.c.nextId();t.$registerTextEditorDecorationType(i.identifier,n,uv.from(r)),this.value=Object.freeze({key:n,dispose(){t.$removeTextEditorDecorationType(n)}})}},AR=class{constructor(e,t){this.g=[],this.h=void 0,this.j=!1,this.c=e,this.d=e.version,this.e=t.undoStopBefore,this.f=t.undoStopAfter}finalize(){return this.j=!0,{documentVersionId:this.d,edits:this.g,setEndOfLine:this.h,undoStopBefore:this.e,undoStopAfter:this.f}}k(){if(this.j)throw new Error("Edit is only valid while callback runs")}replace(e,t){this.k();let i=null;if(e instanceof Ve)i=new Be(e,e);else if(e instanceof Be)i=e;else throw new Error("Unrecognized location");this.l(i,t,!1)}insert(e,t){this.k(),this.l(new Be(e,e),t,!0)}delete(e){this.k();let t=null;if(e instanceof Be)t=e;else throw new Error("Unrecognized location");this.l(t,null,!0)}l(e,t,i){const r=this.c.validateRange(e);this.g.push({range:r,text:t,forceMoveMarkers:i})}setEndOfLine(e){if(this.k(),e!==rn.LF&&e!==rn.CRLF)throw je("endOfLine");this.h=e}},PR=class{constructor(e,t,i,r){this.c=e,this.d=t,this._accept(i),this.e=r;const n=this;this.value={get tabSize(){return n.f},set tabSize(s){n.n(s)},get indentSize(){return n.g},set indentSize(s){n.p(s)},get insertSpaces(){return n.j},set insertSpaces(s){n.s(s)},get cursorStyle(){return n.k},set cursorStyle(s){n.t(s)},get lineNumbers(){return n.l},set lineNumbers(s){n.u(s)}}}_accept(e){this.f=e.tabSize,this.g=e.indentSize,this.h=e.originalIndentSize,this.j=e.insertSpaces,this.k=e.cursorStyle,this.l=dc.to(e.lineNumbers)}m(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}n(e){const t=this.m(e);if(t!==null){if(typeof t=="number"){if(this.f===t)return;this.f=t}this.v("setTabSize",this.c.$trySetOptions(this.d,{tabSize:t}))}}o(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}p(e){const t=this.o(e);if(t!==null){if(typeof t=="number"){if(this.h===t)return;this.g=t,this.h=t}this.v("setIndentSize",this.c.$trySetOptions(this.d,{indentSize:t}))}}q(e){return e==="auto"?"auto":e==="false"?!1:!!e}s(e){const t=this.q(e);if(typeof t=="boolean"){if(this.j===t)return;this.j=t}this.v("setInsertSpaces",this.c.$trySetOptions(this.d,{insertSpaces:t}))}t(e){this.k!==e&&(this.k=e,this.v("setCursorStyle",this.c.$trySetOptions(this.d,{cursorStyle:e})))}u(e){this.l!==e&&(this.l=e,this.v("setLineNumbers",this.c.$trySetOptions(this.d,{lineNumbers:dc.from(e)})))}assign(e){const t={};let i=!1;if(typeof e.tabSize<"u"){const r=this.m(e.tabSize);r==="auto"?(i=!0,t.tabSize=r):typeof r=="number"&&this.f!==r&&(this.f=r,i=!0,t.tabSize=r)}if(typeof e.indentSize<"u"){const r=this.o(e.indentSize);r==="tabSize"?(i=!0,t.indentSize=r):typeof r=="number"&&this.h!==r&&(this.g=r,this.h=r,i=!0,t.indentSize=r)}if(typeof e.insertSpaces<"u"){const r=this.q(e.insertSpaces);r==="auto"?(i=!0,t.insertSpaces=r):this.j!==r&&(this.j=r,i=!0,t.insertSpaces=r)}typeof e.cursorStyle<"u"&&this.k!==e.cursorStyle&&(this.k=e.cursorStyle,i=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this.l!==e.lineNumbers&&(this.l=e.lineNumbers,i=!0,t.lineNumbers=dc.from(e.lineNumbers)),i&&this.v("setOptions",this.c.$trySetOptions(this.d,t))}v(e,t){t.catch(i=>{this.e.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this.e.warn(i)})}},RR=class{constructor(e,t,i,r,n,s,o,a){this.id=e,this.j=t,this.k=i,this.g=!1,this.h=new Set,this.c=n,this.d=new PR(this.j,this.id,s,i),this.e=o,this.f=a;const c=this;this.value=Object.freeze({get document(){return r.value},set document(l){throw new lo("document")},get selection(){return c.c&&c.c[0]},set selection(l){if(!(l instanceof es))throw je("selection");c.c=[l],c.l()},get selections(){return c.c},set selections(l){if(!Array.isArray(l)||l.some(u=>!(u instanceof es)))throw je("selections");c.c=l,c.l()},get visibleRanges(){return c.e},set visibleRanges(l){throw new lo("visibleRanges")},get options(){return c.d.value},set options(l){c.g||c.d.assign(l)},get viewColumn(){return c.f},set viewColumn(l){throw new lo("viewColumn")},edit(l,u={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new AR(r.value,u);return l(h),c.m(h)},insertSnippet(l,u,h={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let f;if(!u||Array.isArray(u)&&u.length===0)f=c.c.map(g=>W.from(g));else if(u instanceof Ve){const{lineNumber:g,column:m}=lt.from(u);f=[{startLineNumber:g,startColumn:m,endLineNumber:g,endColumn:m}]}else if(u instanceof Be)f=[W.from(u)];else{f=[];for(const g of u)if(g instanceof Be)f.push(W.from(g));else{const{lineNumber:m,column:b}=lt.from(g);f.push({startLineNumber:m,startColumn:b,endLineNumber:m,endColumn:b})}}return t.$tryInsertSnippet(e,r.value.version,l.value,f,h)},setDecorations(l,u){const h=u.length===0;h&&!c.h.has(l.key)||(h?c.h.delete(l.key):c.h.add(l.key),c.n(()=>{if(o7(u))return t.$trySetDecorations(e,l.key,YA(u));{const f=new Array(4*u.length);for(let g=0,m=u.length;g<m;g++){const b=u[g];f[4*g]=b.start.line+1,f[4*g+1]=b.start.character+1,f[4*g+2]=b.end.line+1,f[4*g+3]=b.end.character+1}return t.$trySetDecorationsFast(e,l.key,f)}}))},revealRange(l,u){c.n(()=>t.$tryRevealRange(e,W.from(l),u||Vd.Default))},show(l){t.$tryShowEditor(e,hi.from(l))},hide(){t.$tryHideEditor(e)},[Symbol.for("debug.description")](){return`TextEditor(${this.document.uri.toString()})`}})}dispose(){ur(!this.g),this.g=!0}_acceptOptions(e){ur(!this.g),this.d._accept(e)}_acceptVisibleRanges(e){ur(!this.g),this.e=e}_acceptViewColumn(e){ur(!this.g),this.f=e}_acceptSelections(e){ur(!this.g),this.c=e}async l(){const e=this.c.map(on.from);return await this.n(()=>this.j.$trySetSelections(this.id,e)),this.value}m(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const i=t.edits.map(n=>n.range);i.sort((n,s)=>n.end.line===s.end.line?n.end.character===s.end.character?n.start.line===s.start.line?n.start.character-s.start.character:n.start.line-s.start.line:n.end.character-s.end.character:n.end.line-s.end.line);for(let n=0,s=i.length-1;n<s;n++){const o=i[n].end;if(i[n+1].start.isBefore(o))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const r=t.edits.map(n=>({range:W.from(n.range),text:n.text,forceMoveMarkers:n.forceMoveMarkers}));return this.j.$tryApplyEdits(this.id,t.documentVersionId,r,{setEndOfLine:typeof t.setEndOfLine=="number"?fc.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}n(e){return this.g?(this.k.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this.k.warn(t),null))}},TR=class{constructor(e){this.value=e,this.a=0}ref(){this.a++}unref(){return--this.a===0}},P0=class{constructor(t,i){this.h=t,this.i=i,this.a=null,this.b=new Map,this.c=new li,this.d=new C,this.e=new C,this.f=new C,this.g=new C,this.onDidAddDocuments=this.d.event,this.onDidRemoveDocuments=this.e.event,this.onDidChangeVisibleTextEditors=this.f.event,this.onDidChangeActiveTextEditor=this.g.event}$acceptDocumentsAndEditorsDelta(t){this.acceptDocumentsAndEditorsDelta(t)}acceptDocumentsAndEditorsDelta(t){const i=[],r=[],n=[];if(t.removedDocuments)for(const s of t.removedDocuments){const o=E.revive(s),a=this.c.get(o);a?.unref()&&(this.c.delete(o),i.push(a.value))}if(t.addedDocuments)for(const s of t.addedDocuments){const o=E.revive(s.uri);let a=this.c.get(o);if(a&&o.scheme!==de.vscodeNotebookCell&&o.scheme!==de.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new TR(new DR(this.h.getProxy(se.MainThreadDocuments),o,s.lines,s.EOL,s.versionId,s.languageId,s.isDirty)),this.c.set(o,a),r.push(a.value)),a.ref()}if(t.removedEditors)for(const s of t.removedEditors){const o=this.b.get(s);this.b.delete(s),o&&n.push(o)}if(t.addedEditors)for(const s of t.addedEditors){const o=E.revive(s.documentUri);ur(this.c.has(o),`document '${o}' does not exist`),ur(!this.b.has(s.id),`editor '${s.id}' already exists!`);const a=this.c.get(o).value,c=new RR(s.id,this.h.getProxy(se.MainThreadTextEditors),this.i,new nr(()=>a.document),s.selections.map(on.to),s.options,s.visibleRanges.map(l=>W.to(l)),typeof s.editorPosition=="number"?hi.to(s.editorPosition):void 0);this.b.set(s.id,c)}t.newActiveEditor!==void 0&&(ur(t.newActiveEditor===null||this.b.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this.a=t.newActiveEditor),On(i),On(n),t.removedDocuments&&this.e.fire(i),t.addedDocuments&&this.d.fire(r),(t.removedEditors||t.addedEditors)&&this.f.fire(this.allEditors().map(s=>s.value)),t.newActiveEditor!==void 0&&this.g.fire(this.activeEditor())}getDocument(t){return this.c.get(t)?.value}allDocuments(){return vr.map(this.c.values(),t=>t.value)}getEditor(t){return this.b.get(t)}activeEditor(t){if(!this.a)return;const i=this.b.get(this.a);return t?i:i?.value}allEditors(){return[...this.b.values()]}};P0=__decorate([__param(0,at),__param(1,ut)],P0);var Pc=K("IExtHostDocumentsAndEditors"),Sp=K("IExtHostApiDeprecationService"),R0=class{constructor(t,i){this.c=i,this.a=new Set,this.b=t.getProxy(se.MainThreadTelemetry)}report(t,i,r){const n=this.d(t,i);this.a.has(n)||(this.a.add(n),i.isUnderDevelopment&&this.c.warn(`[Deprecation Warning] '${t}' is deprecated. ${r}`),this.b.$publicLog2("extHostDeprecatedApiUsage",{extensionId:i.identifier.value,apiId:t}))}d(t,i){return`${t}-${i.identifier.value}`}};R0=__decorate([__param(0,at),__param(1,ut)],R0);var _M=Object.freeze(new class{report(e,t,i){}}),LR={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:d(9871,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:d(9872,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:d(9873,null),default:""}}},T0;(function(e){function t(i,r,n){if(!i)return;const s=Xe(i.type)?i.type:void 0;if(!s||s.length===0){n.error(d(9874,null));return}const o=[];if(Array.isArray(i.required))for(const a of i.required)Xe(a)&&o.push(a);return{extensionId:r.value,taskType:s,required:o,properties:i.properties?Tt(i.properties):{},when:i.when?yi.deserialize(i.when):void 0}}e.from=t})(T0||(T0={}));var _R=Y5.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(e,t)=>{for(const i of e)i.type&&t.push(`onTaskType:${i.type}`)},jsonSchema:{description:d(9875,null),type:"array",items:LR}}),CR=class{constructor(){this.d=new C,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((e,t)=>{_R.setHandler((i,r)=>{this.c=void 0;try{for(const n of r.removed){const s=n.value;for(const o of s)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const n of r.added){const s=n.value;for(const o of s){const a=T0.from(o,n.description.identifier,n.collector);a&&(this.a[a.taskType]=a)}}(r.removed.length>0||r.added.length>0)&&this.d.fire()}catch{}e(void 0)})})}onReady(){return this.b}get(e){return this.a[e]}all(){return Object.keys(this.a).map(e=>this.a[e])}getJsonSchema(){if(this.c===void 0){const e=[];for(const t of this.all()){const i={type:"object",additionalProperties:!1};t.required.length>0&&(i.required=t.required.slice(0)),t.properties!==void 0?i.properties=Tt(t.properties):i.properties=Object.create(null),i.properties.type={type:"string",enum:[t.taskType]},e.push(i)}this.c={oneOf:e}}return this.c}},NR=new CR,OR="settings",CM=new X("taskRunning",!1,d(9876,null)),NM=em(9878,"Tasks"),xp;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(xp||(xp={})),function(e){function t(i){if(!i)return e.Strong;switch(i.toLowerCase()){case"escape":return e.Escape;case"strong":return e.Strong;case"weak":return e.Weak;default:return e.Strong}}e.from=t}(xp||(xp={}));var D6;(function(e){e.defaults={cwd:"${workspaceFolder}"}})(D6||(D6={}));var Nu;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(Nu||(Nu={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"silent":return e.Silent;case"never":return e.Never;default:return e.Always}}e.fromString=t}(Nu||(Nu={}));var Ou;(function(e){e[e.Never=1]="Never",e[e.OnProblem=2]="OnProblem",e[e.Always=3]="Always"})(Ou||(Ou={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"never":return e.Never;case"onproblem":return e.OnProblem;default:return e.OnProblem}}e.fromString=t}(Ou||(Ou={}));var Fu;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(Fu||(Fu={})),function(e){function t(i){switch(i.toLowerCase()){case"shared":return e.Shared;case"dedicated":return e.Dedicated;case"new":return e.New;default:return e.Shared}}e.fromString=t}(Fu||(Fu={}));var $6;(function(e){e.defaults={echo:!0,reveal:Nu.Always,revealProblems:Ou.Never,focus:!1,panel:Fu.Shared,showReuseMessage:!0,clear:!1}})($6||($6={}));var kp;(function(e){e[e.Shell=1]="Shell",e[e.Process=2]="Process",e[e.CustomExecution=3]="CustomExecution"})(kp||(kp={})),function(e){function t(r){switch(r.toLowerCase()){case"shell":return e.Shell;case"process":return e.Process;case"customExecution":return e.CustomExecution;default:return e.Process}}e.fromString=t;function i(r){switch(r){case e.Shell:return"shell";case e.Process:return"process";case e.CustomExecution:return"customExecution";default:return"process"}}e.toString=i}(kp||(kp={}));var I6;(function(e){function t(i){return Xe(i)?i:i.value}e.value=t})(I6||(I6={}));var A6;(function(e){e.Clean={_id:"clean",isDefault:!1},e.Build={_id:"build",isDefault:!1},e.Rebuild={_id:"rebuild",isDefault:!1},e.Test={_id:"test",isDefault:!1};function t(r){return r===e.Clean._id||r===e.Build._id||r===e.Rebuild._id||r===e.Test._id}e.is=t;function i(r){if(r!==void 0)return Xe(r)?t(r)?{_id:r,isDefault:!1}:void 0:r}e.from=i})(A6||(A6={}));var P6;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.Folder=3]="Folder"})(P6||(P6={}));var R6;(function(e){e.Workspace="workspace",e.Extension="extension",e.InMemory="inMemory",e.WorkspaceFile="workspaceFile",e.User="user";function t(i){switch(i){case e.User:return fi.USER;case e.WorkspaceFile:return fi.WORKSPACE;default:return fi.WORKSPACE_FOLDER}}e.toConfigurationTarget=t})(R6||(R6={}));var T6;(function(e){e.parallel="parallel",e.sequence="sequence"})(T6||(T6={}));var L0;(function(e){e[e.default=1]="default",e[e.folderOpen=2]="folderOpen"})(L0||(L0={}));var L6;(function(e){e.defaults={reevaluateOnRerun:!0,runOn:L0.default,instanceLimit:1}})(L6||(L6={}));var Dp;(function(e){e[e.Process=1]="Process",e[e.Terminal=2]="Terminal"})(Dp||(Dp={})),function(e){e._default=e.Terminal}(Dp||(Dp={}));var _6;(function(e){e[e.V0_1_0=1]="V0_1_0",e[e.V2_0_0=2]="V2_0_0"})(_6||(_6={}));var ta;(function(e){e.DependsOnStarted="dependsOnStarted",e.AcquiredInput="acquiredInput",e.Start="start",e.ProcessStarted="processStarted",e.Active="active",e.Inactive="inactive",e.Changed="changed",e.Terminated="terminated",e.ProcessEnded="processEnded",e.End="end"})(ta||(ta={}));var $p;(function(e){e.SingleRun="singleRun",e.Background="background"})($p||($p={}));var C6;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.FolderOpen=2]="FolderOpen",e[e.ConfigurationChange=3]="ConfigurationChange",e[e.Reconnect=4]="Reconnect"})(C6||(C6={}));var N6;(function(e){function t(c){return{taskId:c._id,taskName:c.configurationProperties.name,runType:c.configurationProperties.isBackground?$p.Background:$p.SingleRun,group:c.configurationProperties.group,__task:c}}function i(c,l,u){return{...t(c),kind:ta.Start,terminalId:l,resolvedVariables:u}}e.start=i;function r(c,l,u){return{...t(c),kind:ta.ProcessStarted,terminalId:l,processId:u}}e.processStarted=r;function n(c,l,u){return{...t(c),kind:ta.ProcessEnded,terminalId:l,exitCode:u}}e.processEnded=n;function s(c,l,u){return{...t(c),kind:ta.Terminated,exitReason:u,terminalId:l}}e.terminated=s;function o(c,l,u){return{...t(l),kind:c,terminalId:u}}e.general=o;function a(){return{kind:ta.Changed}}e.changed=a})(N6||(N6={}));var Ip;(function(e){function t(r){const n=Object.keys(r).sort();let s="";for(const o of n){let a=r[o];a instanceof Object?a=t(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),s+=o+","+a+","}return s}function i(r){const s={_key:t(r),type:r.taskType};return Object.assign(s,r),s}e.create=i})(Ip||(Ip={}));var O6;(function(e){e.AutoDetect="task.autoDetect",e.SaveBeforeRun="task.saveBeforeRun",e.ShowDecorations="task.showDecorations",e.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",e.SlowProviderWarning="task.slowProviderWarning",e.QuickOpenHistory="task.quickOpen.history",e.QuickOpenDetail="task.quickOpen.detail",e.QuickOpenSkip="task.quickOpen.skip",e.QuickOpenShowAll="task.quickOpen.showAll",e.AllowAutomaticTasks="task.allowAutomaticTasks",e.Reconnection="task.reconnection",e.VerboseLogging="task.verboseLogging"})(O6||(O6={}));var F6;(function(e){e.Tasks="tasks",e.SuppressTaskName="tasks.suppressTaskName",e.Windows="tasks.windows",e.Osx="tasks.osx",e.Linux="tasks.linux",e.ShowOutput="tasks.showOutput",e.IsShellCommand="tasks.isShellCommand",e.ServiceTestSetting="tasks.service.testSetting"})(F6||(F6={}));var M6;(function(e){function t(i,r){const n=NR.get(i.type);if(n===void 0){const c=Tt(i);return delete c._key,Ip.create(c)}const s=Object.create(null);s.type=n.taskType;const o=new Set;n.required.forEach(c=>o.add(c));const a=n.properties;for(const c of Object.keys(a)){const l=i[c];if(l!=null)s[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)s[c]=Tt(u.default);else switch(u.type){case"boolean":s[c]=!1;break;case"number":case"integer":s[c]=0;break;case"string":s[c]="";break;default:r.error(d(9877,null,JSON.stringify(i,void 0,0),c));return}}}return Ip.create(s)}e.createTaskIdentifier=t})(M6||(M6={}));var Ap;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(Ap||(Ap={}));var Pp;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(Pp||(Pp={}));var _0;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(_0||(_0={}));var Mu;(function(e){function t(n){if(n){const s=n;return s&&!!s.process}else return!1}e.is=t;function i(n){if(n==null)return;const s={process:n.process,args:n.args};return n.options&&(s.options=_0.from(n.options)),s}e.from=i;function r(n){if(n!=null)return new Za(n.process,n.args,n.options)}e.to=r})(Mu||(Mu={}));var C0;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(C0||(C0={}));var Uu;(function(e){function t(n){if(n){const s=n;return s&&(!!s.commandLine||!!s.command)}else return!1}e.is=t;function i(n){if(n==null)return;const s={};return n.commandLine!==void 0?s.commandLine=n.commandLine:(s.command=n.command,s.args=n.args),n.options&&(s.options=C0.from(n.options)),s}e.from=i;function r(n){if(!(n==null||n.command===void 0&&n.commandLine===void 0))return n.commandLine?new Ho(n.commandLine,n.options):new Ho(n.command,n.args?n.args:[],n.options)}e.to=r})(Uu||(Uu={}));var us;(function(e){function t(n){if(n){const s=n;return s&&s.customExecution==="customExecution"}else return!1}e.is=t;function i(n){return{customExecution:"customExecution"}}e.from=i;function r(n,s){return s.get(n)}e.to=r})(us||(us={}));var U6;(function(e){function t(i,r){let n;return i.scope!==void 0&&typeof i.scope!="number"?n=i.scope.uri:i.scope!==void 0&&typeof i.scope=="number"&&(i.scope===zs.Workspace&&r&&r.workspaceFile?n=r.workspaceFile:n=OR),{id:i._id,workspaceFolder:n}}e.from=t})(U6||(U6={}));var N0;(function(e){function t(i){if(i!=null)return{_id:i.id,isDefault:i.isDefault}}e.from=t})(N0||(N0={}));var io;(function(e){function t(n,s){if(n==null)return[];const o=[];for(const a of n){const c=i(a,s);c&&o.push(c)}return o}e.fromMany=t;function i(n,s){if(n==null)return;let o;n.execution instanceof Za?o=Mu.from(n.execution):n.execution instanceof Ho?o=Uu.from(n.execution):n.execution&&n.execution instanceof P1&&(o=us.from(n.execution));const a=Ap.from(n.definition);let c;return n.scope?typeof n.scope=="number"?c=n.scope:c=n.scope.uri:c=zs.Workspace,!a||!c?void 0:{_id:n._id,definition:a,name:n.name,source:{extensionId:s.identifier.value,label:n.source,scope:c},execution:o,isBackground:n.isBackground,group:N0.from(n.group),presentationOptions:Pp.from(n.presentationOptions),problemMatchers:n.problemMatchers,hasDefinedMatchers:n.hasDefinedMatchers,runOptions:n.runOptions?n.runOptions:{reevaluateOnRerun:!0},detail:n.detail}}e.from=i;async function r(n,s,o){if(n==null)return;let a;Mu.is(n.execution)?a=Mu.to(n.execution):Uu.is(n.execution)?a=Uu.to(n.execution):us.is(n.execution)&&(a=us.to(n._id,o));const c=Ap.to(n.definition);let l;if(n.source&&(n.source.scope!==void 0?typeof n.source.scope=="number"?l=n.source.scope:l=await s.resolveWorkspaceFolder(E.revive(n.source.scope)):l=zs.Workspace),!c||!l)return;const u=new Xd(c,l,n.name,n.source.label,a,n.problemMatchers);return n.isBackground!==void 0&&(u.isBackground=n.isBackground),n.group!==void 0&&(u.group=zl.from(n.group._id),u.group&&n.group.isDefault&&(u.group=new zl(u.group.id,u.group.label),n.group.isDefault===!0&&(u.group.isDefault=n.group.isDefault))),n.presentationOptions&&(u.presentationOptions=Pp.to(n.presentationOptions)),n._id&&(u._id=n._id),n.detail&&(u.detail=n.detail),u}e.to=r})(io||(io={}));var O0;(function(e){function t(r){return r}e.from=t;function i(r){if(r)return Object.assign(Object.create(null),r)}e.to=i})(O0||(O0={}));var F0=class{#e;constructor(e,t,i){this._id=t,this.a=i,this.#e=e}get task(){return this.a}terminate(){this.#e.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}},M0=class{constructor(t,i,r,n,s,o,a,c){this.q=new C,this.r=new C,this.s=new C,this.u=new C,this.a=t.getProxy(se.MainThreadTask),this.b=r,this.c=n,this.d=s,this.e=o,this.h=0,this.j=new Map,this.k=new Map,this.l=new Map,this.m=new Map,this.n=new Set,this.o=new Map,this.f=a,this.g=c,this.a.$registerSupportedExecutions(!0)}registerTaskProvider(t,i,r){if(!r)return new Ye(()=>{});const n=this.x();return this.j.set(n,{type:i,provider:r,extension:t}),this.a.$registerTaskProvider(n,i),new Ye(()=>{this.j.delete(n),this.a.$unregisterTaskProvider(n)})}registerTaskSystem(t,i){this.a.$registerTaskSystem(t,i)}fetchTasks(t){return this.a.$fetchTasks(O0.from(t)).then(async i=>{const r=[];for(const n of i){const s=await io.to(n,this.b,this.m);s&&r.push(s)}return r})}get taskExecutions(){const t=[];return this.k.forEach(i=>t.push(i)),t}terminateTask(t){if(!(t instanceof F0))throw new Error("No valid task execution provided");return this.a.$terminateTask(t._id)}get onDidStartTask(){return this.q.event}async $onDidStartTask(t,i,r){const n=this.m.get(t.id);n&&(this.o.set(t.id,n),this.e.attachPtyToTerminal(i,await n.callback(r))),this.p=t.id,this.q.fire({execution:await this.z(t)})}get onDidEndTask(){return this.r.event}async $OnDidEndTask(t){if(!this.l.has(t.id))return;const i=await this.z(t);this.l.delete(t.id),this.k.delete(t.id),this.B(t),this.r.fire({execution:i})}get onDidStartTaskProcess(){return this.s.event}async $onDidStartTaskProcess(t){const i=await this.z(t.id);this.s.fire({execution:i,processId:t.processId})}get onDidEndTaskProcess(){return this.u.event}async $onDidEndTaskProcess(t){const i=await this.z(t.id);this.u.fire({execution:i,exitCode:t.exitCode})}$provideTasks(t,i){const r=this.j.get(t);if(!r)return Promise.reject(new Error("no handler found"));const n=[],s=_i(()=>r.provider.provideTasks(Wt.None)).then(o=>this.v(i,n,r,o));return new Promise(o=>{s.then(a=>{Promise.all(n).then(()=>{o(a)})})})}async $resolveTask(t,i){const r=this.j.get(t);if(!r)return Promise.reject(new Error("no handler found"));if(i.definition.type!==r.type)throw new Error(`Unexpected: Task of type [${i.definition.type}] cannot be resolved by provider of type [${r.type}].`);const n=await io.to(i,this.b,this.m);if(!n)throw new Error("Unexpected: Task cannot be resolved.");const s=await r.provider.resolveTask(n,Wt.None);if(!s)return;this.A(s,r);const o=io.from(s,r.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(s.definition!==n.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return us.is(o.execution)&&await this.y(o,s,!0),await this.w(o)}x(){return this.h++}async y(t,i,r){const n=await this.a.$createTaskId(t);!r&&!this.m.has(n)&&(this.n.add(n),this.o.set(n,i.execution)),this.m.set(n,i.execution)}async z(t,i){if(typeof t=="string"){const s=this.l.get(t);if(!s)throw new uo("Unexpected: The specified task is missing an execution");return s}const r=this.l.get(t.id);if(r)return r;let n;return i?n=Promise.resolve(new F0(this,t.id,i)):n=io.to(t.task,this.b,this.m).then(s=>{if(!s)throw new uo("Unexpected: Task does not exist.");return new F0(this,t.id,s)}),this.l.set(t.id,n),n.then(s=>(this.k.set(t.id,s),s))}A(t,i){t._deprecated&&this.g.report("Task.constructor",i.extension,"Use the Task constructor that takes a `scope` instead.")}B(t){this.o.get(t.id)&&this.o.delete(t.id),this.n.has(t.id)&&this.p!==t.id&&(this.m.delete(t.id),this.n.delete(t.id));const r=this.n.values();let n=r.next();for(;!n.done;)!this.o.has(n.value)&&this.p!==n.value&&(this.m.delete(n.value),this.n.delete(n.value)),n=r.next()}};M0=__decorate([__param(0,at),__param(1,Ci),__param(2,cs),__param(3,Pc),__param(4,ls),__param(5,Ic),__param(6,ut),__param(7,Sp)],M0);var U0=class extends M0{constructor(t,i,r,n,s,o,a,c){super(t,i,r,n,s,o,a,c),this.registerTaskSystem(de.vscodeRemote,{scheme:de.vscodeRemote,authority:"",platform:Ex(Hr.Web)})}async executeTask(t,i){if(!i.execution)throw new Error("Tasks to execute must include an execution");const r=io.from(i,t);if(r===void 0)throw new Error("Task is not valid");if(us.is(r.execution))await this.y(r,i,!1);else throw new Sg;const n=await this.z(await this.a.$getTaskExecution(r),i);return this.a.$executeTask(r).catch(s=>{throw new Error(s)}),n}v(t,i,r,n){const s=[];if(n)for(const o of n){if(this.A(o,r),!o.definition||!t[o.definition.type]){const c=o.source?o.source:"No task source";this.f.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=io.from(o,r.extension);a&&us.is(a.execution)?(s.push(a),i.push(this.y(a,o,!0))):this.f.warn("Only custom execution tasks supported.")}return{tasks:s,extension:r.extension}}async w(t){if(us.is(t.execution))return t;this.f.warn("Only custom execution tasks supported.")}async $resolveVariables(t,i){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(t,i,r){}};U0=__decorate([__param(0,at),__param(1,Ci),__param(2,cs),__param(3,Pc),__param(4,ls),__param(5,Ic),__param(6,ut),__param(7,Sp)],U0);var B6=K("IExtHostTask"),Bu=K("IExtHostEditorTabs"),H6=class{constructor(e,t,i){this.e=i,this.d=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.id===e.e()},get label(){return e.b.label},get input(){return e.c},get isDirty(){return e.b.isDirty},get isPinned(){return e.b.isPinned},get isPreview(){return e.b.isPreview},get group(){return e.d.apiObject}};this.a=Object.freeze(t)}return this.a}get tabId(){return this.b.id}acceptDtoUpdate(e){this.b=e,this.c=this.f()}f(){switch(this.b.input.kind){case yr.TextInput:return new Q1(E.revive(this.b.input.uri));case yr.TextDiffInput:return new xf(E.revive(this.b.input.original),E.revive(this.b.input.modified));case yr.TextMergeInput:return new QE(E.revive(this.b.input.base),E.revive(this.b.input.input1),E.revive(this.b.input.input2),E.revive(this.b.input.result));case yr.CustomEditorInput:return new J1(E.revive(this.b.input.uri),this.b.input.viewType);case yr.WebviewEditorInput:return new JE(this.b.input.viewType);case yr.NotebookInput:return new X1(E.revive(this.b.input.uri),this.b.input.notebookType);case yr.NotebookDiffInput:return new Z1(E.revive(this.b.input.original),E.revive(this.b.input.modified),this.b.input.notebookType);case yr.TerminalEditorInput:return new XE;case yr.InteractiveEditorInput:return new ZE(E.revive(this.b.input.uri),E.revive(this.b.input.inputBoxUri));case yr.ChatEditorInput:return new YE;case yr.MultiDiffEditorInput:return new KE(this.b.input.diffEditors.map(e=>new xf(E.revive(e.original),E.revive(e.modified))));default:return}}},FR=class{constructor(e,t){this.c=[],this.d="",this.b=e,this.e=t;for(const i of e.tabs)i.isActive&&(this.d=i.id),this.c.push(new H6(i,this,()=>this.activeTabId()))}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.groupId===e.e()},get viewColumn(){return hi.to(e.b.viewColumn)},get activeTab(){return e.c.find(i=>i.tabId===e.d)?.apiObject},get tabs(){return Object.freeze(e.c.map(i=>i.apiObject))}};this.a=Object.freeze(t)}return this.a}get groupId(){return this.b.groupId}get tabs(){return this.c}acceptGroupDtoUpdate(e){this.b=e}acceptTabOperation(e){if(e.kind===Bn.TAB_OPEN){const i=new H6(e.tabDto,this,()=>this.activeTabId());return this.c.splice(e.index,0,i),e.tabDto.isActive&&(this.d=i.tabId),i}else if(e.kind===Bn.TAB_CLOSE){const i=this.c.splice(e.index,1)[0];if(!i)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return i.tabId===this.d&&(this.d=""),i}else if(e.kind===Bn.TAB_MOVE){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const i=this.c.splice(e.oldIndex,1)[0];if(!i)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this.c.splice(e.index,0,i),i}const t=this.c.find(i=>i.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this.d=e.tabDto.id:this.d===e.tabDto.id&&!e.tabDto.isActive&&(this.d=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this.d}},B0=class{constructor(t){this.b=new C,this.c=new C,this.e=[],this.a=t.getProxy(se.MainThreadEditorTabs)}get tabGroups(){if(!this.f){const t=this,i={onDidChangeTabGroups:t.c.event,onDidChangeTabs:t.b.event,get all(){return Object.freeze(t.e.map(r=>r.apiObject))},get activeTabGroup(){const r=t.d;return ma(t.e.find(s=>s.groupId===r)?.apiObject)},close:async(r,n)=>{const s=Array.isArray(r)?r:[r];return s.length?MR(s[0])?this.j(s,n):this.i(s,n):!0}};this.f=Object.freeze(i)}return this.f}$acceptEditorTabModel(t){const i=new Set(this.e.map(l=>l.groupId)),r=new Set(t.map(l=>l.groupId)),n=_S(i,r),s=this.e.filter(l=>n.removed.includes(l.groupId)).map(l=>l.apiObject),o=[],a=[];this.e=t.map(l=>{const u=new FR(l,()=>this.d);return n.added.includes(u.groupId)?o.push(u.apiObject):a.push(u.apiObject),u});const c=ma(t.find(l=>l.isActive===!0)?.groupId);c!==void 0&&this.d!==c&&(this.d=c),this.c.fire(Object.freeze({opened:o,closed:s,changed:a}))}$acceptTabGroupUpdate(t){const i=this.e.find(r=>r.groupId===t.groupId);if(!i)throw new Error("Update Group IPC call received before group creation.");i.acceptGroupDtoUpdate(t),t.isActive&&(this.d=t.groupId),this.c.fire(Object.freeze({changed:[i.apiObject],opened:[],closed:[]}))}$acceptTabOperation(t){const i=this.e.find(n=>n.groupId===t.groupId);if(!i)throw new Error("Update Tabs IPC call received before group creation.");const r=i.acceptTabOperation(t);switch(t.kind){case Bn.TAB_OPEN:this.b.fire(Object.freeze({opened:[r.apiObject],closed:[],changed:[]}));return;case Bn.TAB_CLOSE:this.b.fire(Object.freeze({opened:[],closed:[r.apiObject],changed:[]}));return;case Bn.TAB_MOVE:case Bn.TAB_UPDATE:this.b.fire(Object.freeze({opened:[],closed:[],changed:[r.apiObject]}));return}}g(t){for(const i of this.e)for(const r of i.tabs)if(r.apiObject===t)return r}h(t){return this.e.find(i=>i.apiObject===t)}async i(t,i){const r=[];for(const n of t){const s=this.g(n);if(!s)throw new Error("Tab close: Invalid tab not found!");r.push(s.tabId)}return this.a.$closeTab(r,i)}async j(t,i){const r=[];for(const n of t){const s=this.h(n);if(!s)throw new Error("Group close: Invalid group not found!");r.push(s.groupId)}return this.a.$closeGroup(r,i)}};B0=__decorate([__param(0,at)],B0);function MR(e){return e.tabs!==void 0}var UR=class{constructor(){this.f=new Map,this.m=[],this.n=new C,this.o=new C,this.d=1}get onError(){return this.n.event}get onExit(){return this.o.event}onMessage(e){this.k&&this.n.fire(new Error("attempt to set more than one 'Message' callback")),this.k=e}onEvent(e){this.j&&this.n.fire(new Error("attempt to set more than one 'Event' callback")),this.j=e}onRequest(e){this.g&&this.n.fire(new Error("attempt to set more than one 'Request' callback")),this.g=e}sendResponse(e){e.seq>0?this.n.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.u("response",e)}sendRequest(e,t,i,r){const n={command:e};if(t&&Object.keys(t).length>0&&(n.arguments=t),this.u("request",n),typeof r=="number"){const s=setTimeout(()=>{clearTimeout(s);const o=this.f.get(n.seq);if(o){this.f.delete(n.seq);const a={type:"response",seq:0,request_seq:n.seq,success:!1,command:e,message:d(5714,null,r,e)};o(a)}},r)}return i&&this.f.set(n.seq,i),n.seq}acceptMessage(e){this.k?this.k(e):(this.m.push(e),this.m.length===1&&this.s())}q(e,t){return e.type!=="event"||t.type!=="event"}async s(){let e;for(;this.m.length;){if((!e||this.q(this.m[0],e))&&await mn(0),e=this.m.shift(),!e)return;switch(e.type){case"event":this.j?.(e);break;case"request":this.g?.(e);break;case"response":{const t=e,i=this.f.get(t.request_seq);i&&(this.f.delete(t.request_seq),i(t));break}}}}u(e,t){t.type=e,t.seq=this.d++,this.sendMessage(t)}async w(){if(this.f.size===0)return Promise.resolve();const e=new Map;this.f.forEach((t,i)=>e.set(i,t)),await mn(500),e.forEach((t,i)=>{t({type:"response",seq:0,request_seq:i,success:!1,command:"canceled",message:"canceled"}),this.f.delete(i)})}getPendingRequestIds(){return Array.from(this.f.keys())}dispose(){this.m=[]}};function BR(e){return e.type&&(e.label||e.program||e.runtime)}var HR=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function jR(e){return!!(e&&e.match(HR))}function j6(e){if(typeof e.path=="string"&&!(typeof e.sourceReference=="number"&&e.sourceReference>0)){if(jR(e.path))return E.parse(e.path);if(Mg(e.path))return E.file(e.path)}return e.path}function W6(e){if(typeof e.path=="object"){const t=E.revive(e.path);if(t)return t.scheme===de.file?t.fsPath:t.toString()}return e.path}function WR(e,t){const i=t?j6:W6,r=Tt(e);return z6(r,(n,s)=>{n&&s&&(s.path=i(s))}),r}function zR(e,t){const i=t?j6:W6,r=Tt(e);return z6(r,(n,s)=>{!n&&s&&(s.path=i(s))}),r}function z6(e,t){switch(e.type){case"event":{const i=e;switch(i.event){case"output":t(!1,i.body.source);break;case"loadedSource":t(!1,i.body.source);break;case"breakpoint":t(!1,i.body.breakpoint.source);break;default:break}break}case"request":{const i=e;switch(i.command){case"setBreakpoints":t(!0,i.arguments.source);break;case"breakpointLocations":t(!0,i.arguments.source);break;case"source":t(!0,i.arguments.source);break;case"gotoTargets":t(!0,i.arguments.source);break;case"launchVSCode":i.arguments.args.forEach(r=>t(!1,r));break;default:break}break}case"response":{const i=e;if(i.success&&i.body)switch(i.command){case"stackTrace":i.body.stackFrames.forEach(r=>t(!1,r.source));break;case"loadedSources":i.body.sources.forEach(r=>t(!1,r));break;case"scopes":i.body.scopes.forEach(r=>t(!1,r.source));break;case"setFunctionBreakpoints":i.body.breakpoints.forEach(r=>t(!1,r.source));break;case"setBreakpoints":i.body.breakpoints.forEach(r=>t(!1,r.source));break;case"disassemble":i.body?.instructions.forEach(n=>t(!1,n.location));break;default:break}break}}}var UM=K("configurationResolverService"),St;(function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"})(St||(St={}));var Ki=class extends uo{constructor(e,t){super(t),this.variable=e}},VR=class ug{static{this.VARIABLE_LHS="${"}static{this.VARIABLE_REGEXP=/\$\{(.*?)\}/g}constructor(t,i,r,n){this.h=new Map,this.a=t,this.b=i,this.g=r,n&&(this.c=n.then(s=>this.i(s)))}i(t){if(sr){const i=Object.create(null);return Object.keys(t).forEach(r=>{i[r.toLowerCase()]=t[r]}),i}return t}resolveWithEnvironment(t,i,r){return this.l({env:this.i(t),userHome:void 0},i?i.uri:void 0,r)}async resolveAsync(t,i){const r={env:await this.c,userHome:await this.g};return this.l(r,t?t.uri:void 0,i)}async j(t,i,r,n){const s=Tt(i);sr&&s.windows?Object.keys(s.windows).forEach(a=>s[a]=s.windows[a]):jr&&s.osx?Object.keys(s.osx).forEach(a=>s[a]=s.osx[a]):ks&&s.linux&&Object.keys(s.linux).forEach(a=>s[a]=s.linux[a]),delete s.windows,delete s.osx,delete s.linux;const o={env:await this.c,userHome:await this.g};return this.l(o,t?t.uri:void 0,s,r,n)}async resolveAnyAsync(t,i,r){return this.j(t,i,r)}async resolveAnyMap(t,i,r){const n=new Map;return{newConfig:await this.j(t,i,r,n),resolvedVariables:n}}resolveWithInteractionReplace(t,i,r,n){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(t,i,r,n){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(t,i){if(this.h.has(t))throw new Error("Variable "+t+" is contributed twice.");this.h.set(t,i)}async l(t,i,r,n,s){if(Xe(r))return this.m(t,i,r,n,s);if(Array.isArray(r))return Promise.all(r.map(o=>this.l(t,i,o,n,s)));if(Qt(r)){const o=Object.create(null),a=await Promise.all(Object.keys(r).map(async c=>[await this.m(t,i,c,n,s),await this.l(t,i,r[c],n,s)]));for(const[c,l]of a)o[c]=l;return o}return r}m(t,i,r,n,s){return tk(r,ug.VARIABLE_REGEXP,async(o,a)=>{if(a.includes(ug.VARIABLE_LHS))return o;let c=await this.o(t,o,a,i,n);return s?.set(a,c),c!==o&&Xe(c)&&c.match(ug.VARIABLE_REGEXP)&&(c=await this.m(t,i,c,n,s)),c})}n(t){return this.b?this.b.getUriLabel(t,{noPrefix:!0}):t.fsPath}async o(t,i,r,n,s){let o;const a=r.split(":");a.length>1&&(r=a[0],o=a[1]);const c=h=>{const f=this.a.getFilePath();if(f)return Tu(f);throw new Ki(h,d(12085,null,i))},l=h=>{const f=c(h);if(this.a.getWorkspaceFolderPathForFile){const g=this.a.getWorkspaceFolderPathForFile();if(g)return Tu(g)}throw new Ki(h,d(12086,null,i,cr(f)))},u=h=>{if(o){const f=this.a.getFolderUri(o);if(f)return f;throw new Ki(h,d(12087,null,i,o))}if(n)return n;throw this.a.getWorkspaceFolderCount()>1?new Ki(h,d(12088,null,i)):new Ki(h,d(12089,null,i))};switch(r){case"env":if(o){if(t.env){const h=t.env[sr?o.toLowerCase():o];if(Xe(h))return h}return""}throw new Ki(St.Env,d(12090,null,i));case"config":if(o){const h=this.a.getConfigurationValue(n,o);if(Jt(h))throw new Ki(St.Config,d(12091,null,i,o));if(Qt(h))throw new Ki(St.Config,d(12092,null,i,o));return h}throw new Ki(St.Config,d(12093,null,i));case"command":return this.p(St.Command,i,o,s,"command");case"input":return this.p(St.Input,i,o,s,"input");case"extensionInstallFolder":if(o){const h=await this.a.getExtension(o);if(!h)throw new Ki(St.ExtensionInstallFolder,d(12094,null,i,o));return this.n(h.extensionLocation)}throw new Ki(St.ExtensionInstallFolder,d(12095,null,i));default:switch(r){case"workspaceRoot":case"workspaceFolder":return Tu(this.n(u(St.WorkspaceFolder)));case"cwd":return n||o?Tu(this.n(u(St.Cwd))):ua();case"workspaceRootFolderName":case"workspaceFolderBasename":return Tu(cr(this.n(u(St.WorkspaceFolderBasename))));case"userHome":{if(t.userHome)return t.userHome;throw new Ki(St.UserHome,d(12096,null,i))}case"lineNumber":{const h=this.a.getLineNumber();if(h)return h;throw new Ki(St.LineNumber,d(12097,null,i))}case"selectedText":{const h=this.a.getSelectedText();if(h)return h;throw new Ki(St.SelectedText,d(12098,null,i))}case"file":return c(St.File);case"fileWorkspaceFolder":return l(St.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return cr(l(St.FileWorkspaceFolderBasename));case"relativeFile":return n||o?Yc(this.n(u(St.RelativeFile)),c(St.RelativeFile)):c(St.RelativeFile);case"relativeFileDirname":{const h=da(c(St.RelativeFileDirname));if(n||o){const f=Yc(this.n(u(St.RelativeFileDirname)),h);return f.length===0?".":f}return h}case"fileDirname":return da(c(St.FileDirname));case"fileExtname":return Bg(c(St.FileExtname));case"fileBasename":return cr(c(St.FileBasename));case"fileBasenameNoExtension":{const h=cr(c(St.FileBasenameNoExtension));return h.slice(0,h.length-Bg(h).length)}case"fileDirnameBasename":return cr(da(c(St.FileDirnameBasename)));case"execPath":{const h=this.a.getExecPath();return h||i}case"execInstallFolder":{const h=this.a.getAppRoot();return h||i}case"pathSeparator":case"/":return Wr;default:try{const h=o?`${r}:${o}`:r;return this.p(St.Unknown,i,h,s,void 0)}catch{return i}}}}p(t,i,r,n,s){if(r&&n){const o=s===void 0?n[r]:n[s+":"+r];if(typeof o=="string")return o;throw new Ki(t,d(12099,null,i))}return i}},H0=K("IExtHostVariableResolverProvider"),qR=class extends VR{constructor(e,t,i,r,n,s,o){function a(){if(i){const c=i.activeEditor();if(c)return c.document.uri;const l=r.tabGroups.all.find(u=>u.isActive)?.activeTab;if(l!==void 0){if(l.input instanceof xf||l.input instanceof Z1)return l.input.modified;if(l.input instanceof Q1||l.input instanceof X1||l.input instanceof J1)return l.input.uri}}}super({getFolderUri:c=>{const l=s.folders.filter(u=>u.name===c);if(l&&l.length>0)return l[0].uri},getWorkspaceFolderCount:()=>s.folders.length,getConfigurationValue:(c,l)=>n.getConfiguration(void 0,c).get(l),getAppRoot:()=>ua(),getExecPath:()=>Og.VSCODE_EXEC_PATH,getFilePath:()=>{const c=a();if(c)return ha(c.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const c=a();if(c){const l=t.getWorkspaceFolder(c);if(l)return ha(l.uri.fsPath)}}},getSelectedText:()=>{if(i){const c=i.activeEditor();if(c&&!c.selection.isEmpty)return c.document.getText(c.selection)}},getLineNumber:()=>{if(i){const c=i.activeEditor();if(c)return String(c.selection.end.line+1)}},getExtension:c=>e.getExtension(c)},void 0,o?Promise.resolve(o):void 0,Promise.resolve(Og))}},j0=class extends Te{constructor(t,i,r,n,s){super(),this.b=t,this.c=i,this.g=r,this.h=n,this.j=s,this.a=new nr(async()=>{const o=await this.h.getConfigProvider(),c={folders:await this.c.getWorkspaceFolders2()||[]};return this.B(this.c.onDidChangeWorkspace(async l=>{c.folders=await this.c.getWorkspaceFolders2()||[]})),new qR(this.b,this.c,this.g,this.j,o,c,this.m())})}getResolver(){return this.a.value}m(){}};j0=__decorate([__param(0,to),__param(1,cs),__param(2,Pc),__param(3,ls),__param(4,Bu)],j0);var V6;(function(e){e.ViewletId="workbench.view.extension.test",e.ExplorerViewId="workbench.view.testing",e.OutputPeekContributionId="editor.contrib.testingOutputPeek",e.DecorationsContributionId="editor.contrib.testingDecorations",e.CoverageDecorationsContributionId="editor.contrib.coverageDecorations",e.CoverageViewId="workbench.view.testCoverage",e.ResultsPanelId="workbench.panel.testResults",e.ResultsViewId="workbench.panel.testResults.view",e.MessageLanguageId="vscodeInternalTestMessage"})(V6||(V6={}));var q6;(function(e){e.List="list",e.Tree="true"})(q6||(q6={}));var G6;(function(e){e.ByLocation="location",e.ByStatus="status",e.ByDuration="duration"})(G6||(G6={}));var HM={[si.Errored]:d(10833,null),[si.Failed]:d(10834,null),[si.Passed]:d(10835,null),[si.Queued]:d(10836,null),[si.Running]:d(10837,null),[si.Skipped]:d(10838,null),[si.Unset]:d(10839,null)},jM={[hr.Debug]:d(10841,null),[hr.Run]:d(10842,null),[hr.Coverage]:d(10843,null)},W0;(function(e){e.CancelTestRefreshAction="testing.cancelTestRefresh",e.CancelTestRunAction="testing.cancelRun",e.ClearTestResultsAction="testing.clearTestResults",e.CollapseAllAction="testing.collapseAll",e.ConfigureTestProfilesAction="testing.configureProfile",e.ContinousRunUsingForTest="testing.continuousRunUsingForTest",e.CoverageAtCursor="testing.coverageAtCursor",e.CoverageByUri="testing.coverage.uri",e.CoverageClear="testing.coverage.close",e.CoverageCurrentFile="testing.coverageCurrentFile",e.CoverageFilterToTest="testing.coverageFilterToTest",e.CoverageFilterToTestInEditor="testing.coverageFilterToTestInEditor",e.CoverageLastRun="testing.coverageLastRun",e.CoverageSelectedAction="testing.coverageSelected",e.CoverageToggleToolbar="testing.coverageToggleToolbar",e.CoverageViewChangeSorting="testing.coverageViewChangeSorting",e.DebugAction="testing.debug",e.DebugAllAction="testing.debugAll",e.DebugAtCursor="testing.debugAtCursor",e.DebugByUri="testing.debug.uri",e.DebugCurrentFile="testing.debugCurrentFile",e.DebugFailedTests="testing.debugFailTests",e.DebugLastRun="testing.debugLastRun",e.DebugSelectedAction="testing.debugSelected",e.FilterAction="workbench.actions.treeView.testExplorer.filter",e.GetExplorerSelection="_testing.getExplorerSelection",e.GetSelectedProfiles="testing.getSelectedProfiles",e.GoToTest="testing.editFocusedTest",e.GoToRelatedTest="testing.goToRelatedTest",e.PeekRelatedTest="testing.peekRelatedTest",e.GoToRelatedCode="testing.goToRelatedCode",e.PeekRelatedCode="testing.peekRelatedCode",e.HideTestAction="testing.hideTest",e.OpenCoverage="testing.openCoverage",e.OpenOutputPeek="testing.openOutputPeek",e.RefreshTestsAction="testing.refreshTests",e.ReRunFailedTests="testing.reRunFailTests",e.ReRunLastRun="testing.reRunLastRun",e.RunAction="testing.run",e.RunAllAction="testing.runAll",e.RunAllWithCoverageAction="testing.coverageAll",e.RunAtCursor="testing.runAtCursor",e.RunByUri="testing.run.uri",e.RunCurrentFile="testing.runCurrentFile",e.RunSelectedAction="testing.runSelected",e.RunUsingProfileAction="testing.runUsing",e.RunWithCoverageAction="testing.coverage",e.SearchForTestExtension="testing.searchForTestExtension",e.SelectDefaultTestProfiles="testing.selectDefaultTestProfiles",e.ShowMostRecentOutputAction="testing.showMostRecentOutput",e.StartContinousRun="testing.startContinuousRun",e.StopContinousRun="testing.stopContinuousRun",e.TestingSortByDurationAction="testing.sortByDuration",e.TestingSortByLocationAction="testing.sortByLocation",e.TestingSortByStatusAction="testing.sortByStatus",e.TestingViewAsListAction="testing.viewAsList",e.TestingViewAsTreeAction="testing.viewAsTree",e.ToggleContinousRunForTest="testing.toggleContinuousRunForTest",e.ToggleInlineTestOutput="testing.toggleInlineTestOutput",e.UnhideAllTestsAction="testing.unhideAllTests",e.UnhideTestAction="testing.unhideTest"})(W0||(W0={}));var GR=0,Q6=new WeakMap,Rp=K("IExtHostTesting"),z0=class extends Te{constructor(t,i,r,n){super(),this.C=i,this.D=r,this.F=n,this.f=this.B(new C),this.g=new Map,this.w=this.B(new C),this.y=new Set,this.z=new Map,this.onResultsChanged=this.f.event,this.results=[],this.h=t.getProxy(se.MainThreadTesting),this.m=new KR(this.h),this.j=new XR(this.h,i),r.registerArgumentProcessor({processArgument:s=>{switch(s?.$mid){case Dt.TestItemContext:{const o=s,a=o.tests[o.tests.length-1].item.extId;return this.g.get(Ze.root(a))?.collection.tree.get(a)?.actual??Q7(s)}case Dt.TestMessageMenuArgs:{const{test:o,message:a}=s,c=o.item.extId;return{test:this.g.get(Ze.root(c))?.collection.tree.get(c)?.actual??Q7({$mid:Dt.TestItemContext,tests:[o]}),message:mc.to(a)}}default:return s}}}),r.registerCommand(!1,"testing.getExplorerSelection",async()=>{const s=await r.executeCommand(W0.GetExplorerSelection),o=a=>{const c=this.g.get(Ze.root(a));if(c)return Ze.isRoot(a)?c.controller:c.collection.tree.get(a)?.actual};return{include:s?.include.map(o).filter(bo)||[],exclude:s?.exclude.map(o).filter(bo)||[]}})}createTestController(t,i,r,n){if(this.g.has(i))throw new Error(`Attempt to insert a duplicate controller with ID "${i}"`);const s=new He,o=s.add(new OP(i,r,this.F));o.root.label=r;const a=new Map,c=new Set,l=this.h,u=()=>{let g=0;n&&(g|=El.Refresh);const m=f.relatedCodeProvider;return m&&(m?.provideRelatedTests&&(g|=El.TestRelatedToCode),m?.provideRelatedCode&&(g|=El.CodeRelatedToTest)),g},h={items:o.root.children,get label(){return r},set label(g){r=g,o.root.label=g,l.$updateController(i,{label:r})},get refreshHandler(){return n},set refreshHandler(g){n=g,l.$updateController(i,{capabilities:u()})},get id(){return i},get relatedCodeProvider(){return f.relatedCodeProvider},set relatedCodeProvider(g){B(t,"testRelatedCode"),f.relatedCodeProvider=g,l.$updateController(i,{capabilities:u()})},createRunProfile:(g,m,b,k,I,R)=>{let N=ol(g);for(;a.has(N);)N++;return new Z6(this.h,a,c,this.w.event,i,N,g,m,b,k,I,R)},createTestItem(g,m,b){return new Ru(i,g,m,b)},createTestRun:(g,m,b=!0)=>this.j.createTestRun(t,i,o,g,m,b),invalidateTestResults:g=>{if(g===void 0)this.h.$markTestRetired(void 0);else{const m=g instanceof Array?g:[g];this.h.$markTestRetired(m.map(b=>Ze.fromExtHostTestItem(b,i).toString()))}},set resolveHandler(g){o.resolveHandler=g},get resolveHandler(){return o.resolveHandler},dispose:()=>{s.dispose()}},f={controller:h,collection:o,profiles:a,extension:t,activeProfiles:c};return l.$registerTestController(i,r,u()),s.add(Ce(()=>l.$unregisterTestController(i))),this.g.set(i,f),s.add(Ce(()=>this.g.delete(i))),s.add(o.onDidGenerateDiff(g=>l.$publishDiff(i,g.map(od.serialize)))),h}createTestObserver(){return this.m.checkout()}async runTests(t,i=Wt.None){const r=J6(t);if(!r)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const n=this.g.get(r.controllerId);if(!n)throw new Error("Controller not found");await this.h.$runTests({preserveFocus:t.preserveFocus??!0,group:V0[r.kind],targets:[{testIds:t.include?.map(s=>Ze.fromExtHostTestItem(s,n.collection.root.id).toString())??[n.collection.root.id],profileId:r.profileId,controllerId:r.controllerId}],exclude:t.exclude?.map(s=>s.id)},i)}registerTestFollowupProvider(t){return this.y.add(t),{dispose:()=>{this.y.delete(t)}}}async $getTestsRelatedToCode(t,i,r){const n=this.F.getDocument(E.revive(t));if(!n)return[];const s=lt.to(i),o=[];return await Promise.all([...this.g.values()].map(async a=>{let c;try{c=await a.relatedCodeProvider?.provideRelatedTests?.(n.document,s,r)}catch(l){r.isCancellationRequested||this.C.warn(`Error thrown while providing related tests for ${a.controller.label}`,l)}if(c){for(const l of c)o.push(Ze.fromExtHostTestItem(l,a.controller.id).toString());a.collection.flushDiff()}})),o}async $getCodeRelatedToTest(t,i){const r=this.g.get(Ze.root(t));if(!r)return[];const n=r.collection.tree.get(t);return n?(await r.relatedCodeProvider?.provideRelatedCode?.(n.actual,i))?.map(Yi.from)??[]:[]}$syncTests(){for(const{collection:t}of this.g.values())t.flushDiff();return Promise.resolve()}async $getCoverageDetails(t,i,r){return(await this.j.getCoverageDetails(t,i,r))?.map(Zf.fromDetails)}async $disposeRun(t){this.j.disposeTestRun(t)}$configureRunProfile(t,i){this.g.get(t)?.profiles.get(i)?.configureHandler?.()}$setDefaultRunProfiles(t){const i=new Map;for(const[r,n]of Object.entries(t)){const s=this.g.get(r);if(!s)continue;const o=new Map,a=n.filter(l=>!s.activeProfiles.has(l)),c=[...s.activeProfiles].filter(l=>!n.includes(l));for(const l of a)o.set(l,!0),s.activeProfiles.add(l);for(const l of c)o.set(l,!1),s.activeProfiles.delete(l);o.size&&i.set(r,o)}this.w.fire(i)}async $refreshTests(t,i){await this.g.get(t)?.controller.refreshHandler?.(i)}$publishTestResults(t){this.results=Object.freeze(t.map(i=>{const r=Av.to(i);return Q6.set(r,i.id),r}).concat(this.results).sort((i,r)=>r.completedAt-i.completedAt).slice(0,32)),this.f.fire()}async $expandTest(t,i){const r=this.g.get(Ze.fromString(t).controllerId)?.collection;r&&(await r.expand(t,i<0?1/0:i),r.flushDiff())}$acceptDiff(t){this.m.applyDiff(t.map(i=>od.deserialize({asCanonicalUri:r=>r},i)))}async $runControllerTests(t,i){return Promise.all(t.map(r=>this.G(r,!1,i)))}async $startContinuousRun(t,i){const r=new ri(i),n=await Promise.all(t.map(s=>this.G(s,!0,r.token)));return!i.isCancellationRequested&&!n.some(s=>s.error)&&await new Promise(s=>i.onCancellationRequested(s)),r.dispose(!0),n}async $provideTestFollowups(t,i){const r=this.results.find(o=>Q6.get(o)===t.resultId),n=r&&eT(Ze.fromString(t.extId),r?.results);if(!n)return[];let s=[];return await Promise.all([...this.y].map(async o=>{try{const a=await o.provideFollowup(r,n,t.taskIndex,t.messageIndex,i);a&&(s=s.concat(a))}catch(a){this.C.error("Error thrown while providing followup for test message",a)}})),i.isCancellationRequested?[]:s.map(o=>{const a=GR++;return this.z.set(a,o),{title:o.title,id:a}})}$disposeTestFollowups(t){for(const i of t)this.z.delete(i)}$executeTestFollowup(t){const i=this.z.get(t);return i?this.D.executeCommand(i.command,...i.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(t,i){t===void 0?this.j.cancelAllRuns():this.j.cancelRunById(t,i)}getMetadataForRun(t){for(const i of this.j.trackers){const r=i.getTaskIdForRun(t);if(r)return{taskId:r,runId:i.id}}}async G(t,i,r){const n=this.g.get(t.controllerId);if(!n)return{};const{collection:s,profiles:o,extension:a}=n,c=o.get(t.profileId);if(!c)return{};const l=t.testIds.map(g=>s.tree.get(g)).filter(bo),u=t.excludeExtIds.map(g=>n.collection.tree.get(g)).filter(bo).filter(g=>l.some(m=>m.fullId.compare(g.fullId)===Yr.IsChild));if(!l.length)return{};const h=new bf(l.some(g=>g.actual instanceof n0)?void 0:l.map(g=>g.actual),u.map(g=>g.actual),c,i),f=kI(t)&&this.j.prepareForMainThreadTestRun(a,h,X6.fromInternal(t,n.collection),c,r);try{return await c.runHandler(h,r),{}}catch(g){return{error:String(g)}}finally{f&&f.hasRunningTasks&&!r.isCancellationRequested&&await Gt.toPromise(f.onEnd)}}};z0=__decorate([__param(0,at),__param(1,ut),__param(2,ea),__param(3,Pc)],z0);var QR=1e4,ro;(function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"})(ro||(ro={}));var JR=class extends Te{get hasRunningTasks(){return this.g>0}get id(){return this.C.id}constructor(e,t,i,r,n,s){super(),this.C=e,this.D=t,this.F=i,this.G=r,this.H=n,this.f=ro.Running,this.g=0,this.h=new Map,this.j=new Set,this.w=this.B(new C),this.z=new Map,this.onEnd=this.w.event,this.m=this.B(new ri(s));const o=this.B(new va(()=>this.I(),QR));this.B(this.m.token.onCancellationRequested(()=>o.schedule()));const a=new C;this.y=a.event,this.B(Ce(()=>{a.fire(),a.dispose()}))}getTaskIdForRun(e){for(const[t,{run:i}]of this.h)if(i===e)return t}cancel(e){e?this.h.get(e)?.cts.cancel():this.f===ro.Running?(this.m.cancel(),this.f=ro.Cancelling):this.f===ro.Cancelling&&this.I()}async getCoverageDetails(e,t,i){const[,r]=Ze.fromString(e).path,n=this.z.get(e);if(!n)return[];const{report:s,extIds:o}=n,a=this.h.get(r);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&s instanceof nu){const u=o.indexOf(t);if(u===-1)return[];c=s.fromTests[u]}return await(c?this.G?.loadDetailedCoverageForTest?.(a.run,s,c,i):this.G?.loadDetailedCoverage?.(a.run,s,i))??[]}createRun(e){const t=this.C.id,i=this.C.controllerId,r=Xr(),n=l=>(u,...h)=>{if(o){this.F.warn(`Setting the state of test "${u.id}" is a no-op after the run ends.`);return}this.L(u),l(u,...h)},s=(l,u)=>{const h=u instanceof Array?u.map(mc.from):[mc.from(u)];if(l.uri&&l.range){const f={range:W.from(l.range),uri:l.uri};for(const g of h)g.location=g.location||f}this.D.$appendTestMessagesInRun(t,r,Ze.fromExtHostTestItem(l,i).toString(),h)};let o=!1;const a=this.B(new ri(this.m.token)),c={isPersisted:this.C.isPersisted,token:a.token,name:e,onDidDispose:this.y,addCoverage:l=>{if(o)return;const u=l instanceof nu?l.fromTests:[];if(u.length){B(this.H,"attributableCoverage");for(const g of u)this.L(g)}const h=l.uri.toString(),f=new Ze([t,r,h]).toString();this.z.set(f,{report:l,extIds:u.map(g=>Ze.fromExtHostTestItem(g,i).toString())}),this.D.$appendCoverage(t,r,Zf.fromFile(i,f,l))},enqueued:n(l=>{this.D.$updateTestStateInRun(t,r,Ze.fromExtHostTestItem(l,i).toString(),si.Queued)}),skipped:n(l=>{this.D.$updateTestStateInRun(t,r,Ze.fromExtHostTestItem(l,i).toString(),si.Skipped)}),started:n(l=>{this.D.$updateTestStateInRun(t,r,Ze.fromExtHostTestItem(l,i).toString(),si.Running)}),errored:n((l,u,h)=>{s(l,u),this.D.$updateTestStateInRun(t,r,Ze.fromExtHostTestItem(l,i).toString(),si.Errored,h)}),failed:n((l,u,h)=>{s(l,u),this.D.$updateTestStateInRun(t,r,Ze.fromExtHostTestItem(l,i).toString(),si.Failed,h)}),passed:n((l,u)=>{this.D.$updateTestStateInRun(t,r,Ze.fromExtHostTestItem(l,this.C.controllerId).toString(),si.Passed,u)}),appendOutput:(l,u,h)=>{o||(h&&this.L(h),this.D.$appendOutputToRun(t,r,Qe.fromString(l),u&&Yi.from(u),h&&Ze.fromExtHostTestItem(h,i).toString()))},end:()=>{o||(o=!0,this.D.$finishedTestRunTask(t,r),--this.g||this.J())}};return this.g++,this.h.set(r,{run:c,cts:a}),this.D.$startedTestRunTask(t,{id:r,ctrlId:this.C.controllerId,name:e||this.H.displayName||this.H.identifier.value,running:!0}),c}I(){for(const{run:e}of this.h.values())e.end()}J(){this.f!==ro.Ended&&(this.f=ro.Ended,this.w.fire())}L(e){if(!(e instanceof Ru))throw new ad(e.id);if(this.j.has(Ze.fromExtHostTestItem(e,this.C.controllerId).toString()))return;const t=[],i=this.C.colllection.root;for(;;){const r=Xs.from(e);if(t.unshift(r),this.j.has(r.extId)||(this.j.add(r.extId),e===i))break;e=e.parent||i}this.D.$addTestsToRun(this.C.controllerId,this.C.id,t)}dispose(){this.J(),super.dispose()}},XR=class{get trackers(){return this.f.values()}constructor(e,t){this.h=e,this.j=t,this.f=new Map,this.g=new Map}getCoverageDetails(e,t,i){const r=Ze.root(e);return this.g.get(r)?.getCoverageDetails(e,t,i)||[]}disposeTestRun(e){this.g.get(e)?.dispose(),this.g.delete(e);for(const[t,{id:i}]of this.f)i===e&&this.f.delete(t)}prepareForMainThreadTestRun(e,t,i,r,n){return this.k(t,i,r,e,n)}cancelRunById(e,t){this.g.get(e)?.cancel(t)}cancelAllRuns(){for(const e of this.f.values())e.cancel()}createTestRun(e,t,i,r,n,s){const o=this.f.get(r);if(o)return o.createRun(n);const a=X6.fromPublic(t,i,r,s),c=J6(r);this.h.$startedExtensionTestRun({controllerId:t,continuous:!!r.continuous,profile:c&&{group:V0[c.kind],id:c.profileId},exclude:r.exclude?.map(u=>Ze.fromExtHostTestItem(u,i.root.id).toString())??[],id:a.id,include:r.include?.map(u=>Ze.fromExtHostTestItem(u,i.root.id).toString())??[i.root.id],preserveFocus:r.preserveFocus??!0,persist:s});const l=this.k(r,a,r.profile,e);return Gt.once(l.onEnd)(()=>{this.h.$finishedExtensionTestRun(a.id)}),l.createRun(n)}k(e,t,i,r,n){const s=new JR(t,this.h,this.j,i,r,n);return this.f.set(e,s),this.g.set(s.id,s),s}},J6=e=>{if(e.profile){if(!(e.profile instanceof Z6))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}},X6=class rb{static fromPublic(t,i,r,n){return new rb(t,Xr(),n,i)}static fromInternal(t,i){return new rb(t.controllerId,t.runId,!0,i)}constructor(t,i,r,n){this.controllerId=t,this.id=i,this.isPersisted=r,this.colllection=n}},ZR=class{get isEmpty(){return this.f.size===0&&this.h.size===0&&this.g.size===0}constructor(e){this.k=e,this.f=new Set,this.g=new Set,this.h=new Set,this.j=new Set}add(e){this.f.add(e)}update(e){Object.assign(e.revived,Xs.toPlain(e.item)),this.f.has(e)||this.g.add(e)}remove(e){if(this.f.has(e)){this.f.delete(e);return}this.g.delete(e);const t=Ze.parentId(e.item.extId);if(t&&this.j.has(t.toString())){this.j.add(e.item.extId);return}this.h.add(e)}getChangeEvent(){const{f:e,g:t,h:i}=this;return{get added(){return[...e].map(r=>r.revived)},get updated(){return[...t].map(r=>r.revived)},get removed(){return[...i].map(r=>r.revived)}}}complete(){this.isEmpty||this.k.fire(this.getChangeEvent())}},YR=class extends DI{constructor(){super(...arguments),this.z=new C,this.onDidChangeTests=this.z.event}get rootTests(){return this.h}getMirroredTestDataById(e){return this.g.get(e)}getMirroredTestDataByReference(e){return this.g.get(e.id)}y(e,t){return{...e,revived:Xs.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}x(){return new ZR(this.z)}},KR=class{constructor(e){this.g=e}checkout(){this.f||(this.f=this.h());const e=this.f;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:Ig(()=>{--e.observers===0&&(this.g.$unsubscribeFromDiffs(),this.f=void 0)})}}getMirroredTestDataByReference(e){return this.f?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.f?.tests.apply(e)}h(){const e=new YR({asCanonicalUri:t=>t});return this.g.$subscribeToDiffs(),{observers:0,tests:e}}},Hu=(e,t,i,r)=>{i?Object.assign(i,r):t.$updateTestRunConfig(e.controllerId,e.profileId,r)},Z6=class{#e;#t;#i;#r;#s;get label(){return this.g}set label(e){e!==this.g&&(this.g=e,Hu(this,this.#e,this.#r,{label:e}))}get supportsContinuousRun(){return this.h}set supportsContinuousRun(e){e!==this.h&&(this.h=e,Hu(this,this.#e,this.#r,{supportsContinuousRun:e}))}get isDefault(){return this.#t.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#t.add(this.profileId):this.#t.delete(this.profileId),Hu(this,this.#e,this.#r,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,Hu(this,this.#e,this.#r,{tag:e?an.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this.f}set configureHandler(e){e!==this.f&&(this.f=e,Hu(this,this.#e,this.#r,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return Gt.chain(this.#i,e=>e.map(t=>t.get(this.controllerId)?.get(this.profileId)).filter(bo))}constructor(e,t,i,r,n,s,o,a,c,l=!1,u=void 0,h=!1){this.controllerId=n,this.profileId=s,this.g=o,this.kind=a,this.runHandler=c,this._tag=u,this.h=h,this.#e=e,this.#s=t,this.#t=i,this.#i=r,t.set(s,this);const f=V0[a];if(typeof f!="number")throw new Error(`Unknown TestRunProfile.group ${a}`);l&&i.add(s),this.#r={profileId:s,controllerId:n,tag:u?an.namespace(this.controllerId,u.id):null,label:o,group:f,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:h},queueMicrotask(()=>{this.#r&&(this.#e.$publishTestRunProfile(this.#r),this.#r=void 0)})}dispose(){this.#s?.delete(this.profileId)&&(this.#s=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#r=void 0}},V0={[oc.Coverage]:hr.Coverage,[oc.Debug]:hr.Debug,[oc.Run]:hr.Run};function eT(e,t){for(let i=0;i<e.path.length;i++){const r=t.find(n=>n.id===e.path[i]);if(!r)return;if(i===e.path.length-1)return r;t=r.children}}var Y6=K("IExtHostDebugService"),q0=class extends Te{get onDidStartDebugSession(){return this.y.event}get onDidTerminateDebugSession(){return this.z.event}get onDidChangeActiveDebugSession(){return this.C.event}get activeDebugSession(){return this.D?.api}get onDidReceiveDebugSessionCustomEvent(){return this.F.event}get activeDebugConsole(){return this.G.value}constructor(t,i,r,n,s,o,a,c){super(),this.Y=i,this.Z=r,this.$=n,this.ab=s,this.bb=o,this.cb=a,this.db=c,this.w=new Map,this.O=0,this.P=new Map,this.Q=new Map,this.R=new WeakMap,this.S=new Map,this.W=new Map,this.X=0,this.f=0,this.g=[],this.h=0,this.j=[],this.m=0,this.n=[],this.M=new Map,this.N=new Map,this.y=this.B(new C),this.z=this.B(new C),this.C=this.B(new C),this.F=this.B(new C),this.u=t.getProxy(se.MainThreadDebugService),this.I=this.B(new C),this.L=this.B(new C),this.G=new iT(this.u),this.H=new Map,this.Z.getExtensionRegistry().then(l=>{this.B(l.onDidChange(u=>{this.fb(l)})),this.fb(l)})}async $getVisualizerTreeItem(t,i){const r=this.gb(i);if(!r)return;const n=await this.Q.get(t)?.getTreeItem?.(r);return n?this.eb(t,n):void 0}registerDebugVisualizationTree(t,i,r){const n=dt.toKey(t.identifier),s=this.ub(n,i);if(this.P.has(s))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.Q.set(s,r),this.u.$registerDebugVisualizerTree(s,!!r.editItem),Ce(()=>{this.u.$unregisterDebugVisualizerTree(s),this.Q.delete(i)})}async $getVisualizerTreeItemChildren(t,i){const r=this.S.get(i)?.item;return r?(await this.Q.get(t)?.getChildren?.(r))?.map(s=>this.eb(t,s))||[]:[]}async $editVisualizerTreeItem(t,i){const r=this.S.get(t);if(!r)return;const n=await this.Q.get(r.provider)?.editItem?.(r.item,i);return this.eb(r.provider,n||r.item)}$disposeVisualizedTree(t){const i=this.S.get(t);if(!i)return;const r=[i.children];for(const n of r)if(n)for(const s of n)r.push(this.S.get(s)?.children),this.S.delete(s)}eb(t,i){let r=this.R.get(i);return r||(r=this.O++,this.R.set(i,r),this.S.set(r,{provider:t,item:i})),Fv.from(i,r)}asDebugSourceUri(t,i){const r=t;if(typeof r.sourceReference=="number"&&r.sourceReference>0){let n=`debug:${encodeURIComponent(r.path||"")}`,s="?";return i&&(n+=`${s}session=${encodeURIComponent(i.id)}`,s="&"),n+=`${s}ref=${r.sourceReference}`,E.parse(n)}else{if(r.path)return E.file(r.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}fb(t){const i=[];for(const r of t.getAllExtensionDescriptions())if(r.contributes){const n=r.contributes.debuggers;if(n&&n.length>0)for(const s of n)BR(s)&&i.push(s.type)}this.u.$registerDebugTypes(i)}get activeStackItem(){return this.J}get onDidChangeActiveStackItem(){return this.L.event}get onDidChangeBreakpoints(){return this.I.event}get breakpoints(){const t=[];return this.H.forEach(i=>t.push(i)),t}async $resolveDebugVisualizer(t,i){const r=this.W.get(t);if(!r)throw new Error(`No debug visualizer found with id '${t}'`);let{v:n,provider:s,extensionId:o}=r;if(n.visualization||(n=await s.resolveDebugVisualization?.(n,i)||n,r.v=n),!n.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${s}'`);return this.vb(o,n.visualization)}async $executeDebugVisualizerCommand(t){const i=this.W.get(t);if(!i)throw new Error(`No debug visualizer found with id '${t}'`);const r=i.v.visualization;r&&"command"in r&&this.cb.executeCommand(r.command,...r.arguments||[])}gb(t){const i=this.w.get(t.sessionId);return i&&{session:i.api,variable:t.variable,containerId:t.containerId,frameId:t.frameId,threadId:t.threadId}}async $provideDebugVisualizers(t,i,r,n){const s=this.gb(r),o=this.ub(t,i),a=this.P.get(o);if(!s||!a)return[];const c=await a.provideDebugVisualization(s,n);return c?c.map(l=>{const u=++this.X;this.W.set(u,{v:l,provider:a,extensionId:t});const h=l.iconPath?this.wb(l.iconPath):void 0;return{id:u,name:l.name,iconClass:h?.iconClass,iconPath:h?.iconPath,visualization:this.vb(t,l.visualization)}}):[]}$disposeDebugVisualizers(t){for(const i of t)this.W.delete(i)}registerDebugVisualizationProvider(t,i,r){if(!t.contributes?.debugVisualizers?.some(o=>o.id===i))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${i})`);const n=dt.toKey(t.identifier),s=this.ub(n,i);if(this.P.has(s))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.P.set(s,r),this.u.$registerDebugVisualizer(n,i),Ce(()=>{this.u.$unregisterDebugVisualizer(n,i),this.P.delete(i)})}addBreakpoints(t){const i=t.filter(s=>{const o=s.id;return this.H.has(o)?!1:(this.H.set(o,s),!0)});this.rb(i,[],[]);const r=[],n=new Map;for(const s of i)if(s instanceof zo){let o=n.get(s.location.uri.toString());o||(o={type:"sourceMulti",uri:s.location.uri,lines:[]},n.set(s.location.uri.toString(),o),r.push(o)),o.lines.push({id:s.id,enabled:s.enabled,condition:s.condition,hitCondition:s.hitCondition,logMessage:s.logMessage,line:s.location.range.start.line,character:s.location.range.start.character,mode:s.mode})}else s instanceof Vo&&r.push({type:"function",id:s.id,enabled:s.enabled,hitCondition:s.hitCondition,logMessage:s.logMessage,condition:s.condition,functionName:s.functionName,mode:s.mode});return this.u.$registerBreakpoints(r)}removeBreakpoints(t){const i=t.filter(o=>this.H.delete(o.id));this.rb([],i,[]);const r=i.filter(o=>o instanceof zo).map(o=>o.id),n=i.filter(o=>o instanceof Vo).map(o=>o.id),s=i.filter(o=>o instanceof tf).map(o=>o.id);return this.u.$unregisterBreakpoints(r,n,s)}startDebugging(t,i,r){const n=r.testRun&&this.db.getMetadataForRun(r.testRun);return this.u.$startDebugging(t?t.uri:void 0,i,{parentSessionID:r.parentSession?r.parentSession.id:void 0,lifecycleManagedByParent:r.lifecycleManagedByParent,repl:r.consoleMode===hf.MergeWithParent?"mergeWithParent":"separate",noDebug:r.noDebug,compact:r.compact,suppressSaveBeforeStart:r.suppressSaveBeforeStart,testRun:n&&{runId:n.runId,taskId:n.taskId},suppressDebugStatusbar:r.suppressDebugStatusbar??r.debugUI?.simple,suppressDebugToolbar:r.suppressDebugToolbar??r.debugUI?.simple,suppressDebugView:r.suppressDebugView??r.debugUI?.simple})}stopDebugging(t){return this.u.$stopDebugging(t?t.id:void 0)}registerDebugConfigurationProvider(t,i,r){if(!i)return new Ye(()=>{});const n=this.f++;return this.g.push({type:t,handle:n,provider:i}),this.u.$registerDebugConfigurationProvider(t,r,!!i.provideDebugConfigurations,!!i.resolveDebugConfiguration,!!i.resolveDebugConfigurationWithSubstitutedVariables,n),new Ye(()=>{this.g=this.g.filter(s=>s.provider!==i),this.u.$unregisterDebugConfigurationProvider(n)})}registerDebugAdapterDescriptorFactory(t,i,r){if(!r)return new Ye(()=>{});if(!this.nb(t,i))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${i}' debugger.`);if(this.kb(i))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const n=this.h++;return this.j.push({type:i,handle:n,factory:r}),this.u.$registerDebugAdapterDescriptorFactory(i,n),new Ye(()=>{this.j=this.j.filter(s=>s.factory!==r),this.u.$unregisterDebugAdapterDescriptorFactory(n)})}registerDebugAdapterTrackerFactory(t,i){if(!i)return new Ye(()=>{});const r=this.m++;return this.n.push({type:t,handle:r,factory:i}),new Ye(()=>{this.n=this.n.filter(n=>n.factory!==i)})}async $runInTerminal(t,i){return Promise.resolve(void 0)}async $substituteVariables(t,i){let r;const n=await this.tb(t);return n&&(r={uri:n.uri,name:n.name,index:n.index,toResource:()=>{throw new Error("Not implemented")}}),(await this.bb.getResolver()).resolveAnyAsync(r,i)}hb(t,i){if(t.type==="implementation")return new nT(t.implementation)}ib(){}async $startDASession(t,i){const r=this,n=await this.sb(i);return this.pb(this.kb(n.type),n).then(s=>{if(!s)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${n.type}' (extension might have failed to activate)`);const o=this.jb(s),a=this.hb(o,n);if(!a)throw new Error(`Couldn't create a debug adapter for type '${n.type}'.`);const c=a;return this.M.set(t,c),this.ob(n).then(l=>(l&&this.N.set(t,l),c.onMessage(async u=>{if(u.type==="request"&&u.command==="handshake"){const h=u,f={type:"response",seq:0,command:h.command,request_seq:h.seq,success:!0};this.U||(this.U=this.ib());try{if(this.U){const g=await this.U.sign(h.arguments.value);f.body={signature:g},c.sendResponse(f)}else throw new Error("no signer")}catch(g){f.success=!1,f.message=g.message,c.sendResponse(f)}}else l&&l.onDidSendMessage&&l.onDidSendMessage(u),u=zR(u,!0),r.u.$acceptDAMessage(t,u)}),c.onError(u=>{l&&l.onError&&l.onError(u),this.u.$acceptDAError(t,u.name,u.message,u.stack)}),c.onExit(u=>{l&&l.onExit&&l.onExit(u??void 0,void 0),this.u.$acceptDAExit(t,u??void 0,void 0)}),l&&l.onWillStartSession&&l.onWillStartSession(),c.startSession()))})}$sendDAMessage(t,i){i=WR(i,!1);const r=this.N.get(t);r&&r.onWillReceiveMessage&&r.onWillReceiveMessage(i),this.M.get(t)?.sendMessage(i)}$stopDASession(t){const i=this.N.get(t);this.N.delete(t),i&&i.onWillStopSession&&i.onWillStopSession();const r=this.M.get(t);return this.M.delete(t),r?r.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(t){const i=[],r=[],n=[];if(t.added)for(const s of t.added){const o=s.id;if(o&&!this.H.has(o)){let a;if(s.type==="function")a=new Vo(s.functionName,s.enabled,s.condition,s.hitCondition,s.logMessage,s.mode);else if(s.type==="data")a=new tf(s.label,s.dataId,s.canPersist,s.enabled,s.hitCondition,s.condition,s.logMessage,s.mode);else{const c=E.revive(s.uri);a=new zo(new kr(c,new Ve(s.line,s.character)),s.enabled,s.condition,s.hitCondition,s.logMessage,s.mode)}OA(a,o),this.H.set(o,a),i.push(a)}}if(t.removed)for(const s of t.removed){const o=this.H.get(s);o&&(this.H.delete(s),r.push(o))}if(t.changed){for(const s of t.changed)if(s.id){const o=this.H.get(s.id);if(o){if(o instanceof Vo&&s.type==="function"){const a=o;a.enabled=s.enabled,a.condition=s.condition,a.hitCondition=s.hitCondition,a.logMessage=s.logMessage,a.functionName=s.functionName}else if(o instanceof zo&&s.type==="source"){const a=o;a.enabled=s.enabled,a.condition=s.condition,a.hitCondition=s.hitCondition,a.logMessage=s.logMessage,a.location=new kr(E.revive(s.uri),new Ve(s.line,s.character))}n.push(o)}}}this.rb(i,r,n)}async $acceptStackFrameFocus(t){let i;if(t){const r=await this.sb(t.sessionId);t.kind==="thread"?i=new WE(r.api,t.threadId):i=new jE(r.api,t.threadId,t.frameId)}this.J=i,this.L.fire(this.J)}$provideDebugConfigurations(t,i,r){return _i(async()=>{const n=this.mb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const s=await this.tb(i);return n.provideDebugConfigurations(s,r)}).then(n=>{if(!n)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return n})}$resolveDebugConfiguration(t,i,r,n){return _i(async()=>{const s=this.mb(t);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.tb(i);return s.resolveDebugConfiguration(o,r,n)})}$resolveDebugConfigurationWithSubstitutedVariables(t,i,r,n){return _i(async()=>{const s=this.mb(t);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.tb(i);return s.resolveDebugConfigurationWithSubstitutedVariables(o,r,n)})}async $provideDebugAdapter(t,i){const r=this.lb(t);if(!r)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const n=await this.sb(i);return this.pb(r,n).then(s=>{if(!s)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${n.type}'`);return this.jb(s)})}async $acceptDebugSessionStarted(t){const i=await this.sb(t);this.y.fire(i.api)}async $acceptDebugSessionTerminated(t){const i=await this.sb(t);i&&(this.z.fire(i.api),this.w.delete(i.id))}async $acceptDebugSessionActiveChanged(t){this.D=t?await this.sb(t):void 0,this.C.fire(this.D?.api)}async $acceptDebugSessionNameChanged(t,i){(await this.sb(t))?._acceptNameChanged(i)}async $acceptDebugSessionCustomEvent(t,i){const n={session:(await this.sb(t)).api,event:i.event,body:i.body};this.F.fire(n)}jb(t){if(t instanceof rf)return{type:"executable",command:t.command,args:t.args,options:t.options};if(t instanceof Gl)return{type:"server",port:t.port,host:t.host};if(t instanceof nf)return{type:"pipeServer",path:t.path};if(t instanceof sf)return{type:"implementation",implementation:t.implementation};throw new Error("convertToDto unexpected type")}kb(t){const i=this.j.filter(r=>r.type===t);if(i.length>0)return i[0].factory}lb(t){const i=this.j.filter(r=>r.handle===t);if(i.length>0)return i[0].factory}mb(t){const i=this.g.filter(r=>r.handle===t);if(i.length>0)return i[0].provider}nb(t,i){if(t.contributes){const r=t.contributes.debuggers;if(r&&r.length>0){for(const n of r)if(n.label&&n.type&&n.type===i)return!0}}return!1}ob(t){const r=t.configuration.type,n=this.n.filter(s=>s.type===r||s.type==="*").map(s=>_i(()=>s.factory.createDebugAdapterTracker(t.api)).then(o=>o,o=>null));return Promise.race([Promise.all(n).then(s=>{const o=ci(s);if(o.length>0)return new rT(o)}),new Promise(s=>setTimeout(()=>s(void 0),1e3))]).catch(s=>{})}async pb(t,i){const r=i.configuration.debugServer;if(typeof r=="number")return Promise.resolve(new Gl(r));if(t){const s=await this.Z.getExtensionRegistry();return _i(()=>t.createDebugAdapterDescriptor(i.api,this.qb(i,s))).then(o=>{if(o)return o})}const n=await this.Z.getExtensionRegistry();return Promise.resolve(this.qb(i,n))}qb(t,i){}rb(t,i,r){(t.length>0||i.length>0||r.length>0)&&this.I.fire(Object.freeze({added:t,removed:i,changed:r}))}async sb(t){if(t)if(typeof t=="string"){const i=this.w.get(t);if(i)return i}else{let i=this.w.get(t.id);if(!i){const r=await this.tb(t.folderUri),n=t.parent?this.w.get(t.parent):void 0;i=new tT(this.u,t.id,t.type,t.name,r,t.configuration,n?.api),this.w.set(i.id,i),this.u.$sessionCached(i.id)}return i}throw new Error("cannot find session")}tb(t){if(t){const i=E.revive(t);return this.Y.resolveWorkspaceFolder(i)}return Promise.resolve(void 0)}ub(t,i){return`${t}\0${i}`}vb(t,i){if(i){if("title"in i&&"command"in i)return{type:$d.Command};if("treeId"in i)return{type:$d.Tree,id:`${t}\0${i.treeId}`};throw new Error("Unsupported debug visualization type")}}wb(t){const i=this.xb(t);let r,n;return"id"in i?n=Ai.asClassName(i):r=i,{iconPath:r,iconClass:n}}xb(t){if(t instanceof Bi)return{id:t.id};const i=typeof t=="object"&&"dark"in t?t.dark:t,r=typeof t=="object"&&"light"in t?t.light:t;return{dark:typeof i=="string"?E.file(i):i,light:typeof r=="string"?E.file(r):r}}};q0=__decorate([__param(0,at),__param(1,cs),__param(2,to),__param(3,ls),__param(4,Bu),__param(5,H0),__param(6,ea),__param(7,Rp)],q0);var tT=class{constructor(e,t,i,r,n,s,o){this.f=e,this.g=t,this.h=i,this.j=r,this.k=n,this.l=s,this.m=o}get api(){const e=this;return this.d??=Object.freeze({id:e.g,type:e.h,get name(){return e.j},set name(t){e.j=t,e.f.$setDebugSessionName(e.g,t)},parentSession:e.m,workspaceFolder:e.k,configuration:e.l,customRequest(t,i){return e.f.$customDebugAdapterRequest(e.g,t,i)},getDebugProtocolBreakpoint(t){return e.f.$getDebugProtocolBreakpoint(e.g,t.id)}})}get id(){return this.g}get type(){return this.h}_acceptNameChanged(e){this.j=e}get configuration(){return this.l}},iT=class{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}},rT=class{constructor(e){this.d=e}onWillStartSession(){this.d.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.d.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.d.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.d.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.d.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.d.forEach(i=>i.onExit?i.onExit(e,t):void 0)}},nT=class extends UR{constructor(e){super(),this.h=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.h.handleMessage(e)}stopSession(){return this.h.dispose(),Promise.resolve(void 0)}},G0=class extends q0{constructor(t,i,r,n,s,o,a,c){super(t,i,r,n,s,o,a,c)}};G0=__decorate([__param(0,at),__param(1,cs),__param(2,to),__param(3,ls),__param(4,Bu),__param(5,H0),__param(6,ea),__param(7,Rp)],G0);var sT=class{constructor(e,t,i){this.l=e,this.o=t,this.p=i,this.f=!1,this.g=0,this.h=!1,this.a=e.filePattern,this.b=e.includePattern&&Ba(e.includePattern),this.c=e.maxResults||void 0,this.d=e.exists,this.j=new Set,this.k=e.excludePattern&&Ba(e.excludePattern)}cancel(){this.h=!0,this.j.forEach(e=>e.cancel()),this.j=new Set}search(e){const t=this.l.folderQueries||[];return new Promise((i,r)=>{const n=s=>{this.g++,e(s)};if(this.h)return i({limitHit:this.f});this.l.extraFileResources&&this.l.extraFileResources.forEach(s=>{const o=s.toString(),a=cr(o);this.k&&this.k(o,a)||this.w(n,{base:s,basename:a})}),this.q(t,n).then(s=>{i({limitHit:this.f,stats:s||void 0})},s=>{r(new Error(Eo(s)))})})}async q(e,t){const i=new ri,n={folderOptions:e.map(a=>this.r(a)),maxResults:this.l.maxResults??c7,session:this.p},s=Wn.forUris();e.forEach(a=>{const c=new w7(this.l,a),l=!c.hasSiblingExcludeClauses();s.set(a.folder,{queryTester:c,noSiblingsClauses:l,folder:a.folder,tree:this.s()})});let o;try{this.j.add(i),o=fo.create();const a=await this.o.provideFileSearchResults(this.l.filePattern||"",n,i.token),c=o.elapsed(),l=fo.create();return this.h&&!this.f||(a&&a.forEach(u=>{const h=s.findSubstr(u),f=et.relative(h.folder.path,u.path);if(h.noSiblingsClauses){const g=cr(u.path);this.w(t,{base:h.folder,relativePath:f,basename:g});return}this.u(h.tree,h.folder,f,t)}),this.h&&!this.f)?null:(s.forEach(u=>{this.v(u.tree,u.queryTester,t)}),{providerTime:c,postProcessTime:l.elapsed()})}finally{i.dispose(),this.j.delete(i)}}r(e){const t=fp(this.l.includePattern,e.includePattern),i=y7(e.excludePattern?.folder,fp(this.l.excludePattern,e.excludePattern?.pattern));return{folder:e.folder,excludes:i,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks}}s(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}u({pathToEntries:e},t,i,r){if(i===this.a){const s=cr(this.a);this.w(r,{base:t,relativePath:this.a,basename:s})}function n(s){const o=cr(s),a=da(s);let c=e[a];c||(c=e[a]=[],n(a)),c.push({base:t,relativePath:s,basename:o})}n(i)}v({rootEntries:e,pathToEntries:t},i,r){const n=this,s=this.a;function o(a){const c=aP(()=>a.map(l=>l.basename));for(let l=0,u=a.length;l<u;l++){const h=a[l],{relativePath:f,basename:g}=h;if(i.matchesExcludesSync(f,g,s!==g?c:void 0))continue;const m=t[f];if(m)o(m);else{if(f===s)continue;n.w(r,h)}if(n.f)break}}o(e)}w(e,t){(!this.b||t.relativePath&&this.b(t.relativePath,t.basename))&&((this.d||this.c&&this.g>=this.c)&&(this.f=!0,this.cancel()),this.f||e(t))}},oT=class K8{constructor(){this.b=new Map}static{this.a=512}fileSearch(t,i,r,n){const s=this.c(t.cacheKey),o=new sT(t,i,s&&s.token);let a=0;const c=l=>{a+=l.length,r(l.map(u=>this.d(u)))};return this.f(o,K8.a,c,n).then(l=>({limitHit:l.limitHit,stats:l.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}:void 0,messages:[]}))}clearCache(t){this.c(t)?.cancel()}c(t){if(t)return this.b.has(t)||this.b.set(t,new ri),this.b.get(t)}d(t){return t.relativePath?{resource:Mi(t.base,t.relativePath)}:{resource:t.base}}f(t,i,r,n){const s=n.onCancellationRequested(()=>{t.cancel()}),o=c=>{c&&(a.push(c),i>0&&a.length>=i&&(r(a),a=[]))};let a=[];return t.search(o).then(c=>(a.length&&r(a),s.dispose(),c),c=>(a.length&&r(a),s.dispose(),Promise.reject(c)))}},K6=class{constructor(e,t,i){this.e=e,this.f=t,this.g=i,this.b=null,this.c=!1,this.d=0}get h(){return this.e.query}search(e,t){const i=this.h.folderQueries||[],r=new ri(t);return new Promise((n,s)=>{this.b=new cT(e);let o=!1;const a=(c,l)=>{if(!o&&!this.c){const u=this.k(c);c instanceof Zo&&typeof this.h.maxResults=="number"&&this.d+u>this.h.maxResults&&(this.c=!0,o=!0,r.cancel(),c=this.l(c,this.h.maxResults-this.d));const h=this.k(c);this.d+=h;const f=c instanceof Zo;(h>0||!f)&&this.b.add(c,l)}};this.m(i,a,r.token).then(c=>{r.dispose(),this.b.flush(),n({limitHit:this.c||c?.limitHit,messages:this.j(c),stats:{type:this.g}})},c=>{r.dispose();const l=Eo(c);s(new Error(l))})})}j(e){return e?.message?Array.isArray(e.message)?e.message:[e.message]:[]}k(e){return e instanceof Zo?Array.isArray(e.ranges)?e.ranges.length:1:0}l(e,t){return new Zo(e.uri,e.ranges.slice(0,t),e.previewText)}async m(e,t,i){const r=Wn.forUris();e.forEach((l,u)=>{const h=new w7(this.h,l);r.set(l.folder,{queryTester:h,folder:l.folder,folderIdx:u})});const n=[],s={report:l=>{const u=r.findSubstr(l.uri),h=u.folder.scheme===de.file?oP(()=>this.f.readdir(Xg(l.uri))):void 0,f=ky(u.folder,l.uri);if(f){const g=u.queryTester.includedInQuery(f,cr(f),h);_s(g)?n.push(g.then(m=>{m&&t(l,u.folderIdx)})):g&&t(l,u.folderIdx)}}},a={folderOptions:e.map(l=>this.n(l)),maxFileSize:this.h.maxFileSize,maxResults:this.h.maxResults??c7,previewOptions:this.h.previewOptions,surroundingContext:this.h.surroundingContext??0};"usePCRE2"in this.h&&(a.usePCRE2=this.h.usePCRE2);let c;return this.e.query.type===Ec.aiText?c=await this.e.provider.provideAITextSearchResults(this.e.query.contentPattern,a,s,i):c=await this.e.provider.provideTextSearchResults(aT(this.e.query.contentPattern),a,s,i),n.length&&await Promise.all(n),c}n(e){const t=fp(this.h.includePattern,e.includePattern),i=y7(e.excludePattern?.folder,fp(this.h.excludePattern,e.excludePattern?.pattern));return{folder:E.from(e.folder),excludes:i,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks,encoding:(e.fileEncoding&&this.f.toCanonicalName(e.fileEncoding))??""}}};function aT(e){return{isCaseSensitive:e.isCaseSensitive||!1,isRegExp:e.isRegExp||!1,isWordMatch:e.isWordMatch||!1,isMultiline:e.isMultiline||!1,pattern:e.pattern}}var cT=class{constructor(e){this.f=e,this.c=-1,this.e=null,this.b=new uT(512,t=>this.h(t))}add(e,t){this.e&&(this.c!==t||!xy(this.d,e.uri))&&(this.g(),this.e=null),this.e||(this.c=t,this.e={resource:e.uri,results:[]}),this.e.results.push(lT(e))}g(){const e=this.e&&this.e.results?this.e.results.length:0;this.b.addItem(this.e,e)}flush(){this.g(),this.b.flush()}h(e){this.f(e)}};function lT(e){return e instanceof Zo?{previewText:e.previewText,rangeLocations:e.ranges.map(t=>({preview:{startLineNumber:t.previewRange.start.line,startColumn:t.previewRange.start.character,endLineNumber:t.previewRange.end.line,endColumn:t.previewRange.end.character},source:{startLineNumber:t.sourceRange.start.line,startColumn:t.sourceRange.start.character,endLineNumber:t.sourceRange.end.line,endColumn:t.sourceRange.end.character}}))}:{text:e.text,lineNumber:e.lineNumber}}var uT=class nb{static{this.b=4e3}static{this.c=50}constructor(t,i){this.h=t,this.j=i,this.d=0,this.e=[],this.f=0}addItem(t,i){t&&this.k(t,i)}addItems(t,i){t&&this.l(t,i)}k(t,i){this.e.push(t),this.f+=i,this.m()}l(t,i){this.e=this.e.concat(t),this.f+=i,this.m()}m(){this.d<nb.c?this.flush():this.f>=this.h?this.flush():this.g||(this.g=setTimeout(()=>{this.flush()},nb.b))}flush(){this.f&&(this.d+=this.f,this.j(this.e),this.e=[],this.f=0,this.g&&(clearTimeout(this.g),this.g=0))}};function hT(e){return"uri"in e&&"ranges"in e&&"preview"in e}function dT(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,session:e.session}))}var fT=class{constructor(e){this.a=e}provideFileSearchResults(e,t,i){return(async()=>{const n=dT(t);return Promise.all(n.map(s=>this.a.provideFileSearchResults({pattern:e},s,i)))})().then(n=>ci(n).flat())}};function e9(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,previewOptions:pT(e.previewOptions),maxFileSize:e.maxFileSize,encoding:t.encoding,afterContext:e.surroundingContext,beforeContext:e.surroundingContext}))}function pT(e){if(!(!e||e.matchLines===void 0&&e.charsPerLine===void 0))return{matchLines:e.matchLines??100,charsPerLine:e.charsPerLine??1e4}}function Q0(e){if(hT(e)){const t=fn(e.ranges).map((i,r)=>{const s=fn(e.preview.matches)[r];return{sourceRange:i,previewRange:s}});return new Zo(e.uri,t,e.preview.text)}else return new a7(e.uri,e.text,e.lineNumber)}var gT=class{constructor(e){this.a=e}provideTextSearchResults(e,t,i,r){const n=a=>{t9(a)&&i.report(Q0(a))};return(async()=>ci(await Promise.all(e9(t).map(a=>this.a.provideTextSearchResults(e,a,{report:c=>n(c)},r)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:ci(fn(a.message))}))}},mT=class{constructor(e){this.a=e}provideAITextSearchResults(e,t,i,r){const n=a=>{t9(a)&&i.report(Q0(a))};return(async()=>ci(await Promise.all(e9(t).map(a=>this.a.provideAITextSearchResults(e,a,{report:c=>n(c)},r)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:ci(fn(a.message))}))}};function t9(e){if(vT(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}function vT(e){return!!e.preview}var i9=K("IExtHostSearch"),J0=class{constructor(t,i,r){this.n=t,this.o=i,this.q=r,this.c=this.n.getProxy(se.MainThreadSearch),this.d=0,this.e=new Map,this.g=new Set,this.h=new Map,this.i=new Set,this.j=new Map,this.k=new Set,this.l=new oT}s(t){return this.o.transformOutgoingScheme(t)}registerTextSearchProviderOld(t,i){if(this.g.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.g.add(t);const r=this.d++;return this.e.set(r,new gT(i)),this.c.$registerTextSearchProvider(r,this.s(t)),Ce(()=>{this.g.delete(t),this.e.delete(r),this.c.$unregisterProvider(r)})}registerTextSearchProvider(t,i){if(this.g.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.g.add(t);const r=this.d++;return this.e.set(r,i),this.c.$registerTextSearchProvider(r,this.s(t)),Ce(()=>{this.g.delete(t),this.e.delete(r),this.c.$unregisterProvider(r)})}registerAITextSearchProviderOld(t,i){if(this.i.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.i.add(t);const r=this.d++;return this.h.set(r,new mT(i)),this.c.$registerAITextSearchProvider(r,this.s(t)),Ce(()=>{this.i.delete(t),this.h.delete(r),this.c.$unregisterProvider(r)})}registerAITextSearchProvider(t,i){if(this.i.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.i.add(t);const r=this.d++;return this.h.set(r,i),this.c.$registerAITextSearchProvider(r,this.s(t)),Ce(()=>{this.i.delete(t),this.h.delete(r),this.c.$unregisterProvider(r)})}registerFileSearchProviderOld(t,i){if(this.k.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.k.add(t);const r=this.d++;return this.j.set(r,new fT(i)),this.c.$registerFileSearchProvider(r,this.s(t)),Ce(()=>{this.k.delete(t),this.j.delete(r),this.c.$unregisterProvider(r)})}registerFileSearchProvider(t,i){if(this.k.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.k.add(t);const r=this.d++;return this.j.set(r,i),this.c.$registerFileSearchProvider(r,this.s(t)),Ce(()=>{this.k.delete(t),this.j.delete(r),this.c.$unregisterProvider(r)})}$provideFileSearchResults(t,i,r,n){const s=X0(r),o=this.j.get(t);if(o)return this.l.fileSearch(s,o,a=>{this.c.$handleFileMatch(t,i,a.map(c=>c.resource))},n);throw new Error("unknown provider: "+t)}async doInternalFileSearchWithCustomCallback(t,i,r){return{messages:[]}}$clearCache(t){return this.l.clearCache(t),Promise.resolve(void 0)}$provideTextSearchResults(t,i,r,n){const s=this.e.get(t);if(!s||!s.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${t}`);const o=X0(r);return this.t(o,s).search(c=>this.c.$handleTextMatch(t,i,c),n)}$provideAITextSearchResults(t,i,r,n){const s=this.h.get(t);if(!s||!s.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${t}`);const o=X0(r);return this.v(o,s).search(c=>this.c.$handleTextMatch(t,i,c),n)}$enableExtensionHostSearch(){}t(t,i){return new K6({query:t,provider:i},{readdir:r=>Promise.resolve([]),toCanonicalName:r=>r},"textSearchProvider")}v(t,i){return new K6({query:t,provider:i},{readdir:r=>Promise.resolve([]),toCanonicalName:r=>r},"aiTextSearchProvider")}};J0=__decorate([__param(0,at),__param(1,_h),__param(2,ut)],J0);function X0(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(wT),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>E.revive(t))}}function wT(e){return Gi(e)}var Z0,Y0=class{static{Z0=this}static{this.a={focused:!0,active:!0}}getState(){const t=this.d;return{get focused(){return t.focused},get active(){return t.active}}}constructor(t){this.c=new C,this.onDidChangeWindowState=this.c.event,this.d=Z0.a,this.b=t.getProxy(se.MainThreadWindow),this.b.$getInitialState().then(({isFocused:i,isActive:r})=>{this.onDidChangeWindowProperty("focused",i),this.onDidChangeWindowProperty("active",r)})}$onDidChangeWindowFocus(t){this.onDidChangeWindowProperty("focused",t)}$onDidChangeWindowActive(t){this.onDidChangeWindowProperty("active",t)}onDidChangeWindowProperty(t,i){i!==this.d[t]&&(this.d={...this.d,[t]:i},this.c.fire(this.d))}openUri(t,i){let r;if(typeof t=="string"){r=t;try{t=E.parse(t)}catch{return Promise.reject(`Invalid uri - '${t}'`)}}return Kc(t.scheme)?Promise.reject("Invalid scheme - cannot be empty"):t.scheme===de.command?Promise.reject(`Invalid scheme '${t.scheme}'`):this.b.$openUri(t,r,i)}async asExternalUri(t,i){if(Kc(t.scheme))return Promise.reject("Invalid scheme - cannot be empty");const r=await this.b.$asExternalUri(t,i);return E.from(r)}};Y0=Z0=__decorate([__param(0,at)],Y0);var r9=K("IExtHostWindow"),K0=class extends TD{constructor(t,i){super(i.logLevel,i.logsLocation,i.loggers.map(r=>Gi(r))),this.r=t.getProxy(se.MainThreadLogger)}$setLogLevel(t,i){i?this.setLogLevel(E.revive(i),t):this.setLogLevel(t)}setVisibility(t,i){super.setVisibility(t,i),this.r.$setVisibility(t,i)}s(t,i,r){return new bT(this.r,t,i,r)}};K0=__decorate([__param(0,at),__param(1,Ci)],K0);var bT=class extends Jy{constructor(e,t,i,r){super(r?.logLevel==="always"),this.r=e,this.s=t,this.m=!1,this.n=[],this.setLevel(i),this.r.$createLogger(t,r).then(()=>{this.u(this.n),this.m=!0})}g(e,t){const i=[[e,t]];this.m?this.u(i):this.n.push(...i)}u(e){this.r.$log(this.s,e)}flush(){this.r.$flush(this.s)}},n9=K("IExtHostTerminalShellIntegration"),ew=class extends Te{constructor(t,i){super(),this.h=i,this.b=new Map,this.c=new C,this.onDidChangeTerminalShellIntegration=this.c.event,this.f=new C,this.onDidStartTerminalShellExecution=this.f.event,this.g=new C,this.onDidEndTerminalShellExecution=this.g.event,this.a=t.getProxy(se.MainThreadTerminalShellIntegration),this.B(Ce(()=>{for(const[r,n]of this.b)n.dispose();this.b.clear()}))}$shellIntegrationChange(t){const i=this.h.getTerminalById(t);if(!i)return;const r=i.value;let n=this.b.get(t);n||(n=new yT(i.value,this.f),this.b.set(t,n),n.store.add(i.onWillDispose(()=>this.b.get(t)?.dispose())),n.store.add(n.onDidRequestShellExecution(s=>this.a.$executeCommand(t,s))),n.store.add(n.onDidRequestEndExecution(s=>this.g.fire(s))),n.store.add(n.onDidRequestChangeShellIntegration(s=>this.c.fire(s))),i.shellIntegration=n.value),this.c.fire({terminal:r,shellIntegration:n.value})}$shellExecutionStart(t,i,r,n,s){this.b.has(t)||this.$shellIntegrationChange(t);const o={value:i,confidence:r,isTrusted:n};this.b.get(t)?.startShellExecution(o,E.revive(s))}$shellExecutionEnd(t,i,r,n,s){const o={value:i,confidence:r,isTrusted:n};this.b.get(t)?.endShellExecution(o,s)}$shellExecutionData(t,i){this.b.get(t)?.emitData(i)}$cwdChange(t,i){this.b.get(t)?.setCwd(E.revive(i))}$closeTerminal(t){this.b.get(t)?.dispose(),this.b.delete(t)}};ew=__decorate([__param(0,at),__param(1,Ic)],ew);var yT=class extends Te{get currentExecution(){return this.a}constructor(e,t){super(),this.j=e,this.m=t,this.b=!1,this.store=this.B(new He),this.f=this.B(new C),this.onDidRequestChangeShellIntegration=this.f.event,this.g=this.B(new C),this.onDidRequestShellExecution=this.g.event,this.h=this.B(new C),this.onDidRequestEndExecution=this.h.event;const i=this;this.value={get cwd(){return i.c},executeCommand(r,n){let s=r;n&&(s+=` "${n.map(c=>`${c.replaceAll('"','\\"')}`).join('" "')}"`),i.g.fire(s);const o={value:s,confidence:Jd.High,isTrusted:!0},a=i.startShellExecution(o,i.c,!0).value;return i.b=!0,a}}}startShellExecution(e,t,i){if(this.b&&this.a)this.b=!1;else{this.a&&(this.a.endExecution(void 0),this.h.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value,exitCode:void 0}));const r=this.a=new ET(e,t??this.c);i?queueMicrotask(()=>this.m.fire({terminal:this.j,shellIntegration:this.value,execution:r.value})):this.m.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value})}return this.a}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){this.a&&(this.a.endExecution(e),this.h.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value,exitCode:t}),this.a=void 0)}setCwd(e){let t=!1;E.isUri(this.c)?t=!E.isUri(e)||this.c.toString()!==e.toString():this.c!==e&&(t=!0),t&&(this.c=e,this.f.fire({terminal:this.j,shellIntegration:this.value}))}},ET=class{constructor(e,t){this.c=e,this.cwd=t,this.b=!1;const i=this;this.value={get commandLine(){return i.c},get cwd(){return i.cwd},read(){return i.d()}}}d(){if(!this.a){if(this.b)return rl.EMPTY;this.a=new ST}return this.a.createIterable()}emitData(e){this.a?.emitData(e)}endExecution(e){e&&(this.c=e),this.a?.endExecution(),this.a=void 0,this.b=!0}},ST=class extends Te{constructor(){super(...arguments),this.b=[]}createIterable(){this.a||(this.a=new gn);const e=this.a;return new rl(async i=>{this.b.push(i),await e.wait()})}emitData(e){for(const t of this.b)t.emitOne(e)}endExecution(){this.a?.open(),this.a=void 0}};vt(y0,b0,gt.Delayed),vt(dl,K0,gt.Delayed),vt(Sp,R0,gt.Delayed),vt(ea,o0,gt.Eager),vt(u0,h0,gt.Eager),vt(f0,p0,gt.Eager),vt(ls,qv,gt.Eager),vt(wp,Xv,gt.Eager),vt(Rp,z0,gt.Eager),vt(Y6,G0,gt.Eager),vt(k6,I0,gt.Eager),vt(Pc,P0,gt.Eager),vt(E0,S0,gt.Eager),vt(xa,XD,gt.Eager),vt(x6,$0,gt.Delayed),vt(i9,J0,gt.Eager),vt(Jv,$7,gt.Eager),vt(B6,U0,gt.Eager),vt(Ic,l0,gt.Eager),vt(n9,ew,gt.Eager),vt(i0,r0,gt.Eager),vt(r9,Y0,gt.Eager),vt(cs,Hv,gt.Eager),vt(w0,m6,gt.Eager),vt(bp,s0,gt.Eager),vt(Bu,B0,gt.Eager),vt(H0,j0,gt.Eager);var xT=class extends Te{constructor(e,t=[]){super(),this.a=new RD([e,...t]),this.B(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(e){this.a.setLevel(e)}getLevel(){return this.a.getLevel()}trace(e,...t){this.a.trace(e,...t)}debug(e,...t){this.a.debug(e,...t)}info(e,...t){this.a.info(e,...t)}warn(e,...t){this.a.warn(e,...t)}error(e,...t){this.a.error(e,...t)}flush(){this.a.flush()}},tw=class extends xT{constructor(t,i,r){const n=r.remote.isRemote?"remoteexthost":t?"workerexthost":"exthost",s=r.remote.isRemote?d(2704,null):d(t?2705:2706,null);super(i.createLogger(n,{name:s}))}};tw=__decorate([__param(1,dl),__param(2,Ci)],tw);function s9(e,t,i,r,n,s){if(Array.isArray(e)){let o=0;for(const a of e){const c=s9(a,t,i,r,n,s);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof e=="string")return r?e==="*"?5:e===i?10:0:0;if(e){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=e;if(!r&&!l)return 0;u&&n&&(t=n);let h=0;if(c)if(c===t.scheme)h=10;else if(c==="*")h=5;else return 0;if(o)if(o===i)h=10;else if(o==="*")h=Math.max(h,5);else return 0;if(u)if(u===s)h=10;else if(u==="*"&&s!==void 0)h=Math.max(h,5);else return 0;if(a){let f;if(typeof a=="string"?f=a:f={...a,base:ha(a.base)},f===t.fsPath||Rl(f,t.fsPath))h=10;else return 0}return h}else return 0}}function o9(e){return typeof e=="string"?!1:Array.isArray(e)?e.some(o9):!!e.notebookType}var iw;(function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"})(iw||(iw={}));var ZM=K("editSessionIdentityService"),rw;(function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"})(rw||(rw={}));var kT=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(se.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,i){if(this.a.size===0)throw new Error("No related information providers registered");const r=this.a.get(e);if(!r)throw new Error("related information provider not found");return await r.provideRelatedInformation(t,i)??[]}getRelatedInformation(e,t,i){return this.c.$getAiRelatedInformation(t,i)}registerRelatedInformationProvider(e,t,i){const r=this.b;return this.b++,this.a.set(r,i),this.c.$registerAiRelatedInformationProvider(r,t),new Ye(()=>{this.c.$unregisterAiRelatedInformationProvider(r),this.a.delete(r)})}},ju;(function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"})(ju||(ju={}));function a9(e){for(let t=0,i=e.length;t<i;t+=4){const r=e[t+0],n=e[t+1],s=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=s,e[t+2]=n,e[t+3]=r}}function DT(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return Mb()||a9(t),Qe.wrap(t)}function $T(e){const t=e.buffer;if(Mb()||a9(t),t.byteOffset%4===0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const i=new Uint8Array(t.byteLength);return i.set(t),new Uint32Array(i.buffer,i.byteOffset,i.length/4)}}function nw(e){const t=new Uint32Array(IT(e));let i=0;if(t[i++]=e.id,e.type==="full")t[i++]=ju.Full,t[i++]=e.data.length,t.set(e.data,i),i+=e.data.length;else{t[i++]=ju.Delta,t[i++]=e.deltas.length;for(const r of e.deltas)t[i++]=r.start,t[i++]=r.deleteCount,r.data?(t[i++]=r.data.length,t.set(r.data,i),i+=r.data.length):t[i++]=0}return DT(t)}function IT(e){let t=0;if(t+=2,e.type==="full")t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const i of e.deltas)i.data&&(t+=i.data.length)}return t}function c9(e){const t=$T(e);let i=0;const r=t[i++];if(t[i++]===ju.Full){const a=t[i++],c=t.subarray(i,i+a);return i+=a,{id:r,type:"full",data:c}}const s=t[i++],o=[];for(let a=0;a<s;a++){const c=t[i++],l=t[i++],u=t[i++];let h;u>0&&(h=t.subarray(i,i+u),i+=u),o[a]={start:c,deleteCount:l,data:h}}return{id:r,type:"delta",deltas:o}}var AT=[new Pe("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of DocumentHighlight-instances.",cn(uc.to))),new Pe("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[Q.Uri],new Ie("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(e,t)=>{if(xg(e))return;class i extends Fl{static to(n){const s=new i(n.name,Tr.to(n.kind),n.containerName||"",new kr(t[0],W.to(n.range)));return s.detail=n.detail,s.range=s.location.range,s.selectionRange=W.to(n.selectionRange),s.children=n.children?n.children.map(i.to):[],s}}return e.map(i.to)})),new Pe("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[Q.Uri,new Q("options","Formatting options",e=>!0,e=>e)],new Ie("A promise that resolves to an array of TextEdits.",cn(gi.to))),new Pe("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[Q.Uri,Q.Range,new Q("options","Formatting options",e=>!0,e=>e)],new Ie("A promise that resolves to an array of TextEdits.",cn(gi.to))),new Pe("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[Q.Uri,Q.Position,new Q("ch","Trigger character",e=>typeof e=="string",e=>e),new Q("options","Formatting options",e=>!0,e=>e)],new Ie("A promise that resolves to an array of TextEdits.",cn(gi.to))),new Pe("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of Location or LocationLink instances.",no)),new Pe("vscode.experimental.executeDefinitionProvider_recursive","_executeDefinitionProvider_recursive","Execute all definition providers.",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of Location or LocationLink instances.",no)),new Pe("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of Location or LocationLink instances.",no)),new Pe("vscode.experimental.executeTypeDefinitionProvider_recursive","_executeTypeDefinitionProvider_recursive","Execute all type definition providers.",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of Location or LocationLink instances.",no)),new Pe("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of Location or LocationLink instances.",no)),new Pe("vscode.experimental.executeDeclarationProvider_recursive","_executeDeclarationProvider_recursive","Execute all declaration providers.",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of Location or LocationLink instances.",no)),new Pe("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of Location or LocationLink instances.",no)),new Pe("vscode.experimental.executeImplementationProvider_recursive","_executeImplementationProvider_recursive","Execute all implementation providers.",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of Location or LocationLink instances.",no)),new Pe("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of Location-instances.",cn(Yi.to))),new Pe("vscode.experimental.executeReferenceProvider","_executeReferenceProvider_recursive","Execute all reference providers.",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of Location-instances.",cn(Yi.to))),new Pe("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of Hover-instances.",cn(gu.to))),new Pe("vscode.experimental.executeHoverProvider_recursive","_executeHoverProvider_recursive","Execute all hover providers.",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of Hover-instances.",cn(gu.to))),new Pe("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[Q.Uri,new Q("position","A position in a text document",e=>Array.isArray(e)&&e.every(t=>Ve.isPosition(t)),e=>e.map(lt.from))],new Ie("A promise that resolves to an array of ranges.",e=>e.map(t=>{let i;for(const r of t.reverse())i=new Bl(W.to(r),i);return i}))),new Pe("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[Q.String.with("query","Search string")],new Ie("A promise that resolves to an array of SymbolInformation-instances.",e=>e.map(fu.to))),new Pe("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of CallHierarchyItem-instances",e=>e.map(Qo.to))),new Pe("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[Q.CallHierarchyItem],new Ie("A promise that resolves to an array of CallHierarchyIncomingCall-instances",e=>e.map(dv.to))),new Pe("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[Q.CallHierarchyItem],new Ie("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",e=>e.map(fv.to))),new Pe("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[Q.Uri,Q.Position],new Ie("A promise that resolves to a range and placeholder text.",e=>{if(e)return{range:W.to(e.range),placeholder:e.text}})),new Pe("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[Q.Uri,Q.Position,Q.String.with("newName","The new symbol name")],new Ie("A promise that resolves to a WorkspaceEdit.",e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return Hi.to(e)}})),new Pe("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[Q.Uri,Q.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new Ie("A promise that resolves to an array of DocumentLink-instances.",e=>e.map(Jo.to))),new Pe("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[Q.Uri],new Ie("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new M1(e.tokenTypes,e.tokenModifiers)})),new Pe("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[Q.Uri],new Ie("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=c9(e);if(t.type==="full")return new ic(t.data,void 0)})),new Pe("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[Q.Uri,Q.Range.optional()],new Ie("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new M1(e.tokenTypes,e.tokenModifiers)})),new Pe("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[Q.Uri,Q.Range],new Ie("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=c9(e);if(t.type==="full")return new ic(t.data,void 0)})),new Pe("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[Q.Uri,Q.Position,Q.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),Q.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new Ie("A promise that resolves to a CompletionList-instance.",(e,t,i)=>{if(!e)return new qa([]);const r=e.suggestions.map(n=>wv.to(n,i));return new qa(r,e.incomplete)})),new Pe("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[Q.Uri,Q.Position,Q.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new Ie("A promise that resolves to SignatureHelp.",e=>{if(e)return mu.to(e)})),new Pe("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[Q.Uri,Q.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new Ie("A promise that resolves to an array of CodeLens-instances.",(e,t,i)=>cn(r=>new Hd(W.to(r.range),r.command&&i.fromInternal(r.command)))(e))),new Pe("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[Q.Uri,new Q("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",e=>Be.isRange(e),e=>es.isSelection(e)?on.from(e):W.from(e)),Q.String.with("kind","Code action kind to return code actions for").optional(),Q.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new Ie("A promise that resolves to an array of Command-instances.",(e,t,i)=>cn(r=>{if(r._isSynthetic){if(!r.command)throw new Error("Synthetic code actions must have a command");return i.fromInternal(r.command)}else{const n=new Bd(r.title,r.kind?new Lt(r.kind):void 0);return r.edit&&(n.edit=Hi.to(r.edit)),r.command&&(n.command=i.fromInternal(r.command)),n.isPreferred=r.isPreferred,n}})(e))),new Pe("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[Q.Uri],new Ie("A promise that resolves to an array of ColorInformation objects.",e=>e?e.map(t=>new Gd(W.to(t.range),hc.to(t.color))):[])),new Pe("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new Q("color","The color to show and insert",e=>e instanceof Xa,hc.from),new Q("context","Context object with uri and range",e=>!0,e=>({uri:e.uri,range:W.from(e.range)}))],new Ie("A promise that resolves to an array of ColorPresentation objects.",e=>e?e.map(zf.to):[])),new Pe("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[Q.Uri,Q.Range],new Ie("A promise that resolves to an array of Inlay objects",(e,t,i)=>e.map(bv.to.bind(void 0,i)))),new Pe("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[Q.Uri],new Ie("A promise that resolves to an array of FoldingRange objects",(e,t)=>{if(e)return e.map(qf.to)})),new Pe("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new Ie("A promise that resolves to an array of NotebookContentProvider static info objects.",cn(e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map(t=>Jf.to(t))})))),new Pe("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[Q.Uri,Q.Range,new Q("context","An InlineValueContext",e=>e&&typeof e.frameId=="number"&&e.stoppedLocation instanceof Be,e=>Mf.from(e))],new Ie("A promise that resolves to an array of InlineValue objects",e=>e.map(Ff.to))),new Pe("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new Q("uriOrString","Uri-instance or string (only http/https)",e=>E.isUri(e)||typeof e=="string"&&Dk(e,de.http,de.https),e=>e),new Q("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[hi.from(e),void 0]:[hi.from(e.viewColumn),vu.from(e)])).optional(),Q.String.with("label","").optional()],Ie.Void),new Pe("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[Q.Uri.with("resource","Resource to open"),Q.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new Q("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[hi.from(e),void 0]:[hi.from(e.viewColumn),vu.from(e)])).optional()],Ie.Void),new Pe("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[Q.Uri.with("left","Left-hand side resource of the diff editor"),Q.Uri.with("right","Right-hand side resource of the diff editor"),Q.String.with("title","Human readable title for the diff editor").optional(),new Q("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="object",e=>e&&[hi.from(e.viewColumn),vu.from(e)]).optional()],Ie.Void),new Pe("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[Q.String.with("title","Human readable title for the changes editor"),new Q("resourceList","List of resources to compare",e=>{for(const t of e){if(t.length!==3)return!1;const[i,r,n]=t;if(!E.isUri(i)||!E.isUri(r)&&r!==void 0&&r!==null||!E.isUri(n)&&n!==void 0&&n!==null)return!1}return!0},e=>e)],Ie.Void),new Pe("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[Q.Uri,Q.Position],new Ie("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Xo.to))),new Pe("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[Q.TypeHierarchyItem],new Ie("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Xo.to))),new Pe("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[Q.TypeHierarchyItem],new Ie("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Xo.to))),new Pe("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[Q.TestItem],Ie.Void),new Pe("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[Q.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],Ie.Void),new Pe("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[Q.String.with("name","The context key name"),new Q("value","The context key value",()=>!0,e=>e)],Ie.Void),new Pe("vscode.executeMappedEditsProvider","_executeMappedEditsProvider","Execute Mapped Edits Provider",[Q.Uri,Q.StringArray,new Q("MappedEditsContext","Mapped Edits Context",e=>Qf.is(e),e=>Qf.from(e))],new Ie("A promise that resolves to a workspace edit or null",e=>e?Hi.to(e):null)),new Pe("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new Q("Run arguments","",e=>!0,e=>{if(e)return{initialRange:e.initialRange?W.from(e.initialRange):void 0,initialSelection:es.isSelection(e.initialSelection)?on.from(e.initialSelection):void 0,message:e.message,autoSend:e.autoSend,position:e.position?lt.from(e.position):void 0}})],Ie.Void)],PT=class{static register(e){AT.forEach(e.registerApiCommand,e),this.a(e)}static a(e){e.registerCommand(!1,"_validateWhenClauses",kD)}};function cn(e){return t=>{if(Array.isArray(t))return t.map(e)}}function no(e){if(!Array.isArray(e))return;const t=[];for(const i of e)bI(i)?t.push(pu.to(i)):t.push(Yi.to(i));return t}var sw=class{constructor(t,i){this.a=t.getProxy(se.MainThreadBulkEdits),this.b={getTextDocumentVersion:r=>i.getDocument(r)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(t,i,r){const n=new br(Hi.from(t,this.b));return this.a.$tryApplyWorkspaceEdit(n,void 0,r?.isRefactoring??!1)}};sw=__decorate([__param(0,at)],sw);var l9;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(l9||(l9={}));var Tp;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(Tp||(Tp={}));var u9;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(u9||(u9={}));var KM=K("IChatService"),RT=class{constructor(e,t,i,r,n){this.j=e,this.k=t,this.l=i,this.m=r,this.n=n,this.b=fo.create(!1),this.c=!1}close(){this.c=!0}get timings(){return{firstProgress:this.d,totalElapsed:this.b.elapsed()}}get apiObject(){if(!this.g){let t=function(n){if(i.c){const s=new Error("Response stream has been closed");throw Error.captureStackTrace(s,n),s}};var e=t;const i=this;this.b.reset();const r=(n,s)=>{if(typeof this.d>"u"&&(n.kind==="markdownContent"||n.kind==="markdownVuln")&&(this.d=this.b.elapsed()),s){const o=this.l.$handleProgressChunk(this.k.requestId,n),a={report:c=>{o?.then(l=>{l&&(dr.isMarkdownString(c.value)?this.l.$handleProgressChunk(this.k.requestId,ku.from(c),l):this.l.$handleProgressChunk(this.k.requestId,os.from(c),l))})}};Promise.all([o,s?.(a)]).then(([c,l])=>{c!==void 0&&this.l.$handleProgressChunk(this.k.requestId,Lv.from(l),c)})}else this.l.$handleProgressChunk(this.k.requestId,n)};this.g={markdown(n){t(this.markdown);const s=new kf(n),o=Eu.from(s);return r(o),this},markdownWithVulnerabilities(n,s){t(this.markdown),s&&B(i.j,"chatParticipantAdditions");const o=new ou(n,s),a=tp.from(o);return r(a),this},filetree(n,s){t(this.filetree);const o=new $f(n,s),a=Su.from(o);return r(a),this},anchor(n,s){t(this.anchor);const o=new If(n,s),a=xu.from(o);return r(a),this},button(n){t(this.anchor);const s=new Af(n),o=Du.from(s,i.m,i.n);return r(o),this},progress(n,s){t(this.progress);const o=new e7(n,s),a=s?Tv.from(o):wc.from(o);return r(a,s),this},warning(n){t(this.progress),B(i.j,"chatParticipantAdditions");const s=new lu(n),o=ku.from(s);return r(o),this},reference(n,s){return this.reference2(n,s)},reference2(n,s,o){if(t(this.reference),typeof n=="object"&&"variableName"in n&&B(i.j,"chatParticipantAdditions"),typeof n=="object"&&"variableName"in n&&!n.value){const a=i.k.variables.variables.find(c=>c.name===n.variableName);if(a){let c;if(a.references?.length)c=a.references.map(l=>({kind:"reference",reference:{variableName:n.variableName,value:l.reference}}));else{const l=new rs(n,s,o);c=[os.from(l)]}return c.forEach(l=>r(l)),this}}else{const a=new rs(n,s,o),c=os.from(a);r(c)}return this},codeCitation(n,s,o){t(this.codeCitation),B(i.j,"chatParticipantAdditions");const a=new Pf(n,s,o),c=sp.from(a);r(c)},textEdit(n,s){t(this.textEdit),B(i.j,"chatParticipantAdditions");const o=new uu(n,s),a=np.from(o);return r(a),this},detectedParticipant(n,s){t(this.detectedParticipant),B(i.j,"chatParticipantAdditions");const o=new au(n,s),a=ip.from(o);return r(a),this},confirmation(n,s,o,a){t(this.confirmation),B(i.j,"chatParticipantAdditions");const c=new Df(n,s,o,a),l=rp.from(c);return r(l),this},push(n){if(t(this.push),(n instanceof uu||n instanceof ou||n instanceof au||n instanceof lu||n instanceof Df||n instanceof Pf||n instanceof Rf)&&B(i.j,"chatParticipantAdditions"),n instanceof rs)this.reference2(n.value,n.iconPath,n.options);else{const s=op.from(n,i.m,i.n);r(s)}return this}}}return this.g}},TT=class hg extends Te{static{this.b=0}static{this.j=0}constructor(t,i,r,n){super(),this.t=i,this.u=r,this.w=n,this.c=new Map,this.m=new Map,this.n=this.B(new Ag),this.s=this.B(new Ag),this.g=t.getProxy(se.MainThreadChatAgents2)}transferActiveChat(t){this.g.$transferActiveChatSession(t)}createChatAgent(t,i,r){const n=hg.b++,s=new h9(t,i,this.g,n,r);return this.c.set(n,s),this.g.$registerAgent(n,t.identifier,i,{},void 0),s.apiAgent}createDynamicChatAgent(t,i,r,n){const s=hg.b++,o=new h9(t,i,this.g,s,n);return this.c.set(s,o),this.g.$registerAgent(s,t.identifier,i,{isSticky:!0},r),o.apiAgent}registerChatParticipantDetectionProvider(t){const i=hg.j++;return this.m.set(i,t),this.g.$registerChatParticipantDetectionProvider(i),Ce(()=>{this.m.delete(i),this.g.$unregisterChatParticipantDetectionProvider(i)})}async $detectChatParticipant(t,i,r,n,s){const{request:o,location:a,history:c}=await this.y(i,r),l=this.m.get(t);if(l)return l.provideParticipantDetection(ap.to(o,a),{history:c},{participants:n.participants,location:bc.to(n.location)},s)}async y(t,i){const r=Gi(t),n=await this.z(r.agentId,i);let s;if(r.locationData?.type===Xi.Editor){const o=this.w.getDocument(r.locationData.document);s=new r7(o,on.to(r.locationData.selection),W.to(r.locationData.wholeRange))}else if(r.locationData?.type===Xi.Notebook){const o=this.w.getDocument(r.locationData.sessionInputUri);s=new n7(o)}else r.locationData?.type,Xi.Terminal;return{request:r,location:s,history:n}}async $invokeAgent(t,i,r,n){const s=this.c.get(t);if(!s)throw new Error(`[CHAT](${t}) CANNOT invoke agent because the agent is not registered`);let o;try{const{request:a,location:c,history:l}=await this.y(i,r);let u=this.n.get(a.sessionId);u||(u=new He,this.n.set(a.sessionId,u)),o=new RT(s.extension,a,this.g,this.u.converter,u);const h=s.invoke(ap.to(a,c),{history:l},o.apiObject,n);return await Mk(Promise.resolve(h).then(f=>{if(f?.metadata)try{JSON.stringify(f.metadata)}catch(m){const b=`result.metadata MUST be JSON.stringify-able. Got error: ${m.message}`;return this.t.error(`[${s.extension.identifier.value}] [@${s.id}] ${b}`,s.extension),{errorDetails:{message:b},timings:o?.timings,nextQuestion:f.nextQuestion}}let g;return f?.errorDetails&&(g={...f.errorDetails,responseIsIncomplete:!0}),g?.responseIsRedacted&&B(s.extension,"chatParticipantPrivate"),{errorDetails:g,timings:o?.timings,metadata:f?.metadata,nextQuestion:f?.nextQuestion}}),n)}catch(a){return this.t.error(a,s.extension),a instanceof ns&&a.cause&&(a=a.cause),{errorDetails:{message:Eo(a),responseIsIncomplete:!0}}}finally{o?.close()}}async z(t,i){const r=[];for(const n of i.history){const s=yc.to(n.result),o=t===n.request.agentId?s:{...s,metadata:void 0},a=n.request.variables.variables.filter(h=>!h.isTool).map(cp.to),c=n.request.variables.variables.filter(h=>h.isTool).map(lp.to),l=new t7(n.request.message,n.request.command,a,n.request.agentId);l.toolReferences=c,r.push(l);const u=ci(n.response.map(h=>op.toContent(h,this.u.converter)));r.push(new i7(u,o,n.request.agentId,n.request.command))}return r}$releaseSession(t){this.n.deleteAndDispose(t)}async $provideFollowups(t,i,r,n,s){const o=this.c.get(i);if(!o)return Promise.resolve([]);const a=Gi(t),c=await this.z(o.id,n),l=yc.to(r);return(await o.provideFollowups(l,{history:c},s)).filter(u=>{const h=!u.participant||vr.some(this.c.values(),f=>f.id===u.participant&&dt.equals(f.extension.identifier,o.extension.identifier));return h||this.t.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${u.participant}`),h}).map(u=>yu.from(u,a))}$acceptFeedback(t,i,r,n){const s=this.c.get(t);if(!s)return;const o=yc.to(i);let a;switch(r){case Tp.Down:a=su.Unhelpful;break;case Tp.Up:a=su.Helpful;break}s.acceptFeedback(Object.freeze(n?{result:o,kind:a,reportIssue:n}:{result:o,kind:a}))}$acceptAction(t,i,r){const n=this.c.get(t);if(!n||r.action.kind==="vote")return;const s=Cv.to(i,r,this.u.converter);s&&n.acceptAction(Object.freeze(s))}async $invokeCompletionProvider(t,i,r){const n=this.c.get(t);if(!n)return[];let s=this.s.get(t);return s?s.clear():(s=new He,this.s.set(t,s)),(await n.invokeCompletionProvider(i,r)).map(a=>_v.from(a,this.u.converter,s))}async $provideWelcomeMessage(t,i,r){const n=this.c.get(t);if(n)return await n.provideWelcomeMessage(bc.to(i),r)}async $provideSampleQuestions(t,i,r){const n=this.c.get(t);if(n)return(await n.provideSampleQuestions(bc.to(i),r)).map(s=>yu.from(s,void 0))}},h9=class{constructor(e,t,i,r,n){this.extension=e,this.id=t,this.w=i,this.x=r,this.y=n,this.m=new C,this.n=new C}acceptFeedback(e){this.m.fire(e)}acceptAction(e){this.n.fire(e)}async invokeCompletionProvider(e,t){return this.q?await this.q.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,i){if(!this.b)return[];const r=await this.b.provideFollowups(e,t,i);return r?r.filter(n=>!(n&&"commandId"in n)).filter(n=>!(n&&"message"in n)):[]}async provideWelcomeMessage(e,t){if(!this.s)return[];const i=await this.s.provideWelcomeMessage(e,t);return i?i.map(r=>typeof r=="string"?r:Ge.from(r)):[]}async provideSampleQuestions(e,t){if(!this.s||!this.s.provideSampleQuestions)return[];const i=await this.s.provideSampleQuestions(e,t);return i||[]}get apiAgent(){let e=!1,t=!1;const i=()=>{e||t||(t=!0,queueMicrotask(()=>{this.w.$updateAgent(this.x,{icon:this.c?this.c instanceof E?this.c:"light"in this.c?this.c.light:void 0:void 0,iconDark:this.c&&"dark"in this.c?this.c.dark:void 0,themeIcon:this.c instanceof Bi?this.c:void 0,hasFollowups:this.b!==void 0,isSecondary:this.l,helpTextPrefix:!this.g||typeof this.g=="string"?this.g:Ge.from(this.g),helpTextVariablesPrefix:!this.j||typeof this.j=="string"?this.j:Ge.from(this.j),helpTextPostfix:!this.k||typeof this.k=="string"?this.k:Ge.from(this.k),supportIssueReporting:this.o,requester:this.t,supportsSlowVariables:this.u}),t=!1}))},r=this;return{get id(){return r.id},get iconPath(){return r.c},set iconPath(n){r.c=n,i()},get requestHandler(){return r.y},set requestHandler(n){vy(typeof n=="function","Invalid request handler"),r.y=n},get followupProvider(){return r.b},set followupProvider(n){r.b=n,i()},get isDefault(){return B(r.extension,"defaultChatParticipant"),r.d},set isDefault(n){B(r.extension,"defaultChatParticipant"),r.d=n,i()},get helpTextPrefix(){return B(r.extension,"defaultChatParticipant"),r.g},set helpTextPrefix(n){B(r.extension,"defaultChatParticipant"),r.g=n,i()},get helpTextVariablesPrefix(){return B(r.extension,"defaultChatParticipant"),r.j},set helpTextVariablesPrefix(n){B(r.extension,"defaultChatParticipant"),r.j=n,i()},get helpTextPostfix(){return B(r.extension,"defaultChatParticipant"),r.k},set helpTextPostfix(n){B(r.extension,"defaultChatParticipant"),r.k=n,i()},get isSecondary(){return B(r.extension,"defaultChatParticipant"),r.l},set isSecondary(n){B(r.extension,"defaultChatParticipant"),r.l=n,i()},get supportIssueReporting(){return B(r.extension,"chatParticipantPrivate"),r.o},set supportIssueReporting(n){B(r.extension,"chatParticipantPrivate"),r.o=n,i()},get onDidReceiveFeedback(){return r.m.event},set participantVariableProvider(n){if(B(r.extension,"chatParticipantAdditions"),r.q=n,n){if(!n.triggerCharacters.length)throw new Error("triggerCharacters are required");r.w.$registerAgentCompletionsProvider(r.x,r.id,n.triggerCharacters)}else r.w.$unregisterAgentCompletionsProvider(r.x,r.id)},get participantVariableProvider(){return B(r.extension,"chatParticipantAdditions"),r.q},set welcomeMessageProvider(n){B(r.extension,"defaultChatParticipant"),r.s=n,i()},get welcomeMessageProvider(){return B(r.extension,"defaultChatParticipant"),r.s},onDidPerformAction:pi(this.extension,"chatParticipantAdditions")?this.n.event:void 0,set requester(n){r.t=n,i()},get requester(){return r.t},set supportsSlowReferences(n){B(r.extension,"chatParticipantPrivate"),r.u=n,i()},get supportsSlowReferences(){return B(r.extension,"chatParticipantPrivate"),r.u},dispose(){e=!0,r.b=void 0,r.m.dispose(),r.w.$unregisterAgent(r.x)}}}invoke(e,t,i,r){return this.y(e,t,i,r)}},LT=class eS{static{this.a=0}constructor(t){this.b=new Map,this.c=t.getProxy(se.MainThreadChatVariables)}async $resolveVariable(t,i,r,n){const s=this.b.get(t);if(s)try{if(s.resolver.resolve2){B(s.extension,"chatParticipantAdditions");const o=new _T(i,this.c),a=await s.resolver.resolve2(s.data.name,{prompt:r},o.apiObject,n);if(a&&a[0])return a[0].value}else{const o=await s.resolver.resolve(s.data.name,{prompt:r},n);if(o&&o[0])return o[0].value}}catch(o){yg(o)}}registerVariableResolver(t,i,r,n,s,o,a,c,l){const u=eS.a++,h=l?Ai.fromId(l):void 0;return this.b.set(u,{extension:t,data:{id:i,name:r,description:n,modelDescription:s,icon:h},resolver:a}),this.c.$registerVariable(u,{id:i,name:r,description:n,modelDescription:s,isSlow:o,fullName:c,icon:h}),Ce(()=>{this.b.delete(u),this.c.$unregisterVariable(u)})}},_T=class{constructor(e,t){this.c=e,this.d=t,this.a=!1}close(){this.a=!0}get apiObject(){if(!this.b){let t=function(n){if(i.a){const s=new Error("Response stream has been closed");throw Error.captureStackTrace(s,n),s}};var e=t;const i=this,r=n=>{this.d.$handleProgressChunk(this.c,n)};this.b={progress(n){t(this.progress);const s=new cu(n),o=wc.from(s);return r(o),this},reference(n){t(this.reference);const s=new rs(n),o=os.from(s);return r(o),this},push(n){return t(this.push),n instanceof rs?r(os.from(n)):n instanceof cu&&r(wc.from(n)),this}}}return this.b}},CT=class{constructor(e){const t=e.getProxy(se.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(i){return t.$writeText(i)}})}},d9="vscode-cdn.net",NT=`vscode-resource.${d9}`,ow=`'self' https://*.${d9}`;function Wu(e,t){return e.scheme===de.http||e.scheme===de.https?e:(t&&t.authority&&t.isRemote&&e.scheme===de.file&&(e=E.from({scheme:de.vscodeRemote,authority:t.authority,path:e.path})),E.from({scheme:de.https,authority:`${e.scheme}+${OT(e.authority)}.${NT}`,path:e.path,fragment:e.fragment,query:e.query}))}function OT(e){return e.replace(/./g,t=>{const i=t.charCodeAt(0);return i>=L.a&&i<=L.z||i>=L.A&&i<=L.Z||i>=L.Digit0&&i<=L.Digit9?t:"-"+i.toString(16).padStart(4,"0")})}var FT=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i,this.a=0,this.b=new He,this.c=new Map,this.b.add(t.onDidChangeVisibleTextEditors(()=>{const r=t.getVisibleTextEditors();for(const n of this.c.values())r.indexOf(n.editor)<0&&n.inset.dispose()}))}dispose(){this.c.forEach(e=>e.inset.dispose()),this.b.dispose()}createWebviewEditorInset(e,t,i,r,n){let s;for(const f of this.e.getVisibleTextEditors(!0))if(f.value===e){s=f;break}if(!s)throw new Error("not a visible editor");const o=this,a=this.a++,c=new C,l=new C,u=new class{constructor(){this.a="",this.b=Object.create(null)}asWebviewUri(f){return Wu(f,o.f)}get cspSource(){return ow}set options(f){this.b=f,o.d.$setOptions(a,f)}get options(){return this.b}set html(f){this.a=f,o.d.$setHtml(a,f)}get html(){return this.a}get onDidReceiveMessage(){return c.event}postMessage(f){return o.d.$postMessage(a,f)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=i,this.webview=u,this.onDidDispose=l.event}dispose(){o.c.has(a)&&(o.c.delete(a),o.d.$disposeEditorInset(a),l.fire(),l.dispose(),c.dispose())}};return this.d.$createEditorInset(a,s.id,s.value.document.uri,t+1,i,r||{},n.identifier,n.extensionLocation),this.c.set(a,{editor:e,inset:h,onDidReceiveMessage:c}),h}$onDidDispose(e){const t=this.c.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){this.c.get(e)?.onDidReceiveMessage.fire(t)}};function f9(e){return(t,i,r)=>{let n=null,s=null;if(typeof r.value=="function"?(n="value",s=r.value):typeof r.get=="function"&&(n="get",s=r.get),!s)throw new Error("not supported");r[n]=e(s,i)}}function aw(e,t,i){return f9((r,n)=>{const s=`$debounce$${n}`,o=`$debounce$result$${n}`;return function(...a){this[o]||(this[o]=i?i():void 0),clearTimeout(this[s]),t&&(this[o]=t(this[o],...a),a=[this[o]]),this[s]=setTimeout(()=>{r.apply(this,a),this[o]=i?i():void 0},e)}})}function MT(e,t,i){return f9((r,n)=>{const s=`$throttle$timer$${n}`,o=`$throttle$result$${n}`,a=`$throttle$lastRun$${n}`,c=`$throttle$pending$${n}`;return function(...l){if(this[o]||(this[o]=i?i():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...l)),this[c])return;const u=this[a]+e;u<=Date.now()?(this[a]=Date.now(),r.apply(this,[this[o]]),this[o]=i?i():void 0):(this[c]=!0,this[s]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),r.apply(this,[this[o]]),this[o]=i?i():void 0},u-Date.now()))}})}function UT(e,t,i){const r=e.getProxy(se.MainThreadComments);class n{static{this.a=0}constructor(){this.b=new Map,this.c=new Xn,t.registerArgumentProcessor({processArgument:m=>{if(m&&m.$mid===Dt.CommentController){const b=this.b.get(m.handle);return b?b.value:m}else if(m&&m.$mid===Dt.CommentThread){const b=m,k=this.b.get(b.commentControlHandle);if(!k)return b;const I=k.getCommentThread(b.commentThreadHandle);return I?I.value:b}else if(m&&(m.$mid===Dt.CommentThreadReply||m.$mid===Dt.CommentThreadInstance)){const b=this.b.get(m.thread.commentControlHandle);if(!b)return m;const k=b.getCommentThread(m.thread.commentThreadHandle);return k?m.$mid===Dt.CommentThreadInstance?k.value:{thread:k.value,text:m.text}:m}else if(m&&m.$mid===Dt.CommentNode){const b=this.b.get(m.thread.commentControlHandle);if(!b)return m;const k=b.getCommentThread(m.thread.commentThreadHandle);if(!k)return m;const I=m.commentUniqueId,R=k.getCommentByUniqueId(I);return R||m}else if(m&&m.$mid===Dt.CommentThreadNode){const b=this.b.get(m.thread.commentControlHandle);if(!b)return m;const k=b.getCommentThread(m.thread.commentThreadHandle);if(!k)return m;const I=m.text,R=m.commentUniqueId,N=k.getCommentByUniqueId(R);return N?(typeof N.body=="string"?N.body=I:N.body=new dr(I),N):m}return m}})}createCommentController(m,b,k){const I=n.a++,R=new o(m,I,b,k);this.b.set(R.handle,R);const N=this.c.get(m.identifier)||[];return N.push(R),this.c.set(m.identifier,N),R.value}async $createCommentThreadTemplate(m,b,k,I){const R=this.b.get(m);R&&R.$createCommentThreadTemplate(b,k,I)}async $setActiveComment(m,b){const k=this.b.get(m);k&&k.$setActiveComment(b??void 0)}async $updateCommentThreadTemplate(m,b,k){const I=this.b.get(m);I&&I.$updateCommentThreadTemplate(b,k)}$deleteCommentThread(m,b){this.b.get(m)?.$deleteCommentThread(b)}async $provideCommentingRanges(m,b,k){const I=this.b.get(m);if(!I||!I.commentingRangeProvider)return Promise.resolve(void 0);const R=await i.ensureDocumentData(E.revive(b));return _i(async()=>{const N=await I.commentingRangeProvider.provideCommentingRanges(R.document,k);let z;return Array.isArray(N)?z={ranges:N,fileComments:!1}:N?z={ranges:N.ranges||[],fileComments:N.enableFileComments||!1}:z=N??void 0,z}).then(N=>{let z;return N&&(z={ranges:N.ranges.map(q=>W.from(q)),fileComments:N.fileComments}),z})}$toggleReaction(m,b,k,I,R){const N=this.b.get(m);return!N||!N.reactionHandler?Promise.resolve(void 0):_i(()=>{const z=N.getCommentThread(b);if(z){const q=z.getCommentByUniqueId(I.uniqueIdInThread);if(N!==void 0&&q&&N.reactionHandler)return N.reactionHandler(q,l(R))}return Promise.resolve(void 0)})}}class s{static{this.a=0}set threadId(m){this.n=m}get threadId(){return this.n}get id(){return this.n}get resource(){return this.o}get uri(){return this.o}set range(m){(m===void 0!=(this.p===void 0)||!m||!this.p||!m.isEqual(this.p))&&(this.p=m,this.b.range=m,this.c.fire())}get range(){return this.p}set canReply(m){this.d!==m&&(this.d=m,this.b.canReply=m,this.c.fire())}get canReply(){return this.d}get label(){return this.e}set label(m){this.e=m,this.b.label=m,this.c.fire()}get contextValue(){return this.f}set contextValue(m){this.f=m,this.b.contextValue=m,this.c.fire()}get comments(){return this.q}set comments(m){this.q=m,this.b.comments=m,this.c.fire()}get collapsibleState(){return this.g}set collapsibleState(m){this.g=m,this.b.collapsibleState=m,this.c.fire()}get state(){return this.h}set state(m){this.h=m,typeof m=="object"?(B(this.extensionDescription,"commentThreadApplicability"),this.b.state=m.resolved,this.b.applicability=m.applicability):this.b.state=m,this.c.fire()}get isDisposed(){return this.j}constructor(m,b,k,I,R,N,z,q,ee){this.m=b,this.n=k,this.o=I,this.p=R,this.q=N,this.extensionDescription=z,this.r=q,this.handle=s.a++,this.commentHandle=0,this.b=Object.create(null),this.c=new C,this.onDidUpdateCommentThread=this.c.event,this.d=!0,this.k=new Map,this.l=new ho,this.l.value=new He,this.n===void 0&&(this.n=`${m}.${this.handle}`),r.$createCommentThread(b,this.handle,this.n,this.o,W.from(this.p),this.q.map(re=>a(this,re,this.k,this.extensionDescription)),z.identifier,this.r,ee),this.i=[],this.j=!1,this.i.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.i.push({dispose:()=>{r.$deleteCommentThread(b,this.handle)}});const pe=this;this.value={get uri(){return pe.uri},get range(){return pe.range},set range(re){pe.range=re},get comments(){return pe.comments},set comments(re){pe.comments=re},get collapsibleState(){return pe.collapsibleState},set collapsibleState(re){pe.collapsibleState=re},get canReply(){return pe.canReply},set canReply(re){pe.canReply=re},get contextValue(){return pe.contextValue},set contextValue(re){pe.contextValue=re},get label(){return pe.label},set label(re){pe.label=re},get state(){return pe.state},set state(re){pe.state=re},reveal:(re,fe)=>pe.reveal(re,fe),hide:()=>pe.hide(),dispose:()=>{pe.dispose()}}}s(){this.r&&(this.r=!1,this.b.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this.j)return;this.s(),this.l.value||(this.l.value=new He);const m=k=>Object.prototype.hasOwnProperty.call(this.b,k),b={};m("range")&&(b.range=W.from(this.p)),m("label")&&(b.label=this.label),m("contextValue")&&(b.contextValue=this.contextValue??null),m("comments")&&(b.comments=this.q.map(k=>a(this,k,this.k,this.extensionDescription))),m("collapsibleState")&&(b.collapseState=u(this.g)),m("canReply")&&(b.canReply=this.canReply),m("state")&&(b.state=h(this.h)),m("applicability")&&(b.applicability=f(this.h)),m("isTemplate")&&(b.isTemplate=this.r),this.b={},r.$updateCommentThread(this.m,this.handle,this.n,this.o,b)}getCommentByUniqueId(m){for(const b of this.k){const k=b[0],I=b[1];if(m===I)return k}}async reveal(m,b){B(this.extensionDescription,"commentReveal");let k;m&&m.body!==void 0?k=m:b=b??m;let I=k?this.k.get(k):void 0;I??=this.k.get(this.q[0]);let R=!0,N=!1;return b?.focus===Kl.Reply?(N=!0,R=!1):b?.focus===Kl.Comment&&(R=!1),r.$revealCommentThread(this.m,this.handle,I,{preserveFocus:R,focusReply:N})}async hide(){return r.$hideCommentThread(this.m,this.handle)}dispose(){this.j=!0,this.l.dispose(),this.i.forEach(m=>m.dispose())}}__decorate([aw(100)],s.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this.j}get label(){return this.k}get handle(){return this.i}get commentingRangeProvider(){return this.b}set commentingRangeProvider(m){this.b=m,m?.resourceHints&&B(this.h,"commentingRangeHint"),r.$updateCommentingRanges(this.handle,m?.resourceHints)}get reactionHandler(){return this.c}set reactionHandler(m){this.c=m,r.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!m})}get options(){return this.d}set options(m){this.d=m,r.$updateCommentControllerFeatures(this.handle,{options:this.d})}get activeComment(){return B(this.h,"activeComment"),this.e}get activeCommentThread(){return B(this.h,"activeComment"),this.f?.value}constructor(m,b,k,I){this.h=m,this.i=b,this.j=k,this.k=I,this.a=new Map,r.$registerCommentController(this.handle,k,I,this.h.identifier.value);const R=this;this.value=Object.freeze({id:R.id,label:R.label,get options(){return R.options},set options(N){R.options=N},get commentingRangeProvider(){return R.commentingRangeProvider},set commentingRangeProvider(N){R.commentingRangeProvider=N},get reactionHandler(){return R.reactionHandler},set reactionHandler(N){R.reactionHandler=N},get activeCommentThread(){return R.activeCommentThread},createCommentThread(N,z,q){return R.createCommentThread(N,z,q).value},dispose:()=>{R.dispose()}}),this.g=[],this.g.push({dispose:()=>{r.$unregisterCommentController(this.handle)}})}createCommentThread(m,b,k){b===void 0&&B(this.h,"fileComments");const I=new s(this.id,this.handle,void 0,m,b,k,this.h,!1);return this.a.set(I.handle,I),I}$setActiveComment(m){if(!m){this.e=void 0,this.f=void 0;return}const b=this.a.get(m.commentThreadHandle);b&&(this.e=m.uniqueIdInThread?b.getCommentByUniqueId(m.uniqueIdInThread):void 0,this.f=b)}$createCommentThreadTemplate(m,b,k){const I=new s(this.id,this.handle,void 0,E.revive(m),W.to(b),[],this.h,!0,k);return I.collapsibleState=Ra.Expanded,this.a.set(I.handle,I),I}$updateCommentThreadTemplate(m,b){const k=this.a.get(m);k&&(k.range=W.to(b))}$deleteCommentThread(m){this.a.get(m)?.dispose(),this.a.delete(m)}getCommentThread(m){return this.a.get(m)}dispose(){this.a.forEach(m=>{m.dispose()}),this.g.forEach(m=>m.dispose())}}function a(g,m,b,k){let I=b.get(m);return I||(I=++g.commentHandle,b.set(m,I)),m.state!==void 0&&B(k,"commentsDraftState"),m.reactions?.some(R=>R.reactors!==void 0)&&B(k,"commentReactor"),{mode:m.mode,contextValue:m.contextValue,uniqueIdInThread:I,body:typeof m.body=="string"?m.body:Ge.from(m.body),userName:m.author.name,userIconPath:m.author.iconPath,label:m.label,commentReactions:m.reactions?m.reactions.map(R=>c(R)):void 0,state:m.state,timestamp:m.timestamp?.toJSON()}}function c(g){return{label:g.label,iconPath:g.iconPath?Nf(g.iconPath):void 0,count:g.count,hasReacted:g.authorHasReacted,reactors:g.reactors&&g.reactors.length>0&&typeof g.reactors[0]!="string"?g.reactors.map(m=>m.name):g.reactors}}function l(g){return{label:g.label||"",count:g.count||0,iconPath:g.iconPath?E.revive(g.iconPath):"",authorHasReacted:g.hasReacted||!1,reactors:g.reactors?.map(m=>({name:m}))}}function u(g){if(g!==void 0)switch(g){case Xl.Expanded:return Ra.Expanded;case Xl.Collapsed:return Ra.Collapsed}return Ra.Collapsed}function h(g){let m;if(typeof g=="object"?m=g.resolved:m=g,m!==void 0)switch(m){case Zl.Unresolved:return vl.Unresolved;case Zl.Resolved:return vl.Resolved}return vl.Unresolved}function f(g){let m;if(typeof g=="object"&&(m=g.applicability),m!==void 0)switch(m){case Yl.Current:return wl.Current;case Yl.Outdated:return wl.Outdated}return wl.Current}return new n}var Lp={},Ke={exports:Lp};(function(e,t){if(typeof Lp=="object"&&typeof Ke=="object")Ke.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var i=t();for(var r in i)(typeof Lp=="object"?Lp:e)[r]=i[r]}})(typeof self<"u"?self:void 0,function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(r,n,s){i.o(r,n)||Object.defineProperty(r,n,{enumerable:!0,get:s})},i.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,n){if(1&n&&(r=i(r)),8&n||4&n&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&n&&typeof r!="string")for(var o in r)i.d(s,o,function(a){return r[a]}.bind(null,o));return s},i.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(n,"a",n),n},i.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},i.p="",i(i.s=0)}([function(e,t,i){(function(r){var n;t=e.exports=qe,n=typeof r=="object"&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?function(){var P=Array.prototype.slice.call(arguments,0);P.unshift("SEMVER"),console.log.apply(console,P)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var s=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.src=[],l=0,u=l++;c[u]="0|[1-9]\\d*";var h=l++;c[h]="[0-9]+";var f=l++;c[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var g=l++;c[g]="("+c[u]+")\\.("+c[u]+")\\.("+c[u]+")";var m=l++;c[m]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var b=l++;c[b]="(?:"+c[u]+"|"+c[f]+")";var k=l++;c[k]="(?:"+c[h]+"|"+c[f]+")";var I=l++;c[I]="(?:-("+c[b]+"(?:\\."+c[b]+")*))";var R=l++;c[R]="(?:-?("+c[k]+"(?:\\."+c[k]+")*))";var N=l++;c[N]="[0-9A-Za-z-]+";var z=l++;c[z]="(?:\\+("+c[N]+"(?:\\."+c[N]+")*))";var q=l++,ee="v?"+c[g]+c[I]+"?"+c[z]+"?";c[q]="^"+ee+"$";var pe="[v=\\s]*"+c[m]+c[R]+"?"+c[z]+"?",re=l++;c[re]="^"+pe+"$";var fe=l++;c[fe]="((?:<|>)?=?)";var We=l++;c[We]=c[h]+"|x|X|\\*";var Ae=l++;c[Ae]=c[u]+"|x|X|\\*";var bt=l++;c[bt]="[v=\\s]*("+c[Ae]+")(?:\\.("+c[Ae]+")(?:\\.("+c[Ae]+")(?:"+c[I]+")?"+c[z]+"?)?)?";var Z=l++;c[Z]="[v=\\s]*("+c[We]+")(?:\\.("+c[We]+")(?:\\.("+c[We]+")(?:"+c[R]+")?"+c[z]+"?)?)?";var J=l++;c[J]="^"+c[fe]+"\\s*"+c[bt]+"$";var ce=l++;c[ce]="^"+c[fe]+"\\s*"+c[Z]+"$";var ne=l++;c[ne]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var te=l++;c[te]="(?:~>?)";var $e=l++;c[$e]="(\\s*)"+c[te]+"\\s+",a[$e]=new RegExp(c[$e],"g");var ze=l++;c[ze]="^"+c[te]+c[bt]+"$";var Le=l++;c[Le]="^"+c[te]+c[Z]+"$";var yt=l++;c[yt]="(?:\\^)";var Ct=l++;c[Ct]="(\\s*)"+c[yt]+"\\s+",a[Ct]=new RegExp(c[Ct],"g");var Yt=l++;c[Yt]="^"+c[yt]+c[bt]+"$";var Ut=l++;c[Ut]="^"+c[yt]+c[Z]+"$";var Ti=l++;c[Ti]="^"+c[fe]+"\\s*("+pe+")$|^$";var ft=l++;c[ft]="^"+c[fe]+"\\s*("+ee+")$|^$";var ji=l++;c[ji]="(\\s*)"+c[fe]+"\\s*("+pe+"|"+c[bt]+")",a[ji]=new RegExp(c[ji],"g");var Nr=l++;c[Nr]="^\\s*("+c[bt]+")\\s+-\\s+("+c[bt]+")\\s*$";var Tn=l++;c[Tn]="^\\s*("+c[Z]+")\\s+-\\s+("+c[Z]+")\\s*$";var pr=l++;c[pr]="(<|>)?=?\\s*\\*";for(var Fe=0;Fe<35;Fe++)n(Fe,c[Fe]),a[Fe]||(a[Fe]=new RegExp(c[Fe]));function Or(P,O){if(P instanceof qe)return P;if(typeof P!="string"||P.length>s||!(O?a[re]:a[q]).test(P))return null;try{return new qe(P,O)}catch{return null}}function qe(P,O){if(P instanceof qe){if(P.loose===O)return P;P=P.version}else if(typeof P!="string")throw new TypeError("Invalid Version: "+P);if(P.length>s)throw new TypeError("version is longer than "+s+" characters");if(!(this instanceof qe))return new qe(P,O);n("SemVer",P,O),this.loose=O;var U=P.trim().match(O?a[re]:a[q]);if(!U)throw new TypeError("Invalid Version: "+P);if(this.raw=P,this.major=+U[1],this.minor=+U[2],this.patch=+U[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");U[4]?this.prerelease=U[4].split(".").map(function(me){if(/^[0-9]+$/.test(me)){var Re=+me;if(Re>=0&&Re<o)return Re}return me}):this.prerelease=[],this.build=U[5]?U[5].split("."):[],this.format()}t.parse=Or,t.valid=function(P,O){var U=Or(P,O);return U?U.version:null},t.clean=function(P,O){var U=Or(P.trim().replace(/^[=v]+/,""),O);return U?U.version:null},t.SemVer=qe,qe.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},qe.prototype.toString=function(){return this.version},qe.prototype.compare=function(P){return n("SemVer.compare",this.version,this.loose,P),P instanceof qe||(P=new qe(P,this.loose)),this.compareMain(P)||this.comparePre(P)},qe.prototype.compareMain=function(P){return P instanceof qe||(P=new qe(P,this.loose)),Fr(this.major,P.major)||Fr(this.minor,P.minor)||Fr(this.patch,P.patch)},qe.prototype.comparePre=function(P){if(P instanceof qe||(P=new qe(P,this.loose)),this.prerelease.length&&!P.prerelease.length)return-1;if(!this.prerelease.length&&P.prerelease.length)return 1;if(!this.prerelease.length&&!P.prerelease.length)return 0;var O=0;do{var U=this.prerelease[O],me=P.prerelease[O];if(n("prerelease compare",O,U,me),U===void 0&&me===void 0)return 0;if(me===void 0)return 1;if(U===void 0)return-1;if(U!==me)return Fr(U,me)}while(++O)},qe.prototype.inc=function(P,O){switch(P){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",O);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",O);break;case"prepatch":this.prerelease.length=0,this.inc("patch",O),this.inc("pre",O);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",O),this.inc("pre",O);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var U=this.prerelease.length;--U>=0;)typeof this.prerelease[U]=="number"&&(this.prerelease[U]++,U=-2);U===-1&&this.prerelease.push(0)}O&&(this.prerelease[0]===O?isNaN(this.prerelease[1])&&(this.prerelease=[O,0]):this.prerelease=[O,0]);break;default:throw new Error("invalid increment argument: "+P)}return this.format(),this.raw=this.version,this},t.inc=function(P,O,U,me){typeof U=="string"&&(me=U,U=void 0);try{return new qe(P,U).inc(O,me).version}catch{return null}},t.diff=function(P,O){if(ys(P,O))return null;var U=Or(P),me=Or(O);if(U.prerelease.length||me.prerelease.length){for(var Re in U)if((Re==="major"||Re==="minor"||Re==="patch")&&U[Re]!==me[Re])return"pre"+Re;return"prerelease"}for(var Re in U)if((Re==="major"||Re==="minor"||Re==="patch")&&U[Re]!==me[Re])return Re},t.compareIdentifiers=Fr;var dn=/^[0-9]+$/;function Fr(P,O){var U=dn.test(P),me=dn.test(O);return U&&me&&(P=+P,O=+O),U&&!me?-1:me&&!U?1:P<O?-1:P>O?1:0}function gr(P,O,U){return new qe(P,U).compare(new qe(O,U))}function ws(P,O,U){return gr(P,O,U)>0}function bs(P,O,U){return gr(P,O,U)<0}function ys(P,O,U){return gr(P,O,U)===0}function Ln(P,O,U){return gr(P,O,U)!==0}function Es(P,O,U){return gr(P,O,U)>=0}function Ss(P,O,U){return gr(P,O,U)<=0}function Mr(P,O,U,me){var Re;switch(O){case"===":typeof P=="object"&&(P=P.version),typeof U=="object"&&(U=U.version),Re=P===U;break;case"!==":typeof P=="object"&&(P=P.version),typeof U=="object"&&(U=U.version),Re=P!==U;break;case"":case"=":case"==":Re=ys(P,U,me);break;case"!=":Re=Ln(P,U,me);break;case">":Re=ws(P,U,me);break;case">=":Re=Es(P,U,me);break;case"<":Re=bs(P,U,me);break;case"<=":Re=Ss(P,U,me);break;default:throw new TypeError("Invalid operator: "+O)}return Re}function Di(P,O){if(P instanceof Di){if(P.loose===O)return P;P=P.value}if(!(this instanceof Di))return new Di(P,O);n("comparator",P,O),this.loose=O,this.parse(P),this.semver===Ur?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(P,O){return Fr(O,P)},t.major=function(P,O){return new qe(P,O).major},t.minor=function(P,O){return new qe(P,O).minor},t.patch=function(P,O){return new qe(P,O).patch},t.compare=gr,t.compareLoose=function(P,O){return gr(P,O,!0)},t.rcompare=function(P,O,U){return gr(O,P,U)},t.sort=function(P,O){return P.sort(function(U,me){return t.compare(U,me,O)})},t.rsort=function(P,O){return P.sort(function(U,me){return t.rcompare(U,me,O)})},t.gt=ws,t.lt=bs,t.eq=ys,t.neq=Ln,t.gte=Es,t.lte=Ss,t.cmp=Mr,t.Comparator=Di;var Ur={};function Nt(P,O){if(P instanceof Nt)return P.loose===O?P:new Nt(P.raw,O);if(P instanceof Di)return new Nt(P.value,O);if(!(this instanceof Nt))return new Nt(P,O);if(this.loose=O,this.raw=P,this.set=P.split(/\s*\|\|\s*/).map(function(U){return this.parseRange(U.trim())},this).filter(function(U){return U.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+P);this.format()}function Ot(P){return!P||P.toLowerCase()==="x"||P==="*"}function Mc(P,O,U,me,Re,pt,ye,$i,Bt,Kt,zi,D,xt){return((O=Ot(U)?"":Ot(me)?">="+U+".0.0":Ot(Re)?">="+U+"."+me+".0":">="+O)+" "+($i=Ot(Bt)?"":Ot(Kt)?"<"+(+Bt+1)+".0.0":Ot(zi)?"<"+Bt+"."+(+Kt+1)+".0":D?"<="+Bt+"."+Kt+"."+zi+"-"+D:"<="+$i)).trim()}function xs(P,O){for(var U=0;U<P.length;U++)if(!P[U].test(O))return!1;if(O.prerelease.length){for(U=0;U<P.length;U++)if(n(P[U].semver),P[U].semver!==Ur&&P[U].semver.prerelease.length>0){var me=P[U].semver;if(me.major===O.major&&me.minor===O.minor&&me.patch===O.patch)return!0}return!1}return!0}function Wi(P,O,U){try{O=new Nt(O,U)}catch{return!1}return O.test(P)}function Li(P,O,U,me){var Re,pt,ye,$i,Bt;switch(P=new qe(P,me),O=new Nt(O,me),U){case">":Re=ws,pt=Ss,ye=bs,$i=">",Bt=">=";break;case"<":Re=bs,pt=Es,ye=ws,$i="<",Bt="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Wi(P,O,me))return!1;for(var Kt=0;Kt<O.set.length;++Kt){var zi=O.set[Kt],D=null,xt=null;if(zi.forEach(function(wi){wi.semver===Ur&&(wi=new Di(">=0.0.0")),D=D||wi,xt=xt||wi,Re(wi.semver,D.semver,me)?D=wi:ye(wi.semver,xt.semver,me)&&(xt=wi)}),D.operator===$i||D.operator===Bt||(!xt.operator||xt.operator===$i)&&pt(P,xt.semver)||xt.operator===Bt&&ye(P,xt.semver))return!1}return!0}Di.prototype.parse=function(P){var O=this.loose?a[Ti]:a[ft],U=P.match(O);if(!U)throw new TypeError("Invalid comparator: "+P);this.operator=U[1],this.operator==="="&&(this.operator=""),U[2]?this.semver=new qe(U[2],this.loose):this.semver=Ur},Di.prototype.toString=function(){return this.value},Di.prototype.test=function(P){return n("Comparator.test",P,this.loose),this.semver===Ur||(typeof P=="string"&&(P=new qe(P,this.loose)),Mr(P,this.operator,this.semver,this.loose))},Di.prototype.intersects=function(P,O){if(!(P instanceof Di))throw new TypeError("a Comparator is required");var U;if(this.operator==="")return U=new Nt(P.value,O),Wi(this.value,U,O);if(P.operator==="")return U=new Nt(this.value,O),Wi(P.semver,U,O);var me=!(this.operator!==">="&&this.operator!==">"||P.operator!==">="&&P.operator!==">"),Re=!(this.operator!=="<="&&this.operator!=="<"||P.operator!=="<="&&P.operator!=="<"),pt=this.semver.version===P.semver.version,ye=!(this.operator!==">="&&this.operator!=="<="||P.operator!==">="&&P.operator!=="<="),$i=Mr(this.semver,"<",P.semver,O)&&(this.operator===">="||this.operator===">")&&(P.operator==="<="||P.operator==="<"),Bt=Mr(this.semver,">",P.semver,O)&&(this.operator==="<="||this.operator==="<")&&(P.operator===">="||P.operator===">");return me||Re||pt&&ye||$i||Bt},t.Range=Nt,Nt.prototype.format=function(){return this.range=this.set.map(function(P){return P.join(" ").trim()}).join("||").trim(),this.range},Nt.prototype.toString=function(){return this.range},Nt.prototype.parseRange=function(P){var O=this.loose;P=P.trim(),n("range",P,O);var U=O?a[Tn]:a[Nr];P=P.replace(U,Mc),n("hyphen replace",P),P=P.replace(a[ji],"$1$2$3"),n("comparator trim",P,a[ji]),P=(P=(P=P.replace(a[$e],"$1~")).replace(a[Ct],"$1^")).split(/\s+/).join(" ");var me=O?a[Ti]:a[ft],Re=P.split(" ").map(function(pt){return function(ye,$i){return n("comp",ye),ye=function(Bt,Kt){return Bt.trim().split(/\s+/).map(function(zi){return function(D,xt){n("caret",D,xt);var wi=xt?a[Ut]:a[Yt];return D.replace(wi,function(he,V,y,S,x){var $;return n("caret",D,he,V,y,S,x),Ot(V)?$="":Ot(y)?$=">="+V+".0.0 <"+(+V+1)+".0.0":Ot(S)?$=V==="0"?">="+V+"."+y+".0 <"+V+"."+(+y+1)+".0":">="+V+"."+y+".0 <"+(+V+1)+".0.0":x?(n("replaceCaret pr",x),x.charAt(0)!=="-"&&(x="-"+x),$=V==="0"?y==="0"?">="+V+"."+y+"."+S+x+" <"+V+"."+y+"."+(+S+1):">="+V+"."+y+"."+S+x+" <"+V+"."+(+y+1)+".0":">="+V+"."+y+"."+S+x+" <"+(+V+1)+".0.0"):(n("no pr"),$=V==="0"?y==="0"?">="+V+"."+y+"."+S+" <"+V+"."+y+"."+(+S+1):">="+V+"."+y+"."+S+" <"+V+"."+(+y+1)+".0":">="+V+"."+y+"."+S+" <"+(+V+1)+".0.0"),n("caret return",$),$})}(zi,Kt)}).join(" ")}(ye,$i),n("caret",ye),ye=function(Bt,Kt){return Bt.trim().split(/\s+/).map(function(zi){return function(D,xt){var wi=xt?a[Le]:a[ze];return D.replace(wi,function(he,V,y,S,x){var $;return n("tilde",D,he,V,y,S,x),Ot(V)?$="":Ot(y)?$=">="+V+".0.0 <"+(+V+1)+".0.0":Ot(S)?$=">="+V+"."+y+".0 <"+V+"."+(+y+1)+".0":x?(n("replaceTilde pr",x),x.charAt(0)!=="-"&&(x="-"+x),$=">="+V+"."+y+"."+S+x+" <"+V+"."+(+y+1)+".0"):$=">="+V+"."+y+"."+S+" <"+V+"."+(+y+1)+".0",n("tilde return",$),$})}(zi,Kt)}).join(" ")}(ye,$i),n("tildes",ye),ye=function(Bt,Kt){return n("replaceXRanges",Bt,Kt),Bt.split(/\s+/).map(function(zi){return function(D,xt){D=D.trim();var wi=xt?a[ce]:a[J];return D.replace(wi,function(he,V,y,S,x,$){n("xRange",D,he,V,y,S,x,$);var T=Ot(y),M=T||Ot(S),j=M||Ot(x);return V==="="&&j&&(V=""),T?he=V===">"||V==="<"?"<0.0.0":"*":V&&j?(M&&(S=0),j&&(x=0),V===">"?(V=">=",M?(y=+y+1,S=0,x=0):j&&(S=+S+1,x=0)):V==="<="&&(V="<",M?y=+y+1:S=+S+1),he=V+y+"."+S+"."+x):M?he=">="+y+".0.0 <"+(+y+1)+".0.0":j&&(he=">="+y+"."+S+".0 <"+y+"."+(+S+1)+".0"),n("xRange return",he),he})}(zi,Kt)}).join(" ")}(ye,$i),n("xrange",ye),ye=function(Bt,Kt){return n("replaceStars",Bt,Kt),Bt.trim().replace(a[pr],"")}(ye,$i),n("stars",ye),ye}(pt,O)}).join(" ").split(/\s+/);return this.loose&&(Re=Re.filter(function(pt){return!!pt.match(me)})),Re=Re.map(function(pt){return new Di(pt,O)})},Nt.prototype.intersects=function(P,O){if(!(P instanceof Nt))throw new TypeError("a Range is required");return this.set.some(function(U){return U.every(function(me){return P.set.some(function(Re){return Re.every(function(pt){return me.intersects(pt,O)})})})})},t.toComparators=function(P,O){return new Nt(P,O).set.map(function(U){return U.map(function(me){return me.value}).join(" ").trim().split(" ")})},Nt.prototype.test=function(P){if(!P)return!1;typeof P=="string"&&(P=new qe(P,this.loose));for(var O=0;O<this.set.length;O++)if(xs(this.set[O],P))return!0;return!1},t.satisfies=Wi,t.maxSatisfying=function(P,O,U){var me=null,Re=null;try{var pt=new Nt(O,U)}catch{return null}return P.forEach(function(ye){pt.test(ye)&&(me&&Re.compare(ye)!==-1||(Re=new qe(me=ye,U)))}),me},t.minSatisfying=function(P,O,U){var me=null,Re=null;try{var pt=new Nt(O,U)}catch{return null}return P.forEach(function(ye){pt.test(ye)&&(me&&Re.compare(ye)!==1||(Re=new qe(me=ye,U)))}),me},t.validRange=function(P,O){try{return new Nt(P,O).range||"*"}catch{return null}},t.ltr=function(P,O,U){return Li(P,O,"<",U)},t.gtr=function(P,O,U){return Li(P,O,">",U)},t.outside=Li,t.prerelease=function(P,O){var U=Or(P,O);return U&&U.prerelease.length?U.prerelease:null},t.intersects=function(P,O,U){return P=new Nt(P,U),O=new Nt(O,U),P.intersects(O)},t.coerce=function(P){if(P instanceof qe)return P;if(typeof P!="string")return null;var O=P.match(a[ne]);return O==null?null:Or((O[1]||"0")+"."+(O[2]||"0")+"."+(O[3]||"0"))}}).call(this,i(1))},function(e,t){var i,r,n=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(k){if(i===setTimeout)return setTimeout(k,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(k,0);try{return i(k,0)}catch{try{return i.call(null,k,0)}catch{return i.call(this,k,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:s}catch{i=s}try{r=typeof clearTimeout=="function"?clearTimeout:o}catch{r=o}})();var c,l=[],u=!1,h=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&g())}function g(){if(!u){var k=a(f);u=!0;for(var I=l.length;I;){for(c=l,l=[];++h<I;)c&&c[h].run();h=-1,I=l.length}c=null,u=!1,function(R){if(r===clearTimeout)return clearTimeout(R);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(R);try{r(R)}catch{try{return r.call(null,R)}catch{return r.call(this,R)}}}(k)}}function m(k,I){this.fun=k,this.array=I}function b(){}n.nextTick=function(k){var I=new Array(arguments.length-1);if(arguments.length>1)for(var R=1;R<arguments.length;R++)I[R-1]=arguments[R];l.push(new m(k,I)),l.length!==1||u||a(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=b,n.addListener=b,n.once=b,n.off=b,n.removeListener=b,n.removeAllListeners=b,n.emit=b,n.prependListener=b,n.prependOnceListener=b,n.listeners=function(k){return[]},n.binding=function(k){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(k){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}])});var eU=Ke.exports.SEMVER_SPEC_VERSION,tU=Ke.exports.parse,iU=Ke.exports.valid,rU=Ke.exports.coerce,nU=Ke.exports.clean,sU=Ke.exports.inc,oU=Ke.exports.major,aU=Ke.exports.minor,cU=Ke.exports.patch,lU=Ke.exports.prerelease,uU=Ke.exports.gt,hU=Ke.exports.gte,dU=Ke.exports.lt,fU=Ke.exports.lte,pU=Ke.exports.eq,gU=Ke.exports.neq,mU=Ke.exports.cmp,vU=Ke.exports.compare,wU=Ke.exports.rcompare,bU=Ke.exports.compareIdentifiers,yU=Ke.exports.rcompareIdentifiers,EU=Ke.exports.compareBuild,SU=Ke.exports.sort,xU=Ke.exports.rsort,kU=Ke.exports.diff,DU=Ke.exports.validRange,$U=Ke.exports.satisfies,IU=Ke.exports.maxSatisfying,AU=Ke.exports.minSatisfying,PU=Ke.exports.minVersion,RU=Ke.exports.gtr,TU=Ke.exports.ltr,LU=Ke.exports.outside,_U=Ke.exports.intersects,CU=Ke.exports.SemVer,NU=Ke.exports.Comparator,OU=Ke.exports.Range,p9=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,BT=/^-(\d{4})(\d{2})(\d{2})$/;function HT(e){return e=e.trim(),e==="*"||p9.test(e)}function g9(e){if(!HT(e))return null;if(e=e.trim(),e==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(p9);return t?{hasCaret:t[1]==="^",hasGreaterEquals:t[1]===">=",majorBase:t[2]==="x"?0:parseInt(t[2],10),majorMustEqual:t[2]!=="x",minorBase:t[4]==="x"?0:parseInt(t[4],10),minorMustEqual:t[4]!=="x",patchBase:t[6]==="x"?0:parseInt(t[6],10),patchMustEqual:t[6]!=="x",preRelease:t[8]||null}:null}function m9(e){if(!e)return null;const t=e.majorBase,i=e.majorMustEqual,r=e.minorBase;let n=e.minorMustEqual;const s=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(t===0||(n=!1),o=!1);let a=0;if(e.preRelease){const c=BT.exec(e.preRelease);if(c){const[,l,u,h]=c;a=Date.UTC(Number(l),Number(u)-1,Number(h))}}return{majorBase:t,majorMustEqual:i,minorBase:r,minorMustEqual:n,patchBase:s,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}var jT=class{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function WT(e,t){if(t.serializeBuffersForPostMessage){const i=new jT,n=JSON.stringify(e,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a)};if(ArrayBuffer.isView(a)){const c=zT(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),s=i.buffers.map(o=>{const a=new Uint8Array(o);return Qe.wrap(a)});return{message:n,buffers:s}}else return{message:JSON.stringify(e),buffers:[]}}function zT(e){switch(e.constructor.name){case"Int8Array":return jt.Int8Array;case"Uint8Array":return jt.Uint8Array;case"Uint8ClampedArray":return jt.Uint8ClampedArray;case"Int16Array":return jt.Int16Array;case"Uint16Array":return jt.Uint16Array;case"Int32Array":return jt.Int32Array;case"Uint32Array":return jt.Uint32Array;case"Float32Array":return jt.Float32Array;case"Float64Array":return jt.Float64Array;case"BigInt64Array":return jt.BigInt64Array;case"BigUint64Array":return jt.BigUint64Array}}function VT(e,t){const i=t.map(s=>{const o=new ArrayBuffer(s.byteLength);return new Uint8Array(o).set(s.buffer),o}),r=t.length?(s,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=i[c];if(a.view)switch(a.view.type){case jt.Int8Array:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case jt.Uint8Array:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case jt.Uint8ClampedArray:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case jt.Int16Array:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case jt.Uint16Array:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case jt.Int32Array:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case jt.Uint32Array:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case jt.Float32Array:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case jt.Float64Array:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case jt.BigInt64Array:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case jt.BigUint64Array:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(e,r),arrayBuffers:i}}var qT=class{#e;#t;#i;#r;#s;#n;#a;#o;#c;#l;#u;#d;constructor(e,t,i,r,n,s,o){this.#a="",this.#c=!1,this.#l=!1,this._onMessageEmitter=new C,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#h=new C,this._onDidDispose=this.#h.event,this.#e=e,this.#t=t,this.#o=i,this.#r=r,this.#s=n,this.#n=s,this.#u=Rc(s),this.#d=GT(s),this.#i=o}#h;dispose(){this.#c=!0,this.#h.fire(),this.#h.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#l=!0,Wu(e,this.#r)}get cspSource(){const e=this.#n.extensionLocation;if(e.scheme===de.https||e.scheme===de.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+ow}return ow}get html(){return this.a(),this.#a}set html(e){this.a(),this.#a!==e&&(this.#a=e,this.#d&&!this.#l&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#l=!0,this.#i.report("Webview vscode-resource: uris",this.#n,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#t.$setHtml(this.#e,this.b(e)))}get options(){return this.a(),this.#o}set options(e){this.a(),Qr(this.#o,e)||this.#t.$setOptions(this.#e,v9(this.#n,this.#s,e)),this.#o=e}async postMessage(e){if(this.#c)return!1;const t=WT(e,{serializeBuffersForPostMessage:this.#u});return this.#t.$postMessage(this.#e,t.message,...t.buffers)}a(){if(this.#c)throw new Error("Webview is disposed")}b(e){if(!this.#d)return e;const t=this.#n.extensionLocation?.scheme===de.vscodeRemote,i=this.#n.extensionLocation.scheme===de.vscodeRemote?this.#n.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(r,n,s,o,a,c)=>{const l=E.from({scheme:o||"file",path:decodeURIComponent(a)}),u=Wu(l,{isRemote:t,authority:i}).toString();return`${n}${u}${c}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(r,n,s,o,a,c)=>{const l=E.from({scheme:o||"file",path:decodeURIComponent(a)}),u=Wu(l,{isRemote:t,authority:i}).toString();return`${n}${u}${c}`})}};function Rc(e){try{const t=m9(g9(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}function GT(e){try{const t=m9(g9(e.engines.vscode));return t?t.majorBase<1||t.majorBase===1&&t.minorBase<60:!1}catch{return!1}}var QT=class extends Te{constructor(e,t,i,r,n){super(),this.c=t,this.f=i,this.g=r,this.h=n,this.b=new Map,this.a=e.getProxy(se.MainThreadWebviews)}dispose(){super.dispose();for(const e of this.b.values())e.dispose();this.b.clear()}$onMessage(e,t,i){const r=this.j(e);if(r){const{message:n}=VT(t,i.value);r._onMessageEmitter.fire(n)}}$onMissingCsp(e,t){this.g.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,i){const r=new qT(e,this.a,JT(t),this.c,this.f,i,this.h);this.b.set(e,r);const n=r._onDidDispose(()=>{n.dispose(),this.deleteWebview(e)});return r}deleteWebview(e){this.b.delete(e)}j(e){return this.b.get(e)}};function _p(e){return{id:e.identifier,location:e.extensionLocation}}function v9(e,t,i){return{enableCommandUris:i.enableCommandUris,enableScripts:i.enableScripts,enableForms:i.enableForms,portMapping:i.portMapping,localResourceRoots:i.localResourceRoots||XT(e,t)}}function JT(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map(t=>E.from(t))}}function XT(e,t){return[...(t?.getWorkspaceFolders()||[]).map(i=>i.uri),e.extensionLocation]}var ln=class tS{static{this.a=!1}constructor(t){this.d=t,this.b=new Map,this.c=1}add(t){const i=this.c++;return this.b.set(i,t),this.e(),i}get(t,i){return this.b.has(t)?this.b.get(t)[i]:void 0}delete(t){this.b.delete(t),this.e()}e(){tS.a&&console.log(`${this.d} cache size - ${this.b.size}`)}},ZT=class{constructor(e,t){this.document=e,this.b=t,this.a=1,this.c=new ln("custom documents")}addEdit(e){return this.c.add([e])}async undo(e,t){await this.f(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.f(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this.c.delete(t)}getNewBackupUri(){if(!this.b)throw new Error("Backup requires a valid storage path");const e=rL(this.document.uri)+this.a++;return Mi(this.b,e)}updateBackup(e){this.d?.delete(),this.d=e}disposeBackup(){this.d?.delete(),this.d=void 0}f(e){const t=this.c.get(e,0);if(!t)throw new Error("No edit found");return t}},YT=class{constructor(){this.a=new Map}get(e,t){return this.a.get(this.b(e,t))}add(e,t,i){const r=this.b(e,t.uri);if(this.a.has(r))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const n=new ZT(t,i);return this.a.set(r,n),n}delete(e,t){const i=this.b(e,t.uri);this.a.delete(i)}b(e,t){return`${e}@@@${t}`}},so;(function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"})(so||(so={}));var KT=class{constructor(){this.a=new Map}addTextProvider(e,t,i){return this.b(e,{type:so.Text,extension:t,provider:i})}addCustomProvider(e,t,i){return this.b(e,{type:so.Custom,extension:t,provider:i})}get(e){return this.a.get(e)}b(e,t){if(this.a.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this.a.set(e,t),new Ye(()=>this.a.delete(e))}},eL=class{constructor(e,t,i,r,n){this.d=t,this.f=i,this.g=r,this.h=n,this.b=new KT,this.c=new YT,this.a=e.getProxy(se.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,i,r){const n=new He;return tL(i)?(n.add(this.b.addTextProvider(t,e,i)),this.a.$registerTextEditorProvider(_p(e),t,r.webviewOptions||{},{supportsMove:!!i.moveCustomTextEditor},Rc(e))):(n.add(this.b.addCustomProvider(t,e,i)),Cp(i)&&n.add(i.onDidChangeCustomDocument(s=>{const o=this.i(t,s.document.uri);if(iL(s)){const a=o.addEdit(s);this.a.$onDidEdit(s.document.uri,t,a,s.label)}else this.a.$onContentChange(s.document.uri,t)})),this.a.$registerCustomEditorProvider(_p(e),t,r.webviewOptions||{},!!r.supportsMultipleEditorsPerDocument,Rc(e))),Ye.from(n,new Ye(()=>{this.a.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,i,r,n){const s=this.b.get(t);if(!s)throw new Error(`No provider found for '${t}'`);if(s.type!==so.Custom)throw new Error(`Invalid provide type for '${t}'`);const o=E.revive(e),a=await s.provider.openCustomDocument(o,{backupId:i,untitledDocumentData:r?.buffer},n);let c;return Cp(s.provider)&&this.f&&(c=this.f.workspaceValue(s.extension)??this.f.globalValue(s.extension)),this.c.add(t,a,c),{editable:Cp(s.provider)}}async $disposeCustomDocument(e,t){const i=this.b.get(t);if(!i)throw new Error(`No provider found for '${t}'`);if(i.type!==so.Custom)throw new Error(`Invalid provider type for '${t}'`);const r=E.revive(e),{document:n}=this.i(t,r);this.c.delete(t,n),n.dispose()}async $resolveCustomEditor(e,t,i,r,n,s){const o=this.b.get(i);if(!o)throw new Error(`No provider found for '${i}'`);const a=hi.to(n),c=this.g.createNewWebview(t,r.contentOptions,o.extension),l=this.h.createNewWebviewPanel(t,i,r.title,a,r.options,c,r.active),u=E.revive(e);switch(o.type){case so.Custom:{const{document:h}=this.i(i,u);return o.provider.resolveCustomEditor(h,l,s)}case so.Text:{const h=this.d.getDocument(u);return o.provider.resolveCustomTextEditor(h,l,s)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,i){this.i(t,e).disposeEdits(i)}async $onMoveCustomEditor(e,t,i){const r=this.b.get(i);if(!r)throw new Error(`No provider found for '${i}'`);if(!r.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${i}'`);const n=this.h.getWebviewPanel(e);if(!n)throw new Error("No webview found");const s=E.revive(t),o=this.d.getDocument(s);await r.provider.moveCustomTextEditor(o,n,Wt.None)}async $undo(e,t,i,r){return this.i(t,e).undo(i,r)}async $redo(e,t,i,r){return this.i(t,e).redo(i,r)}async $revert(e,t,i){const r=this.i(t,e);await this.j(t).revertCustomDocument(r.document,i),r.disposeBackup()}async $onSave(e,t,i){const r=this.i(t,e);await this.j(t).saveCustomDocument(r.document,i),r.disposeBackup()}async $onSaveAs(e,t,i,r){const n=this.i(t,e);return this.j(t).saveCustomDocumentAs(n.document,E.revive(i),r)}async $backup(e,t,i){const r=this.i(t,e),s=await this.j(t).backupCustomDocument(r.document,{destination:r.getNewBackupUri()},i);return r.updateBackup(s),s.id}i(e,t){const i=this.c.get(e,E.revive(t));if(!i)throw new Error("No custom document found");return i}j(e){const i=this.b.get(e)?.provider;if(!i||!Cp(i))throw new Error("Custom document is not editable");return i}};function Cp(e){return!!e.onDidChangeCustomDocument}function tL(e){return typeof e.resolveCustomTextEditor=="function"}function iL(e){return typeof e.undo=="function"&&typeof e.redo=="function"}function rL(e){const t=e.scheme===de.file||e.scheme===de.untitled?e.fsPath:e.toString();return ol(t)+""}var ia,w9=class iS{#e;#t;#i;constructor(t,i,r,n,s,o,a,c){this.d=t,this.e=i,this.f=r,this.g=n,this.h=s,this.c=!1,this.f=Math.max(n,r),this.#i=new li(l=>o.getComparisonKey(l)),this.#e=a,this.#t=c}dispose(){this.c||(this.#t.fire([...this.#i.keys()]),this.#e?.$clear(this.e),this.#i.clear(),this.c=!0)}get name(){return this.j(),this.d}set(t,i){if(!t){this.clear();return}this.j();let r=[];if(E.isUri(t)){if(!i){this.delete(t);return}this.#i.set(t,i.slice()),r=[t]}else if(Array.isArray(t)){r=[];let o;t=[...t].sort(iS.k);for(const a of t){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&this.#i.get(o).length===0&&this.#i.delete(o),o=c,r.push(c),this.#i.set(c,[])),l)this.#i.get(c)?.push(...l);else{const u=this.#i.get(c);u&&(u.length=0)}}}if(this.#t.fire(r),!this.#e)return;const n=[];let s=0;for(const o of r){let a=[];const c=this.#i.get(o);if(c)if(c.length>this.g){a=[];const l=[Ri.Error,Ri.Warning,Ri.Information,Ri.Hint];e:for(let u=0;u<4;u++)for(const h of c)if(h.severity===l[u]&&a.push({...cc.from(h),modelVersionId:this.h(o)})===this.g)break e;a.push({severity:Ji.Info,message:d(2698,null,c.length-this.g),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn})}else a=c.map(l=>({...cc.from(l),modelVersionId:this.h(o)}));if(n.push([o,a]),s+=a.length,s>this.f)break}this.#e.$changeMany(this.e,n)}delete(t){this.j(),this.#t.fire([t]),this.#i.delete(t),this.#e?.$changeMany(this.e,[[t,void 0]])}clear(){this.j(),this.#t.fire([...this.#i.keys()]),this.#i.clear(),this.#e?.$clear(this.e)}forEach(t,i){this.j();for(const[r,n]of this)t.call(i,r,n,this)}*[Symbol.iterator](){this.j();for(const t of this.#i.keys())yield[t,this.get(t)]}get(t){this.j();const i=this.#i.get(t);return Array.isArray(i)?Object.freeze(i.slice(0)):[]}has(t){return this.j(),Array.isArray(this.#i.get(t))}j(){if(this.c)throw new Error("illegal state - object is disposed")}static k(t,i){return t[0].toString()<i[0].toString()?-1:t[0].toString()>i[0].toString()?1:0}},cw=class{static{ia=this}static{this.c=0}static{this.d=1e3}static{this.e=1.1*this.d}static _mapper(t){const i=new li;for(const r of t)i.set(r,r);return{uris:Object.freeze(Array.from(i.values()))}}constructor(t,i,r,n){this.j=i,this.k=r,this.l=n,this.g=new Map,this.h=new fx({merge:s=>s.flat(),delay:50}),this.onDidChangeDiagnostics=Gt.map(this.h.event,ia._mapper),this.f=t.getProxy(se.MainThreadDiagnostics)}createDiagnosticCollection(t,i){const{g:r,f:n,h:s,j:o,k:a,l:c}=this,l=new class{$changeMany(f,g){n.$changeMany(f,g),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",t.value,f,g.length===0?"CLEARING":g)}$clear(f){n.$clear(f),o.trace("[DiagnosticCollection] remove all (extension, owner)",t.value,f)}dispose(){n.dispose()}};let u;if(!i)i="_generated_diagnostic_collection_name_#"+ia.c++,u=i;else if(!r.has(i))u=i;else{this.j.warn(`DiagnosticCollection with name '${i}' does already exist.`);do u=i+ia.c++;while(r.has(u))}return new class extends w9{constructor(){super(i,u,ia.e,ia.d,f=>c.getDocument(f)?.version,a.extUri,l,s),r.set(u,this)}dispose(){super.dispose(),r.delete(u)}}}getDiagnostics(t){if(t)return this.m(t);{const i=new Map,r=[];for(const n of this.g.values())n.forEach((s,o)=>{let a=i.get(s.toString());typeof a>"u"&&(a=r.length,i.set(s.toString(),a),r.push([s,[]])),r[a][1]=r[a][1].concat(...o)});return r}}m(t){let i=[];for(const r of this.g.values())r.has(t)&&(i=i.concat(r.get(t)));return i}$acceptMarkersChange(t){if(!this.n){const i="_generated_mirror",r=new w9(i,i,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,n=>{},this.k.extUri,void 0,this.h);this.g.set(i,r),this.n=r}for(const[i,r]of t)this.n.set(E.revive(i),r.map(cc.to))}};cw=ia=__decorate([__param(1,ut),__param(2,xa)],cw);var nL=class{constructor(e){this.a=e.getProxy(se.MainThreadDialogs)}showOpenDialog(e,t){return t?.allowUIResources&&B(e,"showLocal"),this.a.$showOpenDialog(t).then(i=>i?i.map(r=>E.revive(r)):void 0)}showSaveDialog(e){return this.a.$showSaveDialog(e).then(t=>t?E.revive(t):void 0)}},sL=class rS{static{this.a=0}constructor(t,i,r){this.d=i,this.e=r,this.b=new Map,this.c=t.getProxy(se.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(t,i){if(Object.keys(de).indexOf(t)>=0)throw new Error(`scheme '${t}' already registered`);const r=rS.a++;this.b.set(r,i),this.c.$registerTextContentProvider(r,t);let n;if(typeof i.onDidChange=="function"){let s;n=i.onDidChange(async o=>{if(o.scheme!==t){this.e.warn(`Provider for scheme '${t}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this.d.getDocument(o))return;s&&await s;const a=this.$provideTextDocumentContent(r,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this.d.getDocument(o);if(!l)return;const u=oy(c);if(!l.equalLines(u))return this.c.$onVirtualDocumentChange(o,c)}).catch(mr).finally(()=>{s===a&&(s=void 0)});s=a})}return new Ye(()=>{this.b.delete(r)&&this.c.$unregisterTextContentProvider(r),n&&(n.dispose(),n=void 0)})}$provideTextDocumentContent(t,i){const r=this.b.get(t);return r?Promise.resolve(r.provideTextDocumentContent(E.revive(i),Wt.None)):Promise.reject(new Error(`unsupported uri-scheme: ${i.scheme}`))}},oL=class{constructor(e,t,i,r={timeout:1500,errors:3}){this.c=e,this.d=t,this.f=i,this.g=r,this.a=new Vc,this.b=new WeakMap}dispose(){this.a.clear()}getOnWillSaveTextDocumentEvent(e){return(t,i,r)=>{const s={dispose:this.a.push([t,i,e])};return Array.isArray(r)&&r.push(s),s}}async $participateInSave(e,t){const i=E.revive(e);let r=!1;const n=setTimeout(()=>r=!0,this.g.timeout),s=[];try{for(const o of[...this.a]){if(r)break;const a=this.d.getDocument(i),c=await this.h(o,{document:a,reason:Vf.to(t)});s.push(c)}}finally{clearTimeout(n)}return s}h([e,t,i],r){const n=this.b.get(e);return typeof n=="number"&&n>this.g.errors?Promise.resolve(!1):this.i(i,e,t,r).then(()=>!0,s=>{if(this.c.error(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' threw ERROR`),this.c.error(s),!(s instanceof Error)||s.message!=="concurrent_edits"){const o=this.b.get(e);this.b.set(e,o?o+1:1),typeof o=="number"&&o>this.g.errors&&this.c.info(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}i(e,t,i,r){const n=[],s=Date.now(),{document:o,reason:a}=r,{version:c}=o,l=Object.freeze({document:o,reason:a,waitUntil(u){if(Object.isFrozen(n))throw Eg("waitUntil can not be called async");n.push(Promise.resolve(u))}});try{t.apply(i,[l])}catch(u){return Promise.reject(u)}return Object.freeze(n),new Promise((u,h)=>{const f=setTimeout(()=>h(new Error("timeout")),this.g.timeout);return Promise.all(n).then(g=>{this.c.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-s}ms`),clearTimeout(f),u(g)}).catch(g=>{clearTimeout(f),h(g)})}).then(u=>{const h={edits:[]};for(const f of u)if(Array.isArray(f)&&f.every(g=>g instanceof js))for(const{newText:g,newEol:m,range:b}of f)h.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:b&&W.from(b),text:g,eol:m&&fc.from(m)}});if(h.edits.length!==0)return c===o.version?this.f.$tryApplyWorkspaceEdit(new br(h)):Promise.reject(new Error("concurrent_edits"))})}},aL=class{constructor(e,t){this.a=new C,this.b=new C,this.c=new C,this.d=new C,this.onDidAddDocument=this.a.event,this.onDidRemoveDocument=this.b.event,this.onDidChangeDocument=this.c.event,this.onDidSaveDocument=this.d.event,this.e=new He,this.h=new Map,this.f=e.getProxy(se.MainThreadDocuments),this.g=t,this.g.onDidRemoveDocuments(i=>{for(const r of i)this.b.fire(r.document)},void 0,this.e),this.g.onDidAddDocuments(i=>{for(const r of i)this.a.fire(r.document)},void 0,this.e)}dispose(){this.e.dispose()}getAllDocumentData(){return[...this.g.allDocuments()]}getDocumentData(e){if(!e)return;const t=this.g.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e){const t=this.g.getDocument(e);if(t)return Promise.resolve(t);let i=this.h.get(e.toString());return i||(i=this.f.$tryOpenDocument(e).then(r=>{this.h.delete(e.toString());const n=E.revive(r);return ma(this.g.getDocument(n))},r=>(this.h.delete(e.toString()),Promise.reject(r))),this.h.set(e.toString(),i)),i}createDocumentData(e){return this.f.$tryCreateDocument(e).then(t=>E.revive(t))}$acceptModelLanguageChanged(e,t){const i=E.revive(e),r=this.g.getDocument(i);if(!r)throw new Error("unknown document");this.b.fire(r.document),r._acceptLanguageId(t),this.a.fire(r.document)}$acceptModelSaved(e){const t=E.revive(e),i=this.g.getDocument(t);if(!i)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this.d.fire(i.document)}$acceptDirtyStateChanged(e,t){const i=E.revive(e),r=this.g.getDocument(i);if(!r)throw new Error("unknown document");r._acceptIsDirty(t),this.c.fire({document:r.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,i){const r=E.revive(e),n=this.g.getDocument(r);if(!n)throw new Error("unknown document");n._acceptIsDirty(i),n.onEvents(t);let s;t.isUndoing?s=Wl.Undo:t.isRedoing&&(s=Wl.Redo),this.c.fire(e4({document:n.document,contentChanges:t.changes.map(o=>({range:W.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:s}))}setWordDefinitionFor(e,t){xR(e,t)}},cL=class{constructor(e){this.b=new Map,this.c=new C,this.onDidChange=this.c.event,this.d=new Set,this.e=0,this.a=e.getProxy(se.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,i){if(this.d.has(t))throw new Error("An embeddings provider for this model is already registered");const r=this.e++;return this.a.$registerEmbeddingProvider(r,t),this.b.set(r,{id:t,provider:i}),Ce(()=>{this.d.delete(t),this.a.$unregisterEmbeddingProvider(r),this.b.delete(r)})}async computeEmbeddings(e,t,i){i??=Wt.None;let r=!1;typeof t=="string"&&(t=[t],r=!0);const n=await this.a.$computeEmbeddings(e,t,i);if(n.length!==t.length)throw new Error;if(r){if(n.length!==1)throw new Error;return n[0]}return n}async $provideEmbeddings(e,t,i){const r=this.b.get(e);if(!r)return[];const n=await r.provider.provideEmbeddings(t,i);return n||[]}get embeddingsModels(){return Array.from(this.d)}$acceptEmbeddingModels(e){this.d=new Set(e),this.c.fire()}},lL=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(se.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,i){if(this.a.size===0)throw new Error("No embedding vector providers registered");const r=this.a.get(e);if(!r)throw new Error("Embedding vector provider not found");const n=await r.provideEmbeddingVector(t,i);if(!n)throw new Error("Embedding vector provider returned undefined");return n}registerEmbeddingVectorProvider(e,t,i){const r=this.b;return this.b++,this.a.set(r,i),this.c.$registerAiEmbeddingVectorProvider(t,r),new Ye(()=>{this.c.$unregisterAiEmbeddingVectorProvider(r),this.a.delete(r)})}},xe;(function(e){e[e.Invalid=0]="Invalid",e[e.Start=1]="Start",e[e.H=2]="H",e[e.HT=3]="HT",e[e.HTT=4]="HTT",e[e.HTTP=5]="HTTP",e[e.F=6]="F",e[e.FI=7]="FI",e[e.FIL=8]="FIL",e[e.BeforeColon=9]="BeforeColon",e[e.AfterColon=10]="AfterColon",e[e.AlmostThere=11]="AlmostThere",e[e.End=12]="End",e[e.Accept=13]="Accept",e[e.LastKnownState=14]="LastKnownState"})(xe||(xe={}));var uL=class{constructor(e,t,i){const r=new Uint8Array(e*t);for(let n=0,s=e*t;n<s;n++)r[n]=i;this.a=r,this.rows=e,this.cols=t}get(e,t){return this.a[e*this.cols+t]}set(e,t,i){this.a[e*this.cols+t]=i}},b9=class{constructor(e){let t=0,i=xe.Invalid;for(let n=0,s=e.length;n<s;n++){const[o,a,c]=e[n];a>t&&(t=a),o>i&&(i=o),c>i&&(i=c)}t++,i++;const r=new uL(i,t,xe.Invalid);for(let n=0,s=e.length;n<s;n++){const[o,a,c]=e[n];r.set(o,a,c)}this.a=r,this.b=t}nextState(e,t){return t<0||t>=this.b?xe.Invalid:this.a.get(e,t)}},lw=null;function hL(){return lw===null&&(lw=new b9([[xe.Start,L.h,xe.H],[xe.Start,L.H,xe.H],[xe.Start,L.f,xe.F],[xe.Start,L.F,xe.F],[xe.H,L.t,xe.HT],[xe.H,L.T,xe.HT],[xe.HT,L.t,xe.HTT],[xe.HT,L.T,xe.HTT],[xe.HTT,L.p,xe.HTTP],[xe.HTT,L.P,xe.HTTP],[xe.HTTP,L.s,xe.BeforeColon],[xe.HTTP,L.S,xe.BeforeColon],[xe.HTTP,L.Colon,xe.AfterColon],[xe.F,L.i,xe.FI],[xe.F,L.I,xe.FI],[xe.FI,L.l,xe.FIL],[xe.FI,L.L,xe.FIL],[xe.FIL,L.e,xe.BeforeColon],[xe.FIL,L.E,xe.BeforeColon],[xe.BeforeColon,L.Colon,xe.AfterColon],[xe.AfterColon,L.Slash,xe.AlmostThere],[xe.AlmostThere,L.Slash,xe.End]])),lw}var _t;(function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"})(_t||(_t={}));var zu=null;function dL(){if(zu===null){zu=new n6(_t.None);const e=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let i=0;i<e.length;i++)zu.set(e.charCodeAt(i),_t.ForceTermination);const t=".,;:";for(let i=0;i<t.length;i++)zu.set(t.charCodeAt(i),_t.CannotEndIn)}return zu}var fL=class sb{static a(t,i,r,n,s){let o=s-1;do{const a=i.charCodeAt(o);if(t.get(a)!==_t.CannotEndIn)break;o--}while(o>n);if(n>0){const a=i.charCodeAt(n-1),c=i.charCodeAt(o);(a===L.OpenParen&&c===L.CloseParen||a===L.OpenSquareBracket&&c===L.CloseSquareBracket||a===L.OpenCurlyBrace&&c===L.CloseCurlyBrace)&&o--}return{range:{startLineNumber:r,startColumn:n+1,endLineNumber:r,endColumn:o+2},url:i.substring(n,o+1)}}static computeLinks(t,i=hL()){const r=dL(),n=[];for(let s=1,o=t.getLineCount();s<=o;s++){const a=t.getLineContent(s),c=a.length;let l=0,u=0,h=0,f=xe.Start,g=!1,m=!1,b=!1,k=!1;for(;l<c;){let I=!1;const R=a.charCodeAt(l);if(f===xe.Accept){let N;switch(R){case L.OpenParen:g=!0,N=_t.None;break;case L.CloseParen:N=g?_t.None:_t.ForceTermination;break;case L.OpenSquareBracket:b=!0,m=!0,N=_t.None;break;case L.CloseSquareBracket:b=!1,N=m?_t.None:_t.ForceTermination;break;case L.OpenCurlyBrace:k=!0,N=_t.None;break;case L.CloseCurlyBrace:N=k?_t.None:_t.ForceTermination;break;case L.SingleQuote:case L.DoubleQuote:case L.BackTick:h===R?N=_t.ForceTermination:h===L.SingleQuote||h===L.DoubleQuote||h===L.BackTick?N=_t.None:N=_t.ForceTermination;break;case L.Asterisk:N=h===L.Asterisk?_t.ForceTermination:_t.None;break;case L.Pipe:N=h===L.Pipe?_t.ForceTermination:_t.None;break;case L.Space:N=b?_t.None:_t.ForceTermination;break;default:N=r.get(R)}N===_t.ForceTermination&&(n.push(sb.a(r,a,s,u,l)),I=!0)}else if(f===xe.End){let N;R===L.OpenSquareBracket?(m=!0,N=_t.None):N=r.get(R),N===_t.ForceTermination?I=!0:f=xe.Accept}else f=i.nextState(f,R),f===xe.Invalid&&(I=!0);I&&(f=xe.Start,g=!1,m=!1,k=!1,u=l+1,h=R),l++}f===xe.Accept&&n.push(sb.a(r,a,s,u,c))}return n}},pL=class{constructor(){this.a=[]}add(e){this.b=void 0,this.a.push(e)}delete(e){const t=this.a.indexOf(e);t>=0&&(this.a.splice(t,1),this.b=void 0)}c(){if(!this.b){const e=this.a.sort(),t=[];let i,r,n=xe.LastKnownState,s=xe.LastKnownState;for(const o of e){let a=i?ik(i,o):0;for(a===0?r=xe.Start:r=s;a<o.length;a++)a+1===o.length?(n=s,s=xe.BeforeColon):s+=1,t.push([r,o.toUpperCase().charCodeAt(a),s]),t.push([r,o.toLowerCase().charCodeAt(a),s]),r=s;i=o,s=n}t.push([xe.BeforeColon,L.Colon,xe.AfterColon]),t.push([xe.AfterColon,L.Slash,xe.End]),this.b=new b9(t)}}provideDocumentLinks(e){this.c();const t=[],i=fL.computeLinks({getLineContent(r){return e.lineAt(r-1).text},getLineCount(){return e.lineCount}},this.b);for(const r of i){const n=Jo.to(r);n.target&&t.push(n)}return t}},gL=class ob{constructor(t,i){this.i=i,this.b=new pL,this.c=new Map,this.d=new Set,this.f=new Map,this.h=0,this.a=t.getProxy(se.MainThreadFileSystem)}dispose(){this.g?.dispose()}registerFileSystemProvider(t,i,r,n={}){if(ob.j(r),this.d.has(i))throw new Error(`a provider for the scheme '${i}' is already registered`);this.g||(this.g=this.i.registerDocumentLinkProvider(t,"*",this.b));const s=this.h++;this.b.add(i),this.d.add(i),this.c.set(s,r);let o=vn.FileReadWrite;n.isCaseSensitive&&(o+=vn.PathCaseSensitive),n.isReadonly&&(o+=vn.Readonly),typeof r.copy=="function"&&(o+=vn.FileFolderCopy),typeof r.open=="function"&&typeof r.close=="function"&&typeof r.read=="function"&&typeof r.write=="function"&&(B(t,"fsChunks"),o+=vn.FileOpenReadWriteClose);let a;n.isReadonly&&$o(n.isReadonly)&&n.isReadonly.value!==""&&(a={value:n.isReadonly.value,isTrusted:n.isReadonly.isTrusted,supportThemeIcons:n.isReadonly.supportThemeIcons,supportHtml:n.isReadonly.supportHtml,baseUri:n.isReadonly.baseUri,uris:n.isReadonly.uris}),this.a.$registerFileSystemProvider(s,i,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${t.identifier.value}-extension for the scheme ${i}`),console.error(l)});const c=r.onDidChangeFile(l=>{const u=[];for(const h of l){const{uri:f,type:g}=h;if(f.scheme!==i)continue;let m;switch(g){case tc.Changed:m=Jr.UPDATED;break;case tc.Created:m=Jr.ADDED;break;case tc.Deleted:m=Jr.DELETED;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:f,type:m})}this.a.$onFileSystemChange(s,u)});return Ce(()=>{c.dispose(),this.b.delete(i),this.d.delete(i),this.c.delete(s),this.a.$unregisterProvider(s)})}static j(t){if(!t)throw new Error("MISSING provider");if(typeof t.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof t.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof t.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof t.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof t.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof t.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof t.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof t.rename!="function")throw new Error("Provider does NOT implement rename")}static k(t){const{type:i,ctime:r,mtime:n,size:s,permissions:o}=t;return{type:i,ctime:r,mtime:n,size:s,permissions:o}}$stat(t,i){return Promise.resolve(this.l(t).stat(E.revive(i))).then(r=>ob.k(r))}$readdir(t,i){return Promise.resolve(this.l(t).readDirectory(E.revive(i)))}$readFile(t,i){return Promise.resolve(this.l(t).readFile(E.revive(i))).then(r=>Qe.wrap(r))}$writeFile(t,i,r,n){return Promise.resolve(this.l(t).writeFile(E.revive(i),r.buffer,n))}$delete(t,i,r){return Promise.resolve(this.l(t).delete(E.revive(i),r))}$rename(t,i,r,n){return Promise.resolve(this.l(t).rename(E.revive(i),E.revive(r),n))}$copy(t,i,r,n){const s=this.l(t);if(!s.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(s.copy(E.revive(i),E.revive(r),n))}$mkdir(t,i){return Promise.resolve(this.l(t).createDirectory(E.revive(i)))}$watch(t,i,r,n){const s=this.l(t).watch(E.revive(r),n);this.f.set(i,s)}$unwatch(t,i){const r=this.f.get(i);r&&(r.dispose(),this.f.delete(i))}$open(t,i,r){const n=this.l(t);if(!n.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(n.open(E.revive(i),r))}$close(t,i){const r=this.l(t);if(!r.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(r.close(i))}$read(t,i,r,n){const s=this.l(t);if(!s.read)throw new Error('FileSystemProvider does not implement "read"');const o=Qe.alloc(n);return Promise.resolve(s.read(i,r,o.buffer,0,n)).then(a=>o.slice(0,a))}$write(t,i,r,n){const s=this.l(t);if(!s.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(s.write(i,r,n.buffer,0,n.byteLength))}l(t){const i=this.c.get(t);if(!i){const r=new Error;throw r.name="ENOPRO",r.message="no provider",r}return i}},mL=class{get ignoreCreateEvents(){return!!(this.h&1)}get ignoreChangeEvents(){return!!(this.h&2)}get ignoreDeleteEvents(){return!!(this.h&4)}constructor(e,t,i,r,n,s){this.a=Math.random(),this.b=new C,this.c=new C,this.d=new C,this.h=0,s?.ignoreCreateEvents&&(this.h+=1),s?.ignoreChangeEvents&&(this.h+=2),s?.ignoreDeleteEvents&&(this.h+=4);const o=Ba(n),a=typeof n=="string",c=s?.correlate,l=r(u=>{if(!(typeof u.session=="number"&&u.session!==this.a)&&!(c&&typeof u.session>"u")){if(!s?.ignoreCreateEvents)for(const h of u.created){const f=E.revive(h);o(f.fsPath)&&(!a||t.getWorkspaceFolder(f))&&this.b.fire(f)}if(!s?.ignoreChangeEvents)for(const h of u.changed){const f=E.revive(h);o(f.fsPath)&&(!a||t.getWorkspaceFolder(f))&&this.c.fire(f)}if(!s?.ignoreDeleteEvents)for(const h of u.deleted){const f=E.revive(h);o(f.fsPath)&&(!a||t.getWorkspaceFolder(f))&&this.d.fire(f)}}});this.g=Ye.from(this.i(e,i,n,s,s?.correlate),this.b,this.c,this.d,l)}i(e,t,i,r,n){const s=Ye.from();if(typeof i=="string"||r?.ignoreChangeEvents&&r?.ignoreCreateEvents&&r?.ignoreDeleteEvents)return s;const o=e.getProxy(se.MainThreadFileSystemEventService);let a=!1;(i.pattern.includes(Pl)||i.pattern.includes(Km))&&(a=!0);let c;return n&&(r?.ignoreChangeEvents||r?.ignoreCreateEvents||r?.ignoreDeleteEvents)&&(c=Cs.UPDATED|Cs.ADDED|Cs.DELETED,r?.ignoreChangeEvents&&(c&=~Cs.UPDATED),r?.ignoreCreateEvents&&(c&=~Cs.ADDED),r?.ignoreDeleteEvents&&(c&=~Cs.DELETED)),o.$watch(t.identifier.value,this.a,i.baseUri,{recursive:a,excludes:r?.excludes??[],filter:c},!!n),Ye.from({dispose:()=>o.$unwatch(this.a)})}dispose(){this.g.dispose()}get onDidCreate(){return this.b.event}get onDidChange(){return this.c.event}get onDidDelete(){return this.d.event}},vL=class{constructor(e){this.a=e,this.session=this.a.session,this.b=new nr(()=>this.a.created.map(E.revive)),this.c=new nr(()=>this.a.changed.map(E.revive)),this.d=new nr(()=>this.a.deleted.map(E.revive))}get created(){return this.b.value}get changed(){return this.c.value}get deleted(){return this.d.value}},wL=class{constructor(e,t,i){this.j=e,this.k=t,this.l=i,this.a=new C,this.b=new C,this.c=new C,this.d=new C,this.g=new qc,this.h=new qc,this.i=new qc,this.onDidRenameFile=this.b.event,this.onDidCreateFile=this.c.event,this.onDidDeleteFile=this.d.event}createFileSystemWatcher(e,t,i,r){return new mL(this.j,e,t,this.a.event,fr.from(i),r)}$onFileEvent(e){this.a.fire(new vL(e))}$onDidRunFileOperation(e,t){switch(e){case wn.MOVE:this.b.fire(Object.freeze({files:t.map(i=>({oldUri:E.revive(i.source),newUri:E.revive(i.target)}))}));break;case wn.DELETE:this.d.fire(Object.freeze({files:t.map(i=>E.revive(i.target))}));break;case wn.CREATE:case wn.COPY:this.c.fire(Object.freeze({files:t.map(i=>E.revive(i.target))}));break;default:}}getOnWillRenameFileEvent(e){return this.m(e,this.g)}getOnWillCreateFileEvent(e){return this.m(e,this.h)}getOnWillDeleteFileEvent(e){return this.m(e,this.i)}m(e,t){return(i,r,n)=>{const s=function(a){i.call(r,a)};return s.extension=e,t.event(s,void 0,n)}}async $onWillRunFileOperation(e,t,i,r){switch(e){case wn.MOVE:return await this.n(this.g,{files:t.map(n=>({oldUri:E.revive(n.source),newUri:E.revive(n.target)}))},i,r);case wn.DELETE:return await this.n(this.i,{files:t.map(n=>E.revive(n.target))},i,r);case wn.CREATE:case wn.COPY:return await this.n(this.h,{files:t.map(n=>E.revive(n.target))},i,r)}}async n(e,t,i,r){const n=new Set,s=[];if(await e.fireAsync(t,r,async(a,c)=>{const l=Date.now(),u=await Promise.resolve(a);u instanceof Oo&&(s.push([c.extension,u]),n.add(c.extension.displayName??c.extension.identifier.value)),Date.now()-l>i&&this.k.warn("SLOW file-participant",c.extension.identifier)}),r.isCancellationRequested||s.length===0)return;const o={edits:[]};for(const[,a]of s){const{edits:c}=Hi.from(a,{getTextDocumentVersion:l=>this.l.getDocument(l)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(c)}return{edit:o,extensionNames:Array.from(n)}}},bL=class{constructor(e,t,i,r,n){this.a=t,this.b=i,this.c=r;const s=new Pe("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new Q("showOptions","Show Options",o=>!0,o=>o),new Q("resource","Interactive resource Uri",o=>!0,o=>o),new Q("controllerId","Notebook controller Id",o=>!0,o=>o),new Q("title","Interactive editor title",o=>!0,o=>o)],new Ie("Notebook and input URI",o=>{if(n.debug("[ExtHostInteractive] open iw with notebook editor id",o.notebookEditorId),o.notebookEditorId!==void 0){const a=this.a.getEditorById(o.notebookEditorId);return n.debug("[ExtHostInteractive] notebook editor found",a.id),{notebookUri:E.revive(o.notebookUri),inputUri:E.revive(o.inputUri),notebookEditor:a.apiEditor}}return n.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",o.notebookUri,o.inputUri),{notebookUri:E.revive(o.notebookUri),inputUri:E.revive(o.inputUri)}}));this.c.registerApiCommand(s)}$willAddInteractiveDocument(e,t,i,r){this.b.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:i,uri:e,isDirty:!1,versionId:1}]})}$willRemoveInteractiveDocument(e,t){this.b.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}},yL=class{constructor(e){this.b=0,this.a=e.getProxy(se.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this.b++;return this.a.$registerResourceLabelFormatter(t,e),Ce(()=>{this.a.$unregisterResourceLabelFormatter(t)})}},oo;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(oo||(oo={}));var EL=class Cr extends mt{constructor(t,i,r,n){super(t,i,r,n),this.selectionStartLineNumber=t,this.selectionStartColumn=i,this.positionLineNumber=r,this.positionColumn=n}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return Cr.selectionsEqual(this,t)}static selectionsEqual(t,i){return t.selectionStartLineNumber===i.selectionStartLineNumber&&t.selectionStartColumn===i.selectionStartColumn&&t.positionLineNumber===i.positionLineNumber&&t.positionColumn===i.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?oo.LTR:oo.RTL}setEndPosition(t,i){return this.getDirection()===oo.LTR?new Cr(this.startLineNumber,this.startColumn,t,i):new Cr(t,i,this.startLineNumber,this.startColumn)}getPosition(){return new xr(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new xr(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,i){return this.getDirection()===oo.LTR?new Cr(t,i,this.endLineNumber,this.endColumn):new Cr(this.endLineNumber,this.endColumn,t,i)}static fromPositions(t,i=t){return new Cr(t.lineNumber,t.column,i.lineNumber,i.column)}static fromRange(t,i){return i===oo.LTR?new Cr(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new Cr(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new Cr(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(t,i){if(t&&!i||!t&&i)return!1;if(!t&&!i)return!0;if(t.length!==i.length)return!1;for(let r=0,n=t.length;r<n;r++)if(!this.selectionsEqual(t[r],i[r]))return!1;return!0}static isISelection(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(t,i,r,n,s){return s===oo.LTR?new Cr(t,i,r,n):new Cr(r,n,t,i)}},y9=class nS{constructor(t,i){this.d=t,this.e=i}async provideDocumentSymbols(t,i){const r=this.d.getDocument(t),n=await this.e.provideDocumentSymbols(r,i);if(!xg(n))return n[0]instanceof Ml?n.map(hv.from):nS.f(n)}static f(t){t=t.slice(0).sort((n,s)=>{let o=n.location.range.start.compareTo(s.location.range.start);return o===0&&(o=s.location.range.end.compareTo(n.location.range.end)),o});const i=[],r=[];for(const n of t){const s={name:n.name||"!!MISSING: name!!",kind:Tr.from(n.kind),tags:n.tags?.map(ss.from)||[],detail:"",containerName:n.containerName,range:W.from(n.location.range),selectionRange:W.from(n.location.range),children:[]};for(;;){if(r.length===0){r.push(s),i.push(s);break}const o=r[r.length-1];if(mt.containsRange(o.range,s.range)&&!mt.equalsRange(o.range,s.range)){o.children?.push(s),r.push(s);break}r.pop()}}return i}},Np=class{constructor(e,t,i,r,n,s){this.f=e,this.g=t,this.h=i,this.j=r,this.k=n,this.l=s,this.d=new ln("CodeLens"),this.e=new Map}async provideCodeLenses(e,t){const i=this.f.getDocument(e),r=await this.h.provideCodeLenses(i,t);if(!r||t.isCancellationRequested)return;const n=this.d.add(r),s=new He;this.e.set(n,s);const o={cacheId:n,lenses:[]};for(let a=0;a<r.length;a++)o.lenses.push({cacheId:[n,a],range:W.from(r[a].range),command:this.g.toInternal(r[a].command,s)});return o}async resolveCodeLens(e,t){const i=e.cacheId&&this.d.get(...e.cacheId);if(!i)return;let r;if(typeof this.h.resolveCodeLens!="function"||i.isResolved?r=i:r=await this.h.resolveCodeLens(i,t),r||(r=i),t.isCancellationRequested)return;const n=e.cacheId&&this.e.get(e.cacheId[0]);if(n){if(!r.command){const s=new Error("INVALID code lens resolved, lacks command: "+this.j.identifier.value);this.k.onExtensionError(this.j.identifier,s),this.l.error(s);return}return e.command=this.g.toInternal(r.command,n),e}}releaseCodeLenses(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}};function Op(e){return Array.isArray(e)?e.map(pu.from):e?[pu.from(e)]:[]}var E9=class{constructor(e,t){this.d=e,this.e=t}async provideDefinition(e,t,i){const r=this.d.getDocument(e),n=lt.to(t),s=await this.e.provideDefinition(r,n,i);return Op(s)}},S9=class{constructor(e,t){this.d=e,this.e=t}async provideDeclaration(e,t,i){const r=this.d.getDocument(e),n=lt.to(t),s=await this.e.provideDeclaration(r,n,i);return Op(s)}},x9=class{constructor(e,t){this.d=e,this.e=t}async provideImplementation(e,t,i){const r=this.d.getDocument(e),n=lt.to(t),s=await this.e.provideImplementation(r,n,i);return Op(s)}},k9=class{constructor(e,t){this.d=e,this.e=t}async provideTypeDefinition(e,t,i){const r=this.d.getDocument(e),n=lt.to(t),s=await this.e.provideTypeDefinition(r,n,i);return Op(s)}},uw=class sS{static{this.f=10}constructor(t,i){this.g=t,this.h=i,this.d=0,this.e=new Map}async provideHover(t,i,r,n){const s=this.g.getDocument(t),o=lt.to(i);let a;if(r&&r.verbosityRequest){const h=r.verbosityRequest.previousHover.id,f=this.e.get(h);if(!f)throw new Error(`Hover with id ${h} not found`);const g={verbosityDelta:r.verbosityRequest.verbosityDelta,previousHover:f};a=await this.h.provideHover(s,o,n,g)}else a=await this.h.provideHover(s,o,n);if(!a||xg(a.contents))return;a.range||(a.range=s.getWordRangeAtPosition(o)),a.range||(a.range=new Be(o,o));const c=gu.from(a),l=this.d;if(this.e.size===sS.f){const h=Math.min(...this.e.keys());this.e.delete(h)}return this.e.set(l,a),this.d+=1,{...c,id:l}}releaseHover(t){this.e.delete(t)}},D9=class{constructor(e,t){this.d=e,this.e=t}async provideEvaluatableExpression(e,t,i){const r=this.d.getDocument(e),n=lt.to(t),s=await this.e.provideEvaluatableExpression(r,n,i);if(s)return pv.from(s)}},$9=class{constructor(e,t){this.d=e,this.e=t}async provideInlineValues(e,t,i,r){const n=this.d.getDocument(e),s=await this.e.provideInlineValues(n,W.to(t),Mf.to(i),r);if(Array.isArray(s))return s.map(o=>Ff.from(o))}},I9=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentHighlights(e,t,i){const r=this.d.getDocument(e),n=lt.to(t),s=await this.e.provideDocumentHighlights(r,n,i);if(Array.isArray(s))return s.map(uc.from)}},A9=class{constructor(e,t){this.d=e,this.e=t}async provideMultiDocumentHighlights(e,t,i,r){const n=this.d.getDocument(e),s=i.map(c=>this.d.getDocument(c)),o=lt.to(t),a=await this.e.provideMultiDocumentHighlights(n,o,s,r);if(Array.isArray(a))return a.map(gv.from)}},P9=class{constructor(e,t){this.d=e,this.e=t}async provideLinkedEditingRanges(e,t,i){const r=this.d.getDocument(e),n=lt.to(t),s=await this.e.provideLinkedEditingRanges(r,n,i);if(s&&Array.isArray(s.ranges))return{ranges:ci(s.ranges.map(W.from)),wordPattern:s.wordPattern}}},R9=class{constructor(e,t){this.d=e,this.e=t}async provideReferences(e,t,i,r){const n=this.d.getDocument(e),s=lt.to(t),o=await this.e.provideReferences(n,s,i,r);if(Array.isArray(o))return o.map(Yi.from)}},Fp=class dg{static{this.d=1e3}constructor(t,i,r,n,s,o,a){this.g=t,this.h=i,this.j=r,this.k=n,this.l=s,this.m=o,this.n=a,this.e=new ln("CodeAction"),this.f=new Map}async provideCodeActions(t,i,r,n){const s=this.g.getDocument(t),o=EL.isISelection(i)?on.to(i):W.to(i),a=[];for(const g of this.j.getDiagnostics(t))if(o.intersection(g.range)&&a.push(g)>dg.d)break;const c={diagnostics:a,only:r.only?new Lt(r.only):void 0,triggerKind:Pv.to(r.trigger)},l=await this.k.provideCodeActions(s,o,c,n);if(!Hc(l)||n.isCancellationRequested)return;const u=this.e.add(l),h=new He;this.f.set(u,h);const f=[];for(let g=0;g<l.length;g++){const m=l[g];if(m)if(dg.o(m))this.n.report("CodeActionProvider.provideCodeActions - return commands",this.m,"Return 'CodeAction' instances instead."),f.push({_isSynthetic:!0,title:m.title,command:this.h.toInternal(m,h)});else{c.only&&(m.kind?c.only.contains(m.kind)||this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${m.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const b=m.ranges??[];f.push({cacheId:[u,g],title:m.title,command:m.command&&this.h.toInternal(m.command,h),diagnostics:m.diagnostics&&m.diagnostics.map(cc.from),edit:m.edit&&Hi.from(m.edit,void 0),kind:m.kind&&m.kind.value,isPreferred:m.isPreferred,isAI:pi(this.m,"codeActionAI")?m.isAI:!1,ranges:pi(this.m,"codeActionRanges")?ci(b.map(W.from)):void 0,disabled:m.disabled?.reason})}}return{cacheId:u,actions:f}}async resolveCodeAction(t,i){const[r,n]=t,s=this.e.get(r,n);if(!s||dg.o(s))return{};if(!this.k.resolveCodeAction)return{};const o=await this.k.resolveCodeAction(s,i)??s;let a;o.edit&&(a=Hi.from(o.edit,void 0));let c;if(o.command){const l=this.f.get(r);l&&(c=this.h.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(t){this.f.get(t)?.dispose(),this.f.delete(t),this.e.delete(t)}static o(t){return typeof t.command=="string"&&typeof t.title=="string"}},Vu=class{constructor(e,t,i,r,n){this.e=e,this.f=t,this.g=i,this.h=r,this.j=n,this.d=new ln("DocumentPasteEdit")}async prepareDocumentPaste(e,t,i,r){if(!this.g.prepareDocumentPaste)return;const n=this.f.getDocument(e),s=t.map(c=>W.to(c)),o=Zs.toDataTransfer(i,()=>{throw new xS});if(await this.g.prepareDocumentPaste(n,s,o,r),r.isCancellationRequested)return;const a=Array.from(o).filter(([,c])=>!(c instanceof Kd));return Zs.from(a)}async providePasteEdits(e,t,i,r,n,s){if(!this.g.provideDocumentPasteEdits)return[];const o=this.f.getDocument(t),a=i.map(h=>W.to(h)),c=Zs.toDataTransfer(r,async h=>(await this.e.$resolvePasteFileData(this.h,e,h)).buffer),l=await this.g.provideDocumentPasteEdits(o,a,c,{only:n.only?new ef(n.only):void 0,triggerKind:n.triggerKind},s);if(!l||s.isCancellationRequested)return[];const u=this.d.add(l);return l.map((h,f)=>({_cacheId:[u,f],title:h.title??d(2701,null,this.j.displayName||this.j.name),kind:h.kind,yieldTo:h.yieldTo?.map(g=>g.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?Hi.from(h.additionalEdit,void 0):void 0}))}async resolvePasteEdit(e,t){const[i,r]=e,n=this.d.get(i,r);if(!n||!this.g.resolveDocumentPasteEdit)return{};const s=await this.g.resolveDocumentPasteEdit(n,t)??n;return{additionalEdit:s.additionalEdit?Hi.from(s.additionalEdit,void 0):void 0}}releasePasteEdits(e){this.d.delete(e)}},T9=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentFormattingEdits(e,t,i){const r=this.d.getDocument(e),n=await this.e.provideDocumentFormattingEdits(r,t,i);if(Array.isArray(n))return n.map(gi.from)}},hw=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeFormattingEdits(e,t,i,r){const n=this.d.getDocument(e),s=W.to(t),o=await this.e.provideDocumentRangeFormattingEdits(n,s,i,r);if(Array.isArray(o))return o.map(gi.from)}async provideDocumentRangesFormattingEdits(e,t,i,r){vy(typeof this.e.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const n=this.d.getDocument(e),s=t.map(W.to),o=await this.e.provideDocumentRangesFormattingEdits(n,s,i,r);if(Array.isArray(o))return o.map(gi.from)}},L9=class{constructor(e,t){this.d=e,this.e=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,i,r,n){const s=this.d.getDocument(e),o=lt.to(t),a=await this.e.provideOnTypeFormattingEdits(s,o,i,r,n);if(Array.isArray(a))return a.map(gi.from)}},Mp=class{constructor(e,t){this.e=e,this.f=t,this.d=new ln("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const i=await this.e.provideWorkspaceSymbols(e,t);if(!Hc(i))return{symbols:[]};const r=this.d.add(i),n={cacheId:r,symbols:[]};for(let s=0;s<i.length;s++){const o=i[s];if(!o||!o.name){this.f.warn("INVALID SymbolInformation",o);continue}n.symbols.push({...fu.from(o),cacheId:[r,s]})}return n}async resolveWorkspaceSymbol(e,t){if(typeof this.e.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const i=this.d.get(...e.cacheId);if(i){const r=await this.e.resolveWorkspaceSymbol(i,t);return r&&ko(e,fu.from(r),!0)}}releaseWorkspaceSymbols(e){this.d.delete(e)}},Up=class ab{static supportsResolving(t){return typeof t.prepareRename=="function"}constructor(t,i,r){this.d=t,this.e=i,this.f=r}async provideRenameEdits(t,i,r,n){const s=this.d.getDocument(t),o=lt.to(i);try{const a=await this.e.provideRenameEdits(s,o,r,n);return a?Hi.from(a):void 0}catch(a){const c=ab.g(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(t,i,r){if(typeof this.e.prepareRename!="function")return Promise.resolve(void 0);const n=this.d.getDocument(t),s=lt.to(i);try{const o=await this.e.prepareRename(n,s,r);let a,c;if(Be.isRange(o)?(a=o,c=n.getText(o)):Qt(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>s.line||a.end.line<s.line){this.f.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:W.from(a),text:c}}catch(o){const a=ab.g(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static g(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},dw=class cb{static{this.d={[Jh.Invoke]:Jl.Invoke,[Jh.Automatic]:Jl.Automatic}}constructor(t,i,r){this.e=t,this.f=i,this.g=r}async supportsAutomaticNewSymbolNamesTriggerKind(){return this.f.supportsAutomaticTriggerKind}async provideNewSymbolNames(t,i,r,n){const s=this.e.getDocument(t),o=W.to(i);try{const a=cb.d[r],c=await this.f.provideNewSymbolNames(s,o,a,n);return c?c.map(l=>typeof l=="string"?{newSymbolName:l}:{newSymbolName:l.newSymbolName,tags:l.tags}):void 0}catch(a){this.g.error(cb.h(a)??JSON.stringify(a,null,"	"));return}}static h(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},fw=class{constructor(e,t){this.resultId=e,this.tokens=t}},pw=class hn{constructor(t,i){this.f=t,this.g=i,this.e=1,this.d=new Map}async provideDocumentSemanticTokens(t,i,r){const n=this.f.getDocument(t),s=i!==0?this.d.get(i):null;let o=typeof s?.resultId=="string"&&typeof this.g.provideDocumentSemanticTokensEdits=="function"?await this.g.provideDocumentSemanticTokensEdits(n,s.resultId,r):await this.g.provideDocumentSemanticTokens(n,r);return s&&this.d.delete(i),o?(o=hn.h(o),this.o(hn.n(s,o),o)):null}async releaseDocumentSemanticColoring(t){this.d.delete(t)}static h(t){return hn.j(t)?hn.k(t)?t:new ic(new Uint32Array(t.data),t.resultId):hn.l(t)?hn.m(t)?t:new uf(t.edits.map(i=>new zE(i.start,i.deleteCount,i.data?new Uint32Array(i.data):i.data)),t.resultId):t}static j(t){return t&&!!t.data}static k(t){return t.data instanceof Uint32Array}static l(t){return t&&Array.isArray(t.edits)}static m(t){for(const i of t.edits)if(!(i.data instanceof Uint32Array))return!1;return!0}static n(t,i){if(!hn.j(i)||!t||!t.tokens)return i;const r=t.tokens,n=r.length,s=i.data,o=s.length;let a=0;const c=Math.min(n,o);for(;a<c&&r[a]===s[a];)a++;if(a===n&&a===o)return new uf([],i.resultId);let l=0;const u=c-a;for(;l<u&&r[n-l-1]===s[o-l-1];)l++;return new uf([{start:a,deleteCount:n-a-l,data:s.subarray(a,o-l)}],i.resultId)}o(t,i){if(hn.j(t)){const r=this.e++;return this.d.set(r,new fw(t.resultId,t.data)),nw({id:r,type:"full",data:t.data})}if(hn.l(t)){const r=this.e++;return hn.j(i)?this.d.set(r,new fw(i.resultId,i.data)):this.d.set(r,new fw(t.resultId)),nw({id:r,type:"delta",deltas:(t.edits||[]).map(n=>({start:n.start,deleteCount:n.deleteCount,data:n.data}))})}return null}},_9=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeSemanticTokens(e,t,i){const r=this.d.getDocument(e),n=await this.e.provideDocumentRangeSemanticTokens(r,W.to(t),i);return n?this.f(n):null}f(e){return nw({id:0,type:"full",data:e.data})}},qu=class oS{static supportsResolving(t){return typeof t.resolveCompletionItem=="function"}constructor(t,i,r,n,s){this.f=t,this.g=i,this.h=r,this.j=n,this.k=s,this.d=new ln("CompletionItem"),this.e=new Map}async provideCompletionItems(t,i,r,n){const s=this.f.getDocument(t),o=lt.to(i),a=s.getWordRangeAtPosition(o)||new Be(o,o),c=a.with({end:o}),l=new fo,u=await this.h.provideCompletionItems(s,o,n,vv.to(r));if(!u||n.isCancellationRequested)return;const h=Array.isArray(u)?new qa(u):u,f=oS.supportsResolving(this.h)?this.d.add(h.items):this.d.add([]),g=new He;this.e.set(f,g);const m=[],b={x:f,[pa.completions]:m,[pa.defaultRanges]:{replace:W.from(a),insert:W.from(c)},[pa.isIncomplete]:h.isIncomplete||void 0,[pa.duration]:l.elapsed()};for(let k=0;k<h.items.length;k++){const I=h.items[k],R=this.l(I,[f,k],c,a);m.push(R)}return b}async resolveCompletionItem(t,i){if(typeof this.h.resolveCompletionItem!="function")return;const r=this.d.get(...t);if(!r)return;const n=this.l(r,t),s=await this.h.resolveCompletionItem(r,i);if(!s)return;const o=this.l(s,t);return(n[Me.insertText]!==o[Me.insertText]||n[Me.insertTextRules]!==o[Me.insertTextRules])&&this.j.report("CompletionItem.insertText",this.k,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(n[Me.commandIdent]!==o[Me.commandIdent]||n[Me.commandId]!==o[Me.commandId]||!Qr(n[Me.commandArguments],o[Me.commandArguments]))&&this.j.report("CompletionItem.command",this.k,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...n,[Me.documentation]:o[Me.documentation],[Me.detail]:o[Me.detail],[Me.additionalTextEdits]:o[Me.additionalTextEdits],[Me.insertText]:o[Me.insertText],[Me.insertTextRules]:o[Me.insertTextRules],[Me.commandIdent]:o[Me.commandIdent],[Me.commandId]:o[Me.commandId],[Me.commandArguments]:o[Me.commandArguments]}}releaseCompletionItems(t){this.e.get(t)?.dispose(),this.e.delete(t),this.d.delete(t)}l(t,i,r,n){const s=this.e.get(i[0]);if(!s)throw Error("DisposableStore is missing...");const o=this.g.toInternal(t.command,s),a={x:i,[Me.label]:t.label,[Me.kind]:t.kind!==void 0?Bf.from(t.kind):void 0,[Me.kindModifier]:t.tags&&t.tags.map(Uf.from),[Me.detail]:t.detail,[Me.documentation]:typeof t.documentation>"u"?void 0:Ge.fromStrict(t.documentation),[Me.sortText]:t.sortText!==t.label?t.sortText:void 0,[Me.filterText]:t.filterText!==t.label?t.filterText:void 0,[Me.preselect]:t.preselect||void 0,[Me.insertTextRules]:t.keepWhitespace?Po.KeepWhitespace:Po.None,[Me.commitCharacters]:t.commitCharacters?.join(""),[Me.additionalTextEdits]:t.additionalTextEdits&&t.additionalTextEdits.map(gi.from),[Me.commandIdent]:o?.$ident,[Me.commandId]:o?.id,[Me.commandArguments]:o?.$ident?void 0:o?.arguments};t.textEdit?(this.j.report("CompletionItem.textEdit",this.k,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a[Me.insertText]=t.textEdit.newText):typeof t.insertText=="string"?a[Me.insertText]=t.insertText:t.insertText instanceof Fo&&(a[Me.insertText]=t.insertText.value,a[Me.insertTextRules]|=Po.InsertAsSnippet);let c;return t.textEdit?c=t.textEdit.range:t.range&&(c=t.range),Be.isRange(c)?a[Me.range]=W.from(c):c&&(!r?.isEqual(c.inserting)||!n?.isEqual(c.replacing))&&(a[Me.range]={insert:W.from(c.inserting),replace:W.from(c.replacing)}),a}},Tc=class{async provideInlineCompletions(e,t,i,r){}async provideInlineEdits(e,t,i,r){}disposeCompletions(e){}handleDidShowCompletionItem(e,t,i){}handlePartialAccept(e,t,i,r){}},SL=class extends Tc{constructor(e,t,i,r){super(),this.f=e,this.g=t,this.h=i,this.j=r,this.d=new C9,this.e=pi(this.f,"inlineCompletionsAdditions"),this.k={[qh.Automatic]:Ql.Automatic,[qh.Explicit]:Ql.Invoke}}get supportsHandleEvents(){return pi(this.f,"inlineCompletionsAdditions")&&(typeof this.h.handleDidShowCompletionItem=="function"||typeof this.h.handleDidPartiallyAcceptCompletionItem=="function")}async provideInlineCompletions(e,t,i,r){const n=this.g.getDocument(e),s=lt.to(t),o=await this.h.provideInlineCompletionItems(n,s,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:W.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[i.triggerKind]},r);if(!o||r.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((f,g)=>{let m;f.command&&(u||(u=new He),m=this.j.toInternal(f.command,u));const b=f.insertText;return{insertText:typeof b=="string"?b:{snippet:b.value},filterText:f.filterText,range:f.range?W.from(f.range):void 0,command:m,idx:g,completeBracketPairs:this.e?f.completeBracketPairs:!1}}),commands:c.map(f=>(u||(u=new He),this.j.toInternal(f,u))),suppressSuggestions:!1,enableForwardStability:l}}async provideInlineEdits(e,t,i,r){if(!this.h.provideInlineEdits)return;B(this.f,"inlineCompletionsAdditions");const n=this.g.getDocument(e),s=W.to(t),o=await this.h.provideInlineEdits(n,s,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:W.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[i.triggerKind],userPrompt:i.userPrompt},r);if(!o||r.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((f,g)=>{let m;f.command&&(u||(u=new He),m=this.j.toInternal(f.command,u));const b=f.insertText;return{insertText:typeof b=="string"?b:{snippet:b.value},filterText:f.filterText,range:f.range?W.from(f.range):void 0,command:m,idx:g,completeBracketPairs:this.e?f.completeBracketPairs:!1}}),commands:c.map(f=>(u||(u=new He),this.j.toInternal(f,u))),suppressSuggestions:!1,enableForwardStability:l}}disposeCompletions(e){this.d.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t,i){const r=this.d.get(e)?.items[t];r&&this.h.handleDidShowCompletionItem&&this.e&&this.h.handleDidShowCompletionItem(r,i)}handlePartialAccept(e,t,i,r){const n=this.d.get(e)?.items[t];n&&this.h.handleDidPartiallyAcceptCompletionItem&&this.e&&(this.h.handleDidPartiallyAcceptCompletionItem(n,i),this.h.handleDidPartiallyAcceptCompletionItem(n,Nv.to(r)))}},gw=class{async provideInlineEdits(e,t,i){const r=this.f.getDocument(e),n=await this.g.provideInlineEdit(r,{triggerKind:this.e[t.triggerKind]},i);if(!n||i.isCancellationRequested)return;let s;const o=this.d.createReferenceId({dispose(){s?.dispose()},item:n});let a;n.accepted&&(s||(s=new He),a=this.h.toInternal(n.accepted,s));let c;return n.rejected&&(s||(s=new He),c=this.h.toInternal(n.rejected,s)),{pid:o,text:n.text,range:W.from(n.range),accepted:a,rejected:c}}disposeEdit(e){this.d.disposeReferenceId(e)?.dispose()}constructor(e,t,i,r){this.f=t,this.g=i,this.h=r,this.d=new C9,this.e={[Xh.Automatic]:du.Automatic,[Xh.Invoke]:du.Invoke}}},C9=class{constructor(){this.d=new Map,this.e=1}createReferenceId(e){const t=this.e++;return this.d.set(t,e),t}disposeReferenceId(e){const t=this.d.get(e);return this.d.delete(e),t}get(e){return this.d.get(e)}},mw=class{constructor(e,t){this.e=e,this.f=t,this.d=new ln("SignatureHelp")}async provideSignatureHelp(e,t,i,r){const n=this.e.getDocument(e),s=lt.to(t),o=this.g(i),a=await this.f.provideSignatureHelp(n,s,r,o);if(a){const c=this.d.add([a]);return{...mu.from(a),id:c}}}g(e){let t;if(e.activeSignatureHelp){const i=mu.to(e.activeSignatureHelp),r=this.d.get(e.activeSignatureHelp.id,0);r?(t=r,t.activeSignature=i.activeSignature,t.activeParameter=i.activeParameter):t=i}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this.d.delete(e)}},Bp=class{constructor(e,t,i,r,n){this.f=e,this.g=t,this.h=i,this.j=r,this.k=n,this.d=new ln("InlayHints"),this.e=new Map}async provideInlayHints(e,t,i){const r=this.f.getDocument(e),n=W.to(t),s=await this.h.provideInlayHints(r,n,i);if(!Array.isArray(s)||s.length===0){this.j.trace(`[InlayHints] NO inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`);return}if(i.isCancellationRequested)return;const o=this.d.add(s);this.e.set(o,new He);const a={hints:[],cacheId:o};for(let c=0;c<s.length;c++)this.l(s[c],n)&&a.hints.push(this.m(s[c],[o,c]));return this.j.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`),a}async resolveInlayHint(e,t){if(typeof this.h.resolveInlayHint!="function")return;const i=this.d.get(...e);if(!i)return;const r=await this.h.resolveInlayHint(i,t);if(r&&this.l(r))return this.m(r,e)}releaseHints(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}l(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(i=>i.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}m(e,t){const i=this.e.get(t[0]);if(!i)throw Error("DisposableStore is missing...");const r={label:"",cacheId:t,tooltip:Ge.fromStrict(e.tooltip),position:lt.from(e.position),textEdits:e.textEdits&&e.textEdits.map(gi.from),kind:e.kind&&Wf.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")r.label=e.label;else{const n=[];r.label=n;for(const s of e.label){if(!s.value){console.warn("INVALID inlay hint, empty label part",this.k.identifier.value);continue}const o={label:s.value,tooltip:Ge.fromStrict(s.tooltip)};kr.isLocation(s.location)&&(o.location=Yi.from(s.location)),s.command&&(o.command=this.g.toInternal(s.command,i)),n.push(o)}}return r}},Hp=class fg{constructor(t,i){this.e=t,this.f=i,this.d=new ln("DocumentLink")}async provideLinks(t,i){const r=this.e.getDocument(t),n=await this.f.provideDocumentLinks(r,i);if(!(!Array.isArray(n)||n.length===0)&&!i.isCancellationRequested){if(typeof this.f.resolveDocumentLink!="function")return{links:n.filter(fg.g).map(Jo.from)};{const s=this.d.add(n),o={links:[],cacheId:s};for(let a=0;a<n.length;a++){if(!fg.g(n[a]))continue;const c=Jo.from(n[a]);c.cacheId=[s,a],o.links.push(c)}return o}}}static g(t){return t.target&&t.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(t,i){if(typeof this.f.resolveDocumentLink!="function")return;const r=this.d.get(...t);if(!r)return;const n=await this.f.resolveDocumentLink(r,i);if(!(!n||!fg.g(n)))return Jo.from(n)}releaseLinks(t){this.d.delete(t)}},vw=class{constructor(e,t){this.d=e,this.e=t}async provideColors(e,t){const i=this.d.getDocument(e),r=await this.e.provideDocumentColors(i,t);return Array.isArray(r)?r.map(s=>({color:hc.from(s.color),range:W.from(s.range)})):[]}async provideColorPresentations(e,t,i){const r=this.d.getDocument(e),n=W.to(t.range),s=hc.to(t.color),o=await this.e.provideColorPresentations(s,{document:r,range:n},i);if(Array.isArray(o))return o.map(zf.from)}},N9=class{constructor(e,t){this.d=e,this.e=t}async provideFoldingRanges(e,t,i){const r=this.d.getDocument(e),n=await this.e.provideFoldingRanges(r,t,i);if(Array.isArray(n))return n.map(qf.from)}},O9=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideSelectionRanges(e,t,i){const r=this.d.getDocument(e),n=t.map(lt.to),s=await this.e.provideSelectionRanges(r,n,i);if(!Hc(s))return[];if(s.length!==n.length)return this.f.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<n.length;a++){const c=[];o.push(c);let l=n[a],u=s[a];for(;;){if(!u.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(c.push(Ev.from(u)),!u.parent)break;l=u.range,u=u.parent}}return o}},Gu=class{constructor(e,t){this.f=e,this.g=t,this.d=new Ep(""),this.e=new Map}async prepareSession(e,t,i){const r=this.f.getDocument(e),n=lt.to(t),s=await this.g.prepareCallHierarchy(r,n,i);if(!s)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(s)?s.map(a=>this.h(o,a)):[this.h(o,s)]}async provideCallsTo(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing call hierarchy item");const n=await this.g.provideCallHierarchyIncomingCalls(r,i);if(n)return n.map(s=>({from:this.h(e,s.from),fromRanges:s.fromRanges.map(o=>W.from(o))}))}async provideCallsFrom(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing call hierarchy item");const n=await this.g.provideCallHierarchyOutgoingCalls(r,i);if(n)return n.map(s=>({to:this.h(e,s.to),fromRanges:s.fromRanges.map(o=>W.from(o))}))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),r=Qo.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}j(e,t){return this.e.get(e)?.get(t)}},Qu=class{constructor(e,t){this.f=e,this.g=t,this.d=new Ep(""),this.e=new Map}async prepareSession(e,t,i){const r=this.f.getDocument(e),n=lt.to(t),s=await this.g.prepareTypeHierarchy(r,n,i);if(!s)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(s)?s.map(a=>this.h(o,a)):[this.h(o,s)]}async provideSupertypes(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing type hierarchy item");const n=await this.g.provideTypeHierarchySupertypes(r,i);if(n)return n.map(s=>this.h(e,s))}async provideSubtypes(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing type hierarchy item");const n=await this.g.provideTypeHierarchySubtypes(r,i);if(n)return n.map(s=>this.h(e,s))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),r=Xo.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}j(e,t){return this.e.get(e)?.get(t)}},jp=class{constructor(e,t,i,r,n){this.e=e,this.f=t,this.g=i,this.h=r,this.j=n,this.d=new ln("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,i,r,n){const s=this.f.getDocument(t),o=lt.to(i),a=Zs.toDataTransfer(r,async h=>(await this.e.$resolveDocumentOnDropFileData(this.h,e,h)).buffer),c=await this.g.provideDocumentDropEdits(s,o,a,n);if(!c)return;const l=fn(c),u=this.d.add(l);return l.map((h,f)=>({_cacheId:[u,f],title:h.title??d(2702,null,this.j.displayName||this.j.name),kind:h.kind?.value,yieldTo:h.yieldTo?.map(g=>g.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?Hi.from(h.additionalEdit,void 0):void 0}))}async resolveDropEdit(e,t){const[i,r]=e,n=this.d.get(i,r);if(!n||!this.g.resolveDocumentDropEdit)return{};const s=await this.g.resolveDocumentDropEdit(n,t)??n;return{additionalEdit:s.additionalEdit?Hi.from(s.additionalEdit,void 0):void 0}}releaseDropEdits(e){this.d.delete(e)}},F9=class{constructor(e,t){this.d=e,this.e=t}async provideMappedEdits(e,t,i,r){const n=E.revive(e),s=this.d.getDocument(n),o=i.documents.map(l=>l.map(u=>({uri:E.revive(u.uri),version:u.version,ranges:u.ranges.map(h=>W.to(h))}))),a={documents:o,selections:o[0]?.[0]?.ranges??[]},c=await this.e.provideMappedEdits(s,t,a,r);return c?Hi.from(c):null}},Ju=class{constructor(e,t){this.adapter=e,this.extension=t}},xL=class vi{static{this.d=0}constructor(t,i,r,n,s,o,a,c){this.g=i,this.h=r,this.j=n,this.k=s,this.l=o,this.m=a,this.n=c,this.f=new Map,this.e=t.getProxy(se.MainThreadLanguageFeatures)}o(t,i){return ac.from(t,this.g,i)}p(t){return new Ye(()=>{this.f.delete(t),this.e.$unregister(t)})}q(){return vi.d++}async s(t,i,r,n,s,o=!1){const a=this.f.get(t);if(!a||!(a.adapter instanceof i))return n;const c=Date.now();o||this.l.trace(`[${a.extension.identifier.value}] INVOKE provider '${r.toString().replace(/[\r\n]/g,"")}'`);const l=r(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{co(u)||(this.l.error(`[${a.extension.identifier.value}] provider FAILED`),this.l.error(u),this.n.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this.l.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),Wt.isCancellationToken(s)?Uk(l,s):l}t(t,i){const r=this.q();return this.f.set(r,new Ju(t,i)),r}static u(t){return t.displayName||t.name}static w(t){return t.identifier.value}registerDocumentSymbolProvider(t,i,r,n){const s=this.t(new y9(this.h,r),t),o=n&&n.label||vi.u(t);return this.e.$registerDocumentSymbolProvider(s,this.o(i,t),o),this.p(s)}$provideDocumentSymbols(t,i,r){return this.s(t,y9,n=>n.provideDocumentSymbols(E.revive(i),r),void 0,r)}registerCodeLensProvider(t,i,r){const n=this.q(),s=typeof r.onDidChangeCodeLenses=="function"?this.q():void 0;this.f.set(n,new Ju(new Np(this.h,this.j.converter,r,t,this.n,this.l),t)),this.e.$registerCodeLensSupport(n,this.o(i,t),s);let o=this.p(n);if(s!==void 0){const a=r.onDidChangeCodeLenses(c=>this.e.$emitCodeLensEvent(s));o=Ye.from(o,a)}return o}$provideCodeLenses(t,i,r){return this.s(t,Np,n=>n.provideCodeLenses(E.revive(i),r),void 0,r)}$resolveCodeLens(t,i,r){return this.s(t,Np,n=>n.resolveCodeLens(i,r),void 0,void 0)}$releaseCodeLenses(t,i){this.s(t,Np,r=>Promise.resolve(r.releaseCodeLenses(i)),void 0,void 0)}registerDefinitionProvider(t,i,r){const n=this.t(new E9(this.h,r),t);return this.e.$registerDefinitionSupport(n,this.o(i,t)),this.p(n)}$provideDefinition(t,i,r,n){return this.s(t,E9,s=>s.provideDefinition(E.revive(i),r,n),[],n)}registerDeclarationProvider(t,i,r){const n=this.t(new S9(this.h,r),t);return this.e.$registerDeclarationSupport(n,this.o(i,t)),this.p(n)}$provideDeclaration(t,i,r,n){return this.s(t,S9,s=>s.provideDeclaration(E.revive(i),r,n),[],n)}registerImplementationProvider(t,i,r){const n=this.t(new x9(this.h,r),t);return this.e.$registerImplementationSupport(n,this.o(i,t)),this.p(n)}$provideImplementation(t,i,r,n){return this.s(t,x9,s=>s.provideImplementation(E.revive(i),r,n),[],n)}registerTypeDefinitionProvider(t,i,r){const n=this.t(new k9(this.h,r),t);return this.e.$registerTypeDefinitionSupport(n,this.o(i,t)),this.p(n)}$provideTypeDefinition(t,i,r,n){return this.s(t,k9,s=>s.provideTypeDefinition(E.revive(i),r,n),[],n)}registerHoverProvider(t,i,r,n){const s=this.t(new uw(this.h,r),t);return this.e.$registerHoverProvider(s,this.o(i,t)),this.p(s)}$provideHover(t,i,r,n,s){return this.s(t,uw,o=>o.provideHover(E.revive(i),r,n,s),void 0,s)}$releaseHover(t,i){this.s(t,uw,r=>Promise.resolve(r.releaseHover(i)),void 0,void 0)}registerEvaluatableExpressionProvider(t,i,r,n){const s=this.t(new D9(this.h,r),t);return this.e.$registerEvaluatableExpressionProvider(s,this.o(i,t)),this.p(s)}$provideEvaluatableExpression(t,i,r,n){return this.s(t,D9,s=>s.provideEvaluatableExpression(E.revive(i),r,n),void 0,n)}registerInlineValuesProvider(t,i,r,n){const s=typeof r.onDidChangeInlineValues=="function"?this.q():void 0,o=this.t(new $9(this.h,r),t);this.e.$registerInlineValuesProvider(o,this.o(i,t),s);let a=this.p(o);if(s!==void 0){const c=r.onDidChangeInlineValues(l=>this.e.$emitInlineValuesEvent(s));a=Ye.from(a,c)}return a}$provideInlineValues(t,i,r,n,s){return this.s(t,$9,o=>o.provideInlineValues(E.revive(i),r,n,s),void 0,s)}registerDocumentHighlightProvider(t,i,r){const n=this.t(new I9(this.h,r),t);return this.e.$registerDocumentHighlightProvider(n,this.o(i,t)),this.p(n)}registerMultiDocumentHighlightProvider(t,i,r){const n=this.t(new A9(this.h,r),t);return this.e.$registerMultiDocumentHighlightProvider(n,this.o(i,t)),this.p(n)}$provideDocumentHighlights(t,i,r,n){return this.s(t,I9,s=>s.provideDocumentHighlights(E.revive(i),r,n),void 0,n)}$provideMultiDocumentHighlights(t,i,r,n,s){return this.s(t,A9,o=>o.provideMultiDocumentHighlights(E.revive(i),r,n.map(a=>E.revive(a)),s),void 0,s)}registerLinkedEditingRangeProvider(t,i,r){const n=this.t(new P9(this.h,r),t);return this.e.$registerLinkedEditingRangeProvider(n,this.o(i,t)),this.p(n)}$provideLinkedEditingRanges(t,i,r,n){return this.s(t,P9,async s=>{const o=await s.provideLinkedEditingRanges(E.revive(i),r,n);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?vi.y(o.wordPattern):void 0}},void 0,n)}registerReferenceProvider(t,i,r){const n=this.t(new R9(this.h,r),t);return this.e.$registerReferenceSupport(n,this.o(i,t)),this.p(n)}$provideReferences(t,i,r,n,s){return this.s(t,R9,o=>o.provideReferences(E.revive(i),r,n,s),void 0,s)}registerCodeActionProvider(t,i,r,n){const s=new He,o=this.t(new Fp(this.h,this.j.converter,this.k,r,this.l,t,this.m),t);return this.e.$registerCodeActionSupport(o,this.o(i,t),{providedKinds:n?.providedCodeActionKinds?.map(a=>a.value),documentation:n?.documentation?.map(a=>({kind:a.kind.value,command:this.j.converter.toInternal(a.command,s)}))},vi.u(t),vi.w(t),!!r.resolveCodeAction),s.add(this.p(o)),s}$provideCodeActions(t,i,r,n,s){return this.s(t,Fp,o=>o.provideCodeActions(E.revive(i),r,n,s),void 0,s)}$resolveCodeAction(t,i,r){return this.s(t,Fp,n=>n.resolveCodeAction(i,r),{},void 0)}$releaseCodeActions(t,i){this.s(t,Fp,r=>Promise.resolve(r.releaseCodeActions(i)),void 0,void 0)}registerDocumentFormattingEditProvider(t,i,r){const n=this.t(new T9(this.h,r),t);return this.e.$registerDocumentFormattingSupport(n,this.o(i,t),t.identifier,t.displayName||t.name),this.p(n)}$provideDocumentFormattingEdits(t,i,r,n){return this.s(t,T9,s=>s.provideDocumentFormattingEdits(E.revive(i),r,n),void 0,n)}registerDocumentRangeFormattingEditProvider(t,i,r){const n=typeof r.provideDocumentRangesFormattingEdits=="function",s=this.t(new hw(this.h,r),t);return this.e.$registerRangeFormattingSupport(s,this.o(i,t),t.identifier,t.displayName||t.name,n),this.p(s)}$provideDocumentRangeFormattingEdits(t,i,r,n,s){return this.s(t,hw,o=>o.provideDocumentRangeFormattingEdits(E.revive(i),r,n,s),void 0,s)}$provideDocumentRangesFormattingEdits(t,i,r,n,s){return this.s(t,hw,o=>o.provideDocumentRangesFormattingEdits(E.revive(i),r,n,s),void 0,s)}registerOnTypeFormattingEditProvider(t,i,r,n){const s=this.t(new L9(this.h,r),t);return this.e.$registerOnTypeFormattingSupport(s,this.o(i,t),n,t.identifier),this.p(s)}$provideOnTypeFormattingEdits(t,i,r,n,s,o){return this.s(t,L9,a=>a.provideOnTypeFormattingEdits(E.revive(i),r,n,s,o),void 0,o)}registerWorkspaceSymbolProvider(t,i){const r=this.t(new Mp(i,this.l),t);return this.e.$registerNavigateTypeSupport(r,typeof i.resolveWorkspaceSymbol=="function"),this.p(r)}$provideWorkspaceSymbols(t,i,r){return this.s(t,Mp,n=>n.provideWorkspaceSymbols(i,r),{symbols:[]},r)}$resolveWorkspaceSymbol(t,i,r){return this.s(t,Mp,n=>n.resolveWorkspaceSymbol(i,r),void 0,void 0)}$releaseWorkspaceSymbols(t,i){this.s(t,Mp,r=>r.releaseWorkspaceSymbols(i),void 0,void 0)}registerRenameProvider(t,i,r){const n=this.t(new Up(this.h,r,this.l),t);return this.e.$registerRenameSupport(n,this.o(i,t),Up.supportsResolving(r)),this.p(n)}$provideRenameEdits(t,i,r,n,s){return this.s(t,Up,o=>o.provideRenameEdits(E.revive(i),r,n,s),void 0,s)}$resolveRenameLocation(t,i,r,n){return this.s(t,Up,s=>s.resolveRenameLocation(E.revive(i),r,n),void 0,n)}registerNewSymbolNamesProvider(t,i,r){const n=this.t(new dw(this.h,r,this.l),t);return this.e.$registerNewSymbolNamesProvider(n,this.o(i,t)),this.p(n)}$supportsAutomaticNewSymbolNamesTriggerKind(t){return this.s(t,dw,i=>i.supportsAutomaticNewSymbolNamesTriggerKind(),!1,void 0)}$provideNewSymbolNames(t,i,r,n,s){return this.s(t,dw,o=>o.provideNewSymbolNames(E.revive(i),r,n,s),void 0,s)}registerDocumentSemanticTokensProvider(t,i,r,n){const s=this.t(new pw(this.h,r),t),o=typeof r.onDidChangeSemanticTokens=="function"?this.q():void 0;this.e.$registerDocumentSemanticTokensProvider(s,this.o(i,t),n,o);let a=this.p(s);if(o){const c=r.onDidChangeSemanticTokens(l=>this.e.$emitDocumentSemanticTokensEvent(o));a=Ye.from(a,c)}return a}$provideDocumentSemanticTokens(t,i,r,n){return this.s(t,pw,s=>s.provideDocumentSemanticTokens(E.revive(i),r,n),null,n)}$releaseDocumentSemanticTokens(t,i){this.s(t,pw,r=>r.releaseDocumentSemanticColoring(i),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(t,i,r,n){const s=this.t(new _9(this.h,r),t);return this.e.$registerDocumentRangeSemanticTokensProvider(s,this.o(i,t),n),this.p(s)}$provideDocumentRangeSemanticTokens(t,i,r,n){return this.s(t,_9,s=>s.provideDocumentRangeSemanticTokens(E.revive(i),r,n),null,n)}registerCompletionItemProvider(t,i,r,n){const s=this.t(new qu(this.h,this.j.converter,r,this.m,t),t);return this.e.$registerCompletionsProvider(s,this.o(i,t),n,qu.supportsResolving(r),t.identifier),this.p(s)}$provideCompletionItems(t,i,r,n,s){return this.s(t,qu,o=>o.provideCompletionItems(E.revive(i),r,n,s),void 0,s)}$resolveCompletionItem(t,i,r){return this.s(t,qu,n=>n.resolveCompletionItem(i,r),void 0,r)}$releaseCompletionItems(t,i){this.s(t,qu,r=>r.releaseCompletionItems(i),void 0,void 0)}registerInlineCompletionsProvider(t,i,r,n){const s=new SL(t,this.h,r,this.j.converter),o=this.t(s,t);return this.e.$registerInlineCompletionsSupport(o,this.o(i,t),s.supportsHandleEvents,dt.toKey(t.identifier.value),n?.yieldTo?.map(a=>dt.toKey(a))||[]),this.p(o)}$provideInlineCompletions(t,i,r,n,s){return this.s(t,Tc,o=>o.provideInlineCompletions(E.revive(i),r,n,s),void 0,s)}$provideInlineEdits(t,i,r,n,s){return this.s(t,Tc,o=>o.provideInlineEdits(E.revive(i),r,n,s),void 0,s)}$handleInlineCompletionDidShow(t,i,r,n){this.s(t,Tc,async s=>{s.handleDidShowCompletionItem(i,r,n)},void 0,void 0)}$handleInlineCompletionPartialAccept(t,i,r,n,s){this.s(t,Tc,async o=>{o.handlePartialAccept(i,r,n,s)},void 0,void 0)}$freeInlineCompletionsList(t,i){this.s(t,Tc,async r=>{r.disposeCompletions(i)},void 0,void 0)}registerInlineEditProvider(t,i,r){const n=new gw(t,this.h,r,this.j.converter),s=this.t(n,t);return this.e.$registerInlineEditProvider(s,this.o(i,t),t.identifier),this.p(s)}$provideInlineEdit(t,i,r,n){return this.s(t,gw,s=>s.provideInlineEdits(E.revive(i),r,n),void 0,n)}$freeInlineEdit(t,i){this.s(t,gw,async r=>{r.disposeEdit(i)},void 0,void 0)}registerSignatureHelpProvider(t,i,r,n){const s=Array.isArray(n)?{triggerCharacters:n,retriggerCharacters:[]}:n,o=this.t(new mw(this.h,r),t);return this.e.$registerSignatureHelpProvider(o,this.o(i,t),s),this.p(o)}$provideSignatureHelp(t,i,r,n,s){return this.s(t,mw,o=>o.provideSignatureHelp(E.revive(i),r,n,s),void 0,s)}$releaseSignatureHelp(t,i){this.s(t,mw,r=>r.releaseSignatureHelp(i),void 0,void 0)}registerInlayHintsProvider(t,i,r){const n=typeof r.onDidChangeInlayHints=="function"?this.q():void 0,s=this.t(new Bp(this.h,this.j.converter,r,this.l,t),t);this.e.$registerInlayHintsProvider(s,this.o(i,t),typeof r.resolveInlayHint=="function",n,vi.u(t));let o=this.p(s);if(n!==void 0){const a=r.onDidChangeInlayHints(c=>this.e.$emitInlayHintsEvent(n));o=Ye.from(o,a)}return o}$provideInlayHints(t,i,r,n){return this.s(t,Bp,s=>s.provideInlayHints(E.revive(i),r,n),void 0,n)}$resolveInlayHint(t,i,r){return this.s(t,Bp,n=>n.resolveInlayHint(i,r),void 0,r)}$releaseInlayHints(t,i){this.s(t,Bp,r=>r.releaseHints(i),void 0,void 0)}registerDocumentLinkProvider(t,i,r){const n=this.t(new Hp(this.h,r),t);return this.e.$registerDocumentLinkProvider(n,this.o(i,t),typeof r.resolveDocumentLink=="function"),this.p(n)}$provideDocumentLinks(t,i,r){return this.s(t,Hp,n=>n.provideLinks(E.revive(i),r),void 0,r,i.scheme==="output")}$resolveDocumentLink(t,i,r){return this.s(t,Hp,n=>n.resolveLink(i,r),void 0,void 0,!0)}$releaseDocumentLinks(t,i){this.s(t,Hp,r=>r.releaseLinks(i),void 0,void 0,!0)}registerColorProvider(t,i,r){const n=this.t(new vw(this.h,r),t);return this.e.$registerDocumentColorProvider(n,this.o(i,t)),this.p(n)}$provideDocumentColors(t,i,r){return this.s(t,vw,n=>n.provideColors(E.revive(i),r),[],r)}$provideColorPresentations(t,i,r,n){return this.s(t,vw,s=>s.provideColorPresentations(E.revive(i),r,n),void 0,n)}registerFoldingRangeProvider(t,i,r){const n=this.q(),s=typeof r.onDidChangeFoldingRanges=="function"?this.q():void 0;this.f.set(n,new Ju(new N9(this.h,r),t)),this.e.$registerFoldingRangeProvider(n,this.o(i,t),t.identifier,s);let o=this.p(n);if(s!==void 0){const a=r.onDidChangeFoldingRanges(()=>this.e.$emitFoldingRangeEvent(s));o=Ye.from(o,a)}return o}$provideFoldingRanges(t,i,r,n){return this.s(t,N9,s=>s.provideFoldingRanges(E.revive(i),r,n),void 0,n)}registerSelectionRangeProvider(t,i,r){const n=this.t(new O9(this.h,r,this.l),t);return this.e.$registerSelectionRangeProvider(n,this.o(i,t)),this.p(n)}$provideSelectionRanges(t,i,r,n){return this.s(t,O9,s=>s.provideSelectionRanges(E.revive(i),r,n),[],n)}registerCallHierarchyProvider(t,i,r){const n=this.t(new Gu(this.h,r),t);return this.e.$registerCallHierarchyProvider(n,this.o(i,t)),this.p(n)}$prepareCallHierarchy(t,i,r,n){return this.s(t,Gu,s=>Promise.resolve(s.prepareSession(E.revive(i),r,n)),void 0,n)}$provideCallHierarchyIncomingCalls(t,i,r,n){return this.s(t,Gu,s=>s.provideCallsTo(i,r,n),void 0,n)}$provideCallHierarchyOutgoingCalls(t,i,r,n){return this.s(t,Gu,s=>s.provideCallsFrom(i,r,n),void 0,n)}$releaseCallHierarchy(t,i){this.s(t,Gu,r=>Promise.resolve(r.releaseSession(i)),void 0,void 0)}registerTypeHierarchyProvider(t,i,r){const n=this.t(new Qu(this.h,r),t);return this.e.$registerTypeHierarchyProvider(n,this.o(i,t)),this.p(n)}$prepareTypeHierarchy(t,i,r,n){return this.s(t,Qu,s=>Promise.resolve(s.prepareSession(E.revive(i),r,n)),void 0,n)}$provideTypeHierarchySupertypes(t,i,r,n){return this.s(t,Qu,s=>s.provideSupertypes(i,r,n),void 0,n)}$provideTypeHierarchySubtypes(t,i,r,n){return this.s(t,Qu,s=>s.provideSubtypes(i,r,n),void 0,n)}$releaseTypeHierarchy(t,i){this.s(t,Qu,r=>Promise.resolve(r.releaseSession(i)),void 0,void 0)}registerDocumentOnDropEditProvider(t,i,r,n){const s=this.q();return this.f.set(s,new Ju(new jp(this.e,this.h,r,s,t),t)),this.e.$registerDocumentOnDropEditProvider(s,this.o(i,t),pi(t,"documentPaste")&&n?{supportsResolve:!!r.resolveDocumentDropEdit,dropMimeTypes:n.dropMimeTypes}:void 0),this.p(s)}$provideDocumentOnDropEdits(t,i,r,n,s,o){return this.s(t,jp,a=>Promise.resolve(a.provideDocumentOnDropEdits(i,E.revive(r),n,s,o)),void 0,void 0)}$resolveDropEdit(t,i,r){return this.s(t,jp,n=>n.resolveDropEdit(i,r),{},void 0)}$releaseDocumentOnDropEdits(t,i){this.s(t,jp,r=>Promise.resolve(r.releaseDropEdits(i)),void 0,void 0)}registerMappedEditsProvider(t,i,r){const n=this.t(new F9(this.h,r),t);return this.e.$registerMappedEditsProvider(n,this.o(i,t),t.displayName??t.name),this.p(n)}$provideMappedEdits(t,i,r,n,s){return this.s(t,F9,o=>Promise.resolve(o.provideMappedEdits(i,r,n,s)),null,s)}registerDocumentPasteEditProvider(t,i,r,n){const s=this.q();return this.f.set(s,new Ju(new Vu(this.e,this.h,r,s,t),t)),this.e.$registerPasteEditProvider(s,this.o(i,t),{supportsCopy:!!r.prepareDocumentPaste,supportsPaste:!!r.provideDocumentPasteEdits,supportsResolve:!!r.resolveDocumentPasteEdit,providedPasteEditKinds:n.providedPasteEditKinds?.map(o=>o.value),copyMimeTypes:n.copyMimeTypes,pasteMimeTypes:n.pasteMimeTypes}),this.p(s)}$prepareDocumentPaste(t,i,r,n,s){return this.s(t,Vu,o=>o.prepareDocumentPaste(E.revive(i),r,n,s),void 0,s)}$providePasteEdits(t,i,r,n,s,o,a){return this.s(t,Vu,c=>c.providePasteEdits(i,E.revive(r),n,s,o,a),void 0,a)}$resolvePasteEdit(t,i,r){return this.s(t,Vu,n=>n.resolvePasteEdit(i,r),{},void 0)}$releasePasteEdits(t,i){this.s(t,Vu,r=>Promise.resolve(r.releasePasteEdits(i)),void 0,void 0)}static y(t){return{pattern:t.source,flags:t.flags}}static z(t){return{decreaseIndentPattern:vi.y(t.decreaseIndentPattern),increaseIndentPattern:vi.y(t.increaseIndentPattern),indentNextLinePattern:t.indentNextLinePattern?vi.y(t.indentNextLinePattern):void 0,unIndentedLinePattern:t.unIndentedLinePattern?vi.y(t.unIndentedLinePattern):void 0}}static B(t){return{beforeText:vi.y(t.beforeText),afterText:t.afterText?vi.y(t.afterText):void 0,previousLineText:t.previousLineText?vi.y(t.previousLineText):void 0,action:t.action}}static C(t){return t.map(vi.B)}static D(t){return{open:t.open,close:t.close,notIn:t.notIn?t.notIn.map(i=>Ja.toString(i)):void 0}}static E(t){return t.map(vi.D)}setLanguageConfiguration(t,i,r){const{wordPattern:n}=r;if(n&&sy(n))throw new Error(`Invalid language configuration: wordPattern '${n}' is not allowed to match the empty string.`);n?this.h.setWordDefinitionFor(i,n):this.h.setWordDefinitionFor(i,void 0),r.__electricCharacterSupport&&this.m.report("LanguageConfiguration.__electricCharacterSupport",t,"Do not use."),r.__characterPairSupport&&this.m.report("LanguageConfiguration.__characterPairSupport",t,"Do not use.");const s=this.q(),o={comments:r.comments,brackets:r.brackets,wordPattern:r.wordPattern?vi.y(r.wordPattern):void 0,indentationRules:r.indentationRules?vi.z(r.indentationRules):void 0,onEnterRules:r.onEnterRules?vi.C(r.onEnterRules):void 0,__electricCharacterSupport:r.__electricCharacterSupport,__characterPairSupport:r.__characterPairSupport,autoClosingPairs:r.autoClosingPairs?vi.E(r.autoClosingPairs):void 0};return this.e.$setLanguageConfiguration(s,i,o),this.p(s)}$setWordDefinitions(t){for(const i of t)this.h.setWordDefinitionFor(i.languageId,new RegExp(i.regexSource,i.regexFlags))}},kL=class{constructor(e){this.a=new Map,this.c=new Map,this.b=e.getProxy(se.MainThreadLanguageModelTools),this.b.$getTools().then(t=>{for(const i of t)this.c.set(i.id,Gi(i))})}async invokeTool(e,t,i){const r=await this.b.$invokeTool(e,t,i);return up.to(r)}async $acceptToolDelta(e){e.added&&this.c.set(e.added.id,e.added),e.removed&&this.c.delete(e.removed)}get tools(){return Array.from(this.c.values()).map(e=>Mv.to(e))}async $invokeTool(e,t,i){const r=this.a.get(e);if(!r)throw new Error(`Unknown tool ${e}`);const n=await r.tool.invoke(t,i);return up.from(n)}registerTool(e,t,i){return this.a.set(t,{extension:e,tool:i}),this.b.$registerTool(t),Ce(()=>{this.a.delete(t),this.b.$unregisterTool(t)})}},DL=class{constructor(e,t,i,r){this.c=t,this.d=i,this.e=r,this.b=[],this.f=0,this.g=new Set,this.a=e.getProxy(se.MainThreadLanguages)}$acceptLanguageIds(e){this.b=e}async getLanguages(){return this.b.slice(0)}async changeLanguage(e,t){await this.a.$changeLanguage(e,t);const i=this.c.getDocumentData(e);if(!i)throw new Error(`document '${e.toString()}' NOT found`);return i.document}async tokenAtPosition(e,t){const i=e.version,r=lt.from(t),n=await this.a.$tokensAtPosition(e.uri,r),s={type:qs.Other,range:e.getWordRangeAtPosition(t)??new Be(t.line,t.character,t.line,t.character)};if(!n)return s;const o={range:W.to(n.range),type:cv.to(n.type)};return!o.range.contains(t)||i!==e.version?s:o}createLanguageStatusItem(e,t,i){const r=this.f++,n=this.a,s=this.g,o=`${e.identifier.value}/${t}`;if(s.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);s.add(o);const a={selector:i,id:t,name:e.displayName??e.name,severity:za.Information,command:void 0,text:"",detail:"",busy:!1};let c;const l=new He,u=()=>{if(c?.dispose(),!s.has(o)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}c=qk(()=>{l.clear(),this.a.$setLanguageStatus(r,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:ac.from(a.selector,this.e),label:a.text,detail:a.detail??"",severity:a.severity===za.Error?Zt.Error:a.severity===za.Warning?Zt.Warning:Zt.Info,command:a.command&&this.d.toInternal(a.command,l),accessibilityInfo:a.accessibilityInformation,busy:a.busy})},0)},h={dispose(){l.dispose(),c?.dispose(),n.$removeLanguageStatus(r),s.delete(o)},get id(){return a.id},get name(){return a.name},set name(f){a.name=f,u()},get selector(){return a.selector},set selector(f){a.selector=f,u()},get text(){return a.text},set text(f){a.text=f,u()},set text2(f){B(e,"languageStatusText"),a.text=f,u()},get text2(){return B(e,"languageStatusText"),a.text},get detail(){return a.detail},set detail(f){a.detail=f,u()},get severity(){return a.severity},set severity(f){a.severity=f,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(f){a.accessibilityInformation=f,u()},get command(){return a.command},set command(f){a.command=f,u()},get busy(){return a.busy},set busy(f){a.busy=f,u()}};return u(),h}};function $L(e){return e&&e.title}var ww=class{constructor(t,i){this.b=i,this.a=t.getProxy(se.MainThreadMessageService)}showMessage(t,i,r,n,s){const o={source:{identifier:t.identifier,label:t.displayName||t.name}};let a;typeof n=="string"||$L(n)?a=[n,...s]:(o.modal=n?.modal,o.useCustom=n?.useCustom,o.detail=n?.detail,a=s),o.useCustom&&B(t,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const h=a[u];if(typeof h=="string")c.push({title:h,handle:u,isCloseAffordance:!1});else if(typeof h=="object"){const{title:f,isCloseAffordance:g}=h;c.push({title:f,isCloseAffordance:!!g,handle:u}),g&&(l?this.b.warn(`[${t.identifier}] Only one message item can have 'isCloseAffordance':`,h):l=!0)}else this.b.warn(`[${t.identifier}] Invalid message item:`,h)}return this.a.$showMessage(i,r,o,c).then(u=>{if(typeof u=="number")return a[u]})}};ww=__decorate([__param(1,ut)],ww);var bw=class{constructor(e,t,i,r){this.start=e,this.deletedCount=t,this.deletedItems=i,this.items=r}asApiEvent(){return{range:new is(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}},yw=class{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1}}constructor(e,t,i){this.notebook=e,this.h=t,this.j=i,this.handle=i.handle,this.uri=E.revive(i.uri),this.cellKind=i.cellKind,this.a=i.outputs.map(Js.to),this.e=i.internalMetadata??{},this.b=Object.freeze(i.metadata??{}),this.d=Object.freeze(pc.to(i.internalMetadata??{}))}get internalMetadata(){return this.e}get apiCell(){if(!this.f){const e=this,t=this.h.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const i={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:wu.to(this.j.cellKind),document:t.document,get mime(){return e.g},set mime(r){e.g=r},get outputs(){return e.a.slice(0)},get metadata(){return e.b},get executionSummary(){return e.d}};this.f=Object.freeze(i)}return this.f}setOutputs(e){this.a=e.map(Js.to)}setOutputItems(e,t,i){const r=i.map(gc.to),n=this.a.find(s=>s.id===e);if(n&&(t||(n.items.length=0),n.items.push(...r),n.items.length>1&&n.items.every(s=>DE(s.mime)))){const s=new Map,o=[];n.items.forEach(a=>{let c;s.has(a.mime)?c=s.get(a.mime):(c=[],s.set(a.mime,c),o.push(a.mime)),c.push(a.data)}),n.items.length=0,o.forEach(a=>{const c=fA(s.get(a));n.items.push({mime:a,data:c.data.buffer})})}}setMetadata(e){this.b=Object.freeze(e)}setInternalMetadata(e){this.e=e,this.d=Object.freeze(pc.to(e))}setMime(e){}},IL=class aS{static{this.a=0}constructor(t,i,r,n,s){this.k=t,this.l=i,this.m=r,this.uri=n,this.handle=aS.a++,this.b=[],this.g=0,this.h=!1,this.j=!1,this.d=s.viewType,this.f=Object.freeze(s.metadata??Object.create(null)),this.r([[0,0,s.cells]],!0,void 0),this.g=s.versionId}dispose(){this.j=!0}get versionId(){return this.g}get apiNotebook(){if(!this.e){const t=this,i={get uri(){return t.uri},get version(){return t.g},get notebookType(){return t.d},get isDirty(){return t.h},get isUntitled(){return t.uri.scheme===de.untitled},get isClosed(){return t.j},get metadata(){return t.f},get cellCount(){return t.b.length},cellAt(r){return r=t.n(r),t.b[r].apiCell},getCells(r){return(r?t.p(r):t.b).map(s=>s.apiCell)},save(){return t.q()},[Symbol.for("debug.description")](){return`NotebookDocument(${this.uri.toString()})`}};this.e=Object.freeze(i)}return this.e}acceptDocumentPropertiesChanged(t){t.metadata&&(this.f=Object.freeze({...this.f,...t.metadata}))}acceptDirty(t){this.h=t}acceptModelChanged(t,i,r){this.g=t.versionId,this.h=i,this.acceptDocumentPropertiesChanged({metadata:r});const n={notebook:this.apiNotebook,metadata:r,cellChanges:[],contentChanges:[]},s=[];for(const a of t.rawEvents)a.kind===tn.ModelChange?this.r(a.changes,!1,n.contentChanges):a.kind===tn.Move?this.s(a.index,a.length,a.newIdx,n.contentChanges):a.kind===tn.Output?(this.t(a.index,a.outputs),s.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===tn.OutputItem?(this.u(a.index,a.outputId,a.append,a.outputItems),s.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===tn.ChangeCellLanguage?(this.v(a.index,a.language),s.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document})):a.kind===tn.ChangeCellContent?s.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document}):a.kind===tn.ChangeCellMime?this.w(a.index,a.mime):a.kind===tn.ChangeCellMetadata?(this.x(a.index,a.metadata),s.push({cell:this.b[a.index].apiCell,metadata:this.b[a.index].apiCell.metadata})):a.kind===tn.ChangeCellInternalMetadata&&(this.y(a.index,a.internalMetadata),s.push({cell:this.b[a.index].apiCell,executionSummary:this.b[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<s.length;a++){const c=s[a],l=o.get(c.cell);if(l===void 0){const u=n.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else n.cellChanges[l]={...n.cellChanges[l],...c}}return Object.freeze(n),Object.freeze(n.cellChanges),Object.freeze(n.contentChanges),n}n(t){return t=t|0,t<0?0:t>=this.b.length?this.b.length-1:t}o(t){let i=t.start|0,r=t.end|0;return i<0&&(i=0),r>this.b.length&&(r=this.b.length),t.with({start:i,end:r})}p(t){t=this.o(t);const i=[];for(let r=t.start;r<t.end;r++)i.push(this.b[r]);return i}async q(){return this.j?Promise.reject(new Error("Notebook has been closed")):this.k.$trySaveNotebook(this.uri)}r(t,i,r){if(this.j)return;const n=[],s=[],o=[];if(t.reverse().forEach(a=>{const l=a[2].map(f=>{const g=new yw(this,this.l,f);return i||s.push(yw.asModelAddData(f)),g}),u=new bw(a[0],a[1],[],l),h=this.b.splice(a[0],a[1],...l);for(const f of h)o.push(f.uri),u.deletedItems.push(f.apiCell);n.push(u)}),this.l.acceptDocumentsAndEditorsDelta({addedDocuments:s,removedDocuments:o}),r)for(const a of n)r.push(a.asApiEvent())}s(t,i,r,n){const s=this.b.splice(t,i);this.b.splice(r,0,...s);const o=[new bw(t,i,s.map(a=>a.apiCell),[]),new bw(r,0,[],s)];for(const a of o)n.push(a.asApiEvent())}t(t,i){this.b[t].setOutputs(i)}u(t,i,r,n){this.b[t].setOutputItems(i,r,n)}v(t,i){const r=this.b[t];r.apiCell.document.languageId!==i&&this.m.$acceptModelLanguageChanged(r.uri,i)}w(t,i){const r=this.b[t];r.apiCell.mime=i}x(t,i){this.b[t].setMetadata(i)}y(t,i){this.b[t].setInternalMetadata(i)}getCellFromApiCell(t){return this.b.find(i=>i.apiCell===t)}getCellFromIndex(t){return this.b[t]}getCell(t){return this.b.find(i=>i.handle===t)}getCellIndex(t){return this.b.indexOf(t)}},Ew=class cS{static{this.apiEditorsToExtHost=new WeakMap}constructor(t,i,r,n,s,o){this.id=t,this.f=i,this.notebookData=r,this.a=[],this.b=[],this.d=!1,this.a=s,this.b=n,this.c=o}get apiEditor(){if(!this.e){const t=this;this.e={get notebook(){return t.notebookData.apiNotebook},get selection(){return t.a[0]},set selection(i){this.selections=[i]},get selections(){return t.a},set selections(i){if(!Array.isArray(i)||!i.every(is.isNotebookRange))throw je("selections");t.a=i,t.g(i)},get visibleRanges(){return t.b},revealRange(i,r){t.f.$tryRevealRange(t.id,$n.from(i),r??mf.Default)},get viewColumn(){return t.c},[Symbol.for("debug.description")](){return`NotebookEditor(${this.notebook.uri.toString()})`}},cS.apiEditorsToExtHost.set(this.e,this)}return this.e}get visible(){return this.d}_acceptVisibility(t){this.d=t}_acceptVisibleRanges(t){this.b=t}_acceptSelections(t){this.a=t}g(t){this.f.$trySetSelections(this.id,t.map($n.from))}_acceptViewColumn(t){this.c=t}},Sw=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==we)return xw(this.right);let e=this;for(;e.parent!==we&&e.parent.left!==e;)e=e.parent;return e.parent===we?we:e.parent}prev(){if(this.left!==we)return M9(this.left);let e=this;for(;e.parent!==we&&e.parent.right!==e;)e=e.parent;return e.parent===we?we:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},Ue;(function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"})(Ue||(Ue={}));var we=new Sw(null,Ue.Black);we.parent=we,we.left=we,we.right=we,we.color=Ue.Black;function xw(e){for(;e.left!==we;)e=e.left;return e}function M9(e){for(;e.right!==we;)e=e.right;return e}function kw(e){return e===we?0:e.size_left+e.piece.length+kw(e.right)}function Dw(e){return e===we?0:e.lf_left+e.piece.lineFeedCnt+Dw(e.right)}function $w(){we.parent=we}function Xu(e,t){const i=t.right;i.size_left+=t.size_left+(t.piece?t.piece.length:0),i.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=i.left,i.left!==we&&(i.left.parent=t),i.parent=t.parent,t.parent===we?e.root=i:t.parent.left===t?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i}function Zu(e,t){const i=t.left;t.left=i.right,i.right!==we&&(i.right.parent=t),i.parent=t.parent,t.size_left-=i.size_left+(i.piece?i.piece.length:0),t.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),t.parent===we?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i}function Wp(e,t){let i,r;if(t.left===we?(r=t,i=r.right):t.right===we?(r=t,i=r.left):(r=xw(t.right),i=r.right),r===e.root){e.root=i,i.color=Ue.Black,t.detach(),$w(),e.root.parent=we;return}const n=r.color===Ue.Red;if(r===r.parent.left?r.parent.left=i:r.parent.right=i,r===t?(i.parent=r.parent,Yu(e,i)):(r.parent===t?i.parent=r:i.parent=r.parent,Yu(e,i),r.left=t.left,r.right=t.right,r.parent=t.parent,r.color=t.color,t===e.root?e.root=r:t===t.parent.left?t.parent.left=r:t.parent.right=r,r.left!==we&&(r.left.parent=r),r.right!==we&&(r.right.parent=r),r.size_left=t.size_left,r.lf_left=t.lf_left,Yu(e,r)),t.detach(),i.parent.left===i){const o=kw(i),a=Dw(i);if(o!==i.parent.size_left||a!==i.parent.lf_left){const c=o-i.parent.size_left,l=a-i.parent.lf_left;i.parent.size_left=o,i.parent.lf_left=a,hs(e,i.parent,c,l)}}if(Yu(e,i.parent),n){$w();return}let s;for(;i!==e.root&&i.color===Ue.Black;)i===i.parent.left?(s=i.parent.right,s.color===Ue.Red&&(s.color=Ue.Black,i.parent.color=Ue.Red,Xu(e,i.parent),s=i.parent.right),s.left.color===Ue.Black&&s.right.color===Ue.Black?(s.color=Ue.Red,i=i.parent):(s.right.color===Ue.Black&&(s.left.color=Ue.Black,s.color=Ue.Red,Zu(e,s),s=i.parent.right),s.color=i.parent.color,i.parent.color=Ue.Black,s.right.color=Ue.Black,Xu(e,i.parent),i=e.root)):(s=i.parent.left,s.color===Ue.Red&&(s.color=Ue.Black,i.parent.color=Ue.Red,Zu(e,i.parent),s=i.parent.left),s.left.color===Ue.Black&&s.right.color===Ue.Black?(s.color=Ue.Red,i=i.parent):(s.left.color===Ue.Black&&(s.right.color=Ue.Black,s.color=Ue.Red,Xu(e,s),s=i.parent.left),s.color=i.parent.color,i.parent.color=Ue.Black,s.left.color=Ue.Black,Zu(e,i.parent),i=e.root));i.color=Ue.Black,$w()}function U9(e,t){for(Yu(e,t);t!==e.root&&t.parent.color===Ue.Red;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;i.color===Ue.Red?(t.parent.color=Ue.Black,i.color=Ue.Black,t.parent.parent.color=Ue.Red,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,Xu(e,t)),t.parent.color=Ue.Black,t.parent.parent.color=Ue.Red,Zu(e,t.parent.parent))}else{const i=t.parent.parent.left;i.color===Ue.Red?(t.parent.color=Ue.Black,i.color=Ue.Black,t.parent.parent.color=Ue.Red,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Zu(e,t)),t.parent.color=Ue.Black,t.parent.parent.color=Ue.Red,Xu(e,t.parent.parent))}e.root.color=Ue.Black}function hs(e,t,i,r){for(;t!==e.root&&t!==we;)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=r),t=t.parent}function Yu(e,t){let i=0,r=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,i=kw(t.left)-t.size_left,r=Dw(t.left)-t.lf_left,t.size_left+=i,t.lf_left+=r;t!==e.root&&(i!==0||r!==0);)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=r),t=t.parent}}var ds=65535;function B9(e){let t;return e[e.length-1]<65536?t=new Uint16Array(e.length):t=new Uint32Array(e.length),t.set(e,0),t}var AL=class{constructor(e,t,i,r,n){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=r,this.isBasicASCII=n}};function fs(e,t=!0){const i=[0];let r=1;for(let n=0,s=e.length;n<s;n++){const o=e.charCodeAt(n);o===L.CarriageReturn?n+1<s&&e.charCodeAt(n+1)===L.LineFeed?(i[r++]=n+2,n++):i[r++]=n+1:o===L.LineFeed&&(i[r++]=n+1)}return t?B9(i):i}function PL(e,t){e.length=0,e[0]=0;let i=1,r=0,n=0,s=0,o=!0;for(let c=0,l=t.length;c<l;c++){const u=t.charCodeAt(c);u===L.CarriageReturn?c+1<l&&t.charCodeAt(c+1)===L.LineFeed?(s++,e[i++]=c+2,c++):(r++,e[i++]=c+1):u===L.LineFeed?(n++,e[i++]=c+1):o&&u!==L.Tab&&(u<32||u>126)&&(o=!1)}const a=new AL(B9(e),r,n,s,o);return e.length=0,a}var er=class{constructor(e,t,i,r,n){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=r,this.length=n}},ra=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},RL=class{constructor(e,t){this.a=[],this.c=e,this.d=t,this.b=0,e.root!==we&&e.iterate(e.root,i=>(i!==we&&this.a.push(i.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}},TL=class{constructor(e){this.a=e,this.b=[]}get(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this.b.length>=this.a&&this.b.shift(),this.b.push(e)}validate(e){let t=!1;const i=this.b;for(let r=0;r<i.length;r++){const n=i[r];if(n.node.parent===null||n.nodeStartOffset>=e){i[r]=null,t=!0;continue}}if(t){const r=[];for(const n of i)n!==null&&r.push(n);this.b=r}}},LL=class{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this.a=[new ra("",[0])],this.g={line:0,column:0},this.root=we,this.b=1,this.c=0,this.d=t,this.e=t.length,this.f=i;let r=null;for(let n=0,s=e.length;n<s;n++)if(e[n].buffer.length>0){e[n].lineStarts||(e[n].lineStarts=fs(e[n].buffer));const o=new er(n+1,{line:0,column:0},{line:e[n].lineStarts.length-1,column:e[n].buffer.length-e[n].lineStarts[e[n].lineStarts.length-1]},e[n].lineStarts.length-1,e[n].buffer.length);this.a.push(e[n]),r=this.S(r,o)}this.h=new TL(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(e){const t=ds,i=t-Math.floor(t/3),r=i*2;let n="",s=0;const o=[];if(this.iterate(this.root,a=>{const c=this.R(a),l=c.length;if(s<=i||s+l<r)return n+=c,s+=l,!0;const u=n.replace(/\r\n|\r|\n/g,e);return o.push(new ra(u,fs(u))),n=c,s=l,!0}),s>0){const a=n.replace(/\r\n|\r|\n/g,e);o.push(new ra(a,fs(a)))}this.create(o,e,!0)}getEOL(){return this.d}setEOL(e){this.d=e,this.e=this.d.length,this.normalizeEOL(e)}createSnapshot(e){return new RL(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,r=>{if(r===we)return!0;const n=this.R(r),s=n.length,o=e.G(t),a=e.G(t+s),c=e.getValueInRange2(o,a);return t+=s,n===c})}getOffsetAt(e,t){let i=0,r=this.root;for(;r!==we;)if(r.left!==we&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){i+=r.size_left;const n=this.B(r,e-r.lf_left-2);return i+=n+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const r=e;for(;t!==we;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const n=this.A(t,e-t.size_left);if(i+=t.lf_left+n.index,n.index===0){const s=this.getOffsetAt(i+1,1),o=r-s;return new xr(i+1,o+1)}return new xr(i+1,n.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===we){const n=this.getOffsetAt(i+1,1),s=r-e-n;return new xr(i+1,s+1)}else t=t.right;return new xr(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.H(e.startLineNumber,e.startColumn),r=this.H(e.endLineNumber,e.endColumn),n=this.getValueInRange2(i,r);return t?t!==this.d||!this.f?n.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this.f?n:n.replace(/\r\n|\r|\n/g,t):n}getValueInRange2(e,t){if(e.node===t.node){const o=e.node,a=this.a[o.piece.bufferIndex].buffer,c=this.u(o.piece.bufferIndex,o.piece.start);return a.substring(c+e.remainder,c+t.remainder)}let i=e.node;const r=this.a[i.piece.bufferIndex].buffer,n=this.u(i.piece.bufferIndex,i.piece.start);let s=r.substring(n+e.remainder,n+i.piece.length);for(i=i.next();i!==we;){const o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(i===t.node){s+=o.substring(a,a+t.remainder);break}else s+=o.substr(a,i.piece.length);i=i.next()}return s}getLinesContent(){const e=[];let t=0,i="",r=!1;return this.iterate(this.root,n=>{if(n===we)return!0;const s=n.piece;let o=s.length;if(o===0)return!0;const a=this.a[s.bufferIndex].buffer,c=this.a[s.bufferIndex].lineStarts,l=s.start.line,u=s.end.line;let h=c[l]+s.start.column;if(r&&(a.charCodeAt(h)===L.LineFeed&&(h++,o--),e[t++]=i,i="",r=!1,o===0))return!0;if(l===u)return!this.f&&a.charCodeAt(h+o-1)===L.CarriageReturn?(r=!0,i+=a.substr(h,o-1)):i+=a.substr(h,o),!0;i+=this.f?a.substring(h,Math.max(h,c[l+1]-this.e)):a.substring(h,c[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let f=l+1;f<u;f++)i=this.f?a.substring(c[f],c[f+1]-this.e):a.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this.f&&a.charCodeAt(c[u]+s.end.column-1)===L.CarriageReturn?(r=!0,s.end.column===0?t--:i=a.substr(c[u],s.end.column-1)):i=a.substr(c[u],s.end.column),!0}),r&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this.c}getLineCount(){return this.b}getLineContent(e){return this.j.lineNumber===e?this.j.value:(this.j.lineNumber=e,e===this.b?this.j.value=this.getLineRawContent(e):this.f?this.j.value=this.getLineRawContent(e,this.e):this.j.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this.a[t.piece.bufferIndex],r=this.u(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(r)}else{const t=this.a[e.node.piece.bufferIndex],r=this.u(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(r)}}getLineCharCode(e,t){const i=this.H(e,t+1);return this.l(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this.e}getCharCode(e){const t=this.G(e);return this.l(t)}getNearestChunk(e){const t=this.G(e);if(t.remainder===t.node.piece.length){const i=t.node.next();if(!i||i===we)return"";const r=this.a[i.piece.bufferIndex],n=this.u(i.piece.bufferIndex,i.piece.start);return r.buffer.substring(n,n+i.piece.length)}else{const i=this.a[t.node.piece.bufferIndex],r=this.u(t.node.piece.bufferIndex,t.node.piece.start),n=r+t.remainder,s=r+t.node.piece.length;return i.buffer.substring(n,s)}}findMatchesInNode(e,t,i,r,n,s,o,a,c,l,u){const h=this.a[e.piece.bufferIndex],f=this.u(e.piece.bufferIndex,e.piece.start),g=this.u(e.piece.bufferIndex,n),m=this.u(e.piece.bufferIndex,s);let b;const k={line:0,column:0};let I,R;t._wordSeparators?(I=h.buffer.substring(g,m),R=N=>N+g,t.reset(0)):(I=h.buffer,R=N=>N,t.reset(g));do if(b=t.next(I),b){if(R(b.index)>=m)return l;this.s(e,R(b.index)-f,k);const N=this.t(e.piece.bufferIndex,n,k),z=k.line===n.line?k.column-n.column+r:k.column+1,q=z+b[0].length;if(u[l++]=l6(new mt(i+N,z,i+N,q),b,a),R(b.index)+b[0].length>=m||l>=c)return l}while(b);return l}findMatchesLineByLine(e,t,i,r){const n=[];let s=0;const o=new QP(t.wordSeparators,t.regex);let a=this.H(e.startLineNumber,e.startColumn);if(a===null)return[];const c=this.H(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.s(a.node,a.remainder);const u=this.s(c.node,c.remainder);if(a.node===c.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,u,t,i,r,s,n),n;let h=e.startLineNumber,f=a.node;for(;f!==c.node;){const m=this.t(f.piece.bufferIndex,l,f.piece.end);if(m>=1){const k=this.a[f.piece.bufferIndex].lineStarts,I=this.u(f.piece.bufferIndex,f.piece.start),R=k[l.line+m],N=h===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(f,o,h,N,l,this.s(f,R-I),t,i,r,s,n),s>=r)return n;h+=m}const b=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const k=this.getLineContent(h).substring(b,e.endColumn-1);return s=this.n(t,o,k,e.endLineNumber,b,s,n,i,r),n}if(s=this.n(t,o,this.getLineContent(h).substr(b),h,b,s,n,i,r),s>=r)return n;h++,a=this.H(h,1),f=a.node,l=this.s(a.node,a.remainder)}if(h===e.endLineNumber){const m=h===e.startLineNumber?e.startColumn-1:0,b=this.getLineContent(h).substring(m,e.endColumn-1);return s=this.n(t,o,b,e.endLineNumber,m,s,n,i,r),n}const g=h===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(c.node,o,h,g,l,u,t,i,r,s,n),n}n(e,t,i,r,n,s,o,a,c){const l=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=i.length;let m=-f;for(;(m=i.indexOf(h,m+f))!==-1;)if((!l||u6(l,i,g,m,f))&&(o[s++]=new Tm(new mt(r,m+1+n,r,m+1+f+n),null),s>=c))return s;return s}let u;t.reset(0);do if(u=t.next(i),u&&(o[s++]=l6(new mt(r,u.index+1+n,r,u.index+1+u[0].length+n),u,a),s>=c))return s;while(u);return s}insert(e,t,i=!1){if(this.f=this.f&&i,this.j.lineNumber=0,this.j.value="",this.root!==we){const{node:r,remainder:n,nodeStartOffset:s}=this.G(e),o=r.piece,a=o.bufferIndex,c=this.s(r,n);if(r.piece.bufferIndex===0&&o.end.line===this.g.line&&o.end.column===this.g.column&&s+o.length===e&&t.length<ds){this.F(r,t),this.y();return}if(s===e)this.o(t,r),this.h.validate(e);else if(s+r.piece.length>e){const l=[];let u=new er(o.bufferIndex,c,o.end,this.t(o.bufferIndex,c,o.end),this.u(a,o.end)-this.u(a,c));if(this.K()&&this.M(t)&&this.I(r,n)===10){const m={line:u.start.line+1,column:0};u=new er(u.bufferIndex,m,u.end,this.t(u.bufferIndex,m,u.end),u.length-1),t+=`
`}if(this.K()&&this.L(t))if(this.I(r,n-1)===13){const m=this.s(r,n-1);this.C(r,m),t="\r"+t,r.piece.length===0&&l.push(r)}else this.C(r,c);else this.C(r,c);const h=this.w(t);u.length>0&&this.S(r,u);let f=r;for(let g=0;g<h.length;g++)f=this.S(f,h[g]);this.v(l)}else this.q(t,r)}else{const r=this.w(t);let n=this.T(null,r[0]);for(let s=1;s<r.length;s++)n=this.S(n,r[s])}this.y()}delete(e,t){if(this.j.lineNumber=0,this.j.value="",t<=0||this.root===we)return;const i=this.G(e),r=this.G(e+t),n=i.node,s=r.node;if(n===s){const h=this.s(n,i.remainder),f=this.s(n,r.remainder);if(i.nodeStartOffset===e){if(t===n.piece.length){const g=n.next();Wp(this,n),this.N(g),this.y();return}this.D(n,f),this.h.validate(e),this.N(n),this.y();return}if(i.nodeStartOffset+n.piece.length===e+t){this.C(n,h),this.O(n),this.y();return}this.E(n,h,f),this.y();return}const o=[],a=this.s(n,i.remainder);this.C(n,a),this.h.validate(e),n.piece.length===0&&o.push(n);const c=this.s(s,r.remainder);this.D(s,c),s.piece.length===0&&o.push(s);const l=n.next();for(let h=l;h!==we&&h!==s;h=h.next())o.push(h);const u=n.piece.length===0?n.prev():n;this.v(o),this.O(u),this.y()}o(e,t){const i=[];if(this.K()&&this.M(e)&&this.L(t)){const s=t.piece,o={line:s.start.line+1,column:0},a=new er(s.bufferIndex,o,s.end,this.t(s.bufferIndex,o,s.end),s.length-1);t.piece=a,e+=`
`,hs(this,t,-1,-1),t.piece.length===0&&i.push(t)}const r=this.w(e);let n=this.T(t,r[r.length-1]);for(let s=r.length-2;s>=0;s--)n=this.T(n,r[s]);this.N(n),this.v(i)}q(e,t){this.Q(e,t)&&(e+=`
`);const i=this.w(e),r=this.S(t,i[0]);let n=r;for(let s=1;s<i.length;s++)n=this.S(n,i[s]);this.N(r)}s(e,t,i){const r=e.piece,n=e.piece.bufferIndex,s=this.a[n].lineStarts,a=s[r.start.line]+r.start.column+t;let c=r.start.line,l=r.end.line,u=0,h=0,f=0;for(;c<=l&&(u=c+(l-c)/2|0,f=s[u],u!==l);)if(h=s[u+1],a<f)l=u-1;else if(a>=h)c=u+1;else break;return i?(i.line=u,i.column=a-f,null):{line:u,column:a-f}}t(e,t,i){if(i.column===0)return i.line-t.line;const r=this.a[e].lineStarts;if(i.line===r.length-1)return i.line-t.line;const n=r[i.line+1],s=r[i.line]+i.column;if(n>s+1)return i.line-t.line;const o=s-1;return this.a[e].buffer.charCodeAt(o)===13?i.line-t.line+1:i.line-t.line}u(e,t){return this.a[e].lineStarts[t.line]+t.column}v(e){for(let t=0;t<e.length;t++)Wp(this,e[t])}w(e){if(e.length>ds){const l=[];for(;e.length>ds;){const h=e.charCodeAt(ds-1);let f;h===L.CarriageReturn||h>=55296&&h<=56319?(f=e.substring(0,ds-1),e=e.substring(ds-1)):(f=e.substring(0,ds),e=e.substring(ds));const g=fs(f);l.push(new er(this.a.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this.a.push(new ra(f,g))}const u=fs(e);return l.push(new er(this.a.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this.a.push(new ra(e,u)),l}let t=this.a[0].buffer.length;const i=fs(e,!1);let r=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===t&&t!==0&&this.L(e)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},r=this.g;for(let l=0;l<i.length;l++)i[l]+=t+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let l=0;l<i.length;l++)i[l]+=t;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+=e}const n=this.a[0].buffer.length,s=this.a[0].lineStarts.length-1,o=n-this.a[0].lineStarts[s],a={line:s,column:o},c=new er(0,r,a,this.t(0,r,a),n-t);return this.g=a,[c]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(e,t=0){let i=this.root,r="";const n=this.h.get2(e);if(n){i=n.node;const s=this.B(i,e-n.nodeStartLineNumber-1),o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(n.nodeStartLineNumber+i.piece.lineFeedCnt===e)r=o.substring(a+s,a+i.piece.length);else{const c=this.B(i,e-n.nodeStartLineNumber);return o.substring(a+s,a+c-t)}}else{let s=0;const o=e;for(;i!==we;)if(i.left!==we&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const a=this.B(i,e-i.lf_left-2),c=this.B(i,e-i.lf_left-1),l=this.a[i.piece.bufferIndex].buffer,u=this.u(i.piece.bufferIndex,i.piece.start);return s+=i.size_left,this.h.set({node:i,nodeStartOffset:s,nodeStartLineNumber:o-(e-1-i.lf_left)}),l.substring(u+a,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const a=this.B(i,e-i.lf_left-2),c=this.a[i.piece.bufferIndex].buffer,l=this.u(i.piece.bufferIndex,i.piece.start);r=c.substring(l+a,l+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,s+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==we;){const s=this.a[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const o=this.B(i,0),a=this.u(i.piece.bufferIndex,i.piece.start);return r+=s.substring(a,a+o-t),r}else{const o=this.u(i.piece.bufferIndex,i.piece.start);r+=s.substr(o,i.piece.length)}i=i.next()}return r}y(){let e=this.root,t=1,i=0;for(;e!==we;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this.b=t,this.c=i,this.h.validate(this.c)}A(e,t){const i=e.piece,r=this.s(e,t),n=r.line-i.start.line;if(this.u(i.bufferIndex,i.end)-this.u(i.bufferIndex,i.start)===t){const s=this.t(e.piece.bufferIndex,i.start,r);if(s!==n)return{index:s,remainder:0}}return{index:n,remainder:r.column}}B(e,t){if(t<0)return 0;const i=e.piece,r=this.a[i.bufferIndex].lineStarts,n=i.start.line+t+1;return n>i.end.line?r[i.end.line]+i.end.column-r[i.start.line]-i.start.column:r[n]-r[i.start.line]-i.start.column}C(e,t){const i=e.piece,r=i.lineFeedCnt,n=this.u(i.bufferIndex,i.end),s=t,o=this.u(i.bufferIndex,s),a=this.t(i.bufferIndex,i.start,s),c=a-r,l=o-n,u=i.length+l;e.piece=new er(i.bufferIndex,i.start,s,a,u),hs(this,e,l,c)}D(e,t){const i=e.piece,r=i.lineFeedCnt,n=this.u(i.bufferIndex,i.start),s=t,o=this.t(i.bufferIndex,s,i.end),a=this.u(i.bufferIndex,s),c=o-r,l=n-a,u=i.length+l;e.piece=new er(i.bufferIndex,s,i.end,o,u),hs(this,e,l,c)}E(e,t,i){const r=e.piece,n=r.start,s=r.end,o=r.length,a=r.lineFeedCnt,c=t,l=this.t(r.bufferIndex,r.start,c),u=this.u(r.bufferIndex,t)-this.u(r.bufferIndex,n);e.piece=new er(r.bufferIndex,r.start,c,l,u),hs(this,e,u-o,l-a);const h=new er(r.bufferIndex,i,s,this.t(r.bufferIndex,i,s),this.u(r.bufferIndex,s)-this.u(r.bufferIndex,i)),f=this.S(e,h);this.N(f)}F(e,t){this.Q(t,e)&&(t+=`
`);const i=this.K()&&this.L(t)&&this.M(e),r=this.a[0].buffer.length;this.a[0].buffer+=t;const n=fs(t,!1);for(let f=0;f<n.length;f++)n[f]+=r;if(i){const f=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:r-f}}this.a[0].lineStarts=this.a[0].lineStarts.concat(n.slice(1));const s=this.a[0].lineStarts.length-1,o=this.a[0].buffer.length-this.a[0].lineStarts[s],a={line:s,column:o},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,u=this.t(0,e.piece.start,a),h=u-l;e.piece=new er(e.piece.bufferIndex,e.piece.start,a,u,c),this.g=a,hs(this,e,t.length,h)}G(e){let t=this.root;const i=this.h.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let r=0;for(;t!==we;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;const n={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this.h.set(n),n}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}H(e,t){let i=this.root,r=0;for(;i!==we;)if(i.left!==we&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const n=this.B(i,e-i.lf_left-2),s=this.B(i,e-i.lf_left-1);return r+=i.size_left,{node:i,remainder:Math.min(n+t-1,s),nodeStartOffset:r}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const n=this.B(i,e-i.lf_left-2);if(n+t-1<=i.piece.length)return{node:i,remainder:n+t-1,nodeStartOffset:r};t-=i.piece.length-n;break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==we;){if(i.piece.lineFeedCnt>0){const n=this.B(i,0),s=this.J(i);return{node:i,remainder:Math.min(t-1,n),nodeStartOffset:s}}else if(i.piece.length>=t-1){const n=this.J(i);return{node:i,remainder:t-1,nodeStartOffset:n}}else t-=i.piece.length;i=i.next()}return null}I(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this.a[e.piece.bufferIndex],r=this.u(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(r)}J(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}K(){return!(this.f&&this.d===`
`)}L(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===we||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this.a[t.bufferIndex].lineStarts,r=t.start.line,n=i[r]+t.start.column;return r===i.length-1||i[r+1]>n+1?!1:this.a[t.bufferIndex].buffer.charCodeAt(n)===10}M(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===we||e.piece.lineFeedCnt===0?!1:this.I(e,e.piece.length-1)===13}N(e){if(this.K()&&this.L(e)){const t=e.prev();this.M(t)&&this.P(t,e)}}O(e){if(this.K()&&this.M(e)){const t=e.next();this.L(t)&&this.P(e,t)}}P(e,t){const i=[],r=this.a[e.piece.bufferIndex].lineStarts;let n;e.piece.end.column===0?n={line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:n={line:e.piece.end.line,column:e.piece.end.column-1};const s=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new er(e.piece.bufferIndex,e.piece.start,n,o,s),hs(this,e,-1,-1),e.piece.length===0&&i.push(e);const a={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.t(t.piece.bufferIndex,a,t.piece.end);t.piece=new er(t.piece.bufferIndex,a,t.piece.end,l,c),hs(this,t,-1,-1),t.piece.length===0&&i.push(t);const u=this.w(`\r
`);this.S(e,u[0]);for(let h=0;h<i.length;h++)Wp(this,i[h])}Q(e,t){if(this.K()&&this.M(e)){const i=t.next();if(this.L(i)){if(e+=`
`,i.piece.length===1)Wp(this,i);else{const r=i.piece,n={line:r.start.line+1,column:0},s=r.length-1,o=this.t(r.bufferIndex,n,r.end);i.piece=new er(r.bufferIndex,n,r.end,o,s),hs(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===we)return t(we);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}R(e){if(e===we)return"";const t=this.a[e.piece.bufferIndex],i=e.piece,r=this.u(i.bufferIndex,i.start),n=this.u(i.bufferIndex,i.end);return t.buffer.substring(r,n)}getPieceContent(e){const t=this.a[e.bufferIndex],i=this.u(e.bufferIndex,e.start),r=this.u(e.bufferIndex,e.end);return t.buffer.substring(i,r)}S(e,t){const i=new Sw(t,Ue.Red);if(i.left=we,i.right=we,i.parent=we,i.size_left=0,i.lf_left=0,this.root===we)this.root=i,i.color=Ue.Black;else if(e.right===we)e.right=i,i.parent=e;else{const n=xw(e.right);n.left=i,i.parent=n}return U9(this,i),i}T(e,t){const i=new Sw(t,Ue.Red);if(i.left=we,i.right=we,i.parent=we,i.size_left=0,i.lf_left=0,this.root===we)this.root=i,i.color=Ue.Black;else if(e.left===we)e.left=i,i.parent=e;else{const r=M9(e.left);r.right=i,i.parent=r}return U9(this,i),i}U(e){let t="";return this.iterate(e,i=>(t+=this.R(i),!0)),t}},ps;(function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(ps||(ps={}));function Iw(e){let t=0,i=0,r=0,n=ps.Unknown;for(let s=0,o=e.length;s<o;s++){const a=e.charCodeAt(s);a===L.CarriageReturn?(t===0&&(i=s),t++,s+1<o&&e.charCodeAt(s+1)===L.LineFeed?(n|=ps.CRLF,s++):n|=ps.Invalid,r=s+1):a===L.LineFeed&&(n|=ps.LF,t===0&&(i=s),t++,r=s+1)}return t===0&&(i=e.length),[t,i,e.length-r,n]}var Aw;function _L(){return Aw||(Aw=new TextDecoder("UTF-16LE")),Aw}function CL(e,t,i){const r=new Uint16Array(e.buffer,t,i);return i>0&&(r[0]===65279||r[0]===65534)?NL(e,t,i):_L().decode(r)}function NL(e,t,i){const r=[];let n=0;for(let s=0;s<i;s++){const o=GS(e,t);t+=2,r[n++]=String.fromCharCode(o)}return r.join("")}function zp(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var OL=class Rn{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,i,r,n){this.oldPosition=t,this.oldText=i,this.newPosition=r,this.newText=n}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${zp(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${zp(this.oldText)}")`:`(replace@${this.oldPosition} "${zp(this.oldText)}" with "${zp(this.newText)}")`}static a(t){return 4+2*t.length}static c(t,i,r){const n=i.length;gh(t,n,r),r+=4;for(let s=0;s<n;s++)QS(t,i.charCodeAt(s),r),r+=2;return r}static d(t,i){const r=ph(t,i);return i+=4,CL(t,i,r)}writeSize(){return 8+Rn.a(this.oldText)+Rn.a(this.newText)}write(t,i){return gh(t,this.oldPosition,i),i+=4,gh(t,this.newPosition,i),i+=4,i=Rn.c(t,this.oldText,i),i=Rn.c(t,this.newText,i),i}static read(t,i,r){const n=ph(t,i);i+=4;const s=ph(t,i);i+=4;const o=Rn.d(t,i);i+=Rn.a(o);const a=Rn.d(t,i);return i+=Rn.a(a),r.push(new Rn(n,o,s,a)),i}},FL=class ah extends Te{constructor(t,i,r,n,s,o,a){super(),this.m=this.B(new C),this.onDidChangeContent=this.m.event,this.f=i,this.j=!o,this.g=n,this.h=s,this.c=new LL(t,r,a)}equals(t){return!(t instanceof ah)||this.f!==t.f||this.getEOL()!==t.getEOL()?!1:this.c.equal(t.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(t){return this.c.createSnapshot(t?this.f:"")}getOffsetAt(t,i){return this.c.getOffsetAt(t,i)}getPositionAt(t){return this.c.getPositionAt(t)}getRangeAt(t,i){const r=t+i,n=this.getPositionAt(t),s=this.getPositionAt(r);return new mt(n.lineNumber,n.column,s.lineNumber,s.column)}getValueInRange(t,i=Jn.TextDefined){if(t.isEmpty())return"";const r=this.n(i);return this.c.getValueInRange(t,r)}getValueLengthInRange(t,i=Jn.TextDefined){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const r=this.getOffsetAt(t.startLineNumber,t.startColumn),n=this.getOffsetAt(t.endLineNumber,t.endColumn);let s=0;const o=this.n(i),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=t.endLineNumber-t.startLineNumber;s=c*l}return n-r+s}getCharacterCountInRange(t,i=Jn.TextDefined){if(this.j){let r=0;const n=t.startLineNumber,s=t.endLineNumber;for(let o=n;o<=s;o++){const a=this.getLineContent(o),c=o===n?t.startColumn-1:0,l=o===s?t.endColumn-1:a.length;for(let u=c;u<l;u++)$h(a.charCodeAt(u))?(r=r+1,u=u+1):r=r+1}return r+=this.n(i).length*(s-n),r}return this.getValueLengthInRange(t,i)}getNearestChunk(t){return this.c.getNearestChunk(t)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(t){return this.c.getLineContent(t)}getLineCharCode(t,i){return this.c.getLineCharCode(t,i)}getCharCode(t){return this.c.getCharCode(t)}getLineLength(t){return this.c.getLineLength(t)}getLineMinColumn(t){return 1}getLineMaxColumn(t){return this.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){const i=Wg(this.getLineContent(t));return i===-1?0:i+1}getLineLastNonWhitespaceColumn(t){const i=ek(this.getLineContent(t));return i===-1?0:i+2}n(t){switch(t){case Jn.LF:return`
`;case Jn.CRLF:return`\r
`;case Jn.TextDefined:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this.c.setEOL(t)}applyEdits(t,i,r){let n=this.g,s=this.h,o=this.j,a=!0,c=[];for(let b=0;b<t.length;b++){const k=t[b];a&&k._isTracked&&(a=!1);const I=k.range;if(k.text){let ee=!0;o||(ee=!ck(k.text),o=ee),!n&&ee&&(n=hy(k.text)),!s&&ee&&(s=dy(k.text))}let R="",N=0,z=0,q=0;if(k.text){let ee;[N,z,q,ee]=Iw(k.text);const pe=this.getEOL(),re=pe===`\r
`?ps.CRLF:ps.LF;ee===ps.Unknown||ee===re?R=k.text:R=k.text.replace(/\r\n|\r|\n/g,pe)}c[b]={sortIndex:b,identifier:k.identifier||null,range:I,rangeOffset:this.getOffsetAt(I.startLineNumber,I.startColumn),rangeLength:this.getValueLengthInRange(I),text:R,eolCount:N,firstLineLength:z,lastLineLength:q,forceMoveMarkers:!!k.forceMoveMarkers,isAutoWhitespaceEdit:k.isAutoWhitespaceEdit||!1}}c.sort(ah.u);let l=!1;for(let b=0,k=c.length-1;b<k;b++){const I=c[b].range.getEndPosition(),R=c[b+1].range.getStartPosition();if(R.isBeforeOrEqual(I)){if(R.isBefore(I))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this.s(c));const u=r||i?ah._getInverseEditRanges(c):[],h=[];if(i)for(let b=0;b<c.length;b++){const k=c[b],I=u[b];if(k.isAutoWhitespaceEdit&&k.range.isEmpty())for(let R=I.startLineNumber;R<=I.endLineNumber;R++){let N="";R===I.startLineNumber&&(N=this.getLineContent(k.range.startLineNumber),Wg(N)!==-1)||h.push({lineNumber:R,oldContent:N})}}let f=null;if(r){let b=0;f=[];for(let k=0;k<c.length;k++){const I=c[k],R=u[k],N=this.getValueInRange(I.range),z=I.rangeOffset+b;b+=I.text.length-N.length,f[k]={sortIndex:I.sortIndex,identifier:I.identifier,range:R,text:N,textChange:new OL(I.rangeOffset,N,z,I.text)}}l||f.sort((k,I)=>k.sortIndex-I.sortIndex)}this.g=n,this.h=s,this.j=o;const g=this.t(c);let m=null;if(i&&h.length>0){h.sort((b,k)=>k.lineNumber-b.lineNumber),m=[];for(let b=0,k=h.length;b<k;b++){const I=h[b].lineNumber;if(b>0&&h[b-1].lineNumber===I)continue;const R=h[b].oldContent,N=this.getLineContent(I);N.length===0||N===R||Wg(N)!==-1||m.push(I)}}return this.m.fire(),new EI(f,g,m)}s(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let i=!1;const r=t[0].range,n=t[t.length-1].range,s=new mt(r.startLineNumber,r.startColumn,n.endLineNumber,n.endColumn);let o=r.startLineNumber,a=r.startColumn;const c=[];for(let g=0,m=t.length;g<m;g++){const b=t[g],k=b.range;i=i||b.forceMoveMarkers,c.push(this.getValueInRange(new mt(o,a,k.startLineNumber,k.startColumn))),b.text.length>0&&c.push(b.text),o=k.endLineNumber,a=k.endColumn}const l=c.join(""),[u,h,f]=Iw(l);return{sortIndex:0,identifier:t[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,Jn.TextDefined),text:l,eolCount:u,firstLineLength:h,lastLineLength:f,forceMoveMarkers:i,isAutoWhitespaceEdit:!1}}t(t){t.sort(ah.w);const i=[];for(let r=0;r<t.length;r++){const n=t[r],s=n.range.startLineNumber,o=n.range.startColumn,a=n.range.endLineNumber,c=n.range.endColumn;if(s===a&&o===c&&n.text.length===0)continue;n.text?(this.c.delete(n.rangeOffset,n.rangeLength),this.c.insert(n.rangeOffset,n.text,!0)):this.c.delete(n.rangeOffset,n.rangeLength);const l=new mt(s,o,a,c);i.push({range:l,rangeLength:n.rangeLength,text:n.text,rangeOffset:n.rangeOffset,forceMoveMarkers:n.forceMoveMarkers})}return i}findMatchesLineByLine(t,i,r,n){return this.c.findMatchesLineByLine(t,i,r,n)}getPieceTree(){return this.c}static _getInverseEditRange(t,i){const r=t.startLineNumber,n=t.startColumn,[s,o,a]=Iw(i);let c;if(i.length>0){const l=s+1;l===1?c=new mt(r,n,r,n+o):c=new mt(r,n,r+l-1,a+1)}else c=new mt(r,n,r,n);return c}static _getInverseEditRanges(t){const i=[];let r=0,n=0,s=null;for(let o=0,a=t.length;o<a;o++){const c=t[o];let l,u;s?s.range.endLineNumber===c.range.startLineNumber?(l=r,u=n+(c.range.startColumn-s.range.endColumn)):(l=r+(c.range.startLineNumber-s.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let h;if(c.text.length>0){const f=c.eolCount+1;f===1?h=new mt(l,u,l,u+c.firstLineLength):h=new mt(l,u,l+f-1,c.lastLineLength+1)}else h=new mt(l,u,l,u);r=h.endLineNumber,n=h.endColumn,i.push(h),s=c}return i}static u(t,i){const r=mt.compareRangesUsingEnds(t.range,i.range);return r===0?t.sortIndex-i.sortIndex:r}static w(t,i){const r=mt.compareRangesUsingEnds(t.range,i.range);return r===0?i.sortIndex-t.sortIndex:-r}},ML=class{constructor(e,t,i,r,n,s,o,a,c){this.a=e,this.b=t,this.c=i,this.d=r,this.e=n,this.f=s,this.g=o,this.h=a,this.j=c}k(e){const t=this.c+this.d+this.e,i=this.c+this.e;return t===0?e===bl.LF?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this.k(e),i=this.a;if(this.j&&(t===`\r
`&&(this.c>0||this.d>0)||t===`
`&&(this.c>0||this.e>0)))for(let n=0,s=i.length;n<s;n++){const o=i[n].buffer.replace(/\r\n|\r|\n/g,t),a=fs(o);i[n]=new ra(o,a)}const r=new FL(i,this.b,t,this.f,this.g,this.h,this.j);return{textBuffer:r,disposable:r}}getFirstLineText(e){return this.a[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},H9=class{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(e){if(e.length===0)return;this.a.length===0&&hk(e)&&(this.b=uk,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===L.CarriageReturn||t>=55296&&t<=56319?(this.m(e.substr(0,e.length-1),!1),this.c=!0,this.d=t):(this.m(e,!1),this.c=!1,this.d=t)}m(e,t){!t&&e.length===0||(this.c?this.n(String.fromCharCode(this.d)+e):this.n(e))}n(e){const t=PL(this.e,e);this.a.push(new ra(e,t.lineStarts)),this.f+=t.cr,this.g+=t.lf,this.h+=t.crlf,t.isBasicASCII||(this.l=!1,this.j||(this.j=hy(e)),this.k||(this.k=dy(e)))}finish(e=!0){return this.o(),new ML(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,e)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const e=this.a[this.a.length-1];e.buffer+=String.fromCharCode(this.d);const t=fs(e.buffer);e.lineStarts=t,this.d===L.CarriageReturn&&this.f++}}},UL=class extends Te{constructor(e,t,i){super(),this._source=e,this.b=t,this.c=i,this.a=void 0}f(e){const t=e.getLineCount();return new mt(1,1,t,this.g(e,t))}g(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this.b){const e=new H9;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:i,disposable:r}=t.create(bl.LF);this.b=i,this.B(r)}return this.b}get outputTextBuffers(){return this.a||(this.a=this.c.map(e=>{const t=new H9;t.acceptChunk(e);const i=t.finish(!0),{textBuffer:r,disposable:n}=i.create(bl.LF);return this.B(n),r})),this.a}findInInputs(e){const i=new a6(e,!1,!1,null).parseSearchRequest();if(!i)return[];const r=this.f(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(r,i,!0,5e3)}findInOutputs(e){const i=new a6(e,!1,!1,null).parseSearchRequest();return i?this.outputTextBuffers.map(r=>{const n=r.findMatchesLineByLine(this.f(r),i,!0,5e3);if(n.length!==0)return{textBuffer:r,matches:n}}).filter(r=>!!r):[]}};function j9(e,t){let i=-1;const r=[];let n=[];return e.forEach(o=>{o.range.startLineNumber!==i&&n.length>0&&(r.push([...n]),n=[]),n.push(o),i=o.range.endLineNumber}),n.length>0&&r.push([...n]),r.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(t.getLineContent(u));return new tP(a.join(`
`)+`
`,o.map(u=>new mt(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}var UU=Object.freeze({id:"application",order:100,title:d(3973,null),type:"object"}),BL=Object.freeze({id:"workbench",order:7,title:d(3974,null),type:"object"}),HL=Object.freeze({id:"security",scope:zt.APPLICATION,title:d(3975,null),type:"object",order:7}),BU=Object.freeze({id:"problems",title:d(3976,null),type:"object",order:101}),jL=Object.freeze({id:"window",order:8,title:d(3977,null),type:"object"}),WL={ConfigurationMigration:"base.contributions.configuration.migration"},zL=class{constructor(){this.migrations=[],this.a=new C,this.onDidRegisterConfigurationMigration=this.a.event}registerConfigurationMigrations(e){this.migrations.push(...e)}},Vp=new zL;ki.add(WL.ConfigurationMigration,Vp);var W9=class extends Te{static{this.ID="workbench.contrib.configurationMigration"}constructor(t,i){super(),this.a=t,this.b=i,this.B(this.b.onDidChangeWorkspaceFolders(async r=>{for(const n of r.added)await this.f(n,Vp.migrations)})),this.c(Vp.migrations),this.B(Vp.onDidRegisterConfigurationMigration(r=>this.c(r)))}async c(t){await this.f(void 0,t);for(const i of this.b.getWorkspace().folders)await this.f(i,t)}async f(t,i){await Promise.all([i.map(r=>this.g(r,t?.uri))])}async g(t,i){const r=this.a.inspect(t.key,{resource:i}),n=this.b.getWorkbenchState()===Fh.WORKSPACE?[["user",fi.USER],["userLocal",fi.USER_LOCAL],["userRemote",fi.USER_REMOTE],["workspace",fi.WORKSPACE],["workspaceFolder",fi.WORKSPACE_FOLDER]]:[["user",fi.USER],["userLocal",fi.USER_LOCAL],["userRemote",fi.USER_REMOTE],["workspace",fi.WORKSPACE]];for(const[s,o]of n){const a=r[s];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.h(t,s,a.value,i,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const h=await this.h(t,s,u,i,l);for(const f of h??[])c.push([f,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],h])=>this.a.updateValue(l,u.value,{resource:i,overrideIdentifiers:h},o)))}}async h(t,i,r,n,s){const o=c=>{const u=this.a.inspect(c,{resource:n})[i];if(u)return s?u.overrides?.find(({identifiers:h})=>Qr(h,s))?.value:u.value},a=await t.migrateFn(r,o);return Array.isArray(a)?a:[[t.key,a]]}};W9=__decorate([__param(0,hd),__param(1,vm)],W9);var z9=class extends Te{static{this.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration"}constructor(t){super(),this.b=t,this.a=new wa,this.ready=this.a.p,this.c()}async c(){try{await this.f()}finally{this.a.complete()}}async f(){if(!sr&&(await this.b.getEnvironment())?.os!==Un.Windows)return;ki.as(Ma.Configuration).registerConfiguration({...HL,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:d(3978,null)},default:[],markdownDescription:d(3979,null),scope:zt.MACHINE},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:d(3980,null),scope:zt.MACHINE}}})}};z9=__decorate([__param(0,d6)],z9);var Ku="window.newWindowProfile",V9=class extends Te{static{this.ID="workbench.contrib.dynamicWindowConfiguration"}constructor(t,i){super(),this.c=t,this.f=i,this.g(),this.B(this.c.onDidChangeProfiles(r=>this.g())),this.h(),this.j(),this.B(i.onDidChangeConfiguration(r=>{r.source!==fi.DEFAULT&&r.affectsConfiguration(Ku)&&this.h()})),this.B(this.c.onDidChangeProfiles(()=>this.j()))}g(){const t=ki.as(Ma.Configuration),i={...jL,properties:{[Ku]:{type:["string","null"],default:null,enum:[...this.c.profiles.map(r=>r.name),null],enumItemLabels:[...this.c.profiles.map(r=>""),d(3981,null)],description:d(3982,null),scope:zt.APPLICATION}}};this.a?t.updateConfigurations({add:[i],remove:[this.a]}):t.registerConfiguration(i),this.a=i}h(){const t=this.f.getValue(Ku);this.b=t?this.c.profiles.find(i=>i.name===t):void 0}j(){const t=this.f.getValue(Ku);if(!t)return;const i=this.b?this.c.profiles.find(r=>r.id===this.b.id):void 0;t!==i?.name&&this.f.updateValue(Ku,i?.name)}};V9=__decorate([__param(0,k3),__param(1,hd)],V9);var zU=K("editorResolverService"),VL=ki.as(Ma.Configuration),qL={...BL,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:d(12152,null),additionalProperties:{type:"string"}}}};VL.registerConfiguration(qL);var Pw;(function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"})(Pw||(Pw={}));var q9;(function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"})(q9||(q9={}));function GL(e,t){if(new Set([de.extension,de.webviewPanel,de.vscodeWorkspaceTrust,de.vscodeSettings]).has(t.scheme))return!1;const n=typeof e=="string"&&e.indexOf(et.sep)>=0?`${t.scheme}:${t.path}`:Ls(t);return Rl(typeof e=="string"?e.toLowerCase():e,n.toLowerCase())}var QL=class ch{static{this.a=0}get activeNotebookEditor(){return this.k?.apiEditor}get visibleNotebookEditors(){return this.l.map(t=>t.apiEditor)}constructor(t,i,r,n,s,o,a){this.q=r,this.r=n,this.s=s,this.t=o,this.u=a,this.f=new Map,this.g=new li,this.h=new Map,this.j=new C,this.onDidChangeActiveNotebookEditor=this.j.event,this.l=[],this.m=new C,this.onDidOpenNotebookDocument=this.m.event,this.n=new C,this.onDidCloseNotebookDocument=this.n.event,this.o=new C,this.onDidChangeVisibleNotebookEditors=this.o.event,this.p=new ln("NotebookCellStatusBarCache"),this.x=0,this.y=new Map,this.b=t.getProxy(se.MainThreadNotebook),this.c=t.getProxy(se.MainThreadNotebookDocuments),this.d=t.getProxy(se.MainThreadNotebookEditors),this.i=i.converter,i.registerArgumentProcessor({processArgument:c=>{if(c&&c.$mid===Dt.NotebookCellActionContext){const l=c.notebookEditor?.notebookUri,u=c.cell.handle,f=this.g.get(l)?.getCell(u);if(f)return f.apiCell}if(c&&c.$mid===Dt.NotebookActionContext){const l=c.uri,u=this.g.get(l);if(u)return u.apiNotebook}return c}}),ch.C(i)}getEditorById(t){const i=this.h.get(t);if(!i)throw new Error(`unknown text editor: ${t}. known editors: ${[...this.h.keys()]} `);return i}getIdByEditor(t){for(const[i,r]of this.h)if(r.apiEditor===t)return i}get notebookDocuments(){return[...this.g.values()]}getNotebookDocument(t,i){const r=this.g.get(t);if(!r&&!i)throw new Error(`NO notebook document for '${t}'`);return r}static w(t,i){if(!i)return;const r=i.filenamePattern.map(n=>Jf.from(n)).filter(n=>n!==void 0);if(i.filenamePattern&&!r){console.warn(`Notebook content provider view options file name pattern is invalid ${i.filenamePattern}`);return}return{extension:t.identifier,providerDisplayName:t.displayName||t.name,displayName:i.displayName,filenamePattern:r,priority:i.exclusive?Pw.exclusive:void 0}}registerNotebookCellStatusBarItemProvider(t,i,r){const n=ch.a++,s=typeof r.onDidChangeCellStatusBarItems=="function"?ch.a++:void 0;this.f.set(n,r),this.b.$registerNotebookCellStatusBarItemProvider(n,s,i);let o;return s!==void 0&&(o=r.onDidChangeCellStatusBarItems(a=>this.b.$emitCellStatusBarEvent(s))),new Ye(()=>{this.f.delete(n),this.b.$unregisterNotebookCellStatusBarItemProvider(n,s),o?.dispose()})}async createNotebookDocument(t){const i=await this.c.$tryCreateNotebook({viewType:t.viewType,content:t.content&&Qs.from(t.content)});return E.revive(i)}async openNotebookDocument(t){const i=this.g.get(t);if(i)return i.apiNotebook;const r=await this.c.$tryOpenNotebook(t),n=this.g.get(E.revive(r));return ma(n?.apiNotebook)}async showNotebookDocument(t,i){let r;typeof i=="object"?r={position:hi.from(i.viewColumn),preserveFocus:i.preserveFocus,selections:i.selections&&i.selections.map($n.from),pinned:typeof i.preview=="boolean"?!i.preview:void 0}:r={preserveFocus:!1,pinned:!0};const n=i?.asRepl?"repl":t.notebookType,s=await this.d.$tryShowNotebookDocument(t.uri,n,r),o=s&&this.h.get(s)?.apiEditor;if(o)return o;throw s?new Error(`Could NOT open editor for "${t.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${t.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(t,i,r,n){const s=this.f.get(t),o=E.revive(i),a=this.g.get(o);if(!a||!s)return;const c=a.getCellFromIndex(r);if(!c)return;const l=await s.provideCellStatusBarItems(c.apiCell,n);if(!l)return;const u=new He,h=this.p.add([u]),g=(Array.isArray(l)?l:[l]).map(m=>Dv.from(m,this.i,u));return{cacheId:h,items:g}}$releaseNotebookCellStatusBarItems(t){this.p.delete(t)}registerNotebookSerializer(t,i,r,n,s){if(Kc(i))throw new Error("viewType cannot be empty or just whitespace");const o=this.x++;return this.y.set(o,{viewType:i,serializer:r,options:n}),this.b.$registerNotebookSerializer(o,{id:t.identifier,location:t.extensionLocation},i,Iv.from(n),ch.w(t,s)),Ce(()=>{this.b.$unregisterNotebookSerializer(o)})}async $dataToNotebook(t,i,r){const n=this.y.get(t);if(!n)throw new Error("NO serializer found");const s=await n.serializer.deserializeNotebook(i.buffer,r);return new br(Qs.from(s))}async $notebookToData(t,i,r){const n=this.y.get(t);if(!n)throw new Error("NO serializer found");const s=await n.serializer.serializeNotebook(Qs.to(i.value),r);return Qe.wrap(s)}async $saveNotebook(t,i,r,n,s){const o=E.revive(i),a=this.y.get(t);if(this.D(`enter saveNotebook(versionId: ${r}, ${o.toString()})`),!a)throw new Error("NO serializer found");const c=this.g.get(o);if(!c)throw new Error("Document NOT found");if(c.versionId!==r)throw new Error("Document version mismatch");if(!this.s.value.isWritableFileSystem(o.scheme))throw new mm(d(2707,null,this.A(o)),Sr.FILE_PERMISSION_DENIED);const l={metadata:i4(c.apiNotebook.metadata,m=>!(a.options?.transientDocumentMetadata??{})[m]),cells:[]};for(const m of c.apiNotebook.getCells()){const b=new ff(m.kind,m.document.getText(),m.document.languageId,m.mime,a.options?.transientOutputs?[]:[...m.outputs],m.metadata,m.executionSummary);b.metadata=i4(m.metadata,k=>!(a.options?.transientCellMetadata??{})[k]),l.cells.push(b)}if(await this.z(o,n),s.isCancellationRequested)throw new Error("canceled");const u=await a.serializer.serializeNotebook(l,s);if(s.isCancellationRequested)throw new Error("canceled");this.D(`serialized versionId: ${r} ${o.toString()}`),await this.s.value.writeFile(o,u),this.D(`Finished write versionId: ${r} ${o.toString()}`);const h=this.s.getFileSystemProviderExtUri(o.scheme),f=await this.s.value.stat(o),g={name:h.basename(o),isFile:(f.type&Do.File)!==0,isDirectory:(f.type&Do.Directory)!==0,isSymbolicLink:(f.type&Do.SymbolicLink)!==0,mtime:f.mtime,ctime:f.ctime,size:f.size,readonly:!!((f.permissions??0)&Sa.Readonly)||!this.s.value.isWritableFileSystem(o.scheme),locked:!!((f.permissions??0)&Sa.Locked),etag:o4({mtime:f.mtime,size:f.size}),children:void 0};return this.D(`exit saveNotebook(versionId: ${r}, ${o.toString()})`),g}async $searchInNotebooks(t,i,r,n,s){const o=this.y.get(t)?.serializer;if(!o)return{limitHit:!1,results:[]};const a=new bb;await(async(f,g,m)=>{await Promise.all(f.map(async b=>await Promise.all(b.filenamePatterns.map(k=>{const I={_reason:m._reason,folderQueries:m.folderQueries,includePattern:m.includePattern,excludePattern:m.excludePattern,maxResults:m.maxResults,type:Ec.File,filePattern:k};return this.t.doInternalFileSearchWithCustomCallback(I,g,R=>{R.forEach(N=>{a.has(N)||n.some(q=>b.isFromSettings&&!q.isFromSettings?!1:q.filenamePatterns.some(ee=>GL(ee,N)))||a.add(N)})}).catch(R=>{if(R.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw R})}))))})(r,s,i);const l=new li;let u=!1;const h=Array.from(a).map(async f=>{const g=[];try{if(s.isCancellationRequested)return;if(i.maxResults&&[...l.values()].reduce((I,R)=>I+R.cellResults.length,0)>i.maxResults){u=!0;return}const m=[],b=this.g.get(f);if(b)b.apiNotebook.getCells().forEach(R=>m.push({input:R.document.getText(),outputs:R.outputs.flatMap(N=>N.items.map(z=>z.data.toString()))}));else{const I=await this.s.value.readFile(f),R=Qe.fromString(I.toString()),N=await o.deserializeNotebook(R.buffer,s);if(s.isCancellationRequested)return;Qs.from(N).cells.forEach(q=>m.push({input:q.source,outputs:q.outputs.flatMap(ee=>ee.items.map(pe=>pe.valueBytes.toString()))}))}if(s.isCancellationRequested)return;m.forEach((I,R)=>{const N=i.contentPattern.pattern,z=new UL(I.input,void 0,I.outputs),q=z.findInInputs(N),ee=z.findInOutputs(N),pe=ee.flatMap(re=>j9(re.matches,re.textBuffer)).map((re,fe)=>(re.webviewIndex=fe,re));if(q.length>0||ee.length>0){const re={index:R,contentResults:j9(q,z.inputTextBuffer),webviewResults:pe};g.push(re)}});const k={resource:f,cellResults:g};l.set(f,k);return}catch{return}});return await Promise.all(h),{limitHit:u,results:[...l.values()]}}async z(t,i){const r=await this.s.value.stat(t);if(typeof i?.mtime=="number"&&typeof i.etag=="string"&&i.etag!==GD&&typeof r.mtime=="number"&&typeof r.size=="number"&&i.mtime<r.mtime&&i.etag!==o4({mtime:i.mtime,size:r.size}))throw new mm(d(2708,null),Sr.FILE_MODIFIED_SINCE,i)}A(t){return t.scheme===de.file?t.fsPath:t.toString()}B(t,i,r){if(this.h.has(i))throw new Error(`editor with id ALREADY EXSIST: ${i}`);const n=new Ew(i,this.d,t,r.visibleRanges.map($n.to),r.selections.map($n.to),typeof r.viewColumn=="number"?hi.to(r.viewColumn):void 0);this.h.set(i,n)}$acceptDocumentAndEditorsDelta(t){if(t.value.removedDocuments)for(const r of t.value.removedDocuments){const n=E.revive(r),s=this.g.get(n);s&&(s.dispose(),this.g.delete(n),this.q.$acceptDocumentsAndEditorsDelta({removedDocuments:s.apiNotebook.getCells().map(o=>o.document.uri)}),this.n.fire(s.apiNotebook));for(const o of this.h.values())o.notebookData.uri.toString()===n.toString()&&this.h.delete(o.id)}if(t.value.addedDocuments){const r=[];for(const n of t.value.addedDocuments){const s=E.revive(n.uri);if(this.g.has(s))throw new Error(`adding EXISTING notebook ${s} `);const o=new IL(this.c,this.q,this.r,s,n);r.push(...n.cells.map(a=>yw.asModelAddData(a))),this.g.get(s)?.dispose(),this.g.set(s,o),this.q.$acceptDocumentsAndEditorsDelta({addedDocuments:r}),this.m.fire(o.apiNotebook)}}if(t.value.addedEditors)for(const r of t.value.addedEditors){if(this.h.has(r.id))return;const n=E.revive(r.documentUri),s=this.g.get(n);s&&this.B(s,r.id,r)}const i=[];if(t.value.removedEditors)for(const r of t.value.removedEditors){const n=this.h.get(r);n&&(this.h.delete(r),this.k?.id===n.id&&(this.k=void 0),i.push(n))}if(t.value.visibleEditors){this.l=t.value.visibleEditors.map(n=>this.h.get(n)).filter(n=>!!n);const r=new Set;this.l.forEach(n=>r.add(n.id));for(const n of this.h.values()){const s=r.has(n.id);n._acceptVisibility(s)}this.l=[...this.h.values()].map(n=>n).filter(n=>n.visible),this.o.fire(this.visibleNotebookEditors)}t.value.newActiveEditor===null?this.k=void 0:t.value.newActiveEditor&&(this.h.get(t.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${t.value.newActiveEditor}`),this.k=this.h.get(t.value.newActiveEditor)),t.value.newActiveEditor!==void 0&&this.j.fire(this.k?.apiEditor)}static C(t){const i=Q.String.with("notebookType","A notebook type"),r=new Pe("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[i,new Q("data","Bytes to convert to data",s=>s instanceof Uint8Array,s=>Qe.wrap(s))],new Ie("Notebook Data",s=>Qs.to(s.value))),n=new Pe("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[i,new Q("NotebookData","Notebook data to convert to bytes",s=>!0,s=>new br(Qs.from(s)))],new Ie("Bytes",s=>s.buffer));t.registerApiCommand(r),t.registerApiCommand(n)}D(t){this.u.trace(`[Extension Host Notebook] ${t}`)}},JL=class{constructor(e,t,i,r={timeout:1500,errors:3}){this.b=e,this.c=t,this.d=i,this.f=r,this.a=new qc}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,i,r)=>{const n=function(o){t.call(i,o)};return n.extension=e,this.a.event(n,void 0,r)}}async $participateInSave(e,t,i){const r=E.revive(e),n=this.c.getNotebookDocument(r);if(!n)throw new Error("Unable to resolve notebook document");const s=[];if(await this.a.fireAsync({notebook:n.apiNotebook,reason:Vf.to(t)},i,async(a,c)=>{const l=Date.now(),u=await await Promise.resolve(a);Date.now()-l>this.f.timeout&&this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier),!i.isCancellationRequested&&u&&(u instanceof Oo?s.push(u):this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier,"ignored due to invalid data"))}),i.isCancellationRequested)return!1;if(s.length===0)return!0;const o={edits:[]};for(const a of s){const{edits:c}=Hi.from(a);o.edits=o.edits.concat(c)}return this.d.$tryApplyWorkspaceEdit(new br(o))}},XL=class{constructor(e){this.c=e,this.a=new C,this.onDidSaveNotebookDocument=this.a.event,this.b=new C,this.onDidChangeNotebookDocument=this.b.event}$acceptModelChanged(e,t,i,r){const s=this.c.getNotebookDocument(E.revive(e)).acceptModelChanged(t.value,i,r);this.b.fire(s)}$acceptDirtyStateChanged(e,t){this.c.getNotebookDocument(E.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this.c.getNotebookDocument(E.revive(e));this.a.fire(t.apiNotebook)}},Rw=class{constructor(t,i){this.c=t,this.d=i,this.a=new C,this.b=new C,this.onDidChangeNotebookEditorSelection=this.a.event,this.onDidChangeNotebookEditorVisibleRanges=this.b.event}$acceptEditorPropertiesChanged(t,i){this.c.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",t,i);const r=this.d.getEditorById(t);i.visibleRanges&&r._acceptVisibleRanges(i.visibleRanges.ranges.map($n.to)),i.selections&&r._acceptSelections(i.selections.selections.map($n.to)),i.visibleRanges&&this.b.fire({notebookEditor:r.apiEditor,visibleRanges:r.apiEditor.visibleRanges}),i.selections&&this.a.fire(Object.freeze({notebookEditor:r.apiEditor,selections:r.apiEditor.selections}))}$acceptEditorViewColumns(t){for(const i in t)this.d.getEditorById(i)._acceptViewColumn(hi.to(t[i]))}};Rw=__decorate([__param(0,ut)],Rw);var Lc;(function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"})(Lc||(Lc={}));var qU=K("INotebookExecutionService"),ZL=100,G9;(function(e){e[e.Disconnected=1]="Disconnected",e[e.Connected=2]="Connected",e[e.Initializing=3]="Initializing"})(G9||(G9={}));var GU=K("INotebookKernelService"),QU=K("INotebookKernelHistoryService"),Tw=class{constructor(t,i,r,n,s){this.m=i,this.n=r,this.o=n,this.q=s,this.b=new li,this.c=new li,this.f=new Map,this.g=0,this.h=new Map,this.i=0,this.j=new Map,this.k=0,this.l=new C,this.onDidChangeNotebookCellExecutionState=this.l.event,this.r=0,this.s={},this.a=t.getProxy(se.MainThreadNotebookKernels);const o=new Pe("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new Q("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this.n.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this.n.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return{notebookEditorId:l}}return c})],Ie.Void),a=new Pe("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[Q.Uri],new Ie("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this.o.registerApiCommand(o),this.o.registerApiCommand(a)}createNotebookController(t,i,r,n,s,o){for(const q of this.j.values())if(q.controller.id===i&&dt.equals(t.identifier,q.extensionId))throw new Error(`notebook controller with id '${i}' ALREADY exist`);const a=this.k++,c=this;this.q.trace(`NotebookController[${a}], CREATED by ${t.identifier.value}, ${i}`);const l=()=>console.warn(`NO execute handler from notebook controller '${g.id}' of extension: '${t.identifier}'`);let u=!1;const h=new C,f=new C,g={id:qp(t.identifier,i),notebookType:r,extensionId:t.identifier,extensionLocation:t.extensionLocation,label:n||t.identifier.value,preloads:o?o.map(Xf.from):[]};let m=s??l,b,k;this.a.$addKernel(a,g).catch(q=>{console.log(q),u=!0});let I=0;const R=()=>{if(u)return;const q=++I;Promise.resolve().then(()=>{q===I&&this.a.$updateKernel(a,g)})},N=new li,z={get id(){return i},get notebookType(){return g.notebookType},onDidChangeSelectedNotebooks:h.event,get label(){return g.label},set label(q){g.label=q??t.displayName??t.name,R()},get detail(){return g.detail??""},set detail(q){g.detail=q,R()},get description(){return g.description??""},set description(q){g.description=q,R()},get supportedLanguages(){return g.supportedLanguages},set supportedLanguages(q){g.supportedLanguages=q,R()},get supportsExecutionOrder(){return g.supportsExecutionOrder??!1},set supportsExecutionOrder(q){g.supportsExecutionOrder=q,R()},get rendererScripts(){return g.preloads?g.preloads.map(Xf.to):[]},get executeHandler(){return m},set executeHandler(q){m=q??l},get interruptHandler(){return b},set interruptHandler(q){b=q,g.supportsInterrupt=!!q,R()},set variableProvider(q){B(t,"notebookVariableProvider"),k=q,g.hasVariableProvider=!!q,q?.onDidChangeVariables(ee=>c.a.$variablesUpdated(ee.uri)),R()},get variableProvider(){return k},createNotebookCellExecution(q){if(u)throw new Error("notebook controller is DISPOSED");if(!N.has(q.notebook.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(N.keys()).map(ee=>ee.toString())),new Error(`notebook controller is NOT associated to notebook: ${q.notebook.uri.toString()}`);return c._createNotebookCellExecution(q,qp(t.identifier,this.id))},createNotebookExecution(q){if(B(t,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!N.has(q.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(N.keys()).map(ee=>ee.toString())),new Error(`notebook controller is NOT associated to notebook: ${q.uri.toString()}`);return c._createNotebookExecution(q,qp(t.identifier,this.id))},dispose:()=>{u||(this.q.trace(`NotebookController[${a}], DISPOSED`),u=!0,this.j.delete(a),h.dispose(),f.dispose(),this.a.$removeKernel(a))},updateNotebookAffinity(q,ee){ee===vf.Hidden&&B(t,"notebookControllerAffinityHidden"),c.a.$updateNotebookPriority(a,q.uri,ee)},onDidReceiveMessage:f.event,postMessage(q,ee){return B(t,"notebookMessaging"),c.a.$postMessage(a,ee&&c.n.getIdByEditor(ee),q)},asWebviewUri(q){return B(t,"notebookMessaging"),Wu(q,c.m.remote)}};return this.j.set(a,{extensionId:t.identifier,controller:z,onDidReceiveMessage:f,onDidChangeSelection:h,associatedNotebooks:N}),z}getIdByController(t){for(const[i,r]of this.j)if(r.controller===t)return qp(r.extensionId,t.id);return null}createNotebookControllerDetectionTask(t,i){const r=this.g++,n=this;this.q.trace(`NotebookControllerDetectionTask[${r}], CREATED by ${t.identifier.value}`),this.a.$addKernelDetectionTask(r,i);const s={dispose:()=>{this.f.delete(r),n.a.$removeKernelDetectionTask(r)}};return this.f.set(r,s),s}registerKernelSourceActionProvider(t,i,r){const n=this.i++,s=typeof r.onDidChangeNotebookKernelSourceActions=="function"?n:void 0,o=this;this.h.set(n,r),this.q.trace(`NotebookKernelSourceActionProvider[${n}], CREATED by ${t.identifier.value}`),this.a.$addKernelSourceActionProvider(n,n,i);let a;return s!==void 0&&(a=r.onDidChangeNotebookKernelSourceActions(c=>this.a.$emitNotebookKernelSourceActionsChangeEvent(s))),{dispose:()=>{this.h.delete(n),o.a.$removeKernelSourceActionProvider(n,n),a?.dispose()}}}async $provideKernelSourceActions(t,i){const r=this.h.get(t);if(r){const n=new He;return(await r.provideNotebookKernelSourceActions(i)??[]).map(o=>$v.from(o,this.o.converter,n))}return[]}$acceptNotebookAssociation(t,i,r){const n=this.j.get(t);if(n){const s=this.n.getNotebookDocument(E.revive(i));r?n.associatedNotebooks.set(s.uri,!0):n.associatedNotebooks.delete(s.uri),this.q.trace(`NotebookController[${t}] ASSOCIATE notebook`,s.uri.toString(),r),n.onDidChangeSelection.fire({selected:r,notebook:s.apiNotebook})}}async $executeCells(t,i,r){const n=this.j.get(t);if(!n)return;const s=this.n.getNotebookDocument(E.revive(i)),o=[];for(const a of r){const c=s.getCell(a);c&&o.push(c.apiCell)}try{this.q.trace(`NotebookController[${t}] EXECUTE cells`,s.uri.toString(),o.length),await n.controller.executeHandler.call(n.controller,o,s.apiNotebook,n.controller)}catch(a){this.q.error(`NotebookController[${t}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(t,i,r){const n=this.j.get(t);if(!n)return;const s=this.n.getNotebookDocument(E.revive(i));if(n.controller.interruptHandler)await n.controller.interruptHandler.call(n.controller,s.apiNotebook);else for(const o of r){const a=s.getCell(o);a&&this.b.get(a.uri)?.cancel()}if(n.controller.interruptHandler){const o=this.c.get(s.uri);this.c.delete(s.uri),r.length&&Array.isArray(o)&&o.length&&o.forEach(a=>a.dispose())}}async $provideVariables(t,i,r,n,s,o,a){const c=this.j.get(t);if(!c)return;const l=this.n.getNotebookDocument(E.revive(r)),u=c.controller.variableProvider;if(!u)return;let h;if(n!==void 0){if(h=this.s[n],!h)return}else this.s={};const f=s==="named"?iu.Named:iu.Indexed,g=u.provideVariables(l.apiNotebook,h,f,o,a);let m=0;for await(const b of g){if(a.isCancellationRequested)return;const k={id:this.r++,name:b.variable.name,value:b.variable.value,type:b.variable.type,interfaces:b.variable.interfaces,language:b.variable.language,expression:b.variable.expression,hasNamedChildren:b.hasNamedChildren,indexedChildrenCount:b.indexedChildrenCount,extensionId:c.extensionId.value};if(this.s[k.id]=b.variable,this.a.$receiveVariable(i,k),m++>=ZL)return}}$acceptKernelMessageFromRenderer(t,i,r){const n=this.j.get(t);if(!n)return;const s=this.n.getEditorById(i);n.onDidReceiveMessage.fire(Object.freeze({editor:s.apiEditor,message:r}))}$cellExecutionChanged(t,i,r){const s=this.n.getNotebookDocument(E.revive(t)).getCell(i);if(s){const o=r?kv.to(r):nc.Idle;o!==void 0&&this.l.fire({cell:s.apiCell,state:o})}}_createNotebookCellExecution(t,i){if(t.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const n=this.n.getNotebookDocument(t.notebook.uri).getCellFromApiCell(t);if(!n)throw new Error("invalid cell");if(this.b.has(n.uri))throw new Error(`duplicate execution for ${n.uri}`);const s=new YL(i,n,this.a);this.b.set(n.uri,s);const o=s.onDidChangeState(()=>{s.state===un.Resolved&&(s.dispose(),o.dispose(),this.b.delete(n.uri))});return s.asApiObject()}_createNotebookExecution(t,i){const r=this.n.getNotebookDocument(t.uri),n=t.getCells().find(a=>{const c=r.getCellFromApiCell(a);return c&&this.b.has(c.uri)});if(n)throw new Error(`duplicate cell execution for ${n.document.uri}`);if(this.c.has(r.uri))throw new Error(`duplicate notebook execution for ${r.uri}`);const s=new KL(i,r,this.a),o=s.onDidChangeState(()=>{s.state===gs.Resolved&&(s.dispose(),o.dispose(),this.c.delete(r.uri))});return this.c.set(r.uri,[s,o]),s.asApiObject()}};Tw=__decorate([__param(4,ut)],Tw);var un;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(un||(un={}));var YL=class lS extends Te{static{this.a=0}get state(){return this.f}constructor(t,i,r){super(),this.m=i,this.n=r,this.b=lS.a++,this.c=new C,this.onDidChangeState=this.c.event,this.f=un.Init,this.g=this.B(new ri),this.h=new e_(10,n=>this.s(n)),this.j=i.internalMetadata.executionOrder,this.n.$createExecution(this.b,t,this.m.notebook.uri,this.m.handle)}cancel(){this.g.cancel()}async r(t){await this.h.addItem(t)}async s(t){const i=Array.isArray(t)?t:[t];return this.n.$updateExecution(this.b,new br(i))}t(){if(this.f===un.Init)throw new Error("Must call start before modifying cell output");if(this.f===un.Resolved)throw new Error("Cannot modify cell output after calling resolve")}w(t){let i=this.m;if(t&&(i=this.m.notebook.getCellFromApiCell(t)),!i)throw new Error("INVALID cell");return i.handle}y(t){return t.map(i=>{const r=pf.ensureUniqueMimeTypes(i.items,!0);return r===i.items?Js.from(i):Js.from({items:r,id:i.id,metadata:i.metadata})})}async z(t,i,r){const n=this.w(i),s=this.y(fn(t));return this.r({editType:Lc.Output,cellHandle:n,append:r,outputs:s})}async C(t,i,r){return t=pf.ensureUniqueMimeTypes(fn(t),!0),this.r({editType:Lc.OutputItems,items:t.map(gc.from),outputId:i.id,append:r})}asApiObject(){const t=this;return Object.freeze({get token(){return t.g.token},get cell(){return t.m.apiCell},get executionOrder(){return t.j},set executionOrder(r){t.j=r,t.s([{editType:Lc.ExecutionState,executionOrder:t.j}])},start(r){if(t.f===un.Resolved||t.f===un.Started)throw new Error("Cannot call start again");t.f=un.Started,t.c.fire(),t.s({editType:Lc.ExecutionState,runStartTime:r})},end(r,n,s){if(t.f===un.Resolved)throw new Error("Cannot call resolve twice");t.f=un.Resolved,t.c.fire(),t.h.flush();const o=s?{message:s.message,stack:s.stack,location:s?.location?{startLineNumber:s.location.start.line,startColumn:s.location.start.character,endLineNumber:s.location.end.line,endColumn:s.location.end.character}:void 0,uri:s.uri}:void 0;t.n.$completeExecution(t.b,new br({runEndTime:n,lastRunSuccess:r,error:o}))},clearOutput(r){return t.t(),t.z([],r,!1)},appendOutput(r,n){return t.t(),t.z(r,n,!0)},replaceOutput(r,n){return t.t(),t.z(r,n,!1)},appendOutputItems(r,n){return t.t(),t.C(r,n,!0)},replaceOutputItems(r,n){return t.t(),t.C(r,n,!1)}})}},gs;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(gs||(gs={}));var KL=class uS extends Te{static{this.a=0}get state(){return this.f}constructor(t,i,r){super(),this.h=i,this.j=r,this.b=uS.a++,this.c=new C,this.onDidChangeState=this.c.event,this.f=gs.Init,this.g=this.B(new ri),this.j.$createNotebookExecution(this.b,t,this.h.uri)}cancel(){this.g.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this.f===gs.Resolved||this.f===gs.Started)throw new Error("Cannot call start again");this.f=gs.Started,this.c.fire(),this.j.$beginNotebookExecution(this.b)},end:()=>{if(this.f===gs.Resolved)throw new Error("Cannot call resolve twice");this.f=gs.Resolved,this.c.fire(),this.j.$completeNotebookExecution(this.b)}})}},e_=class{constructor(e,t){this.f=e,this.g=t,this.a=[],this.b=Date.now()}addItem(e){return this.a.push(e),this.c||(this.c=new wa,this.b=Date.now(),mn(this.f).then(()=>this.flush())),Date.now()-this.b>this.f?this.flush():this.c.p}flush(){if(this.a.length===0||!this.c)return Promise.resolve();const e=this.c;this.c=void 0;const t=this.a;return this.a=[],this.g(t).finally(()=>e.complete())}};function qp(e,t){return`${e.value}/${t}`}var t_=class{constructor(e,t){this.c=t,this.a=new Map,this.b=e.getProxy(se.MainThreadNotebookRenderers)}$postRendererMessage(e,t,i){const r=this.c.getEditorById(e);this.a.get(t)?.fire({editor:r.apiEditor,message:i})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some(r=>r.id===t))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(r,n,s)=>this.d(t).event(r,n,s),postMessage:(r,n)=>{Ew.apiEditorsToExtHost.has(r)&&([r,n]=[n,r]);const s=n&&Ew.apiEditorsToExtHost.get(n);return this.b.$postMessage(s?.id,t,r)}}}d(e){let t=this.a.get(e);return t||(t=new C({onDidRemoveLastListener:()=>{t?.dispose(),this.a.delete(e)}}),this.a.set(e,t),t)}},i_=class{constructor(e){this.b=new Map,this.a=e.getProxy(se.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,i){if(B(e,"profileContentHandlers"),this.b.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.b.set(t,i),this.a.$registerProfileContentHandler(t,i.name,i.description,e.identifier.value),Ce(()=>{this.b.delete(t),this.a.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,i,r){const n=this.b.get(e);if(!n)throw new Error(`Unknown handler with id: ${e}`);return n.saveProfile(t,i,r)}async $readProfile(e,t,i){const r=this.b.get(e);if(!r)throw new Error(`Unknown handler with id: ${e}`);return r.readProfile(Xe(t)?t:E.revive(t),i)}},r_=class{constructor(e){this.b=0,this.c=new Map,this.a=e}async withProgress(e,t,i){const r=this.b++,{title:n,location:s,cancellable:o}=t,a={label:e.displayName||e.name,id:e.identifier.value};return this.a.$startProgress(r,{location:Sv.from(s),title:n,source:a,cancellable:o},e.isUnderDevelopment?void 0:e.identifier.value).catch(yg),this.d(r,i,!!o)}d(e,t,i){let r;i&&(r=new ri,this.c.set(e,r));const n=o=>{this.a.$progressEnd(o),this.c.delete(o),r?.dispose()};let s;try{s=t(new Q9(this.a,e),i&&r?r.token:Wt.None)}catch(o){throw n(e),o}return s.then(o=>n(e),o=>n(e)),s}$acceptProgressCanceled(e){const t=this.c.get(e);t&&(t.cancel(),this.c.delete(e))}};function n_(e,t){return e.message=t.message,typeof t.increment=="number"&&(typeof e.increment=="number"?e.increment+=t.increment:e.increment=t.increment),e}var Q9=class extends Lm{constructor(e,t){super(i=>this.throttledReport(i)),this.c=e,this.d=t}throttledReport(e){this.c.$progressReport(this.d,e)}};__decorate([MT(100,(e,t)=>n_(e,t),()=>Object.create(null))],Q9.prototype,"throttledReport",null);var s_=class hS{static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(se.MainThreadQuickDiff)}$provideOriginalResource(t,i,r){const n=E.revive(i),s=this.c.get(t);return s?_i(()=>s.provideOriginalResource(n,r)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(t,i,r,n){const s=hS.a++;return this.c.set(s,i),this.b.$registerQuickDiffProvider(s,ac.from(t,this.d),r,n),{dispose:()=>{this.b.$unregisterQuickDiffProvider(s),this.c.delete(s)}}}};function o_(e,t,i){const r=e.getProxy(se.MainThreadQuickOpen);class n{constructor(g,m){this.e=new Map,this.f=0,this.a=g,this.b=m}showQuickPick(g,m,b,k=Wt.None){this.c=void 0;const I=Promise.resolve(m),R=++this.f,N=r.$show(R,{title:b?.title,placeHolder:b?.placeHolder,matchOnDescription:b?.matchOnDescription,matchOnDetail:b?.matchOnDetail,ignoreFocusLost:b?.ignoreFocusOut,canPickMany:b?.canPickMany},k),z={},q=N.then(()=>z);return Promise.race([q,I]).then(ee=>{if(ee===z)return;const pe=pi(g,"quickPickItemTooltip");return I.then(re=>{const fe=[];for(let We=0;We<re.length;We++){const Ae=re[We];if(typeof Ae=="string")fe.push({label:Ae,handle:We});else if(Ae.kind===tu.Separator)fe.push({type:"separator",label:Ae.label});else{Ae.tooltip&&!pe&&console.warn(`Extension '${g.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${g.identifier.value}`);const bt=Ae.iconPath?l(Ae.iconPath):void 0;fe.push({label:Ae.label,iconPath:bt?.iconPath,iconClass:bt?.iconClass,description:Ae.description,detail:Ae.detail,picked:Ae.picked,alwaysShow:Ae.alwaysShow,tooltip:pe?Ge.fromStrict(Ae.tooltip):void 0,handle:We})}}return b&&typeof b.onDidSelectItem=="function"&&(this.c=We=>{b.onDidSelectItem(re[We])}),r.$setItems(R,fe),N.then(We=>{if(typeof We=="number")return re[We];if(Array.isArray(We))return We.map(Ae=>re[Ae])})})}).then(void 0,ee=>{if(!co(ee))return r.$setError(R,ee),Promise.reject(ee)})}$onItemSelected(g){this.c?.(g)}showInput(g,m=Wt.None){return this.d=g?.validateInput,r.$input(g,typeof this.d=="function",m).then(void 0,b=>{if(!co(b))return Promise.reject(b)})}async $validateInput(g){if(!this.d)return;const m=await this.d(g);if(!m||typeof m=="string")return m;let b;switch(m.severity){case rc.Info:b=Zt.Info;break;case rc.Warning:b=Zt.Warning;break;case rc.Error:b=Zt.Error;break;default:b=m.message?Zt.Error:Zt.Ignore;break}return{content:m.message,severity:b}}async showWorkspaceFolderPick(g,m=Wt.None){const b=await this.b.executeCommand("_workbench.pickWorkspaceFolder",[g]);if(!b)return;const k=await this.a.getWorkspaceFolders2();if(k)return k.find(I=>I.uri.toString()===b.uri.toString())}createQuickPick(g){const m=new u(g,()=>this.e.delete(m._id));return this.e.set(m._id,m),m}createInputBox(g){const m=new h(g,()=>this.e.delete(m._id));return this.e.set(m._id,m),m}$onDidChangeValue(g,m){this.e.get(g)?._fireDidChangeValue(m)}$onDidAccept(g){this.e.get(g)?._fireDidAccept()}$onDidChangeActive(g,m){const b=this.e.get(g);b instanceof u&&b._fireDidChangeActive(m)}$onDidChangeSelection(g,m){const b=this.e.get(g);b instanceof u&&b._fireDidChangeSelection(m)}$onDidTriggerButton(g,m){this.e.get(g)?._fireDidTriggerButton(m)}$onDidTriggerItemButton(g,m,b){const k=this.e.get(g);k instanceof u&&k._fireDidTriggerItemButton(m,b)}$onDidHide(g){this.e.get(g)?._fireDidHide()}}class s{static{this.a=1}constructor(g,m){this.x=g,this.y=m,this._id=u.a++,this.e=!1,this.f=!1,this.g=!0,this.j=!1,this.k=!0,this.l="",this.n=[],this.o=new Map,this.p=new C,this.q=new C,this.r=new C,this.s=new C,this.u={id:this._id},this.v=!1,this.w=[this.r,this.s,this.p,this.q],this.onDidChangeValue=this.q.event,this.onDidAccept=this.p.event,this.onDidTriggerButton=this.r.event,this.onDidHide=this.s.event}get title(){return this.b}set title(g){this.b=g,this.z({title:g})}get step(){return this.c}set step(g){this.c=g,this.z({step:g})}get totalSteps(){return this.d}set totalSteps(g){this.d=g,this.z({totalSteps:g})}get enabled(){return this.g}set enabled(g){this.g=g,this.z({enabled:g})}get busy(){return this.j}set busy(g){this.j=g,this.z({busy:g})}get ignoreFocusOut(){return this.k}set ignoreFocusOut(g){this.k=g,this.z({ignoreFocusOut:g})}get value(){return this.l}set value(g){this.l=g,this.z({value:g})}get placeholder(){return this.m}set placeholder(g){this.m=g,this.z({placeholder:g})}get buttons(){return this.n}set buttons(g){const m=pi(this.x,"quickInputButtonLocation");!m&&g.some(b=>b.location)&&console.warn(`Extension '${this.x.identifier.value}' uses a button location which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.x.identifier.value}`),this.n=g.slice(),this.o.clear(),g.forEach((b,k)=>{const I=b===eu.Back?-1:k;this.o.set(I,b)}),this.z({buttons:g.map((b,k)=>({...l(b.iconPath),tooltip:b.tooltip,handle:b===eu.Back?-1:k,location:m?b.location:void 0}))})}show(){this.e=!0,this.f=!0,this.z({visible:!0})}hide(){this.e=!1,this.z({visible:!1})}_fireDidAccept(){this.p.fire()}_fireDidChangeValue(g){this.l=g,this.q.fire(g)}_fireDidTriggerButton(g){const m=this.o.get(g);m&&this.r.fire(m)}_fireDidHide(){this.f&&(this.f=this.e,this.s.fire())}dispose(){this.v||(this.v=!0,this._fireDidHide(),this.w=On(this.w),this.t&&(clearTimeout(this.t),this.t=void 0),this.y(),r.$dispose(this._id))}z(g){if(!this.v){for(const m of Object.keys(g)){const b=g[m];this.u[m]=b===void 0?null:b}"visible"in this.u?(this.t&&(clearTimeout(this.t),this.t=void 0),this.A()):this.e&&!this.t&&(this.t=setTimeout(()=>{this.t=void 0,this.A()},0))}}A(){r.$createOrUpdate(this.u),this.u={id:this._id}}}function o(f){if(f instanceof Bi)return{id:f.id};const g=c(f),m=a(f);return{dark:typeof g=="string"?E.file(g):g,light:typeof m=="string"?E.file(m):m}}function a(f){return typeof f=="object"&&"light"in f?f.light:f}function c(f){return typeof f=="object"&&"dark"in f?f.dark:f}function l(f){const g=o(f);let m,b;return"id"in g?b=Ai.asClassName(g):m=g,{iconPath:m,iconClass:b}}class u extends s{constructor(g,m){super(g,m),this.B=[],this.C=new Map,this.D=new Map,this.E=!1,this.F=!0,this.G=!0,this.H=!0,this.I=!1,this.J=[],this.K=new C,this.L=[],this.M=new C,this.N=new C,this.onDidChangeActive=this.K.event,this.onDidChangeSelection=this.M.event,this.onDidTriggerItemButton=this.N.event,this.w.push(this.K,this.M,this.N),this.z({type:"quickPick"})}get items(){return this.B}set items(g){this.B=g.slice(),this.C.clear(),this.D.clear(),g.forEach((k,I)=>{this.C.set(I,k),this.D.set(k,I)});const m=pi(this.x,"quickPickItemTooltip"),b=[];for(let k=0;k<g.length;k++){const I=g[k];if(I.kind===tu.Separator)b.push({type:"separator",label:I.label});else{I.tooltip&&!m&&console.warn(`Extension '${this.x.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.x.identifier.value}`);const R=I.iconPath?l(I.iconPath):void 0;b.push({handle:k,label:I.label,iconPath:R?.iconPath,iconClass:R?.iconClass,description:I.description,detail:I.detail,picked:I.picked,alwaysShow:I.alwaysShow,tooltip:m?Ge.fromStrict(I.tooltip):void 0,buttons:I.buttons?.map((N,z)=>({...l(N.iconPath),tooltip:N.tooltip,handle:z}))})}}this.z({items:b})}get canSelectMany(){return this.E}set canSelectMany(g){this.E=g,this.z({canSelectMany:g})}get matchOnDescription(){return this.F}set matchOnDescription(g){this.F=g,this.z({matchOnDescription:g})}get matchOnDetail(){return this.G}set matchOnDetail(g){this.G=g,this.z({matchOnDetail:g})}get sortByLabel(){return this.H}set sortByLabel(g){this.H=g,this.z({sortByLabel:g})}get keepScrollPosition(){return this.I}set keepScrollPosition(g){this.I=g,this.z({keepScrollPosition:g})}get activeItems(){return this.J}set activeItems(g){this.J=g.filter(m=>this.D.has(m)),this.z({activeItems:this.J.map(m=>this.D.get(m))})}get selectedItems(){return this.L}set selectedItems(g){this.L=g.filter(m=>this.D.has(m)),this.z({selectedItems:this.L.map(m=>this.D.get(m))})}_fireDidChangeActive(g){const m=ci(g.map(b=>this.C.get(b)));this.J=m,this.K.fire(m)}_fireDidChangeSelection(g){const m=ci(g.map(b=>this.C.get(b)));this.L=m,this.M.fire(m)}_fireDidTriggerItemButton(g,m){const b=this.C.get(g);if(!b||!b.buttons||!b.buttons.length)return;const k=b.buttons[m];k&&this.N.fire({button:k,item:b})}}class h extends s{constructor(g,m){super(g,m),this.B=!1,this.z({type:"inputBox"})}get password(){return this.B}set password(g){this.B=g,this.z({password:g})}get prompt(){return this.C}set prompt(g){this.C=g,this.z({prompt:g})}get valueSelection(){return this.D}set valueSelection(g){this.D=g,this.z({valueSelection:g})}get validationMessage(){return this.E}set validationMessage(g){this.E=g,g?typeof g=="string"?this.z({validationMessage:g,severity:Zt.Error}):this.z({validationMessage:g.message,severity:g.severity??Zt.Error}):this.z({validationMessage:void 0,severity:Zt.Ignore})}}return new n(t,i)}var J9=new nr(()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),XU=new nr(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),ZU=new nr(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function a_(e,t,i=!1){const r=e||"",n=t||"",s=J9.value.collator.compare(r,n);return J9.value.collatorIsNumeric&&s===0&&r!==n?r<n?-1:1:s}function c_(e,t,i=!1){return i||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function Gp(e,t,i=!1){const r=e.split(Wr),n=t.split(Wr),s=r.length-1,o=n.length-1;let a,c;for(let l=0;;l++){if(a=s===l,c=o===l,a&&c)return a_(r[l],n[l],i);if(a)return-1;if(c)return 1;const u=c_(r[l],n[l],i);if(u!==0)return u}}var Lw;function X9(e){return e instanceof E}function l_(e,t){return e.scheme===de.file&&t.scheme===de.file&&ks?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function _w(e){if(e)return typeof e.iconPath=="string"?E.file(e.iconPath):E.isUri(e.iconPath)||Ai.isThemeIcon(e.iconPath)?e.iconPath:void 0}function Z9(e){if(e){if(E.isUri(e))return e;if(Ai.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}else return}function Cw(e){const t=Z9(e.icon),i=e.labels?.map(r=>({title:r.title,icon:Z9(r.icon)}));return{...e,icon:t,labels:i}}function Nw(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(e.iconPath){if(!t.iconPath)return 1}else return-1;const i=typeof e.iconPath=="string"?e.iconPath:E.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,r=typeof t.iconPath=="string"?t.iconPath:E.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return Gp(i,r)}function u_(e,t){let i=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(i=Nw(e,t),i!==0)return i;if(e.light&&t.light)i=Nw(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(i!==0)return i;if(e.dark&&t.dark)i=Nw(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return i}function h_(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(e.tooltip!==void 0&&t.tooltip!==void 0)return e.tooltip<t.tooltip?-1:1;if(e.tooltip!==void 0)return 1;if(t.tooltip!==void 0)return-1}if(e.arguments===t.arguments)return 0;if(e.arguments)if(t.arguments){if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length}else return 1;else return-1;for(let i=0;i<e.arguments.length;i++){const r=e.arguments[i],n=t.arguments[i];if(r!==n&&!(X9(r)&&X9(n)&&l_(r,n)))return r<n?-1:1}return 0}function Y9(e,t){let i=Gp(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(i!==0)return i;if(e.command&&t.command)i=h_(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(i!==0)return i;if(e.decorations&&t.decorations)i=u_(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)i=Gp(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)i=Gp(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return i}function d_(e,t){for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function f_(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?d_(e.arguments,t.arguments):e.arguments===t.arguments)}function p_(e,t){return Nn(e,t,f_)}var g_=class{#e;#t;get value(){return this.d}set value(e){e=e??"",this.#e.$setInputBoxValue(this.m,e),this.o(e)}get onDidChange(){return this.e.event}get placeholder(){return this.f}set placeholder(e){this.#e.$setInputBoxPlaceholder(this.m,e),this.f=e}get validateInput(){return B(this.k,"scmValidation"),this.g}set validateInput(e){if(B(this.k,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this.k.identifier.value}]: Invalid SCM input box validation function`);this.g=e,this.#e.$setValidationProviderIsEnabled(this.m,!!e)}get enabled(){return this.h}set enabled(e){e=!!e,this.h!==e&&(this.h=e,this.#e.$setInputBoxEnablement(this.m,e))}get visible(){return this.j}set visible(e){e=!!e,this.j!==e&&(this.j=e,this.#e.$setInputBoxVisibility(this.m,e))}get document(){return B(this.k,"scmTextDocument"),this.#t.getDocument(this.n)}constructor(e,t,i,r,n){this.k=e,this.m=r,this.n=n,this.d="",this.e=new C,this.f="",this.h=!0,this.j=!0,this.#t=t,this.#e=i}showValidationMessage(e,t){B(this.k,"scmValidation"),this.#e.$showValidationMessage(this.m,e,t)}$onInputBoxValueChange(e){this.o(e)}o(e){this.d=e,this.e.fire(e)}},m_=class dS{static{this.d=0}get disposed(){return this.m}get id(){return this.v}get label(){return this.w}set label(t){this.w=t,this.s.$updateGroupLabel(this.u,this.handle,t)}get hideWhenEmpty(){return this.q}set hideWhenEmpty(t){this.q=t,this.s.$updateGroup(this.u,this.handle,this.features)}get features(){return{hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this.f]}set resourceStates(t){this.f=[...t],this.k.fire()}constructor(t,i,r,n,s,o,a){this.s=t,this.t=i,this.u=r,this.v=n,this.w=s,this.multiDiffEditorEnableViewChanges=o,this.x=a,this.e=0,this.f=[],this.g=new Map,this.h=new Map,this.j=new Map,this.k=new C,this.onDidUpdateResourceStates=this.k.event,this.m=!1,this.n=new C,this.onDidDispose=this.n.event,this.o=[],this.p=[],this.q=void 0,this.handle=dS.d++}getResourceState(t){return this.g.get(t)}$executeResourceCommand(t,i){const r=this.h.get(t);return r?_i(()=>this.t.executeCommand(r.command,...r.arguments||[],i)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const t=[...this.f].sort(Y9),r=db(this.p,t,Y9).map(o=>{const a=o.toInsert.map(c=>{const l=this.e++;this.g.set(l,c);const u=c.resourceUri;let h;if(c.command)if(c.command.command==="vscode.open"||c.command.command==="vscode.diff"||c.command.command==="vscode.changes"){const re=new He;h=this.t.converter.toInternal(c.command,re),this.j.set(l,re)}else this.h.set(l,c.command);const f=pi(this.x,"scmMultiDiffEditor"),g=f?c.multiDiffEditorOriginalUri:void 0,m=f?c.multiFileDiffEditorModifiedUri:void 0,b=_w(c.decorations),k=c.decorations&&_w(c.decorations.light)||b,I=c.decorations&&_w(c.decorations.dark)||b,R=[k,I],N=c.decorations&&c.decorations.tooltip||"",z=c.decorations&&!!c.decorations.strikeThrough,q=c.decorations&&!!c.decorations.faded,ee=c.contextValue||"";return{rawResource:[l,u,R,N,z,q,ee,h,g,m],handle:l}});return{start:o.start,deleteCount:o.deleteCount,toInsert:a}}),n=r.map(({start:o,deleteCount:a,toInsert:c})=>[o,a,c.map(l=>l.rawResource)]),s=r.reverse();for(const{start:o,deleteCount:a,toInsert:c}of s){const l=c.map(h=>h.handle),u=this.o.splice(o,a,...l);for(const h of u)this.g.delete(h),this.h.delete(h),this.j.get(h)?.dispose(),this.j.delete(h)}return this.p=t,n}dispose(){this.m=!0,this.n.fire()}},Ow=class fS{static{this.d=0}#e;get id(){return this.A}get label(){return this.B}get rootUri(){return this.C}get inputBox(){return this.f}get count(){return this.g}set count(t){this.g!==t&&(this.g=t,this.#e.$updateSourceControl(this.x,{count:t}))}get quickDiffProvider(){return this.h}set quickDiffProvider(t){this.h=t;let i;pi(this.y,"quickDiffProvider")&&(i=t?.label),this.#e.$updateSourceControl(this.x,{hasQuickDiffProvider:!!t,quickDiffLabel:i})}get historyProvider(){return B(this.y,"scmHistoryProvider"),this.j}set historyProvider(t){B(this.y,"scmHistoryProvider"),this.j=t,this.k.value=new He,this.#e.$updateSourceControl(this.x,{hasHistoryProvider:!!t}),t&&this.k.value.add(t.onDidChangeCurrentHistoryItemGroup(()=>{this.m=t?.currentHistoryItemGroup,this.#e.$onDidChangeHistoryProviderCurrentHistoryItemGroup(this.x,this.m)}))}get commitTemplate(){return this.n}set commitTemplate(t){t!==this.n&&(this.n=t,this.#e.$updateSourceControl(this.x,{commitTemplate:t}))}get acceptInputCommand(){return this.p}set acceptInputCommand(t){this.o.value=new He,this.p=t;const i=this.z.converter.toInternal(t,this.o.value);this.#e.$updateSourceControl(this.x,{acceptInputCommand:i})}get actionButton(){return B(this.y,"scmActionButton"),this.s}set actionButton(t){B(this.y,"scmActionButton"),this.q.value=new He,this.s=t;const i=t!==void 0?{command:this.z.converter.toInternal(t.command,this.q.value),secondaryCommands:t.secondaryCommands?.map(r=>r.map(n=>this.z.converter.toInternal(n,this.q.value))),description:t.description,enabled:t.enabled}:void 0;this.#e.$updateSourceControl(this.x,{actionButton:i??null})}get statusBarCommands(){return this.u}set statusBarCommands(t){if(this.u&&t&&p_(this.u,t))return;this.t.value=new He,this.u=t;const i=(t||[]).map(r=>this.z.converter.toInternal(r,this.t.value));this.#e.$updateSourceControl(this.x,{statusBarCommands:i})}get selected(){return this.v}constructor(t,i,r,n,s,o,a){this.y=t,this.z=n,this.A=s,this.B=o,this.C=a,this.e=new Map,this.g=void 0,this.h=void 0,this.k=new ho,this.n=void 0,this.o=new ho,this.p=void 0,this.q=new ho,this.t=new ho,this.u=void 0,this.v=!1,this.w=new C,this.onDidChangeSelection=this.w.event,this.x=fS.d++,this.D=new Map,this.E=new Set,this.#e=r;const c=E.from({scheme:de.vscodeSourceControl,path:`${s}/scm${this.x}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this.f=new g_(t,i,this.#e,this.x,c),this.#e.$registerSourceControl(this.x,s,o,a,c)}createResourceGroup(t,i,r){const n=pi(this.y,"scmMultiDiffEditor")&&r?.multiDiffEditorEnableViewChanges===!0,s=new m_(this.#e,this.z,this.x,t,i,n,this.y),o=Gt.once(s.onDidDispose)(()=>this.D.delete(s));return this.D.set(s,o),this.eventuallyAddResourceGroups(),s}eventuallyAddResourceGroups(){const t=[],i=[];for(const[r,n]of this.D){n.dispose();const s=r.onDidUpdateResourceStates(()=>{this.E.add(r),this.eventuallyUpdateResourceStates()});Gt.once(r.onDidDispose)(()=>{this.E.delete(r),s.dispose(),this.e.delete(r.handle),this.#e.$unregisterGroup(this.x,r.handle)}),t.push([r.handle,r.id,r.label,r.features,r.multiDiffEditorEnableViewChanges]);const o=r._takeResourceStateSnapshot();o.length>0&&i.push([r.handle,o]),this.e.set(r.handle,r)}this.#e.$registerGroups(this.x,t,i),this.D.clear()}eventuallyUpdateResourceStates(){const t=[];this.E.forEach(i=>{const r=i._takeResourceStateSnapshot();r.length!==0&&t.push([i.handle,r])}),t.length>0&&this.#e.$spliceResourceStates(this.x,t),this.E.clear()}getResourceGroup(t){return this.e.get(t)}setSelectionState(t){this.v=t,this.w.fire(t)}dispose(){this.o.dispose(),this.q.dispose(),this.t.dispose(),this.e.forEach(t=>t.dispose()),this.#e.$unregisterSourceControl(this.x)}};__decorate([aw(100)],Ow.prototype,"eventuallyAddResourceGroups",null),__decorate([aw(100)],Ow.prototype,"eventuallyUpdateResourceStates",null);var Fw=class{static{Lw=this}static{this.d=0}get onDidChangeActiveProvider(){return this.j.event}constructor(t,i,r,n){this.m=i,this.n=r,this.o=n,this.g=new Map,this.h=new Xn,this.j=new C,this.e=t.getProxy(se.MainThreadSCM),this.f=t.getProxy(se.MainThreadTelemetry),i.registerArgumentProcessor({processArgument:s=>{if(s&&s.$mid===Dt.ScmResource){const o=this.g.get(s.sourceControlHandle);if(!o)return s;const a=o.getResourceGroup(s.groupHandle);return a?a.getResourceState(s.handle):s}else if(s&&s.$mid===Dt.ScmResourceGroup){const o=this.g.get(s.sourceControlHandle);return o?o.getResourceGroup(s.groupHandle):s}else if(s&&s.$mid===Dt.ScmProvider){const o=this.g.get(s.handle);return o||s}return s}})}createSourceControl(t,i,r,n){this.o.trace("ExtHostSCM#createSourceControl",t.identifier.value,i,r,n),this.f.$publicLog2("api/scm/createSourceControl",{extensionId:t.identifier.value});const s=Lw.d++,o=new Ow(t,this.n,this.e,this.m,i,r,n);this.g.set(s,o);const a=this.h.get(t.identifier)||[];return a.push(o),this.h.set(t.identifier,a),o}getLastInputBox(t){this.o.trace("ExtHostSCM#getLastInputBox",t.identifier.value);const i=this.h.get(t.identifier),r=i&&i[i.length-1];return r&&r.inputBox}$provideOriginalResource(t,i,r){const n=E.revive(i);this.o.trace("ExtHostSCM#$provideOriginalResource",t,n.toString());const s=this.g.get(t);return!s||!s.quickDiffProvider||!s.quickDiffProvider.provideOriginalResource?Promise.resolve(null):_i(()=>s.quickDiffProvider.provideOriginalResource(n,r)).then(o=>o||null)}$onInputBoxValueChange(t,i){this.o.trace("ExtHostSCM#$onInputBoxValueChange",t);const r=this.g.get(t);return r&&r.inputBox.$onInputBoxValueChange(i),Promise.resolve(void 0)}$executeResourceCommand(t,i,r,n){this.o.trace("ExtHostSCM#$executeResourceCommand",t,i,r);const s=this.g.get(t);if(!s)return Promise.resolve(void 0);const o=s.getResourceGroup(i);return o?o.$executeResourceCommand(r,n):Promise.resolve(void 0)}$validateInput(t,i,r){this.o.trace("ExtHostSCM#$validateInput",t);const n=this.g.get(t);return!n||!n.inputBox.validateInput?Promise.resolve(void 0):_i(()=>n.inputBox.validateInput(i,r)).then(s=>{if(!s)return Promise.resolve(void 0);const o=Ge.fromStrict(s.message);return o?Promise.resolve([o,s.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(t){return this.o.trace("ExtHostSCM#$setSelectedSourceControl",t),t!==void 0&&this.g.get(t)?.setSelectionState(!0),this.k!==void 0&&this.g.get(this.k)?.setSelectionState(!1),this.k=t,Promise.resolve(void 0)}async $resolveHistoryItemGroupCommonAncestor(t,i,r,n){return await this.g.get(t)?.historyProvider?.resolveHistoryItemGroupCommonAncestor(i,r,n)??void 0}async $resolveHistoryItemGroupCommonAncestor2(t,i,r){return await this.g.get(t)?.historyProvider?.resolveHistoryItemGroupCommonAncestor2(i,r)??void 0}async $provideHistoryItems(t,i,r,n){return(await this.g.get(t)?.historyProvider?.provideHistoryItems(i,r,n))?.map(a=>Cw(a))??void 0}async $provideHistoryItems2(t,i,r){return(await this.g.get(t)?.historyProvider?.provideHistoryItems2(i,r))?.map(o=>Cw(o))??void 0}async $provideHistoryItemSummary(t,i,r,n){const s=this.g.get(t)?.historyProvider;if(typeof s?.provideHistoryItemSummary!="function")return;const o=await s.provideHistoryItemSummary(i,r,n);return o?Cw(o):void 0}async $provideHistoryItemChanges(t,i,r,n){return await this.g.get(t)?.historyProvider?.provideHistoryItemChanges(i,r,n)??void 0}};Fw=Lw=__decorate([__param(3,ut)],Fw);var v_=class pS{static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(se.MainThreadShare)}async $provideShare(t,i,r){return await this.c.get(t)?.provideShare({selection:W.to(i.selection),resourceUri:E.revive(i.resourceUri)},r)??void 0}registerShareProvider(t,i){const r=pS.a++;return this.c.set(r,i),this.b.$registerShareProvider(r,ac.from(t,this.d),i.id,i.label,i.priority),{dispose:()=>{this.b.$unregisterShareProvider(r),this.c.delete(r)}}}},w_=class gS{static{this.a=1}constructor(t){this.c=new Map,this.d=new Map,this.f=new Map,this.b=t.getProxy(se.MainThreadSpeech)}async $createSpeechToTextSession(t,i,r){const n=this.c.get(t);if(!n)return;const s=new He,o=new ri;this.d.set(i,o);const a=await n.provideSpeechToTextSession(o.token,r?{language:r}:void 0);a&&(s.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitSpeechToTextEvent(i,c)})),s.add(o.token.onCancellationRequested(()=>s.dispose())))}async $cancelSpeechToTextSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}async $createTextToSpeechSession(t,i,r){const n=this.c.get(t);if(!n)return;const s=new He,o=new ri;this.d.set(i,o);const a=await n.provideTextToSpeechSession(o.token,r?{language:r}:void 0);a&&(this.f.set(i,a),s.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitTextToSpeechEvent(i,c)})),s.add(o.token.onCancellationRequested(()=>s.dispose())))}async $synthesizeSpeech(t,i){this.f.get(t)?.synthesize(i)}async $cancelTextToSpeechSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t),this.f.delete(t)}async $createKeywordRecognitionSession(t,i){const r=this.c.get(t);if(!r)return;const n=new He,s=new ri;this.d.set(i,s);const o=await r.provideKeywordRecognitionSession(s.token);o&&(n.add(o.onDidChange(a=>{s.token.isCancellationRequested||this.b.$emitKeywordRecognitionEvent(i,a)})),n.add(s.token.onCancellationRequested(()=>n.dispose())))}async $cancelKeywordRecognitionSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}registerProvider(t,i,r){const n=gS.a++;return this.c.set(n,r),this.b.$registerProvider(n,i,{extension:t,displayName:t.value}),Ce(()=>{this.b.$unregisterProvider(n),this.c.delete(n)})}},b_=class pg{static{this.a=0}static{this.b=new Map([["statusBarItem.errorBackground",new ql("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new ql("statusBarItem.warningForeground")]])}#e;#t;constructor(t,i,r,n,s,o=Ws.Left,a){if(this.i=!1,this.k="",this.q=new He,this.#e=t,this.#t=i,s&&n){this.c=AA(n.identifier,s);const c=r.get(this.c);c&&(o=c.alignLeft?Ws.Left:Ws.Right,a=c.priority,this.j=!0,this.name=c.name,this.text=c.text,this.tooltip=c.tooltip,this.command=c.command,this.accessibilityInformation=c.accessibilityInformation)}else this.c=String(pg.a++);this.e=n,this.f=s,this.g=o,this.h=this.u(a)}u(t){if(Rs(t))return t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}get id(){return this.f??this.e.identifier.value}get alignment(){return this.g}get priority(){return this.h}get text(){return this.k}get name(){return this.m}get tooltip(){return this.l}get color(){return this.n}get backgroundColor(){return this.o}get command(){return this.r?.fromApi}get accessibilityInformation(){return this.t}set text(t){this.k=t,this.v()}set name(t){this.m=t,this.v()}set tooltip(t){this.l=t,this.v()}set color(t){this.n=t,this.v()}set backgroundColor(t){t&&!pg.b.has(t.id)&&(t=void 0),this.o=t,this.v()}set command(t){this.r?.fromApi!==t&&(this.p&&this.q.add(this.p),this.p=new He,typeof t=="string"?this.r={fromApi:t,internal:this.#t.toInternal({title:"",command:t},this.p)}:t?this.r={fromApi:t,internal:this.#t.toInternal(t,this.p)}:this.r=void 0,this.v())}set accessibilityInformation(t){this.t=t,this.v()}show(){this.j=!0,this.v()}hide(){clearTimeout(this.s),this.j=!1,this.#e.$disposeEntry(this.c)}v(){this.i||!this.j||(clearTimeout(this.s),this.s=setTimeout(()=>{this.s=void 0;let t;this.e?this.f?t=`${this.e.identifier.value}.${this.f}`:t=this.e.identifier.value:t=this.f;let i;this.m?i=this.m:i=d(2709,null,this.e.displayName||this.e.name);let r=this.n;this.o&&(r=pg.b.get(this.o.id));const n=Ge.fromStrict(this.l);this.#e.$setEntry(this.c,t,this.e?.identifier.value,i,this.k,n,this.r?.internal,r,this.o,this.g===Ws.Left,this.h,this.t),this.q.clear()},0))}dispose(){this.hide(),this.i=!0}},y_=class{constructor(e){this.b=[],this.a=e.createStatusBarEntry(void 0,"status.extensionMessage",Ws.Left,Number.MIN_VALUE),this.a.name=d(2710,null)}dispose(){this.b.length=0,this.a.dispose()}setMessage(e){const t={message:e};return this.b.unshift(t),this.c(),new Ye(()=>{const i=this.b.indexOf(t);i>=0&&(this.b.splice(i,1),this.c())})}c(){this.b.length>0?(this.a.text=this.b[0].message,this.a.show()):this.a.hide()}},E_=class{constructor(e,t){this.e=new Map,this.a=e.getProxy(se.MainThreadStatusBar),this.b=t,this.c=new y_(this)}$acceptStaticEntries(e){for(const t of e)this.e.set(t.entryId,t)}createStatusBarEntry(e,t,i,r){return new b_(this.a,this.b,this.e,e,t,i,r)}setStatusBarMessage(e,t){const i=this.c.setMessage(e);let r;return typeof t=="number"?r=setTimeout(()=>i.dispose(),t):typeof t<"u"&&t.then(()=>i.dispose(),()=>i.dispose()),new Ye(()=>{i.dispose(),clearTimeout(r)})}},S_=class extends Te{constructor(e,t){super(),this.m=t,this.a=new C,this.b=new C,this.c=new C,this.f=new C,this.g=new C,this.h=new C,this.onDidChangeTextEditorSelection=this.a.event,this.onDidChangeTextEditorOptions=this.b.event,this.onDidChangeTextEditorVisibleRanges=this.c.event,this.onDidChangeTextEditorViewColumn=this.f.event,this.onDidChangeActiveTextEditor=this.g.event,this.onDidChangeVisibleTextEditors=this.h.event,this.j=e.getProxy(se.MainThreadTextEditors),this.B(this.m.onDidChangeVisibleTextEditors(i=>this.h.fire(i))),this.B(this.m.onDidChangeActiveTextEditor(i=>this.g.fire(i)))}getActiveTextEditor(){return this.m.activeEditor()}getVisibleTextEditors(e){const t=this.m.allEditors();return e?t:t.map(i=>i.value)}async showTextDocument(e,t,i){let r;typeof t=="number"?r={position:hi.from(t),preserveFocus:i}:typeof t=="object"?r={position:hi.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?W.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:r={preserveFocus:!1};const n=await this.j.$tryShowTextDocument(e.uri,r),s=n&&this.m.getEditor(n);if(s)return s.value;throw n?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new IR(this.j,e,t).value}$acceptEditorPropertiesChanged(e,t){const i=this.m.getEditor(e);if(!i)throw new Error("unknown text editor");if(t.options&&i._acceptOptions(t.options),t.selections){const r=t.selections.selections.map(on.to);i._acceptSelections(r)}if(t.visibleRanges){const r=ci(t.visibleRanges.map(W.to));i._acceptVisibleRanges(r)}if(t.options&&this.b.fire({textEditor:i.value,options:{...t.options,lineNumbers:dc.to(t.options.lineNumbers)}}),t.selections){const r=Qa.fromValue(t.selections.source),n=t.selections.selections.map(on.to);this.a.fire({textEditor:i.value,selections:n,kind:r})}if(t.visibleRanges){const r=ci(t.visibleRanges.map(W.to));this.c.fire({textEditor:i.value,visibleRanges:r})}}$acceptEditorPositionData(e){for(const t in e){const i=this.m.getEditor(t);if(!i)throw new Error("Unknown text editor");const r=hi.to(e[t]);i.value.viewColumn!==r&&(i._acceptViewColumn(r),this.f.fire({textEditor:i.value,viewColumn:r}))}}getDiffInformation(e){return Promise.resolve(this.j.$getDiffInformation(e))}},Mw=class{constructor(t){this.a=new df(Vs.Dark),this.b=new C}get activeColorTheme(){return this.a}$onColorThemeChange(t){let i;switch(t){case"light":i=Vs.Light;break;case"hcDark":i=Vs.HighContrast;break;case"hcLight":i=Vs.HighContrastLight;break;default:i=Vs.Dark}this.a=new df(i),this.b.fire(this.a)}get onDidChangeActiveColorTheme(){return this.b.event}};Mw=__decorate([__param(0,at)],Mw);var eB=K("IExtHostTimeline"),x_=class{constructor(e,t){this.b=new Map,this.c=new Map,this.a=e.getProxy(se.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(i,r)=>{if(i&&i.$mid===Dt.TimelineActionContext)if(this.b.get(i.source)&&dt.equals(r,this.b.get(i.source)?.extension)){const n=i.uri===void 0?void 0:E.revive(i.uri);return this.c.get(i.source)?.get(K9(n))?.get(i.handle)}else return;return i}})}async $getTimeline(e,t,i,r){return this.b.get(e)?.provider.provideTimeline(E.revive(t),i,r)}registerTimelineProvider(e,t,i,r){const n=new He,s=this.d(t.id,r,n).bind(this);let o;t.onDidChange&&(o=t.onDidChange(c=>this.a.$emitTimelineChangeEvent({uri:void 0,reset:!0,...c,id:t.id}),this));const a=this.c;return this.f({...t,scheme:e,onDidChange:void 0,async provideTimeline(c,l,u){l?.resetCache&&(n.clear(),a.get(t.id)?.clear());const h=await t.provideTimeline(c,l,u);if(h==null)return;const f=s(c,l);return{...h,source:t.id,items:h.items.map(f)}},dispose(){for(const c of a.values())c.get(t.id)?.clear();o?.dispose(),n.dispose()}},i)}d(e,t,i){return(r,n)=>{let s;if(n?.cacheResults){let o=this.c.get(e);o===void 0&&(o=new Map,this.c.set(e,o));const a=K9(r);s=o.get(a),s===void 0&&(s=new Map,o.set(a,s))}return o=>{const{iconPath:a,...c}=o,l=`${e}|${o.id??o.timestamp}`;s?.set(l,o);let u,h,f;o.iconPath&&(a instanceof Bi?f={id:a.id,color:a.color}:E.isUri(a)?(u=a,h=a):{light:u,dark:h}=a);let g;return dr.isMarkdownString(c.tooltip)?g=Ge.from(c.tooltip):Xe(c.tooltip)?g=c.tooltip:dr.isMarkdownString(c.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),g=Ge.from(c.detail)):Xe(c.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),g=c.detail),{...c,id:c.id??void 0,handle:l,source:e,command:o.command?t.toInternal(o.command,i):void 0,icon:u,iconDark:h,themeIcon:f,tooltip:g,accessibilityInformation:o.accessibilityInformation}}}}f(e,t){if(this.b.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this.a.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this.b.set(e.id,{provider:e,extension:t}),Ce(()=>{for(const r of this.c.values())r.get(e.id)?.clear();this.b.delete(e.id),this.a.$unregisterTimelineProvider(e.id),e.dispose()})}};function K9(e){return e?.toString()}var k_={IconContribution:"base.contributions.icons"},e8;(function(e){function t(i,r){let n=i.defaults;for(;Ai.isThemeIcon(n);){const s=_c.getIcon(n.id);if(!s)return;n=s.defaults}return n}e.getDefinition=t})(e8||(e8={}));var t8;(function(e){function t(r){return{weight:r.weight,style:r.style,src:r.src.map(n=>({format:n.format,location:n.location.toString()}))}}e.toJSONObject=t;function i(r){const n=s=>Xe(s)?s:void 0;if(r&&Array.isArray(r.src)&&r.src.every(s=>Xe(s.format)&&Xe(s.location)))return{weight:n(r.weight),style:n(r.style),src:r.src.map(s=>({format:s.format,location:E.parse(s.location)}))}}e.fromJSONObject=i})(t8||(t8={}));var D_=class{constructor(){this.a=new C,this.onDidChange=this.a.event,this.d={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:d(2362,null)},fontCharacter:{type:"string",description:d(2363,null)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.e={type:"string",pattern:`^${Ai.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.b={},this.f={}}registerIcon(e,t,i,r){const n=this.b[e];if(n){if(i&&!n.description){n.description=i,this.d.properties[e].markdownDescription=`${i} $(${e})`;const a=this.e.enum.indexOf(e);a!==-1&&(this.e.enumDescriptions[a]=i),this.a.fire()}return n}const s={id:e,description:i,defaults:t,deprecationMessage:r};this.b[e]=s;const o={$ref:"#/definitions/icons"};return r&&(o.deprecationMessage=r),i&&(o.markdownDescription=`${i}: $(${e})`),this.d.properties[e]=o,this.e.enum.push(e),this.e.enumDescriptions.push(i||""),this.a.fire(),{id:e}}deregisterIcon(e){delete this.b[e],delete this.d.properties[e];const t=this.e.enum.indexOf(e);t!==-1&&(this.e.enum.splice(t,1),this.e.enumDescriptions.splice(t,1)),this.a.fire()}getIcons(){return Object.keys(this.b).map(e=>this.b[e])}getIcon(e){return this.b[e]}getIconSchema(){return this.d}getIconReferenceSchema(){return this.e}registerIconFont(e,t){const i=this.f[e];return i||(this.f[e]=t,this.a.fire(),t)}deregisterIconFont(e){delete this.f[e]}getIconFont(e){return this.f[e]}toString(){const e=(n,s)=>n.id.localeCompare(s.id),t=n=>{for(;Ai.isThemeIcon(n.defaults);)n=this.b[n.defaults.id];return`codicon codicon-${n?n.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const r=Object.keys(this.b).map(n=>this.b[n]);for(const n of r.filter(s=>!!s.description).sort(e))i.push(`|<i class="${t(n)}"></i>|${n.id}|${Ai.isThemeIcon(n.defaults)?n.defaults.id:n.id}|${n.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const n of r.filter(s=>!Ai.isThemeIcon(s.defaults)).sort(e))i.push(`|<i class="${t(n)}"></i>|${n.id}|`);return i.join(`
`)}},_c=new D_;ki.add(k_.IconContribution,_c);function Qp(e,t,i,r){return _c.registerIcon(e,t,i,r)}function $_(){const e=s$();for(const t in e){const i="\\"+e[t].toString(16);_c.registerIcon(t,{fontCharacter:i})}}$_();var i8="vscode://schemas/icons",r8=ki.as(fd.JSONContribution);r8.registerSchema(i8,_c.getIconSchema());var n8=new va(()=>r8.notifySchemaChanged(i8),200);_c.onDidChange(()=>{n8.isScheduled()||n8.schedule()});var tB=Qp("widget-close",Se.close,d(2364,null)),iB=Qp("goto-previous-location",Se.arrowUp,d(2365,null)),rB=Qp("goto-next-location",Se.arrowDown,d(2366,null)),nB=Ai.modify(Se.sync,"spin"),sB=Ai.modify(Se.loading,"spin"),oB=d(4216,null),aB=Qp("default-view-icon",Se.window,d(4217,null)),Jp;(function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"})(Jp||(Jp={}));var eh;(function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"})(eh||(eh={}));var cB=[eh.Sidebar,eh.Panel,eh.AuxiliaryBar],I_=class extends Te{constructor(){super(...arguments),this.c=this.B(new C),this.onDidRegister=this.c.event,this.f=this.B(new C),this.onDidDeregister=this.f.event,this.g=new Map,this.h=[]}get all(){return[...this.g.values()].flat()}registerViewContainer(e,t,i){const r=this.get(e.id);if(r)return r;const n=e;return n.openCommandActionDescriptor=i?.doNotRegisterOpenCommand?void 0:n.openCommandActionDescriptor??{id:n.id},CS(this.g,t,[]).push(n),i?.isDefault&&this.h.push(n),this.c.fire({viewContainer:n,viewContainerLocation:t}),n}deregisterViewContainer(e){for(const t of this.g.keys()){const i=this.g.get(t),r=i?.indexOf(e);if(r!==-1){i?.splice(r,1),i.length===0&&this.g.delete(t),this.f.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.g.get(e)||[]]}getViewContainerLocation(e){return[...this.g.keys()].filter(t=>this.getViewContainers(t).filter(i=>i?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.h.find(t=>this.getViewContainerLocation(t)===e)}};ki.add(Jp.ViewContainersRegistry,new I_);var Xp;(function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"})(Xp||(Xp={}));function A_(e,t){const i=e.group??Xp.More,r=t.group??Xp.More;return i!==r?i.localeCompare(r):(e.order??5)-(t.order??5)}var P_=class extends Te{constructor(){super(...arguments),this.c=this.B(new C),this.onViewsRegistered=this.c.event,this.f=this.B(new C),this.onViewsDeregistered=this.f.event,this.g=this.B(new C),this.onDidChangeContainer=this.g.event,this.h=this.B(new C),this.onDidChangeViewWelcomeContent=this.h.event,this.j=[],this.m=new Map,this.n=new yb}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:i})=>this.r(t,i)),this.c.fire(e)}deregisterViews(e,t){const i=this.s(e,t);i.length&&this.f.fire({views:i,viewContainer:t})}moveViews(e,t){for(const i of this.m.keys())if(i!==t){const r=this.s(e,i);r.length&&(this.r(r,t),this.g.fire({views:r,from:i,to:t}))}}getViews(e){return this.m.get(e)||[]}getView(e){for(const t of this.j){const i=(this.m.get(t)||[]).filter(r=>r.id===e)[0];if(i)return i}return null}getViewContainer(e){for(const t of this.j)if((this.m.get(t)||[]).filter(r=>r.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this.n.add(e,t),this.h.fire(e),Ce(()=>{this.n.delete(e,t),this.h.fire(e)})}registerViewWelcomeContent2(e,t){const i=new Map;for(const[r,n]of t)this.n.add(e,n),i.set(r,Ce(()=>{this.n.delete(e,n),this.h.fire(e)}));return this.h.fire(e),i}getViewWelcomeContent(e){const t=[];return this.n.forEach(e,i=>t.push(i)),t.sort(A_)}r(e,t){let i=this.m.get(t);i||(i=[],this.m.set(t,i),this.j.push(t));for(const r of e){if(this.getView(r.id)!==null)throw new Error(d(4218,null,r.id));i.push(r)}}s(e,t){const i=this.m.get(t);if(!i)return[];const r=[],n=[];for(const s of i)e.includes(s)?r.push(s):n.push(s);return r.length&&(n.length?this.m.set(t,n):(this.m.delete(t),this.j.splice(this.j.indexOf(t),1))),r}};ki.add(Jp.ViewsRegistry,new P_);var lB=K("viewDescriptorService"),s8;(function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"})(s8||(s8={}));var o8;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(o8||(o8={}));var ms=class extends Error{constructor(e){super(d(4219,null,e)),this.name="NoTreeViewError"}static is(e){return!!e&&e.name==="NoTreeViewError"}},R_=class{constructor(){this.a=new Map}removeDragOperationTransfer(e){if(e&&this.a.has(e)){const t=this.a.get(e);return this.a.delete(e),t}}addDragOperationTransfer(e,t){this.a.set(e,t)}};function a8(e,t){if(Xe(e))return{label:e};if(e&&typeof e=="object"&&typeof e.label=="string"){let i;return Array.isArray(e.highlights)&&(i=e.highlights.filter(r=>r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"),i=i.length?i:void 0),{label:e.label,highlights:i}}}var T_=class extends Te{constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=new Map,this.b=new R_;function r(n){return n&&n.$treeViewId&&(n.$treeItemHandle||n.$selectedTreeItems||n.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:n=>r(n)?this.r(n):Array.isArray(n)&&n.length>0?n.map(s=>r(s)?this.r(s):s):n})}registerTreeDataProvider(e,t,i){const r=this.createTreeView(e,{treeDataProvider:t},i);return{dispose:()=>r.dispose()}}createTreeView(e,t,i){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const r=t.dragAndDropController?.dropMimeTypes??[],n=t.dragAndDropController?.dragMimeTypes??[],s=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.m(e,t,i),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:r,dragMimeTypes:n,hasHandleDrag:s,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this.f.$registerTreeViewDataProvider(e,c),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return B(i,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return B(i,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(h){$o(h)&&B(i,"treeViewMarkdownMessage"),a.message=h},get title(){return a.title},set title(h){a.title=h},get description(){return a.description},set description(h){a.description=h},get badge(){return a.badge},set badge(h){h!==void 0&&R1.isViewBadge(h)?a.badge={value:Math.floor(Math.abs(h.value)),tooltip:h.tooltip}:h===void 0&&(a.badge=void 0)},reveal:(h,f)=>a.reveal(h,f),dispose:async()=>{await l,this.a.delete(e),a.dispose()}};return this.B(u),u}$getChildren(e,t){const i=this.a.get(e);return i?i.getChildren(t):Promise.reject(new ms(e))}async $handleDrop(e,t,i,r,n,s,o,a){const c=this.a.get(e);if(!c)return Promise.reject(new ms(e));const l=Zs.toDataTransfer(i,async u=>(await this.f.$resolveDropFileData(e,t,u)).buffer);return o===e&&a&&await this.j(l,c,a,n,s),c.onDrop(l,r,n)}async j(e,t,i,r,n){const s=this.b.removeDragOperationTransfer(n);if(s)(await s)?.forEach((o,a)=>{o&&e.set(a,o)});else if(n&&t.handleDrag){const o=t.handleDrag(i,e,r);this.b.addDragOperationTransfer(n,o),await o}return e}async $handleDrag(e,t,i,r){const n=this.a.get(e);if(!n)return Promise.reject(new ms(e));const s=await this.j(new Vl,n,t,r,i);if(!(!s||r.isCancellationRequested))return Zs.from(s)}async $hasResolve(e){const t=this.a.get(e);if(!t)throw new ms(e);return t.hasResolve}$resolve(e,t,i){const r=this.a.get(e);if(!r)throw new ms(e);return r.resolveTreeItem(t,i)}$setExpanded(e,t,i){const r=this.a.get(e);if(!r)throw new ms(e);r.setExpanded(t,i)}$setSelectionAndFocus(e,t,i){const r=this.a.get(e);if(!r)throw new ms(e);r.setSelectionAndFocus(t,i)}$setVisible(e,t){const i=this.a.get(e);if(!i){if(!t)return;throw new ms(e)}i.setVisible(t)}$changeCheckboxState(e,t){const i=this.a.get(e);if(!i)throw new ms(e);i.setCheckboxState(t)}m(e,t,i){const r=this.B(new L_(e,t,this.f,this.g.converter,this.h,i));return this.a.set(e,r),r}r(e){const t=this.a.get(e.$treeViewId);return t&&"$treeItemHandle"in e?t.getExtensionElement(e.$treeItemHandle):t&&"$focusedTreeItem"in e&&e.$focusedTreeItem?t.focusedElement:null}},L_=class lb extends Te{static{this.a="0"}static{this.b="1"}get visible(){return this.r}get selectedElements(){return this.s.map(t=>this.getExtensionElement(t)).filter(t=>!Jt(t))}get focusedElement(){return this.t?this.getExtensionElement(this.t):void 0}constructor(t,i,r,n,s,o){if(super(),this.I=t,this.J=r,this.L=n,this.M=s,this.N=o,this.h=void 0,this.j=new Map,this.m=new Map,this.r=!1,this.s=[],this.t=void 0,this.u=this.B(new C),this.onDidExpandElement=this.u.event,this.w=this.B(new C),this.onDidCollapseElement=this.w.event,this.y=this.B(new C),this.onDidChangeSelection=this.y.event,this.z=this.B(new C),this.onDidChangeActiveItem=this.z.event,this.C=this.B(new C),this.onDidChangeVisibility=this.C.event,this.D=this.B(new C),this.onDidChangeCheckboxState=this.D.event,this.F=this.B(new C),this.G=Promise.resolve(),this.H=Promise.resolve(),this.O="",this.P="",this.Z=new ri,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const h of o.contributes.views[u])h.id===t&&(this.P=h.name);this.f=i.treeDataProvider,this.g=i.dragAndDropController,this.f.onDidChangeTreeData&&this.B(this.f.onDidChangeTreeData(u=>{Array.isArray(u)&&u.length===0||this.F.fire({message:!1,element:u})}));let a,c;const l=Gt.debounce(this.F.event,(u,h)=>(u||(u={message:!1,elements:[]}),h.element!==!1&&(a||(a=new Promise(f=>c=f),this.G=this.G.then(()=>a)),Array.isArray(h.element)?u.elements.push(...h.element):u.elements.push(h.element)),h.message&&(u.message=!0),u),200,!0);this.B(l(({message:u,elements:h})=>{h.length&&(this.H=this.H.then(()=>{const f=c;return a=null,this.$(h).then(()=>f())})),u&&this.J.$setMessage(this.I,Ge.fromStrict(this.O)??"")}))}async getChildren(t){const i=t?this.getExtensionElement(t):void 0;if(t&&!i)return this.M.error(`No tree item with id '${t}' found.`),Promise.resolve([]);let r=this.X(t);return r||(r=await this.Y(i)),r?r.map(n=>n.item):void 0}getExtensionElement(t){return this.j.get(t)}reveal(t,i){i=i||{select:!0,focus:!1};const r=Jt(i.select)?!0:i.select,n=Jt(i.focus)?!1:i.focus,s=Jt(i.expand)?!1:i.expand;return typeof this.f.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):t?this.G.then(()=>this.S(t)).then(o=>this.W(t,o[o.length-1]).then(a=>this.J.$reveal(this.I,{item:a.item,parentChain:o.map(c=>c.item)},{select:r,focus:n,expand:s})),o=>this.M.error(o)):this.J.$reveal(this.I,void 0,{select:r,focus:n,expand:s})}get message(){return this.O}set message(t){this.O=t,this.F.fire({message:!0,element:!1})}get title(){return this.P}set title(t){this.P=t,this.J.$setTitle(this.I,t,this.Q)}get description(){return this.Q}set description(t){this.Q=t,this.J.$setTitle(this.I,this.P,t)}get badge(){return this.R}set badge(t){this.R?.value===t?.value&&this.R?.tooltip===t?.tooltip||(this.R=Yf.from(t),this.J.$setBadge(this.I,t))}setExpanded(t,i){const r=this.getExtensionElement(t);r&&(i?this.u.fire(Object.freeze({element:r})):this.w.fire(Object.freeze({element:r})))}setSelectionAndFocus(t,i){const r=!Nn(this.s,t);this.s=t;const n=this.t!==i;this.t=i,r&&this.y.fire(Object.freeze({selection:this.selectedElements})),n&&this.z.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(t){t!==this.r&&(this.r=t,this.C.fire(Object.freeze({visible:this.r})))}async setCheckboxState(t){const i=(await Promise.all(t.map(async r=>{const n=this.getExtensionElement(r.treeItemHandle);return n?{extensionItem:n,treeItem:await this.f.getTreeItem(n),newState:r.newState?Dn.Checked:Dn.Unchecked}:Promise.resolve(void 0)}))).filter(r=>r!==void 0);i.forEach(r=>{r.treeItem.checkboxState=r.newState?Dn.Checked:Dn.Unchecked}),this.D.fire({items:i.map(r=>[r.extensionItem,r.newState])})}async handleDrag(t,i,r){const n=[];for(const s of t){const o=this.getExtensionElement(s);o&&n.push(o)}if(!(!this.g?.handleDrag||n.length===0))return await this.g.handleDrag(n,i,r),i}get hasHandleDrag(){return!!this.g?.handleDrag}async onDrop(t,i,r){const n=i?this.getExtensionElement(i):void 0;if(!(!n&&i||!this.g?.handleDrop))return _i(()=>this.g?.handleDrop?this.g.handleDrop(n,t,r):void 0)}get hasResolve(){return!!this.f.resolveTreeItem}async resolveTreeItem(t,i){if(!this.f.resolveTreeItem)return;const r=this.j.get(t);if(r){const n=this.m.get(r);if(n){const s=await this.f.resolveTreeItem(n.extensionItem,r,i)??n.extensionItem;return this.hb(s),n.item.tooltip=this.eb(s.tooltip),n.item.command=this.fb(n.disposableStore,s.command),n.item}}}S(t){return this.U(t).then(i=>i?this.S(i).then(r=>this.W(i,r[r.length-1]).then(n=>(r.push(n),r))):Promise.resolve([]))}U(t){const i=this.m.get(t);return i?Promise.resolve(i.parent?this.j.get(i.parent.item.handle):void 0):_i(()=>this.f.getParent(t))}W(t,i){const r=this.m.get(t);return r?Promise.resolve(r):_i(()=>this.f.getTreeItem(t)).then(n=>this.kb(t,n,i,!0)).then(n=>this.getChildren(i?i.item.handle:void 0).then(()=>{const s=this.getExtensionElement(n);if(s){const o=this.m.get(s);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${n} from extension ${this.N.identifier.value}`)}))}X(t){if(t){let i;if(typeof t=="string"){const r=this.getExtensionElement(t);i=r?this.m.get(r):void 0}else i=t;return i&&i.children||void 0}return this.h}async Y(t){this.rb(t);const i=new ri(this.Z.token);try{const r=t?this.m.get(t):void 0,n=await this.f.getChildren(t);if(i.token.isCancellationRequested)return;const s=ci(n||[]),o=await Promise.all(ci(s).map(c=>this.f.getTreeItem(c)));if(i.token.isCancellationRequested)return;const a=o.map((c,l)=>c?this.db(s[l],c,r):null);return ci(a)}finally{i.dispose()}}$(t){if(t.some(r=>!r))return this.Z.dispose(!0),this.Z=new ri,this.tb(),this.J.$refresh(this.I);{const r=this.ab(t);if(r.length)return this.bb(r)}return Promise.resolve(void 0)}ab(t){const i=new Set,r=t.map(s=>this.m.get(s));for(const s of r)if(s&&!i.has(s.item.handle)){let o=s;for(;o&&o.parent&&r.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.j.get(o.parent.item.handle);o=a?this.m.get(a):void 0}o&&!o.parent&&i.add(s.item.handle)}const n=[];return i.forEach(s=>{const o=this.j.get(s);if(o){const a=this.m.get(o);a&&(!a.parent||!i.has(a.parent.item.handle))&&n.push(s)}}),n}bb(t){const i={};return Promise.all(t.map(r=>this.cb(r).then(n=>{n&&(i[r]=n.item)}))).then(()=>Object.keys(i).length?this.J.$refresh(this.I,i):void 0)}cb(t){const i=this.getExtensionElement(t);if(i){const r=this.m.get(i);if(r)return this.rb(i),_i(()=>this.f.getTreeItem(i)).then(n=>{if(n){const s=this.ib(i,n,r.parent);return this.pb(i,s,r,r.parent),r.dispose(),s}return null})}return Promise.resolve(null)}db(t,i,r){const n=this.ib(t,i,r);if(i.id&&this.j.has(n.item.handle))throw new Error(d(2713,null,i.id));return this.ob(t,n),this.qb(n,r),n}eb(t){return dr.isMarkdownString(t)?Ge.from(t):t}fb(t,i){return i?{...this.L.toInternal(i,t),originalId:i.command}:void 0}gb(t){if(t.checkboxState===void 0)return;let i,r,n;return typeof t.checkboxState=="number"?i=t.checkboxState:(i=t.checkboxState.state,r=t.checkboxState.tooltip,n=t.checkboxState.accessibilityInformation),{isChecked:i===Dn.Checked,tooltip:r,accessibilityInformation:n}}hb(t){if(!Zd.isTreeItem(t,this.N))throw new Error(`Extension ${this.N.identifier.value} has provided an invalid tree item.`)}ib(t,i,r){this.hb(i);const n=this.B(new He),s=this.kb(t,i,r),o=this.lb(i);return{item:{handle:s,parentHandle:r?r.item.handle:void 0,label:a8(i.label,this.N),description:i.description,resourceUri:i.resourceUri,tooltip:this.eb(i.tooltip),command:this.fb(n,i.command),contextValue:i.contextValue,icon:o,iconDark:this.mb(i)||o,themeIcon:this.jb(i),collapsibleState:Jt(i.collapsibleState)?Wo.None:i.collapsibleState,accessibilityInformation:i.accessibilityInformation,checkbox:this.gb(i)},extensionItem:i,parent:r,children:void 0,disposableStore:n,dispose(){n.dispose()}}}jb(t){return t.iconPath instanceof Bi?t.iconPath:void 0}kb(t,{id:i,label:r,resourceUri:n},s,o){if(i)return`${lb.b}/${i}`;const a=a8(r,this.N),c=s?s.item.handle:lb.a;let l=a?a.label:n?Ls(n):"";l=l.indexOf("/")!==-1?l.replace("/","//"):l;const u=this.m.has(t)?this.m.get(t).item.handle:void 0,h=this.X(s)||[];let f,g=0;do{if(f=`${c}/${g}:${l}`,o||!this.j.has(f)||u===f)break;g++}while(g<=h.length);return f}lb(t){if(t.iconPath&&!(t.iconPath instanceof Bi))return typeof t.iconPath=="string"||E.isUri(t.iconPath)?this.nb(t.iconPath):this.nb(t.iconPath.light)}mb(t){if(t.iconPath&&!(t.iconPath instanceof Bi)&&t.iconPath.dark)return this.nb(t.iconPath.dark)}nb(t){return E.isUri(t)?t:E.file(t)}ob(t,i){this.j.set(i.item.handle,t),this.m.set(t,i)}pb(t,i,r,n){this.j.delete(i.item.handle),this.m.delete(t),i.item.handle!==r.item.handle&&this.j.delete(r.item.handle),this.ob(t,i);const s=this.X(n)||[],o=s.filter(a=>a.item.handle===r.item.handle)[0];o&&s.splice(s.indexOf(o),1,i)}qb(t,i){i?(i.children||(i.children=[]),i.children.push(t)):(this.h||(this.h=[]),this.h.push(t))}rb(t){if(t){const i=this.m.get(t);if(i){if(i.children)for(const r of i.children){const n=this.j.get(r.item.handle);n&&this.sb(n)}i.children=void 0}}else this.tb()}sb(t){const i=this.m.get(t);if(i){if(i.children)for(const r of i.children){const n=this.j.get(r.item.handle);n&&this.sb(n)}this.m.delete(t),this.j.delete(i.item.handle),i.dispose()}}tb(){this.h=void 0,this.j.clear(),this.m.forEach(t=>t.dispose()),this.m.clear()}dispose(){super.dispose(),this.Z.dispose(),this.tb(),this.J.$disposeTree(this.I)}},__=class mS{static{this.a=new Set([de.http,de.https])}constructor(t){this.c=new Map,this.b=t.getProxy(se.MainThreadUriOpeners)}registerExternalUriOpener(t,i,r,n){if(this.c.has(i))throw new Error(`Opener with id '${i}' already registered`);const s=n.schemes.find(o=>!mS.a.has(o));if(s)throw new Error(`Scheme '${s}' is not supported. Only http and https are currently supported.`);return this.c.set(i,r),this.b.$registerUriOpener(i,n.schemes,t,n.label),Ce(()=>{this.c.delete(i),this.b.$unregisterUriOpener(i)})}async $canOpenUri(t,i,r){const n=this.c.get(t);if(!n)throw new Error(`Unknown opener with id: ${t}`);const s=E.revive(i);return n.canOpenExternalUri(s,r)}async $openUri(t,i,r){const n=this.c.get(t);if(!n)throw new Error(`Unknown opener id: '${t}'`);return n.openExternalUri(E.revive(i.resolvedUri),{sourceUri:E.revive(i.sourceUri)},r)}},C_=class vS{static{this.a=0}constructor(t){this.c=new Ro,this.d=new Map,this.b=t.getProxy(se.MainThreadUrls)}registerUriHandler(t,i){const r=t.identifier;if(this.c.has(r))throw new Error(`Protocol handler already registered for extension ${r}`);const n=vS.a++;return this.c.add(r),this.d.set(n,i),this.b.$registerUriHandler(n,r,t.displayName||t.name),Ce(()=>{this.c.delete(r),this.d.delete(n),this.b.$unregisterUriHandler(n)})}$handleExternalUri(t,i){const r=this.d.get(t);if(!r)return Promise.resolve(void 0);try{r.handleUri(E.revive(i))}catch(n){mr(n)}return Promise.resolve(void 0)}async createAppUri(t){return E.revive(await this.b.$createAppUri(t))}},N_=class extends Te{#e;#t;#i;#r;#s;#n;#a;#o;#c;#l;#u;#d;#h;constructor(e,t,i,r){super(),this.#o=void 0,this.#c=!0,this.#u=!1,this.#d=this.B(new C),this.onDidDispose=this.#d.event,this.#h=this.B(new C),this.onDidChangeViewState=this.#h.event,this.#e=e,this.#t=t,this.#r=i,this.#i=r.viewType,this.#s=r.panelOptions,this.#o=r.viewColumn,this.#n=r.title,this.#l=r.active}dispose(){this.#u||(this.#u=!0,this.#d.fire(),this.#t.$disposeWebview(this.#e),this.#r.dispose(),super.dispose())}get webview(){return this.c(),this.#r}get viewType(){return this.c(),this.#i}get title(){return this.c(),this.#n}set title(e){this.c(),this.#n!==e&&(this.#n=e,this.#t.$setTitle(this.#e,e))}get iconPath(){return this.c(),this.#a}set iconPath(e){this.c(),this.#a!==e&&(this.#a=e,this.#t.$setIconPath(this.#e,E.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#s}get viewColumn(){if(this.c(),!(typeof this.#o=="number"&&this.#o<0))return this.#o}get active(){return this.c(),this.#l}get visible(){return this.c(),this.#c}_updateViewState(e){this.#u||(this.active!==e.active||this.visible!==e.visible||this.viewColumn!==e.viewColumn)&&(this.#l=e.active,this.#c=e.visible,this.#o=e.viewColumn,this.#h.fire({webviewPanel:this}))}reveal(e,t){this.c(),this.#t.$reveal(this.#e,{viewColumn:typeof e>"u"?void 0:hi.from(e),preserveFocus:!!t})}c(){if(this.#u)throw new Error("Webview is disposed")}},O_=class wS extends Te{static c(){return Xr()}constructor(t,i,r){super(),this.j=i,this.m=r,this.g=new Map,this.h=new Map,this.f=t.getProxy(se.MainThreadWebviewPanels)}dispose(){super.dispose(),this.g.forEach(t=>t.dispose()),this.g.clear()}createWebviewPanel(t,i,r,n,s={}){const o=typeof n=="object"?n.viewColumn:n,a={viewColumn:hi.from(o),preserveFocus:typeof n=="object"&&!!n.preserveFocus},c=Rc(t),l=wS.c();this.f.$createWebviewPanel(_p(t),l,i,{title:r,panelOptions:F_(s),webviewOptions:v9(t,this.m,s),serializeBuffersForPostMessage:c},a);const u=this.j.createNewWebview(l,s,t);return this.createNewWebviewPanel(l,i,r,o,s,u,!0)}$onDidChangeWebviewPanelViewStates(t){const i=Object.keys(t);i.sort((r,n)=>{const s=t[r],o=t[n];return s.active?1:o.active?-1:+s.visible-+o.visible});for(const r of i){const n=this.getWebviewPanel(r);if(!n)continue;const s=t[r];n._updateViewState({active:s.active,visible:s.visible,viewColumn:hi.to(s.position)})}}async $onDidDisposeWebviewPanel(t){this.getWebviewPanel(t)?.dispose(),this.g.delete(t),this.j.deleteWebview(t)}registerWebviewPanelSerializer(t,i,r){if(this.h.has(i))throw new Error(`Serializer for '${i}' already registered`);return this.h.set(i,{serializer:r,extension:t}),this.f.$registerSerializer(i,{serializeBuffersForPostMessage:Rc(t)}),new Ye(()=>{this.h.delete(i),this.f.$unregisterSerializer(i)})}async $deserializeWebviewPanel(t,i,r,n){const s=this.h.get(i);if(!s)throw new Error(`No serializer found for '${i}'`);const{serializer:o,extension:a}=s,c=this.j.createNewWebview(t,r.webviewOptions,a),l=this.createNewWebviewPanel(t,i,r.title,n,r.panelOptions,c,r.active);await o.deserializeWebviewPanel(l,r.state)}createNewWebviewPanel(t,i,r,n,s,o,a){const c=new N_(t,this.f,o,{viewType:i,title:r,viewColumn:n,panelOptions:s,active:a});return this.g.set(t,c),c}getWebviewPanel(t){return this.g.get(t)}};function F_(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}var M_=class extends Te{#e;#t;#i;#r;#s;#n;#a;#o;#c;constructor(e,t,i,r,n,s){super(),this.#s=!1,this.#l=this.B(new C),this.onDidChangeVisibility=this.#l.event,this.#u=this.B(new C),this.onDidDispose=this.#u.event,this.#i=i,this.#a=r,this.#e=e,this.#t=t,this.#r=n,this.#n=s}dispose(){this.#s||(this.#s=!0,this.#u.fire(),this.#r.dispose(),super.dispose())}#l;#u;get title(){return this.a(),this.#a}set title(e){this.a(),this.#a!==e&&(this.#a=e,this.#t.$setWebviewViewTitle(this.#e,e))}get description(){return this.a(),this.#o}set description(e){this.a(),this.#o!==e&&(this.#o=e,this.#t.$setWebviewViewDescription(this.#e,e))}get visible(){return this.#n}get webview(){return this.#r}get viewType(){return this.#i}_setVisible(e){e===this.#n||this.#s||(this.#n=e,this.#l.fire())}get badge(){return this.a(),this.#c}set badge(e){this.a(),!(e?.value===this.#c?.value&&e?.tooltip===this.#c?.tooltip)&&(this.#c=Yf.from(e),this.#t.$setWebviewViewBadge(this.#e,e))}show(e){this.a(),this.#t.$show(this.#e,!!e)}a(){if(this.#s)throw new Error("Webview is disposed")}},U_=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(se.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,i,r){if(this.b.has(t))throw new Error(`View provider for '${t}' already registered`);return this.b.set(t,{provider:i,extension:e}),this.a.$registerWebviewViewProvider(_p(e),t,{retainContextWhenHidden:r?.retainContextWhenHidden,serializeBuffersForPostMessage:Rc(e)}),new Ye(()=>{this.b.delete(t),this.a.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,i,r,n){const s=this.b.get(t);if(!s)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=s,c=this.d.createNewWebview(e,{},a),l=new M_(e,this.a,t,i,c,!0);this.c.set(e,l),await o.resolveWebviewView(l,{state:r},n)}async $onDidChangeWebviewViewVisibility(e,t){this.e(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.e(e);this.c.delete(e),t.dispose(),this.d.deleteWebview(e)}e(e){const t=this.c.get(e);if(!t)throw new Error("No webview found");return t}};function B_(e){const t=e.get(Ci),i=e.get(xa),r=e.get(wp),n=e.get(to),s=e.get(cs),o=e.get(bp),a=e.get(ls),c=e.get(_h),l=e.get(at),u=e.get(Jv),h=e.get(Zv),f=e.get(dl),g=e.get(ut),m=e.get(i0),b=e.get(Sp),k=e.get(r9),I=e.get(w0),R=e.get(Bu),N=e.get(E0),z=e.get(u0),q=e.get(f0);l.set(ve.ExtHostFileSystemInfo,i),l.set(ve.ExtHostLogLevelServiceShape,f),l.set(ve.ExtHostWorkspace,s),l.set(ve.ExtHostConfiguration,a),l.set(ve.ExtHostExtensionService,n),l.set(ve.ExtHostStorage,u),l.set(ve.ExtHostTunnelService,m),l.set(ve.ExtHostWindow,k),l.set(ve.ExtHostSecretState,I),l.set(ve.ExtHostTelemetry,o),l.set(ve.ExtHostEditorTabs,R),l.set(ve.ExtHostManagedSockets,N),l.set(ve.ExtHostAuthentication,z),l.set(ve.ExtHostChatProvider,q);const ee=l.set(ve.ExtHostDecorations,e.get(k6)),pe=l.set(ve.ExtHostDocumentsAndEditors,e.get(Pc)),re=l.set(ve.ExtHostCommands,e.get(ea)),fe=l.set(ve.ExtHostTerminalService,e.get(Ic)),We=l.set(ve.ExtHostTerminalShellIntegration,e.get(n9)),Ae=l.set(ve.ExtHostDebugService,e.get(Y6)),bt=l.set(ve.ExtHostSearch,e.get(i9)),Z=l.set(ve.ExtHostTask,e.get(B6)),J=l.set(ve.ExtHostOutputService,e.get(x6)),ce=l.set(ve.ExtHostLocalization,e.get(y0)),ne=l.set(ve.ExtHostUrls,new C_(l)),te=l.set(ve.ExtHostDocuments,new aL(l,pe)),$e=l.set(ve.ExtHostDocumentContentProviders,new sL(l,pe,g)),ze=l.set(ve.ExtHostDocumentSaveParticipant,new oL(g,te,l.getProxy(se.MainThreadBulkEdits))),Le=l.set(ve.ExtHostNotebook,new QL(l,re,pe,te,r,bt,g)),yt=l.set(ve.ExtHostNotebookDocuments,new XL(Le)),Ct=l.set(ve.ExtHostNotebookEditors,new Rw(g,Le)),Yt=l.set(ve.ExtHostNotebookKernels,new Tw(l,t,Le,re,g)),Ut=l.set(ve.ExtHostNotebookRenderers,new t_(l,Le)),Ti=l.set(ve.ExtHostNotebookDocumentSaveParticipant,new JL(g,Le,l.getProxy(se.MainThreadBulkEdits))),ft=l.set(ve.ExtHostEditors,new S_(l,pe)),ji=l.set(ve.ExtHostTreeViews,new T_(l.getProxy(se.MainThreadTreeViews),re,g)),Nr=l.set(ve.ExtHostEditorInsets,new FT(l.getProxy(se.MainThreadEditorInsets),ft,t.remote)),Tn=l.set(ve.ExtHostDiagnostics,new cw(l,g,i,pe)),pr=l.set(ve.ExtHostLanguages,new DL(l,te,re.converter,c)),Fe=l.set(ve.ExtHostLanguageFeatures,new xL(l,c,te,re,Tn,g,b,o)),Or=l.set(ve.ExtHostFileSystem,new gL(l,Fe)),qe=l.set(ve.ExtHostFileSystemEventService,new wL(l,g,pe)),dn=l.set(ve.ExtHostQuickOpen,o_(l,s,re)),Fr=l.set(ve.ExtHostSCM,new Fw(l,re,te,g)),gr=l.set(ve.ExtHostQuickDiff,new s_(l,c)),ws=l.set(ve.ExtHostShare,new v_(l,c)),bs=l.set(ve.ExtHostComments,UT(l,re,te)),ys=l.set(ve.ExtHostProgress,new r_(l.getProxy(se.MainThreadProgress))),Ln=l.set(ve.ExtHostLabelService,new yL(l)),Es=l.set(ve.ExtHostTheming,new Mw(l)),Ss=l.set(ve.ExtHostTimeline,new x_(l,re)),Mr=l.set(ve.ExtHostWebviews,new QT(l,t.remote,s,g,b)),Di=l.set(ve.ExtHostWebviewPanels,new O_(l,Mr,s)),Ur=l.set(ve.ExtHostCustomEditors,new eL(l,te,h,Mr,Di)),Nt=l.set(ve.ExtHostWebviewViews,new U_(l,Mr)),Ot=l.set(ve.ExtHostTesting,e.get(Rp)),Mc=l.set(ve.ExtHostUriOpeners,new __(l)),xs=l.set(ve.ExtHostProfileContentHandlers,new i_(l));l.set(ve.ExtHostInteractive,new bL(l,Le,pe,re,g));const Wi=l.set(ve.ExtHostChatAgents2,new TT(l,g,re,te)),Li=l.set(ve.ExtHostChatVariables,new LT(l)),P=l.set(ve.ExtHostLanguageModelTools,new kL(l)),O=l.set(ve.ExtHostAiRelatedInformation,new kT(l)),U=l.set(ve.ExtHostAiEmbeddingVector,new lL(l)),me=l.set(ve.ExtHostStatusBar,new E_(l,re.converter)),Re=l.set(ve.ExtHostSpeech,new w_(l)),pt=l.set(ve.ExtHostEmbeddings,new cL(l)),ye=Object.values(ve);l.assertRegistered(ye);const $i=new sw(l,pe),Bt=new CT(l),Kt=new ww(l,g),zi=new nL(l);return PT.register(re),function(D,xt,wi){function he(v){return(w,A,ke)=>{const ot=v(ei=>{try{w.call(A,ei)}catch(_n){yg(new Error(`[ExtensionListenerError] Extension '${D.identifier.value}' FAILED to handle event: ${_n.toString()}`,{cause:_n})),o.onExtensionError(D.identifier,_n)}});return ke?.push(ot),ot}}const V=function(){let v=!D.isUnderDevelopment;function w(){v||(g.info(`Extension '${D.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),v=!0)}return function A(ke){if(Array.isArray(ke))ke.forEach(A);else if(typeof ke=="string")w();else{const ot=ke;typeof ot.scheme>"u"&&w(),typeof ot.exclusive=="boolean"&&B(D,"documentFiltersExclusive")}return ke}}(),y={getSession(v,w,A){return typeof A?.forceNewSession=="object"&&A.forceNewSession.learnMore&&B(D,"authLearnMore"),z.getSession(D,v,w,A)},getAccounts(v){return z.getAccounts(v)},async hasSession(v,w){return B(D,"authSession"),!!await z.getSession(D,v,w,{silent:!0})},get onDidChangeSessions(){return he(z.onDidChangeSessions)},registerAuthenticationProvider(v,w,A,ke){return z.registerAuthenticationProvider(v,w,A,ke)}},S={registerCommand(v,w,A){return re.registerCommand(!0,v,w,A,void 0,D)},registerTextEditorCommand(v,w,A){return re.registerCommand(!0,v,(...ke)=>{const ot=ft.getActiveTextEditor();if(!ot){g.warn("Cannot execute "+v+" because there is no active text editor.");return}return ot.edit(ei=>{w.apply(A,[ot,ei,...ke])}).then(ei=>{ei||g.warn("Edits from command "+v+" were not applied.")},ei=>{g.warn("An error occurred while running command "+v,ei)})},void 0,void 0,D)},registerDiffInformationCommand:(v,w,A)=>(B(D,"diffCommand"),re.registerCommand(!0,v,async(...ke)=>{const ot=pe.activeEditor(!0);if(!ot){g.warn("Cannot execute "+v+" because there is no active text editor.");return}const ei=await ft.getDiffInformation(ot.id);w.apply(A,[ei,...ke])},void 0,void 0,D)),executeCommand(v,...w){return re.executeCommand(v,...w)},getCommands(v=!1){return re.getCommands(v)}},x={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return Bt.value},get shell(){return fe.getDefaultShell(!1)},get onDidChangeShell(){return he(fe.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return he(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return B(D,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return B(D,"telemetry"),he(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return X7(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(v,w){return J7.validateSender(v),o.instantiateLogger(D,v,w)},openExternal(v,w){return k.openUri(v,{allowTunneling:!!t.remote.authority,allowContributedOpeners:w?.allowContributedOpeners})},async asExternalUri(v){if(v.scheme===t.environment.appUriScheme)return ne.createAppUri(v);try{return await k.asExternalUri(v,{allowTunneling:!!t.remote.authority})}catch(w){if(Qg(v,de.http)||Qg(v,de.https))return v;throw w}},get remoteName(){return Hm(t.remote.authority)},get remoteAuthority(){return B(D,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return g.getLevel()},get onDidChangeLogLevel(){return he(g.onDidChangeLogLevel)},get appQuality(){return B(D,"resolvers"),t.quality},get appCommit(){return B(D,"resolvers"),t.commit}};t.environment.extensionTestsLocationURI||Object.freeze(x);const $={createTestController(v,w,A){return Ot.createTestController(D,v,w,A)},createTestObserver(){return B(D,"testObserver"),Ot.createTestObserver()},runTests(v){return B(D,"testObserver"),Ot.runTests(v)},registerTestFollowupProvider(v){return B(D,"testObserver"),Ot.registerTestFollowupProvider(v)},get onDidChangeTestResults(){return B(D,"testObserver"),he(Ot.onResultsChanged)},get testResults(){return B(D,"testObserver"),Ot.results}},T=t.remote.isRemote?qo.Workspace:qo.UI,M={getExtension(v,w){pi(D,"extensionsAny")||(w=!1);const A=xt.mine.getExtensionDescription(v);if(A)return new Lu(n,D.identifier,A,T,!1);if(w){const ke=xt.all.getExtensionDescription(v);if(ke)return new Lu(n,D.identifier,ke,T,!0)}},get all(){const v=[];for(const w of xt.mine.getAllExtensionDescriptions())v.push(new Lu(n,D.identifier,w,T,!1));return v},get allAcrossExtensionHosts(){B(D,"extensionsAny");const v=new Ro(xt.mine.getAllExtensionDescriptions().map(A=>A.identifier)),w=[];for(const A of xt.all.getAllExtensionDescriptions()){const ke=!v.has(A.identifier);w.push(new Lu(n,D.identifier,A,T,ke))}return w},get onDidChange(){return pi(D,"extensionsAny")?he(Gt.any(xt.mine.onDidChange,xt.all.onDidChange)):he(xt.mine.onDidChange)}},j={createDiagnosticCollection(v){return Tn.createDiagnosticCollection(D.identifier,v)},get onDidChangeDiagnostics(){return he(Tn.onDidChangeDiagnostics)},getDiagnostics:v=>Tn.getDiagnostics(v),getLanguages(){return pr.getLanguages()},setTextDocumentLanguage(v,w){return pr.changeLanguage(v.uri,w)},match(v,w){const A=xv.from(v);let ke;return o9(A)&&(ke=Le.notebookDocuments.find(ot=>ot.apiNotebook.getCells().find(ei=>ei.document===w))?.apiNotebook),s9(A,w.uri,w.languageId,!0,ke?.uri,ke?.notebookType)},registerCodeActionsProvider(v,w,A){return Fe.registerCodeActionProvider(D,V(v),w,A)},registerDocumentPasteEditProvider(v,w,A){return B(D,"documentPaste"),Fe.registerDocumentPasteEditProvider(D,V(v),w,A)},registerCodeLensProvider(v,w){return Fe.registerCodeLensProvider(D,V(v),w)},registerDefinitionProvider(v,w){return Fe.registerDefinitionProvider(D,V(v),w)},registerDeclarationProvider(v,w){return Fe.registerDeclarationProvider(D,V(v),w)},registerImplementationProvider(v,w){return Fe.registerImplementationProvider(D,V(v),w)},registerTypeDefinitionProvider(v,w){return Fe.registerTypeDefinitionProvider(D,V(v),w)},registerHoverProvider(v,w){return Fe.registerHoverProvider(D,V(v),w,D.identifier)},registerEvaluatableExpressionProvider(v,w){return Fe.registerEvaluatableExpressionProvider(D,V(v),w,D.identifier)},registerInlineValuesProvider(v,w){return Fe.registerInlineValuesProvider(D,V(v),w,D.identifier)},registerDocumentHighlightProvider(v,w){return Fe.registerDocumentHighlightProvider(D,V(v),w)},registerMultiDocumentHighlightProvider(v,w){return Fe.registerMultiDocumentHighlightProvider(D,V(v),w)},registerLinkedEditingRangeProvider(v,w){return Fe.registerLinkedEditingRangeProvider(D,V(v),w)},registerReferenceProvider(v,w){return Fe.registerReferenceProvider(D,V(v),w)},registerRenameProvider(v,w){return Fe.registerRenameProvider(D,V(v),w)},registerNewSymbolNamesProvider(v,w){return B(D,"newSymbolNamesProvider"),Fe.registerNewSymbolNamesProvider(D,V(v),w)},registerDocumentSymbolProvider(v,w,A){return Fe.registerDocumentSymbolProvider(D,V(v),w,A)},registerWorkspaceSymbolProvider(v){return Fe.registerWorkspaceSymbolProvider(D,v)},registerDocumentFormattingEditProvider(v,w){return Fe.registerDocumentFormattingEditProvider(D,V(v),w)},registerDocumentRangeFormattingEditProvider(v,w){return Fe.registerDocumentRangeFormattingEditProvider(D,V(v),w)},registerOnTypeFormattingEditProvider(v,w,A,...ke){return Fe.registerOnTypeFormattingEditProvider(D,V(v),w,[A].concat(ke))},registerDocumentSemanticTokensProvider(v,w,A){return Fe.registerDocumentSemanticTokensProvider(D,V(v),w,A)},registerDocumentRangeSemanticTokensProvider(v,w,A){return Fe.registerDocumentRangeSemanticTokensProvider(D,V(v),w,A)},registerSignatureHelpProvider(v,w,A,...ke){return typeof A=="object"?Fe.registerSignatureHelpProvider(D,V(v),w,A):Fe.registerSignatureHelpProvider(D,V(v),w,typeof A>"u"?[]:[A,...ke])},registerCompletionItemProvider(v,w,...A){return Fe.registerCompletionItemProvider(D,V(v),w,A)},registerInlineCompletionItemProvider(v,w,A){return w.handleDidShowCompletionItem&&B(D,"inlineCompletionsAdditions"),w.handleDidPartiallyAcceptCompletionItem&&B(D,"inlineCompletionsAdditions"),A&&B(D,"inlineCompletionsAdditions"),Fe.registerInlineCompletionsProvider(D,V(v),w,A)},registerInlineEditProvider(v,w){return B(D,"inlineEdit"),Fe.registerInlineEditProvider(D,V(v),w)},registerDocumentLinkProvider(v,w){return Fe.registerDocumentLinkProvider(D,V(v),w)},registerColorProvider(v,w){return Fe.registerColorProvider(D,V(v),w)},registerFoldingRangeProvider(v,w){return Fe.registerFoldingRangeProvider(D,V(v),w)},registerSelectionRangeProvider(v,w){return Fe.registerSelectionRangeProvider(D,v,w)},registerCallHierarchyProvider(v,w){return Fe.registerCallHierarchyProvider(D,v,w)},registerTypeHierarchyProvider(v,w){return Fe.registerTypeHierarchyProvider(D,v,w)},setLanguageConfiguration:(v,w)=>Fe.setLanguageConfiguration(D,v,w),getTokenInformationAtPosition(v,w){return B(D,"tokenInformation"),pr.tokenAtPosition(v,w)},registerInlayHintsProvider(v,w){return Fe.registerInlayHintsProvider(D,v,w)},createLanguageStatusItem(v,w){return pr.createLanguageStatusItem(D,v,w)},registerDocumentDropEditProvider(v,w,A){return Fe.registerDocumentOnDropEditProvider(D,v,w,pi(D,"documentPaste")?A:void 0)}},oe={get activeTextEditor(){return ft.getActiveTextEditor()},get visibleTextEditors(){return ft.getVisibleTextEditors()},get activeTerminal(){return fe.activeTerminal},get terminals(){return fe.terminals},async showTextDocument(v,w,A){E.isUri(v)&&v.scheme===de.vscodeRemote&&!v.authority&&b.report("workspace.showTextDocument",D,"A URI of 'vscode-remote' scheme requires an authority.");const ke=await(E.isUri(v)?Promise.resolve(ge.openTextDocument(v)):Promise.resolve(v));return ft.showTextDocument(ke,w,A)},createTextEditorDecorationType(v){return ft.createTextEditorDecorationType(D,v)},onDidChangeActiveTextEditor(v,w,A){return he(ft.onDidChangeActiveTextEditor)(v,w,A)},onDidChangeVisibleTextEditors(v,w,A){return he(ft.onDidChangeVisibleTextEditors)(v,w,A)},onDidChangeTextEditorSelection(v,w,A){return he(ft.onDidChangeTextEditorSelection)(v,w,A)},onDidChangeTextEditorOptions(v,w,A){return he(ft.onDidChangeTextEditorOptions)(v,w,A)},onDidChangeTextEditorVisibleRanges(v,w,A){return he(ft.onDidChangeTextEditorVisibleRanges)(v,w,A)},onDidChangeTextEditorViewColumn(v,w,A){return he(ft.onDidChangeTextEditorViewColumn)(v,w,A)},onDidCloseTerminal(v,w,A){return he(fe.onDidCloseTerminal)(v,w,A)},onDidOpenTerminal(v,w,A){return he(fe.onDidOpenTerminal)(v,w,A)},onDidChangeActiveTerminal(v,w,A){return he(fe.onDidChangeActiveTerminal)(v,w,A)},onDidChangeTerminalDimensions(v,w,A){return B(D,"terminalDimensions"),he(fe.onDidChangeTerminalDimensions)(v,w,A)},onDidChangeTerminalState(v,w,A){return he(fe.onDidChangeTerminalState)(v,w,A)},onDidWriteTerminalData(v,w,A){return B(D,"terminalDataWriteEvent"),he(fe.onDidWriteTerminalData)(v,w,A)},onDidExecuteTerminalCommand(v,w,A){return B(D,"terminalExecuteCommandEvent"),he(fe.onDidExecuteTerminalCommand)(v,w,A)},onDidChangeTerminalShellIntegration(v,w,A){return he(We.onDidChangeTerminalShellIntegration)(v,w,A)},onDidStartTerminalShellExecution(v,w,A){return he(We.onDidStartTerminalShellExecution)(v,w,A)},onDidEndTerminalShellExecution(v,w,A){return he(We.onDidEndTerminalShellExecution)(v,w,A)},get state(){return k.getState()},onDidChangeWindowState(v,w,A){return he(k.onDidChangeWindowState)(v,w,A)},showInformationMessage(v,...w){return Kt.showMessage(D,Zt.Info,v,w[0],w.slice(1))},showWarningMessage(v,...w){return Kt.showMessage(D,Zt.Warning,v,w[0],w.slice(1))},showErrorMessage(v,...w){return Kt.showMessage(D,Zt.Error,v,w[0],w.slice(1))},showQuickPick(v,w,A){return dn.showQuickPick(D,v,w,A)},showWorkspaceFolderPick(v){return dn.showWorkspaceFolderPick(v)},showInputBox(v,w){return dn.showInput(v,w)},showOpenDialog(v){return zi.showOpenDialog(D,v)},showSaveDialog(v){return zi.showSaveDialog(v)},createStatusBarItem(v,w,A){let ke,ot,ei;return typeof v=="string"?(ke=v,ot=w,ei=A):(ot=v,ei=w),me.createStatusBarEntry(D,ke,ot,ei)},setStatusBarMessage(v,w){return me.setStatusBarMessage(v,w)},withScmProgress(v){return b.report("window.withScmProgress",D,"Use 'withProgress' instead."),ys.withProgress(D,{location:jo.SourceControl},(w,A)=>v({report(ke){}}))},withProgress(v,w){return ys.withProgress(D,v,w)},createOutputChannel(v,w){return J.createOutputChannel(v,w,D)},createWebviewPanel(v,w,A,ke){return Di.createWebviewPanel(D,v,w,A,ke)},createWebviewTextEditorInset(v,w,A,ke){return B(D,"editorInsets"),Nr.createWebviewEditorInset(v,w,A,ke,D)},createTerminal(v,w,A){return typeof v=="object"?"pty"in v?fe.createExtensionTerminal(v):fe.createTerminalFromOptions(v):fe.createTerminal(v,w,A)},registerTerminalLinkProvider(v){return fe.registerLinkProvider(v)},registerTerminalProfileProvider(v,w){return fe.registerProfileProvider(D,v,w)},registerTerminalQuickFixProvider(v,w){return B(D,"terminalQuickFixProvider"),fe.registerTerminalQuickFixProvider(v,D.identifier.value,w)},registerTreeDataProvider(v,w){return ji.registerTreeDataProvider(v,w,D)},createTreeView(v,w){return ji.createTreeView(v,w,D)},registerWebviewPanelSerializer:(v,w)=>Di.registerWebviewPanelSerializer(D,v,w),registerCustomEditorProvider:(v,w,A={})=>Ur.registerCustomEditorProvider(D,v,w,A),registerFileDecorationProvider(v){return ee.registerFileDecorationProvider(v,D)},registerUriHandler(v){return ne.registerUriHandler(D,v)},createQuickPick(){return dn.createQuickPick(D)},createInputBox(){return dn.createInputBox(D)},get activeColorTheme(){return Es.activeColorTheme},onDidChangeActiveColorTheme(v,w,A){return he(Es.onDidChangeActiveColorTheme)(v,w,A)},registerWebviewViewProvider(v,w,A){return Nt.registerWebviewViewProvider(D,v,w,A?.webviewOptions)},get activeNotebookEditor(){return Le.activeNotebookEditor},onDidChangeActiveNotebookEditor(v,w,A){return he(Le.onDidChangeActiveNotebookEditor)(v,w,A)},get visibleNotebookEditors(){return Le.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return he(Le.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(v,w,A){return he(Ct.onDidChangeNotebookEditorSelection)(v,w,A)},onDidChangeNotebookEditorVisibleRanges(v,w,A){return he(Ct.onDidChangeNotebookEditorVisibleRanges)(v,w,A)},showNotebookDocument(v,w){return Le.showNotebookDocument(v,w)},registerExternalUriOpener(v,w,A){return B(D,"externalUriOpener"),Mc.registerExternalUriOpener(D.identifier,v,w,A)},registerProfileContentHandler(v,w){return B(D,"profileContentHandlers"),xs.registerProfileContentHandler(D,v,w)},registerQuickDiffProvider(v,w,A,ke){return B(D,"quickDiffProvider"),gr.registerQuickDiffProvider(V(v),w,A,ke)},get tabGroups(){return R.tabGroups},registerShareProvider(v,w){return B(D,"shareProvider"),ws.registerShareProvider(V(v),w)}},ge={get rootPath(){return b.report("workspace.rootPath",D,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),s.getPath()},set rootPath(v){throw new lo("rootPath")},getWorkspaceFolder(v){return s.getWorkspaceFolder(v)},get workspaceFolders(){return s.getWorkspaceFolders()},get name(){return s.name},set name(v){throw new lo("name")},get workspaceFile(){return s.workspaceFile},set workspaceFile(v){throw new lo("workspaceFile")},updateWorkspaceFolders:(v,w,...A)=>s.updateWorkspaceFolders(D,v,w||0,...A),onDidChangeWorkspaceFolders:function(v,w,A){return he(s.onDidChangeWorkspace)(v,w,A)},asRelativePath:(v,w)=>s.getRelativePath(v,w),findFiles:(v,w,A,ke)=>s.findFiles(v,w,A,D.identifier,ke),findFiles2:(v,w,A)=>(B(D,"findFiles2"),s.findFiles2(v,w,D.identifier,A)),findFiles2New:(v,w,A)=>{B(D,"findFiles2New");const ke={exclude:w?.exclude&&w.exclude.length>0?w.exclude[0]:void 0,useDefaultExcludes:!w?.useExcludeSettings||w?.useExcludeSettings===as.FilesExclude||w?.useExcludeSettings===as.SearchAndFilesExclude,useDefaultSearchExcludes:!w?.useExcludeSettings||w?.useExcludeSettings===as.SearchAndFilesExclude,maxResults:w?.maxResults,useIgnoreFiles:w?.useIgnoreFiles?.local,useGlobalIgnoreFiles:w?.useIgnoreFiles?.global,useParentIgnoreFiles:w?.useIgnoreFiles?.parent,followSymlinks:w?.followSymlinks};return s.findFiles2(v&&v.length>0?v[0]:void 0,ke,D.identifier,A)},findTextInFiles:(v,w,A,ke)=>{B(D,"findTextInFiles");let ot,ei;return typeof w=="object"?(ot=w,ei=A):(ot={},ei=w,ke=A),s.findTextInFiles(v,ot||{},ei,D.identifier,ke)},findTextInFilesNew:(v,w,A)=>{B(D,"findTextInFilesNew"),B(D,"textSearchProviderNew");let ke={};w&&(ke={include:w.include&&w.include.length>0?w.include[0]:void 0,exclude:w.exclude&&w.exclude.length>0?w.exclude[0]:void 0,useDefaultExcludes:w.useExcludeSettings===void 0||w.useExcludeSettings===as.FilesExclude||w.useExcludeSettings===as.SearchAndFilesExclude,useSearchExclude:w.useExcludeSettings===void 0||w.useExcludeSettings===as.SearchAndFilesExclude,maxResults:w.maxResults,useIgnoreFiles:w.useIgnoreFiles?.local,useGlobalIgnoreFiles:w.useIgnoreFiles?.global,useParentIgnoreFiles:w.useIgnoreFiles?.parent,followSymlinks:w.followSymlinks,encoding:w.encoding,previewOptions:w.previewOptions?{matchLines:w.previewOptions?.numMatchLines??100,charsPerLine:w.previewOptions?.charsPerLine??1e4}:void 0,beforeContext:w.surroundingContext,afterContext:w.surroundingContext});const ot=Promise.resolve(void 0);return{results:new rl(async _n=>{const gg=async mg=>(_n.emitOne(Q0(mg)),mg);await ot.then(mg=>s.findTextInFiles(v,ke,gg,D.identifier,A))}),complete:ot.then(_n=>({limitHit:_n?.limitHit??!1}))}},save:v=>s.save(v),saveAs:v=>s.saveAs(v),saveAll:v=>s.saveAll(v),applyEdit(v,w){return $i.applyWorkspaceEdit(v,D,w)},createFileSystemWatcher:(v,w,A,ke)=>{let ot;return typeof w=="boolean"?ot={ignoreCreateEvents:!!w,ignoreChangeEvents:!!A,ignoreDeleteEvents:!!ke,correlate:!1}:w&&(B(D,"createFileSystemWatcher"),ot={...w,correlate:!0}),qe.createFileSystemWatcher(s,D,v,ot)},get textDocuments(){return te.getAllDocumentData().map(v=>v.document)},set textDocuments(v){throw new lo("textDocuments")},openTextDocument(v){let w;const A=v;if(typeof v=="string")w=Promise.resolve(E.file(v));else if(E.isUri(v))w=Promise.resolve(v);else if(!A||typeof A=="object")w=te.createDocumentData(A);else throw new Error("illegal argument - uriOrFileNameOrOptions");return w.then(ke=>(g.trace(`openTextDocument from ${D.identifier}`),ke.scheme===de.vscodeRemote&&!ke.authority&&b.report("workspace.openTextDocument",D,"A URI of 'vscode-remote' scheme requires an authority."),te.ensureDocumentData(ke).then(ot=>ot.document)))},onDidOpenTextDocument:(v,w,A)=>he(te.onDidAddDocument)(v,w,A),onDidCloseTextDocument:(v,w,A)=>he(te.onDidRemoveDocument)(v,w,A),onDidChangeTextDocument:(v,w,A)=>he(te.onDidChangeDocument)(v,w,A),onDidSaveTextDocument:(v,w,A)=>he(te.onDidSaveDocument)(v,w,A),onWillSaveTextDocument:(v,w,A)=>he(ze.getOnWillSaveTextDocumentEvent(D))(v,w,A),get notebookDocuments(){return Le.notebookDocuments.map(v=>v.apiNotebook)},async openNotebookDocument(v,w){let A;if(E.isUri(v))A=v,await Le.openNotebookDocument(v);else if(typeof v=="string")A=E.revive(await Le.createNotebookDocument({viewType:v,content:w}));else throw new Error("Invalid arguments");return Le.getNotebookDocument(A).apiNotebook},onDidSaveNotebookDocument(v,w,A){return he(yt.onDidSaveNotebookDocument)(v,w,A)},onDidChangeNotebookDocument(v,w,A){return he(yt.onDidChangeNotebookDocument)(v,w,A)},onWillSaveNotebookDocument(v,w,A){return he(Ti.getOnWillSaveNotebookDocumentEvent(D))(v,w,A)},get onDidOpenNotebookDocument(){return he(Le.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return he(Le.onDidCloseNotebookDocument)},registerNotebookSerializer(v,w,A,ke){return Le.registerNotebookSerializer(D,v,w,A,pi(D,"notebookLiveShare")?ke:void 0)},onDidChangeConfiguration:(v,w,A)=>he(wi.onDidChangeConfiguration)(v,w,A),getConfiguration(v,w){return w=arguments.length===1?void 0:w,wi.getConfiguration(v,w,D)},registerTextDocumentContentProvider(v,w){return $e.registerTextDocumentContentProvider(v,w)},registerTaskProvider:(v,w)=>(b.report("window.registerTaskProvider",D,"Use the corresponding function on the 'tasks' namespace instead"),Z.registerTaskProvider(D,v,w)),registerFileSystemProvider(v,w,A){return Eb(Or.registerFileSystemProvider(D,v,w,A),r.addFileSystemProvider(v,w,A))},get fs(){return r.value},registerFileSearchProvider:(v,w)=>(B(D,"fileSearchProvider"),bt.registerFileSearchProviderOld(v,w)),registerTextSearchProvider:(v,w)=>(B(D,"textSearchProvider"),bt.registerTextSearchProviderOld(v,w)),registerAITextSearchProvider:(v,w)=>(B(D,"aiTextSearchProvider"),B(D,"textSearchProvider"),bt.registerAITextSearchProviderOld(v,w)),registerFileSearchProviderNew:(v,w)=>(B(D,"fileSearchProviderNew"),{dispose:()=>{}}),registerTextSearchProviderNew:(v,w)=>(B(D,"textSearchProviderNew"),{dispose:()=>{}}),registerAITextSearchProviderNew:(v,w)=>(B(D,"aiTextSearchProviderNew"),B(D,"textSearchProviderNew"),{dispose:()=>{}}),registerRemoteAuthorityResolver:(v,w)=>(B(D,"resolvers"),n.registerRemoteAuthorityResolver(v,w)),registerResourceLabelFormatter:v=>(B(D,"resolvers"),Ln.$registerResourceLabelFormatter(v)),getRemoteExecServer:v=>(B(D,"resolvers"),n.getRemoteExecServer(v)),onDidCreateFiles:(v,w,A)=>he(qe.onDidCreateFile)(v,w,A),onDidDeleteFiles:(v,w,A)=>he(qe.onDidDeleteFile)(v,w,A),onDidRenameFiles:(v,w,A)=>he(qe.onDidRenameFile)(v,w,A),onWillCreateFiles:(v,w,A)=>he(qe.getOnWillCreateFileEvent(D))(v,w,A),onWillDeleteFiles:(v,w,A)=>he(qe.getOnWillDeleteFileEvent(D))(v,w,A),onWillRenameFiles:(v,w,A)=>he(qe.getOnWillRenameFileEvent(D))(v,w,A),openTunnel:v=>(B(D,"tunnels"),m.openTunnel(D,v).then(w=>{if(!w)throw new Error("cannot open tunnel");return w})),get tunnels(){return B(D,"tunnels"),m.getTunnels()},onDidChangeTunnels:(v,w,A)=>(B(D,"tunnels"),he(m.onDidChangeTunnels)(v,w,A)),registerPortAttributesProvider:(v,w)=>(B(D,"portsAttributes"),m.registerPortsAttributesProvider(v,w)),registerTunnelProvider:(v,w)=>(B(D,"tunnelFactory"),m.registerTunnelProvider(v,w)),registerTimelineProvider:(v,w)=>(B(D,"timeline"),Ss.registerTimelineProvider(v,w,D.identifier,re.converter)),get isTrusted(){return s.trusted},requestWorkspaceTrust:v=>(B(D,"workspaceTrust"),s.requestWorkspaceTrust(v)),onDidGrantWorkspaceTrust:(v,w,A)=>he(s.onDidGrantWorkspaceTrust)(v,w,A),registerEditSessionIdentityProvider:(v,w)=>(B(D,"editSessionIdentityProvider"),s.registerEditSessionIdentityProvider(v,w)),onWillCreateEditSessionIdentity:(v,w,A)=>(B(D,"editSessionIdentityProvider"),he(s.getOnWillCreateEditSessionIdentityEvent(D))(v,w,A)),registerCanonicalUriProvider:(v,w)=>(B(D,"canonicalUriProvider"),s.registerCanonicalUriProvider(v,w)),getCanonicalUri:(v,w,A)=>(B(D,"canonicalUriProvider"),s.provideCanonicalUri(v,w,A))},_e={get inputBox(){return b.report("scm.inputBox",D,"Use 'SourceControl.inputBox' instead"),Fr.getLastInputBox(D)},createSourceControl(v,w,A){return Fr.createSourceControl(D,v,w,A)}},nt={createCommentController(v,w){return bs.createCommentController(D,v,w)}},kt={get activeDebugSession(){return Ae.activeDebugSession},get activeDebugConsole(){return Ae.activeDebugConsole},get breakpoints(){return Ae.breakpoints},get activeStackItem(){return Ae.activeStackItem},registerDebugVisualizationProvider(v,w){return B(D,"debugVisualization"),Ae.registerDebugVisualizationProvider(D,v,w)},registerDebugVisualizationTreeProvider(v,w){return B(D,"debugVisualization"),Ae.registerDebugVisualizationTree(D,v,w)},onDidStartDebugSession(v,w,A){return he(Ae.onDidStartDebugSession)(v,w,A)},onDidTerminateDebugSession(v,w,A){return he(Ae.onDidTerminateDebugSession)(v,w,A)},onDidChangeActiveDebugSession(v,w,A){return he(Ae.onDidChangeActiveDebugSession)(v,w,A)},onDidReceiveDebugSessionCustomEvent(v,w,A){return he(Ae.onDidReceiveDebugSessionCustomEvent)(v,w,A)},onDidChangeBreakpoints(v,w,A){return he(Ae.onDidChangeBreakpoints)(v,w,A)},onDidChangeActiveStackItem(v,w,A){return he(Ae.onDidChangeActiveStackItem)(v,w,A)},registerDebugConfigurationProvider(v,w,A){return Ae.registerDebugConfigurationProvider(v,w,A||Dd.Initial)},registerDebugAdapterDescriptorFactory(v,w){return Ae.registerDebugAdapterDescriptorFactory(D,v,w)},registerDebugAdapterTrackerFactory(v,w){return Ae.registerDebugAdapterTrackerFactory(v,w)},startDebugging(v,w,A){return!A||typeof A=="object"&&"configuration"in A?Ae.startDebugging(v,w,{parentSession:A}):Ae.startDebugging(v,w,A||{})},stopDebugging(v){return Ae.stopDebugging(v)},addBreakpoints(v){return Ae.addBreakpoints(v)},removeBreakpoints(v){return Ae.removeBreakpoints(v)},asDebugSourceUri(v,w){return Ae.asDebugSourceUri(v,w)}},ai={registerTaskProvider:(v,w)=>Z.registerTaskProvider(D,v,w),fetchTasks:v=>Z.fetchTasks(v),executeTask:v=>Z.executeTask(D,v),get taskExecutions(){return Z.taskExecutions},onDidStartTask:(v,w,A)=>he(Z.onDidStartTask)(v,w,A),onDidEndTask:(v,w,A)=>he(Z.onDidEndTask)(v,w,A),onDidStartTaskProcess:(v,w,A)=>he(Z.onDidStartTaskProcess)(v,w,A),onDidEndTaskProcess:(v,w,A)=>he(Z.onDidEndTaskProcess)(v,w,A)},Pt={createNotebookController(v,w,A,ke,ot){return Yt.createNotebookController(D,v,w,A,ke,pi(D,"notebookMessaging")?ot:void 0)},registerNotebookCellStatusBarItemProvider:(v,w)=>Le.registerNotebookCellStatusBarItemProvider(D,v,w),createRendererMessaging(v){return Ut.createRendererMessaging(D,v)},createNotebookControllerDetectionTask(v){return B(D,"notebookKernelSource"),Yt.createNotebookControllerDetectionTask(D,v)},registerKernelSourceActionProvider(v,w){return B(D,"notebookKernelSource"),Yt.registerKernelSourceActionProvider(D,v,w)},onDidChangeNotebookCellExecutionState(v,w,A){return B(D,"notebookCellExecutionState"),he(Yt.onDidChangeNotebookCellExecutionState)(v,w,A)}},rr={t(...v){if(typeof v[0]=="string"){const w=v.shift(),A=!v||typeof v[0]!="object"?v:v[0];return ce.getMessage(D.identifier.value,{message:w,args:A})}return ce.getMessage(D.identifier.value,v[0])},get bundle(){return ce.getBundle(D.identifier.value)},get uri(){return ce.getBundleUri(D.identifier.value)}},$r={transferActiveChat(v){return B(D,"interactive"),Wi.transferActiveChat(v)}},Uc={getRelatedInformation(v,w){return B(D,"aiRelatedInformation"),O.getRelatedInformation(D,v,w)},registerRelatedInformationProvider(v,w){return B(D,"aiRelatedInformation"),O.registerRelatedInformationProvider(D,v,w)},registerEmbeddingVectorProvider(v,w){return B(D,"aiRelatedInformation"),U.registerEmbeddingVectorProvider(D,v,w)}},lh={registerChatResponseProvider(v,w,A){return B(D,"chatProvider"),q.registerLanguageModel(D,v,w,A)},registerChatVariableResolver(v,w,A,ke,ot,ei,_n,gg){return B(D,"chatVariableResolver"),Li.registerVariableResolver(D,v,w,A,ke,ot,ei,_n,gg?.id)},registerMappedEditsProvider(v,w){return B(D,"mappedEditsProvider"),Fe.registerMappedEditsProvider(D,v,w)},createChatParticipant(v,w){return Wi.createChatAgent(D,v,w)},createDynamicChatParticipant(v,w,A){return B(D,"chatParticipantPrivate"),Wi.createDynamicChatAgent(D,v,w,A)},registerChatParticipantDetectionProvider(v){return B(D,"chatParticipantAdditions"),Wi.registerChatParticipantDetectionProvider(v)}},uh={selectChatModels:v=>q.selectLanguageModels(D,v??{}),onDidChangeChatModels:(v,w,A)=>q.onDidChangeProviders(v,w,A),registerChatModelProvider:(v,w,A)=>(B(D,"chatProvider"),q.registerLanguageModel(D,v,w,A)),get embeddingModels(){return B(D,"embeddings"),pt.embeddingsModels},onDidChangeEmbeddingModels:(v,w,A)=>(B(D,"embeddings"),pt.onDidChange(v,w,A)),registerEmbeddingsProvider(v,w){return B(D,"embeddings"),pt.registerEmbeddingsProvider(D,v,w)},async computeEmbeddings(v,w,A){return B(D,"embeddings"),pt.computeEmbeddings(v,w,A)},registerTool(v,w){return B(D,"lmTools"),P.registerTool(D,v,w)},invokeTool(v,w,A){return B(D,"lmTools"),P.invokeTool(v,w,A)},get tools(){return B(D,"lmTools"),P.tools}},hh={registerSpeechProvider(v,w){return B(D,"speech"),Re.registerProvider(D.identifier,v,w)}};return{version:t.version,ai:Uc,authentication:y,commands:S,comments:nt,chat:lh,debug:kt,env:x,extensions:M,interactive:$r,l10n:rr,languages:j,lm:uh,notebooks:Pt,scm:_e,speech:hh,tasks:ai,tests:$,window:oe,workspace:ge,Breakpoint:ec,TerminalOutputAnchor:d1,ChatResultFeedbackKind:su,ChatVariableLevel:ev,ChatCompletionItem:JA,CallHierarchyIncomingCall:FE,CallHierarchyItem:g1,CallHierarchyOutgoingCall:ME,CancellationError:Cn,CancellationTokenSource:ri,CandidatePortSource:jg,CodeAction:Bd,CodeActionKind:Lt,CodeActionTriggerKind:Ul,CodeLens:Hd,Color:Xa,ColorInformation:Gd,ColorPresentation:Qd,ColorThemeKind:Vs,CommentMode:O1,CommentState:F1,CommentThreadCollapsibleState:Xl,CommentThreadState:Zl,CommentThreadApplicability:Yl,CommentThreadFocus:Kl,CompletionItem:zd,CompletionItemKind:De,CompletionItemTag:Hl,CompletionList:qa,CompletionTriggerKind:Va,ConfigurationTarget:Ya,CustomExecution:P1,DebugAdapterExecutable:rf,DebugAdapterInlineImplementation:sf,DebugAdapterNamedPipeServer:nf,DebugAdapterServer:Gl,DebugConfigurationProviderTriggerKind:Dd,DebugConsoleMode:hf,DebugVisualization:BA,DecorationRangeBehavior:Bo,Diagnostic:Nd,DiagnosticRelatedInformation:Cl,DiagnosticSeverity:Ri,DiagnosticTag:Mo,Disposable:Ye,DocumentHighlight:Md,DocumentHighlightKind:Nl,MultiDocumentHighlight:Ud,DocumentLink:qd,DocumentSymbol:Ml,EndOfLine:rn,EnvironmentVariableMutatorType:Wa,EvaluatableExpression:of,InlineValueText:af,InlineValueVariableLookup:cf,InlineValueEvaluatableExpression:lf,InlineCompletionTriggerKind:Ql,EventEmitter:C,ExtensionKind:qo,ExtensionMode:sc,ExternalUriOpenerPriority:z1,FileChangeType:tc,FileDecoration:B1,FileDecoration2:B1,FileSystemError:ui,FileType:Do,FilePermission:Sa,FoldingRange:N1,FoldingRangeKind:ts,FunctionBreakpoint:Vo,InlineCompletionItem:E1,InlineCompletionList:S1,Hover:Od,VerboseHover:Fd,HoverVerbosityAction:p1,IndentAction:iw,Location:kr,MarkdownString:dr,OverviewRulerLane:Rm,ParameterInformation:m1,PortAutoForwardAction:q1,Position:Ve,ProcessExecution:Za,ProgressLocation:jo,QuickInputButtonLocation:U1,QuickInputButtons:eu,Range:Be,RelativePattern:Ka,Selection:es,SelectionRange:Bl,SemanticTokens:ic,SemanticTokensBuilder:UA,SemanticTokensEdit:zE,SemanticTokensEdits:uf,SemanticTokensLegend:M1,ShellExecution:Ho,ShellQuoting:A1,SignatureHelp:w1,SignatureHelpTriggerKind:b1,SignatureInformation:v1,SnippetString:Fo,SourceBreakpoint:zo,StandardTokenType:qs,StatusBarAlignment:Ws,SymbolInformation:Fl,SymbolKind:wt,SymbolTag:Ol,Task:Xd,TaskGroup:zl,TaskPanelKind:I1,TaskRevealKind:$1,TaskScope:zs,TerminalLink:PA,TerminalQuickFixTerminalCommand:TA,TerminalQuickFixOpener:RA,TerminalLocation:D1,TerminalProfile:LA,TerminalExitReason:k1,TerminalShellExecutionCommandLineConfidence:Jd,TextDocumentSaveReason:Ga,TextEdit:js,SnippetTextEdit:f1,TextEditorCursorStyle:yn,TextEditorLineNumbersStyle:nn,TextEditorRevealType:Vd,TextEditorSelectionChangeKind:Qa,SyntaxTokenType:Ja,TextDocumentChangeReason:Wl,ThemeColor:ql,ThemeIcon:Bi,TreeItem:Zd,TreeItemCheckboxState:Dn,TreeItemCollapsibleState:Wo,TypeHierarchyItem:G1,UIKind:Gc,Uri:E,ViewColumn:jl,WorkspaceEdit:Oo,DocumentPasteTriggerKind:L1,DocumentDropEdit:T1,DocumentDropOrPasteEditKind:ef,DocumentPasteEdit:NA,InlayHint:Wd,InlayHintLabelPart:jd,InlayHintKind:y1,RemoteAuthorityResolverError:ja,ResolvedAuthority:IA,ManagedResolvedAuthority:_d,SourceControlInputBoxValidationType:x1,ExtensionRuntime:wf,TimelineItem:j1,NotebookRange:is,NotebookCellKind:Go,NotebookCellExecutionState:nc,NotebookCellData:ff,NotebookData:VE,NotebookRendererScript:GE,NotebookCellStatusBarAlignment:gf,NotebookEditorRevealType:mf,NotebookCellOutput:pf,NotebookCellOutputItem:qE,NotebookCellStatusBarItem:HA,NotebookControllerAffinity:H1,NotebookControllerAffinity2:vf,NotebookEdit:Cd,NotebookKernelSourceAction:jA,NotebookVariablesRequestKind:iu,PortAttributes:zA,LinkedEditingRanges:WA,TestResultState:W1,TestRunRequest:bf,TestMessage:yf,TestMessageStackFrame:VA,TestTag:ru,TestRunProfileKind:oc,TextSearchCompleteMessageType:dp,DataTransfer:Vl,DataTransferItem:Yd,TestCoverageCount:Ef,FileCoverage:nu,FileCoverage2:nu,StatementCoverage:qA,BranchCoverage:GA,DeclarationCoverage:QA,WorkspaceTrustState:V1,LanguageStatusSeverity:za,QuickPickItemKind:tu,InputBoxValidationSeverity:rc,TabInputText:Q1,TabInputTextDiff:xf,TabInputTextMerge:QE,TabInputCustom:J1,TabInputNotebook:X1,TabInputNotebookDiff:Z1,TabInputWebview:JE,TabInputTerminal:XE,TabInputInteractiveWindow:ZE,TabInputChat:YE,TabInputTextMultiDiff:KE,TelemetryTrustedValue:Qm,LogLevel:it,EditSessionIdentityMatch:rw,InteractiveSessionVoteDirection:Y1,ChatCopyKind:K1,InteractiveEditorResponseFeedbackKind:tv,DebugStackFrame:jE,DebugThread:WE,RelatedInformationType:nv,SpeechToTextStatus:sv,TextToSpeechStatus:ov,PartialAcceptTriggerKind:Uo,KeywordRecognitionStatus:av,ChatResponseMarkdownPart:kf,ChatResponseFileTreePart:$f,ChatResponseAnchorPart:If,ChatResponseProgressPart:cu,ChatResponseProgressPart2:e7,ChatResponseReferencePart:rs,ChatResponseReferencePart2:rs,ChatResponseCodeCitationPart:Pf,ChatResponseWarningPart:lu,ChatResponseTextEditPart:uu,ChatResponseMarkdownWithVulnerabilitiesPart:ou,ChatResponseCommandButtonPart:Af,ChatResponseDetectedParticipantPart:au,ChatResponseConfirmationPart:Df,ChatResponseMovePart:Rf,ChatResponseReferencePartStatusKind:iv,ChatRequestTurn:t7,ChatResponseTurn:i7,ChatLocation:sn,ChatRequestEditorData:r7,ChatRequestNotebookData:n7,LanguageModelChatMessageRole:Rr,LanguageModelChatMessage:s7,LanguageModelChatMessageFunctionResultPart:Tf,LanguageModelChatResponseTextPart:hu,LanguageModelChatResponseFunctionUsePart:rv,LanguageModelError:ns,NewSymbolName:FA,NewSymbolNameTag:C1,NewSymbolNameTriggerKind:Jl,InlineEdit:XA,InlineEditTriggerKind:du,ExcludeSettingOptions:as,TextSearchContextNew:a7,TextSearchMatchNew:Zo,TextSearchCompleteMessageTypeNew:dp}}}var Zp,Uw=class{constructor(t,i,r,n,s,o,a){this.c=t,this.d=i,this.e=r,this.f=n,this.g=s,this.h=o,this.i=a,this.a=new Map,this.b=[]}async install(){this.j(),Vi("code/extHost/willWaitForConfig");const t=await this.f.getConfigProvider();Vi("code/extHost/didWaitForConfig");const i=await this.g.getExtensionPathIndex();this.register(new H_(this.c,i,this.d,t,this.i)),this.register(this.e.createInstance(Bw)),this.h.remote.isRemote&&this.register(this.e.createInstance(Hw,i,this.h.environment.appUriScheme))}register(t){if("nodeModuleName"in t)if(Array.isArray(t.nodeModuleName))for(const i of t.nodeModuleName)this.a.set(i,t);else this.a.set(t.nodeModuleName,t);typeof t.alternativeModuleName=="function"&&this.b.push(i=>t.alternativeModuleName(i))}};Uw=__decorate([__param(2,Th),__param(3,ls),__param(4,to),__param(5,Ci),__param(6,ut)],Uw);var Bw=class{static{Zp=this}static{this.a=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(t){if(t.environment.appRoot&&Zp.a.size){const i=vo(this.c(t.environment.appRoot.fsPath)),r="[a-z0-9_.-]",n=`@${r}+\\/${r}+|${r}+`,s="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.b=new RegExp(`^(${i}/${s}\\/)(${n})(.*)$`,"i")}}alternativeModuleName(t){if(!this.b)return;const i=this.b.exec(this.c(t));if(!i)return;const[,r,n,s]=i,o=Zp.a.get(n);if(o!==void 0)return console.warn(`${n} as been renamed to ${o}, please update your imports`),r+o+s}c(t){return t.replace(/\\/g,"/")}};Bw=Zp=__decorate([__param(0,Ci)],Bw);var H_=class{constructor(e,t,i,r,n){this.c=e,this.d=t,this.e=i,this.f=r,this.g=n,this.nodeModuleName="vscode",this.a=new Xn}load(e,t){const i=this.d.findSubstr(t);if(i){let r=this.a.get(i.identifier);return r||(r=this.c(i,this.e,this.f),this.a.set(i.identifier,r)),r}if(!this.b){let r="";this.d.forEach((n,s)=>r+=`	${s} -> ${n.identifier.value}
`),this.g.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${r}`),this.b=this.c(U3,this.e,this.f)}return this.b}},Hw=class{constructor(t,i,r){this.e=t,this.f=i,this.nodeModuleName=["open","opn"],this.d=r.getProxy(se.MainThreadTelemetry);const n=r.getProxy(se.MainThreadWindow);this.c=(s,o)=>{const a=E.parse(s);return o?this.g(s,o):a.scheme==="http"||a.scheme==="https"?n.$openUri(a,s,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this.f?n.$openUri(a,s,{}):this.g(s,o)}}load(t,i,r){const n=this.e.findSubstr(i);return n&&(this.a=n.identifier.value,this.h()),this.b=r(t),this.c}g(t,i){return this.i(),this.b(t,i)}h(){this.a&&this.d.$publicLog2("shimming.open",{extension:this.a})}i(){this.a&&this.d.$publicLog2("shimming.open.call.noForward",{extension:this.a})}};Hw=__decorate([__param(2,at)],Hw);var jw=class{constructor(t,i){this.a=t.getProxy(se.MainThreadConsole),this.b=i.consoleForward.includeStack,this.c=i.consoleForward.logNative,this.d("info","log"),this.d("log","log"),this.d("warn","warn"),this.d("debug","debug"),this.d("error","error")}d(t,i){const r=this,n=console[t];Object.defineProperty(console,t,{set:()=>{},get:()=>function(){r.e(t,i,n,arguments)}})}e(t,i,r,n){this.a.$logExtensionHostMessage({type:"__$console",severity:i,arguments:W_(n,this.b)}),this.c&&this.f(t,r,n)}};jw=__decorate([__param(0,at),__param(1,Ci)],jw);var j_=1e5;function W_(e,t){const i=[];if(e.length)for(let r=0;r<e.length;r++){let n=e[r];if(typeof n>"u")n="undefined";else if(n instanceof Error){const s=n;s.stack?n=s.stack:n=s.toString()}i.push(n)}if(t){const r=new Error().stack;r&&i.push({__$stack:r.split(`
`).slice(3).join(`
`)})}try{const r=WD(i);return r.length>j_?"Output omitted for a large object that exceeds the limits":r}catch(r){return`Output omitted for an object that cannot be inspected ('${r.toString()}')`}}var Ww=class extends jw{constructor(t,i){super(t,i)}f(t,i,r){i.apply(console,r)}};Ww=__decorate([__param(0,at),__param(1,Ci)],Ww);var z_=class extends Uw{j(){}getModule(e,t){for(const i of this.b){const r=i(e);if(r){e=r;break}}if(this.a.has(e))return this.a.get(e).load(e,t,()=>{throw new Error("CANNOT LOAD MODULE from here.")})}},V_=class extends k0{constructor(){super(...arguments),this.extensionRuntime=wf.Webworker}async vb(){this.h.createInstance(Ww);const e=this.h.invokeFunction(B_);this.r=this.h.createInstance(z_,e,{mine:this.J,all:this.L}),await this.r.install(),performance.mark("code/extHost/didInitAPI"),await this.Bb()}wb(e){return e.browser}async xb(e,t,i){t=t.with({path:q_(t.path,".js")});const r=e?.identifier.value;r&&performance.mark(`code/extHost/willFetchExtensionCode/${r}`);const n=E.revive(await this.C.$asBrowserUri(t)),s=await fetch(n.toString(!0));if(r&&performance.mark(`code/extHost/didFetchExtensionCode/${r}`),s.status!==200)throw new Error(s.statusText);const o=await s.text(),a=`${t.toString(!0)}#vscode-extension`,c=`${o}
//# sourceURL=${a}`;let l;try{l=new Function("module","exports","require",c)}catch(g){throw console.error(r?`Loading code for extension ${r} failed: ${g.message}`:`Loading code failed: ${g.message}`),console.error(`${t.toString(!0)}${typeof g.line=="number"?` line ${g.line}`:""}${typeof g.column=="number"?` column ${g.column}`:""}`),console.error(g),g}e&&await this.w.initializeLocalizedMessages(e);const u={},h={exports:u},f=g=>{const m=this.r.getModule(g,t);if(m===void 0)throw new Error(`Cannot load module '${g}'`);return m};try{return i.codeLoadingStart(),r&&performance.mark(`code/extHost/willLoadExtensionCode/${r}`),l(h,u,f),h.exports!==u?h.exports:u}finally{r&&performance.mark(`code/extHost/didLoadExtensionCode/${r}`),i.codeLoadingStop()}}async $setRemoteEnvironment(e){}async Bb(e=5e3){if(!this.f.environment.isExtensionDevelopmentDebug)return;const t=Date.now()+e;for(;Date.now()<t&&!("__jsDebugIsReady"in globalThis);)await mn(10)}};function q_(e,t){return e.endsWith(t)?e:e+t}vt(ut,new jn(tw,[!0],!0)),vt(to,V_,gt.Eager),vt(Zv,Yv,gt.Eager);var c8=self.close.bind(self);self.close=()=>console.trace("'close' has been blocked");var l8=postMessage.bind(self);self.postMessage=()=>console.trace("'postMessage' has been blocked");function u8(e){return/^(file|vscode-remote):/i.test(e)}var h8=fetch.bind(self);function G_(e){self.fetch=async function(t,i){return t instanceof Request||u8(String(t))&&(t=(await e(E.parse(String(t)))).toString(!0)),h8(t,i)},self.XMLHttpRequest=class extends XMLHttpRequest{open(t,i,r,n,s){(async()=>(u8(i.toString())&&(i=(await e(E.parse(i.toString()))).toString(!0)),super.open(t,i,r??!0,n,s)))()}}}if(self.importScripts=()=>{throw new Error("'importScripts' has been blocked")},self.addEventListener=()=>console.trace("'addEventListener' has been blocked"),self.AMDLoader=void 0,self.NLSLoaderPlugin=void 0,self.define=void 0,self.require=void 0,self.webkitRequestFileSystem=void 0,self.webkitRequestFileSystemSync=void 0,self.webkitResolveLocalFileSystemSyncURL=void 0,self.webkitResolveLocalFileSystemURL=void 0,self.Worker){const e=self.Worker;Worker=function(t,i){if(/^file:/i.test(t.toString()))t=Lk.uriToBrowserUri(E.parse(t.toString())).toString(!0);else if(/^vscode-remote:/i.test(t.toString()))throw new Error("Creating workers from remote extensions is currently not supported.");const n=`(${function(c){function l(f){return typeof f=="string"||f instanceof URL?String(f).replace(/^file:\/\//i,"vscode-file://vscode-app"):f}const u=fetch.bind(self);self.fetch=function(f,g){return f instanceof Request?u(f,g):u(l(f),g)},self.XMLHttpRequest=class extends XMLHttpRequest{open(f,g,m,b,k){return super.open(f,l(g),m??!0,b,k)}};const h=importScripts.bind(self);self.importScripts=(...f)=>{h(...f.map(l))},h(c)}.toString()}('${t}'))`;i=i||{},i.name=`${name} -> ${i.name||cr(t.toString())}`;const s=new Blob([n],{type:"application/javascript"}),o=URL.createObjectURL(s);return new e(o,i)}}else self.Worker=class extends fR{constructor(e,t){super(l8,e,{name:cr(e.toString()),...t})}};var Q_=new class{constructor(){this.pid=void 0}exit(e){c8()}},J_=class{constructor(){const e=new MessageChannel,t=new C;let i=!1;l8(e.port2,[e.port2]),e.port1.onmessage=r=>{const{data:n}=r;if(!(n instanceof ArrayBuffer)){console.warn("UNKNOWN data received",n);return}const s=Qe.wrap(new Uint8Array(n,0,n.byteLength));if(px(s,Br.Terminate)){i=!0,d8("received terminate message from renderer");return}t.fire(s)},this.protocol={onMessage:t.event,send:r=>{if(!i){const n=r.buffer.buffer.slice(r.buffer.byteOffset,r.buffer.byteOffset+r.buffer.byteLength);e.port1.postMessage(n,[n])}}}}};function X_(e){return new Promise(t=>{const i=e.onMessage(r=>{i.dispose();const n=JSON.parse(r.toString());e.send(Ib(Br.Initialized)),t({protocol:e,initData:n})});e.send(Ib(Br.Ready))})}var d8=e=>c8();function Z_(e){return!!e&&typeof e=="object"&&e.type==="vscode.init"&&e.data instanceof Map}function Y_(){Vi("code/extHost/willConnectToRenderer");const e=new J_;return{onmessage(t){Z_(t)&&X_(e.protocol).then(i=>{Vi("code/extHost/didWaitForInitData");const r=new hR(i.protocol,i.initData,Q_,null,t.data);G_(n=>r.asBrowserUri(n)),d8=n=>r.terminate(n)})}}}var K_=Y_();self.onmessage=e=>K_.onmessage(e.data);

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/72350e2ba9c9d8c17a9c5fa58ed02a4e749e2fa6/core/vs/workbench/api/worker/extensionHostWorker.esm.js.map
